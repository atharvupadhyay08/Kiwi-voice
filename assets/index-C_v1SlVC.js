(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function dL(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var EE={exports:{}},rg={};var p5;function YW(){if(p5)return rg;p5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:o,ref:r!==void 0?r:null,props:a}}return rg.Fragment=t,rg.jsx=n,rg.jsxs=n,rg}var m5;function XW(){return m5||(m5=1,EE.exports=YW()),EE.exports}var O=XW(),_E={exports:{}},Be={};var y5;function VW(){if(y5)return Be;y5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),p=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function _(L,G,se){this.props=L,this.context=G,this.refs=S,this.updater=se||v}_.prototype.isReactComponent={},_.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=_.prototype;function A(L,G,se){this.props=L,this.context=G,this.refs=S,this.updater=se||v}var $=A.prototype=new w;$.constructor=A,b($,_.prototype),$.isPureReactComponent=!0;var M=Array.isArray;function k(){}var T={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function z(L,G,se){var me=se.ref;return{$$typeof:e,type:L,key:G,ref:me!==void 0?me:null,props:se}}function B(L,G){return z(L.type,G,L.props)}function j(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function K(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return G[se]})}var Y=/\/+/g;function q(L,G){return typeof L=="object"&&L!==null&&L.key!=null?K(""+L.key):G.toString(36)}function F(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(k,k):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function R(L,G,se,me,be){var Ne=typeof L;(Ne==="undefined"||Ne==="boolean")&&(L=null);var Xe=!1;if(L===null)Xe=!0;else switch(Ne){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(L.$$typeof){case e:case t:Xe=!0;break;case d:return Xe=L._init,R(Xe(L._payload),G,se,me,be)}}if(Xe)return be=be(L),Xe=me===""?"."+q(L,0):me,M(be)?(se="",Xe!=null&&(se=Xe.replace(Y,"$&/")+"/"),R(be,G,se,"",function(Le){return Le})):be!=null&&(j(be)&&(be=B(be,se+(be.key==null||L&&L.key===be.key?"":(""+be.key).replace(Y,"$&/")+"/")+Xe)),G.push(be)),1;Xe=0;var Ot=me===""?".":me+":";if(M(L))for(var ye=0;ye<L.length;ye++)me=L[ye],Ne=Ot+q(me,ye),Xe+=R(me,G,se,Ne,be);else if(ye=y(L),typeof ye=="function")for(L=ye.call(L),ye=0;!(me=L.next()).done;)me=me.value,Ne=Ot+q(me,ye++),Xe+=R(me,G,se,Ne,be);else if(Ne==="object"){if(typeof L.then=="function")return R(F(L),G,se,me,be);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function I(L,G,se){if(L==null)return L;var me=[],be=0;return R(L,me,"","",function(Ne){return G.call(se,Ne,be++)}),me}function X(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var Z=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ce={map:I,forEach:function(L,G,se){I(L,function(){G.apply(this,arguments)},se)},count:function(L){var G=0;return I(L,function(){G++}),G},toArray:function(L){return I(L,function(G){return G})||[]},only:function(L){if(!j(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Be.Activity=g,Be.Children=ce,Be.Component=_,Be.Fragment=n,Be.Profiler=r,Be.PureComponent=A,Be.StrictMode=i,Be.Suspense=u,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Be.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},Be.cache=function(L){return function(){return L.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(L,G,se){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var me=b({},L.props),be=L.key;if(G!=null)for(Ne in G.key!==void 0&&(be=""+G.key),G)!N.call(G,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&G.ref===void 0||(me[Ne]=G[Ne]);var Ne=arguments.length-2;if(Ne===1)me.children=se;else if(1<Ne){for(var Xe=Array(Ne),Ot=0;Ot<Ne;Ot++)Xe[Ot]=arguments[Ot+2];me.children=Xe}return z(L.type,be,me)},Be.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Be.createElement=function(L,G,se){var me,be={},Ne=null;if(G!=null)for(me in G.key!==void 0&&(Ne=""+G.key),G)N.call(G,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(be[me]=G[me]);var Xe=arguments.length-2;if(Xe===1)be.children=se;else if(1<Xe){for(var Ot=Array(Xe),ye=0;ye<Xe;ye++)Ot[ye]=arguments[ye+2];be.children=Ot}if(L&&L.defaultProps)for(me in Xe=L.defaultProps,Xe)be[me]===void 0&&(be[me]=Xe[me]);return z(L,Ne,be)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(L){return{$$typeof:l,render:L}},Be.isValidElement=j,Be.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:X}},Be.memo=function(L,G){return{$$typeof:f,type:L,compare:G===void 0?null:G}},Be.startTransition=function(L){var G=T.T,se={};T.T=se;try{var me=L(),be=T.S;be!==null&&be(se,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(k,Z)}catch(Ne){Z(Ne)}finally{G!==null&&se.types!==null&&(G.types=se.types),T.T=G}},Be.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Be.use=function(L){return T.H.use(L)},Be.useActionState=function(L,G,se){return T.H.useActionState(L,G,se)},Be.useCallback=function(L,G){return T.H.useCallback(L,G)},Be.useContext=function(L){return T.H.useContext(L)},Be.useDebugValue=function(){},Be.useDeferredValue=function(L,G){return T.H.useDeferredValue(L,G)},Be.useEffect=function(L,G){return T.H.useEffect(L,G)},Be.useEffectEvent=function(L){return T.H.useEffectEvent(L)},Be.useId=function(){return T.H.useId()},Be.useImperativeHandle=function(L,G,se){return T.H.useImperativeHandle(L,G,se)},Be.useInsertionEffect=function(L,G){return T.H.useInsertionEffect(L,G)},Be.useLayoutEffect=function(L,G){return T.H.useLayoutEffect(L,G)},Be.useMemo=function(L,G){return T.H.useMemo(L,G)},Be.useOptimistic=function(L,G){return T.H.useOptimistic(L,G)},Be.useReducer=function(L,G,se){return T.H.useReducer(L,G,se)},Be.useRef=function(L){return T.H.useRef(L)},Be.useState=function(L){return T.H.useState(L)},Be.useSyncExternalStore=function(L,G,se){return T.H.useSyncExternalStore(L,G,se)},Be.useTransition=function(){return T.H.useTransition()},Be.version="19.2.0",Be}var v5;function LC(){return v5||(v5=1,_E.exports=VW()),_E.exports}var re=LC();const WW=dL(re);var wE={exports:{}},ag={},AE={exports:{}},CE={};var b5;function QW(){return b5||(b5=1,(function(e){function t(R,I){var X=R.length;R.push(I);e:for(;0<X;){var Z=X-1>>>1,ce=R[Z];if(0<r(ce,I))R[Z]=I,R[X]=ce,X=Z;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var I=R[0],X=R.pop();if(X!==I){R[0]=X;e:for(var Z=0,ce=R.length,L=ce>>>1;Z<L;){var G=2*(Z+1)-1,se=R[G],me=G+1,be=R[me];if(0>r(se,X))me<ce&&0>r(be,se)?(R[Z]=be,R[me]=X,Z=me):(R[Z]=se,R[G]=X,Z=G);else if(me<ce&&0>r(be,X))R[Z]=be,R[me]=X,Z=me;else break e}}return I}function r(R,I){var X=R.sortIndex-I.sortIndex;return X!==0?X:R.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(R){for(var I=n(f);I!==null;){if(I.callback===null)i(f);else if(I.startTime<=R)i(f),I.sortIndex=I.expirationTime,t(u,I);else break;I=n(f)}}function M(R){if(b=!1,$(R),!v)if(n(u)!==null)v=!0,k||(k=!0,K());else{var I=n(f);I!==null&&F(M,I.startTime-R)}}var k=!1,T=-1,N=5,z=-1;function B(){return S?!0:!(e.unstable_now()-z<N)}function j(){if(S=!1,k){var R=e.unstable_now();z=R;var I=!0;try{e:{v=!1,b&&(b=!1,w(T),T=-1),y=!0;var X=p;try{t:{for($(R),g=n(u);g!==null&&!(g.expirationTime>R&&B());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,p=g.priorityLevel;var ce=Z(g.expirationTime<=R);if(R=e.unstable_now(),typeof ce=="function"){g.callback=ce,$(R),I=!0;break t}g===n(u)&&i(u),$(R)}else i(u);g=n(u)}if(g!==null)I=!0;else{var L=n(f);L!==null&&F(M,L.startTime-R),I=!1}}break e}finally{g=null,p=X,y=!1}I=void 0}}finally{I?K():k=!1}}}var K;if(typeof A=="function")K=function(){A(j)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=j,K=function(){q.postMessage(null)}}else K=function(){_(j,0)};function F(R,I){T=_(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var X=p;p=I;try{return R()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var X=p;p=R;try{return I()}finally{p=X}},e.unstable_scheduleCallback=function(R,I,X){var Z=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,R){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=X+ce,R={id:d++,callback:I,priorityLevel:R,startTime:X,expirationTime:ce,sortIndex:-1},X>Z?(R.sortIndex=X,t(f,R),n(u)===null&&R===n(f)&&(b?(w(T),T=-1):b=!0,F(M,X-Z))):(R.sortIndex=ce,t(u,R),v||y||(v=!0,k||(k=!0,K()))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var I=p;return function(){var X=p;p=I;try{return R.apply(this,arguments)}finally{p=X}}}})(CE)),CE}var x5;function KW(){return x5||(x5=1,AE.exports=QW()),AE.exports}var $E={exports:{}},Gn={};var S5;function ZW(){if(S5)return Gn;S5=1;var e=LC();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:f,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gn.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(u,f,null,d)},Gn.flushSync=function(u){var f=o.T,d=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=f,i.p=d,i.d.f()}},Gn.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},Gn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},Gn.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(u,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Gn.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},Gn.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin);i.d.L(u,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Gn.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=l(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},Gn.requestFormReset=function(u){i.d.r(u)},Gn.unstable_batchedUpdates=function(u,f){return u(f)},Gn.useFormState=function(u,f,d){return o.H.useFormState(u,f,d)},Gn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Gn.version="19.2.0",Gn}var E5;function JW(){if(E5)return $E.exports;E5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$E.exports=ZW(),$E.exports}var _5;function eQ(){if(_5)return ag;_5=1;var e=KW(),t=LC(),n=JW();function i(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,h=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(h=c.return),s=c.return;while(s)}return c.tag===3?h:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function l(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(i(188))}function f(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(i(188));return c!==s?null:s}for(var h=s,m=c;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return u(x),s;if(E===m)return u(x),c;E=E.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=E;else{for(var C=!1,D=x.child;D;){if(D===h){C=!0,h=x,m=E;break}if(D===m){C=!0,m=x,h=E;break}D=D.sibling}if(!C){for(D=E.child;D;){if(D===h){C=!0,h=E,m=x;break}if(D===m){C=!0,m=E,h=x;break}D=D.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:c}function d(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=d(s),c!==null)return c;s=s.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function K(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Symbol.for("react.client.reference");function q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Y?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case A:return s.displayName||"Context";case w:return(s._context.displayName||"Context")+".Consumer";case $:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return c=s.displayName||null,c!==null?c:q(s.type)||"Memo";case N:c=s._payload,s=s._init;try{return q(s(c))}catch{}}return null}var F=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Z=[],ce=-1;function L(s){return{current:s}}function G(s){0>ce||(s.current=Z[ce],Z[ce]=null,ce--)}function se(s,c){ce++,Z[ce]=s.current,s.current=c}var me=L(null),be=L(null),Ne=L(null),Xe=L(null);function Ot(s,c){switch(se(Ne,c),se(be,s),se(me,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?UO(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=UO(c),s=jO(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(me),se(me,s)}function ye(){G(me),G(be),G(Ne)}function Le(s){s.memoizedState!==null&&se(Xe,s);var c=me.current,h=jO(c,s.type);c!==h&&(se(be,s),se(me,h))}function Ie(s){be.current===s&&(G(me),G(be)),Xe.current===s&&(G(Xe),eg._currentValue=X)}var de,nn;function Qe(s){if(de===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);de=c&&c[1]||"",nn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+s+nn}var qt=!1;function rn(s,c){if(!s||qt)return"";qt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var Q=J}Reflect.construct(s,[],le)}else{try{le.call()}catch(J){Q=J}s.call(le.prototype)}}else{try{throw Error()}catch(J){Q=J}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],D=E[1];if(C&&D){var U=C.split(`
`),W=D.split(`
`);for(x=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===U.length||x===W.length)for(m=U.length-1,x=W.length-1;1<=m&&0<=x&&U[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(U[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||U[m]!==W[x]){var ne=`
`+U[m].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=m&&0<=x);break}}}finally{qt=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?Qe(h):""}function Xr(s,c){switch(s.tag){case 26:case 27:case 5:return Qe(s.type);case 16:return Qe("Lazy");case 13:return s.child!==c&&c!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return rn(s.type,!1);case 11:return rn(s.type.render,!1);case 1:return rn(s.type,!0);case 31:return Qe("Activity");default:return""}}function fh(s){try{var c="",h=null;do c+=Xr(s,h),h=s,s=s.return;while(s);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var s2=Object.prototype.hasOwnProperty,l2=e.unstable_scheduleCallback,u2=e.unstable_cancelCallback,wX=e.unstable_shouldYield,AX=e.unstable_requestPaint,Gi=e.unstable_now,CX=e.unstable_getCurrentPriorityLevel,mD=e.unstable_ImmediatePriority,yD=e.unstable_UserBlockingPriority,Im=e.unstable_NormalPriority,$X=e.unstable_LowPriority,vD=e.unstable_IdlePriority,TX=e.log,MX=e.unstable_setDisableYieldValue,dh=null,Yi=null;function Cs(s){if(typeof TX=="function"&&MX(s),Yi&&typeof Yi.setStrictMode=="function")try{Yi.setStrictMode(dh,s)}catch{}}var Xi=Math.clz32?Math.clz32:RX,kX=Math.log,DX=Math.LN2;function RX(s){return s>>>=0,s===0?32:31-(kX(s)/DX|0)|0}var Pm=256,qm=262144,Hm=4194304;function Jl(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gm(s,c,h){var m=s.pendingLanes;if(m===0)return 0;var x=0,E=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?x=Jl(m):(C&=D,C!==0?x=Jl(C):h||(h=D&~s,h!==0&&(x=Jl(h))))):(D=m&~E,D!==0?x=Jl(D):C!==0?x=Jl(C):h||(h=m&~s,h!==0&&(x=Jl(h)))),x===0?0:c!==0&&c!==x&&(c&E)===0&&(E=x&-x,h=c&-c,E>=h||E===32&&(h&4194048)!==0)?c:x}function hh(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function NX(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bD(){var s=Hm;return Hm<<=1,(Hm&62914560)===0&&(Hm=4194304),s}function c2(s){for(var c=[],h=0;31>h;h++)c.push(s);return c}function gh(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function OX(s,c,h,m,x,E){var C=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var D=s.entanglements,U=s.expirationTimes,W=s.hiddenUpdates;for(h=C&~h;0<h;){var ne=31-Xi(h),le=1<<ne;D[ne]=0,U[ne]=-1;var Q=W[ne];if(Q!==null)for(W[ne]=null,ne=0;ne<Q.length;ne++){var J=Q[ne];J!==null&&(J.lane&=-536870913)}h&=~le}m!==0&&xD(s,m,0),E!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=E&~(C&~c))}function xD(s,c,h){s.pendingLanes|=c,s.suspendedLanes&=~c;var m=31-Xi(c);s.entangledLanes|=c,s.entanglements[m]=s.entanglements[m]|1073741824|h&261930}function SD(s,c){var h=s.entangledLanes|=c;for(s=s.entanglements;h;){var m=31-Xi(h),x=1<<m;x&c|s[m]&c&&(s[m]|=c),h&=~x}}function ED(s,c){var h=c&-c;return h=(h&42)!==0?1:f2(h),(h&(s.suspendedLanes|c))!==0?0:h}function f2(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function d2(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function _D(){var s=I.p;return s!==0?s:(s=window.event,s===void 0?32:l5(s.type))}function wD(s,c){var h=I.p;try{return I.p=s,c()}finally{I.p=h}}var $s=Math.random().toString(36).slice(2),Dn="__reactFiber$"+$s,wi="__reactProps$"+$s,Uc="__reactContainer$"+$s,h2="__reactEvents$"+$s,zX="__reactListeners$"+$s,FX="__reactHandles$"+$s,AD="__reactResources$"+$s,ph="__reactMarker$"+$s;function g2(s){delete s[Dn],delete s[wi],delete s[h2],delete s[zX],delete s[FX]}function jc(s){var c=s[Dn];if(c)return c;for(var h=s.parentNode;h;){if(c=h[Uc]||h[Dn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(s=YO(s);s!==null;){if(h=s[Dn])return h;s=YO(s)}return c}s=h,h=s.parentNode}return null}function Bc(s){if(s=s[Dn]||s[Uc]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function mh(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(i(33))}function Ic(s){var c=s[AD];return c||(c=s[AD]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function bn(s){s[ph]=!0}var CD=new Set,$D={};function eu(s,c){Pc(s,c),Pc(s+"Capture",c)}function Pc(s,c){for($D[s]=c,s=0;s<c.length;s++)CD.add(c[s])}var LX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),TD={},MD={};function UX(s){return s2.call(MD,s)?!0:s2.call(TD,s)?!1:LX.test(s)?MD[s]=!0:(TD[s]=!0,!1)}function Ym(s,c,h){if(UX(c))if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+h)}}function Xm(s,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+h)}}function So(s,c,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(c,h,""+m)}}function yr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function kD(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function jX(s,c,h){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,E=m.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return x.call(this)},set:function(C){h=""+C,E.call(this,C)}}),Object.defineProperty(s,c,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function p2(s){if(!s._valueTracker){var c=kD(s)?"checked":"value";s._valueTracker=jX(s,c,""+s[c])}}function DD(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var h=c.getValue(),m="";return s&&(m=kD(s)?s.checked?"true":"false":s.value),s=m,s!==h?(c.setValue(s),!0):!1}function Vm(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var BX=/[\n"\\]/g;function vr(s){return s.replace(BX,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function m2(s,c,h,m,x,E,C,D){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),c!=null?C==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+yr(c)):s.value!==""+yr(c)&&(s.value=""+yr(c)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),c!=null?y2(s,C,yr(c)):h!=null?y2(s,C,yr(h)):m!=null&&s.removeAttribute("value"),x==null&&E!=null&&(s.defaultChecked=!!E),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+yr(D):s.removeAttribute("name")}function RD(s,c,h,m,x,E,C,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),c!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||c!=null)){p2(s);return}h=h!=null?""+yr(h):"",c=c!=null?""+yr(c):h,D||c===s.value||(s.value=c),s.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=D?s.checked:!!m,s.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),p2(s)}function y2(s,c,h){c==="number"&&Vm(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function qc(s,c,h,m){if(s=s.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<s.length;h++)x=c.hasOwnProperty("$"+s[h].value),s[h].selected!==x&&(s[h].selected=x),x&&m&&(s[h].defaultSelected=!0)}else{for(h=""+yr(h),c=null,x=0;x<s.length;x++){if(s[x].value===h){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}c!==null||s[x].disabled||(c=s[x])}c!==null&&(c.selected=!0)}}function ND(s,c,h){if(c!=null&&(c=""+yr(c),c!==s.value&&(s.value=c),h==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=h!=null?""+yr(h):""}function OD(s,c,h,m){if(c==null){if(m!=null){if(h!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),c=h}h=yr(c),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m),p2(s)}function Hc(s,c){if(c){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=c;return}}s.textContent=c}var IX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zD(s,c,h){var m=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":m?s.setProperty(c,h):typeof h!="number"||h===0||IX.has(c)?c==="float"?s.cssFloat=h:s[c]=(""+h).trim():s[c]=h+"px"}function FD(s,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&h[x]!==m&&zD(s,x,m)}else for(var E in c)c.hasOwnProperty(E)&&zD(s,E,c[E])}function v2(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wm(s){return qX.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Eo(){}var b2=null;function x2(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Gc=null,Yc=null;function LD(s){var c=Bc(s);if(c&&(s=c.stateNode)){var h=s[wi]||null;e:switch(s=c.stateNode,c.type){case"input":if(m2(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+vr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var m=h[c];if(m!==s&&m.form===s.form){var x=m[wi]||null;if(!x)throw Error(i(90));m2(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<h.length;c++)m=h[c],m.form===s.form&&DD(m)}break e;case"textarea":ND(s,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&qc(s,!!h.multiple,c,!1)}}}var S2=!1;function UD(s,c,h){if(S2)return s(c,h);S2=!0;try{var m=s(c);return m}finally{if(S2=!1,(Gc!==null||Yc!==null)&&(F0(),Gc&&(c=Gc,s=Yc,Yc=Gc=null,LD(c),s)))for(c=0;c<s.length;c++)LD(s[c])}}function yh(s,c){var h=s.stateNode;if(h===null)return null;var m=h[wi]||null;if(m===null)return null;h=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var _o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E2=!1;if(_o)try{var vh={};Object.defineProperty(vh,"passive",{get:function(){E2=!0}}),window.addEventListener("test",vh,vh),window.removeEventListener("test",vh,vh)}catch{E2=!1}var Ts=null,_2=null,Qm=null;function jD(){if(Qm)return Qm;var s,c=_2,h=c.length,m,x="value"in Ts?Ts.value:Ts.textContent,E=x.length;for(s=0;s<h&&c[s]===x[s];s++);var C=h-s;for(m=1;m<=C&&c[h-m]===x[E-m];m++);return Qm=x.slice(s,1<m?1-m:void 0)}function Km(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function Zm(){return!0}function BD(){return!1}function Ai(s){function c(h,m,x,E,C){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(h=s[D],this[D]=h?h(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Zm:BD,this.isPropagationStopped=BD,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),c}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jm=Ai(tu),bh=g({},tu,{view:0,detail:0}),HX=Ai(bh),w2,A2,xh,e0=g({},bh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$2,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xh&&(xh&&s.type==="mousemove"?(w2=s.screenX-xh.screenX,A2=s.screenY-xh.screenY):A2=w2=0,xh=s),w2)},movementY:function(s){return"movementY"in s?s.movementY:A2}}),ID=Ai(e0),GX=g({},e0,{dataTransfer:0}),YX=Ai(GX),XX=g({},bh,{relatedTarget:0}),C2=Ai(XX),VX=g({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),WX=Ai(VX),QX=g({},tu,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),KX=Ai(QX),ZX=g({},tu,{data:0}),PD=Ai(ZX),JX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nV(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=tV[s])?!!c[s]:!1}function $2(){return nV}var iV=g({},bh,{key:function(s){if(s.key){var c=JX[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=Km(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?eV[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$2,charCode:function(s){return s.type==="keypress"?Km(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Km(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),rV=Ai(iV),aV=g({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qD=Ai(aV),oV=g({},bh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$2}),sV=Ai(oV),lV=g({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),uV=Ai(lV),cV=g({},e0,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fV=Ai(cV),dV=g({},tu,{newState:0,oldState:0}),hV=Ai(dV),gV=[9,13,27,32],T2=_o&&"CompositionEvent"in window,Sh=null;_o&&"documentMode"in document&&(Sh=document.documentMode);var pV=_o&&"TextEvent"in window&&!Sh,HD=_o&&(!T2||Sh&&8<Sh&&11>=Sh),GD=" ",YD=!1;function XD(s,c){switch(s){case"keyup":return gV.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VD(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xc=!1;function mV(s,c){switch(s){case"compositionend":return VD(c);case"keypress":return c.which!==32?null:(YD=!0,GD);case"textInput":return s=c.data,s===GD&&YD?null:s;default:return null}}function yV(s,c){if(Xc)return s==="compositionend"||!T2&&XD(s,c)?(s=jD(),Qm=_2=Ts=null,Xc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return HD&&c.locale!=="ko"?null:c.data;default:return null}}var vV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WD(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!vV[s.type]:c==="textarea"}function QD(s,c,h,m){Gc?Yc?Yc.push(m):Yc=[m]:Gc=m,c=q0(c,"onChange"),0<c.length&&(h=new Jm("onChange","change",null,h,m),s.push({event:h,listeners:c}))}var Eh=null,_h=null;function bV(s){RO(s,0)}function t0(s){var c=mh(s);if(DD(c))return s}function KD(s,c){if(s==="change")return c}var ZD=!1;if(_o){var M2;if(_o){var k2="oninput"in document;if(!k2){var JD=document.createElement("div");JD.setAttribute("oninput","return;"),k2=typeof JD.oninput=="function"}M2=k2}else M2=!1;ZD=M2&&(!document.documentMode||9<document.documentMode)}function eR(){Eh&&(Eh.detachEvent("onpropertychange",tR),_h=Eh=null)}function tR(s){if(s.propertyName==="value"&&t0(_h)){var c=[];QD(c,_h,s,x2(s)),UD(bV,c)}}function xV(s,c,h){s==="focusin"?(eR(),Eh=c,_h=h,Eh.attachEvent("onpropertychange",tR)):s==="focusout"&&eR()}function SV(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return t0(_h)}function EV(s,c){if(s==="click")return t0(c)}function _V(s,c){if(s==="input"||s==="change")return t0(c)}function wV(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var Vi=typeof Object.is=="function"?Object.is:wV;function wh(s,c){if(Vi(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var h=Object.keys(s),m=Object.keys(c);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!s2.call(c,x)||!Vi(s[x],c[x]))return!1}return!0}function nR(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function iR(s,c){var h=nR(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=c&&m>=c)return{node:h,offset:c-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=nR(h)}}function rR(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?rR(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function aR(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Vm(s.document);c instanceof s.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)s=c.contentWindow;else break;c=Vm(s.document)}return c}function D2(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var AV=_o&&"documentMode"in document&&11>=document.documentMode,Vc=null,R2=null,Ah=null,N2=!1;function oR(s,c,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;N2||Vc==null||Vc!==Vm(m)||(m=Vc,"selectionStart"in m&&D2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ah&&wh(Ah,m)||(Ah=m,m=q0(R2,"onSelect"),0<m.length&&(c=new Jm("onSelect","select",null,c,h),s.push({event:c,listeners:m}),c.target=Vc)))}function nu(s,c){var h={};return h[s.toLowerCase()]=c.toLowerCase(),h["Webkit"+s]="webkit"+c,h["Moz"+s]="moz"+c,h}var Wc={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionrun:nu("Transition","TransitionRun"),transitionstart:nu("Transition","TransitionStart"),transitioncancel:nu("Transition","TransitionCancel"),transitionend:nu("Transition","TransitionEnd")},O2={},sR={};_o&&(sR=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function iu(s){if(O2[s])return O2[s];if(!Wc[s])return s;var c=Wc[s],h;for(h in c)if(c.hasOwnProperty(h)&&h in sR)return O2[s]=c[h];return s}var lR=iu("animationend"),uR=iu("animationiteration"),cR=iu("animationstart"),CV=iu("transitionrun"),$V=iu("transitionstart"),TV=iu("transitioncancel"),fR=iu("transitionend"),dR=new Map,z2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");z2.push("scrollEnd");function Vr(s,c){dR.set(s,c),eu(c,[s])}var n0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},br=[],Qc=0,F2=0;function i0(){for(var s=Qc,c=F2=Qc=0;c<s;){var h=br[c];br[c++]=null;var m=br[c];br[c++]=null;var x=br[c];br[c++]=null;var E=br[c];if(br[c++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&hR(h,x,E)}}function r0(s,c,h,m){br[Qc++]=s,br[Qc++]=c,br[Qc++]=h,br[Qc++]=m,F2|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function L2(s,c,h,m){return r0(s,c,h,m),a0(s)}function ru(s,c){return r0(s,null,null,c),a0(s)}function hR(s,c,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var x=!1,E=s.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(x=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,x&&c!==null&&(x=31-Xi(h),s=E.hiddenUpdates,m=s[x],m===null?s[x]=[c]:m.push(c),c.lane=h|536870912),E):null}function a0(s){if(50<Xh)throw Xh=0,YS=null,Error(i(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Kc={};function MV(s,c,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(s,c,h,m){return new MV(s,c,h,m)}function U2(s){return s=s.prototype,!(!s||!s.isReactComponent)}function wo(s,c){var h=s.alternate;return h===null?(h=Wi(s.tag,c,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=c,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,c=s.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function gR(s,c){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,c=h.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function o0(s,c,h,m,x,E){var C=0;if(m=s,typeof s=="function")U2(s)&&(C=1);else if(typeof s=="string")C=OW(s,h,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Wi(31,h,c,x),s.elementType=z,s.lanes=E,s;case b:return au(h.children,x,E,c);case S:C=8,x|=24;break;case _:return s=Wi(12,h,c,x|2),s.elementType=_,s.lanes=E,s;case M:return s=Wi(13,h,c,x),s.elementType=M,s.lanes=E,s;case k:return s=Wi(19,h,c,x),s.elementType=k,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:C=10;break e;case w:C=9;break e;case $:C=11;break e;case T:C=14;break e;case N:C=16,m=null;break e}C=29,h=Error(i(130,s===null?"null":typeof s,"")),m=null}return c=Wi(C,h,c,x),c.elementType=s,c.type=m,c.lanes=E,c}function au(s,c,h,m){return s=Wi(7,s,m,c),s.lanes=h,s}function j2(s,c,h){return s=Wi(6,s,null,c),s.lanes=h,s}function pR(s){var c=Wi(18,null,null,0);return c.stateNode=s,c}function B2(s,c,h){return c=Wi(4,s.children!==null?s.children:[],s.key,c),c.lanes=h,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var mR=new WeakMap;function xr(s,c){if(typeof s=="object"&&s!==null){var h=mR.get(s);return h!==void 0?h:(c={value:s,source:c,stack:fh(c)},mR.set(s,c),c)}return{value:s,source:c,stack:fh(c)}}var Zc=[],Jc=0,s0=null,Ch=0,Sr=[],Er=0,Ms=null,Ma=1,ka="";function Ao(s,c){Zc[Jc++]=Ch,Zc[Jc++]=s0,s0=s,Ch=c}function yR(s,c,h){Sr[Er++]=Ma,Sr[Er++]=ka,Sr[Er++]=Ms,Ms=s;var m=Ma;s=ka;var x=32-Xi(m)-1;m&=~(1<<x),h+=1;var E=32-Xi(c)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,Ma=1<<32-Xi(c)+x|h<<x|m,ka=E+s}else Ma=1<<E|h<<x|m,ka=s}function I2(s){s.return!==null&&(Ao(s,1),yR(s,1,0))}function P2(s){for(;s===s0;)s0=Zc[--Jc],Zc[Jc]=null,Ch=Zc[--Jc],Zc[Jc]=null;for(;s===Ms;)Ms=Sr[--Er],Sr[Er]=null,ka=Sr[--Er],Sr[Er]=null,Ma=Sr[--Er],Sr[Er]=null}function vR(s,c){Sr[Er++]=Ma,Sr[Er++]=ka,Sr[Er++]=Ms,Ma=c.id,ka=c.overflow,Ms=s}var Rn=null,kt=null,nt=!1,ks=null,_r=!1,q2=Error(i(519));function Ds(s){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $h(xr(c,s)),q2}function bR(s){var c=s.stateNode,h=s.type,m=s.memoizedProps;switch(c[Dn]=s,c[wi]=m,h){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(h=0;h<Wh.length;h++)Ze(Wh[h],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Ze("invalid",c),RD(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ze("invalid",c);break;case"textarea":Ze("invalid",c),OD(c,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||m.suppressHydrationWarning===!0||FO(c.textContent,h)?(m.popover!=null&&(Ze("beforetoggle",c),Ze("toggle",c)),m.onScroll!=null&&Ze("scroll",c),m.onScrollEnd!=null&&Ze("scrollend",c),m.onClick!=null&&(c.onclick=Eo),c=!0):c=!1,c||Ds(s,!0)}function xR(s){for(Rn=s.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:Rn=Rn.return}}function ef(s){if(s!==Rn)return!1;if(!nt)return xR(s),nt=!0,!1;var c=s.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||sE(s.type,s.memoizedProps)),h=!h),h&&kt&&Ds(s),xR(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));kt=GO(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));kt=GO(s)}else c===27?(c=kt,Gs(s.type)?(s=dE,dE=null,kt=s):kt=c):kt=Rn?Ar(s.stateNode.nextSibling):null;return!0}function ou(){kt=Rn=null,nt=!1}function H2(){var s=ks;return s!==null&&(Mi===null?Mi=s:Mi.push.apply(Mi,s),ks=null),s}function $h(s){ks===null?ks=[s]:ks.push(s)}var G2=L(null),su=null,Co=null;function Rs(s,c,h){se(G2,c._currentValue),c._currentValue=h}function $o(s){s._currentValue=G2.current,G(G2)}function Y2(s,c,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),s===h)break;s=s.return}}function X2(s,c,h,m){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=x;for(var U=0;U<c.length;U++)if(D.context===c[U]){E.lanes|=h,D=E.alternate,D!==null&&(D.lanes|=h),Y2(E.return,h,s),m||(C=null);break e}E=D.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=h,E=C.alternate,E!==null&&(E.lanes|=h),Y2(C,h,s),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===s){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function tf(s,c,h,m){s=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var D=x.type;Vi(x.pendingProps.value,C.value)||(s!==null?s.push(D):s=[D])}}else if(x===Xe.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(eg):s=[eg])}x=x.return}s!==null&&X2(c,s,h,m),c.flags|=262144}function l0(s){for(s=s.firstContext;s!==null;){if(!Vi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function lu(s){su=s,Co=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Nn(s){return SR(su,s)}function u0(s,c){return su===null&&lu(s),SR(s,c)}function SR(s,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Co===null){if(s===null)throw Error(i(308));Co=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Co=Co.next=c;return h}var kV=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){c.aborted=!0,s.forEach(function(h){return h()})}},DV=e.unstable_scheduleCallback,RV=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function V2(){return{controller:new kV,data:new Map,refCount:0}}function Th(s){s.refCount--,s.refCount===0&&DV(RV,function(){s.controller.abort()})}var Mh=null,W2=0,nf=0,rf=null;function NV(s,c){if(Mh===null){var h=Mh=[];W2=0,nf=ZS(),rf={status:"pending",value:void 0,then:function(m){h.push(m)}}}return W2++,c.then(ER,ER),c}function ER(){if(--W2===0&&Mh!==null){rf!==null&&(rf.status="fulfilled");var s=Mh;Mh=null,nf=0,rf=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function OV(s,c){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return s.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<h.length;x++)(0,h[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var _R=R.S;R.S=function(s,c){oO=Gi(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&NV(s,c),_R!==null&&_R(s,c)};var uu=L(null);function Q2(){var s=uu.current;return s!==null?s:Ct.pooledCache}function c0(s,c){c===null?se(uu,uu.current):se(uu,c.pool)}function wR(){var s=Q2();return s===null?null:{parent:an._currentValue,pool:s}}var af=Error(i(460)),K2=Error(i(474)),f0=Error(i(542)),d0={then:function(){}};function AR(s){return s=s.status,s==="fulfilled"||s==="rejected"}function CR(s,c,h){switch(h=s[h],h===void 0?s.push(c):h!==c&&(c.then(Eo,Eo),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,TR(s),s;default:if(typeof c.status=="string")c.then(Eo,Eo);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=c,s.status="pending",s.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,TR(s),s}throw fu=c,af}}function cu(s){try{var c=s._init;return c(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(fu=h,af):h}}var fu=null;function $R(){if(fu===null)throw Error(i(459));var s=fu;return fu=null,s}function TR(s){if(s===af||s===f0)throw Error(i(483))}var of=null,kh=0;function h0(s){var c=kh;return kh+=1,of===null&&(of=[]),CR(of,s,c)}function Dh(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function g0(s,c){throw c.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(c),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function MR(s){function c(H,P){if(s){var V=H.deletions;V===null?(H.deletions=[P],H.flags|=16):V.push(P)}}function h(H,P){if(!s)return null;for(;P!==null;)c(H,P),P=P.sibling;return null}function m(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function x(H,P){return H=wo(H,P),H.index=0,H.sibling=null,H}function E(H,P,V){return H.index=V,s?(V=H.alternate,V!==null?(V=V.index,V<P?(H.flags|=67108866,P):V):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function C(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function D(H,P,V,oe){return P===null||P.tag!==6?(P=j2(V,H.mode,oe),P.return=H,P):(P=x(P,V),P.return=H,P)}function U(H,P,V,oe){var Re=V.type;return Re===b?ne(H,P,V.props.children,oe,V.key):P!==null&&(P.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&cu(Re)===P.type)?(P=x(P,V.props),Dh(P,V),P.return=H,P):(P=o0(V.type,V.key,V.props,null,H.mode,oe),Dh(P,V),P.return=H,P)}function W(H,P,V,oe){return P===null||P.tag!==4||P.stateNode.containerInfo!==V.containerInfo||P.stateNode.implementation!==V.implementation?(P=B2(V,H.mode,oe),P.return=H,P):(P=x(P,V.children||[]),P.return=H,P)}function ne(H,P,V,oe,Re){return P===null||P.tag!==7?(P=au(V,H.mode,oe,Re),P.return=H,P):(P=x(P,V),P.return=H,P)}function le(H,P,V){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=j2(""+P,H.mode,V),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case y:return V=o0(P.type,P.key,P.props,null,H.mode,V),Dh(V,P),V.return=H,V;case v:return P=B2(P,H.mode,V),P.return=H,P;case N:return P=cu(P),le(H,P,V)}if(F(P)||K(P))return P=au(P,H.mode,V,null),P.return=H,P;if(typeof P.then=="function")return le(H,h0(P),V);if(P.$$typeof===A)return le(H,u0(H,P),V);g0(H,P)}return null}function Q(H,P,V,oe){var Re=P!==null?P.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Re!==null?null:D(H,P,""+V,oe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return V.key===Re?U(H,P,V,oe):null;case v:return V.key===Re?W(H,P,V,oe):null;case N:return V=cu(V),Q(H,P,V,oe)}if(F(V)||K(V))return Re!==null?null:ne(H,P,V,oe,null);if(typeof V.then=="function")return Q(H,P,h0(V),oe);if(V.$$typeof===A)return Q(H,P,u0(H,V),oe);g0(H,V)}return null}function J(H,P,V,oe,Re){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(V)||null,D(P,H,""+oe,Re);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return H=H.get(oe.key===null?V:oe.key)||null,U(P,H,oe,Re);case v:return H=H.get(oe.key===null?V:oe.key)||null,W(P,H,oe,Re);case N:return oe=cu(oe),J(H,P,V,oe,Re)}if(F(oe)||K(oe))return H=H.get(V)||null,ne(P,H,oe,Re,null);if(typeof oe.then=="function")return J(H,P,V,h0(oe),Re);if(oe.$$typeof===A)return J(H,P,V,u0(P,oe),Re);g0(P,oe)}return null}function Ae(H,P,V,oe){for(var Re=null,ot=null,$e=P,Ge=P=0,et=null;$e!==null&&Ge<V.length;Ge++){$e.index>Ge?(et=$e,$e=null):et=$e.sibling;var st=Q(H,$e,V[Ge],oe);if(st===null){$e===null&&($e=et);break}s&&$e&&st.alternate===null&&c(H,$e),P=E(st,P,Ge),ot===null?Re=st:ot.sibling=st,ot=st,$e=et}if(Ge===V.length)return h(H,$e),nt&&Ao(H,Ge),Re;if($e===null){for(;Ge<V.length;Ge++)$e=le(H,V[Ge],oe),$e!==null&&(P=E($e,P,Ge),ot===null?Re=$e:ot.sibling=$e,ot=$e);return nt&&Ao(H,Ge),Re}for($e=m($e);Ge<V.length;Ge++)et=J($e,H,Ge,V[Ge],oe),et!==null&&(s&&et.alternate!==null&&$e.delete(et.key===null?Ge:et.key),P=E(et,P,Ge),ot===null?Re=et:ot.sibling=et,ot=et);return s&&$e.forEach(function(Qs){return c(H,Qs)}),nt&&Ao(H,Ge),Re}function Fe(H,P,V,oe){if(V==null)throw Error(i(151));for(var Re=null,ot=null,$e=P,Ge=P=0,et=null,st=V.next();$e!==null&&!st.done;Ge++,st=V.next()){$e.index>Ge?(et=$e,$e=null):et=$e.sibling;var Qs=Q(H,$e,st.value,oe);if(Qs===null){$e===null&&($e=et);break}s&&$e&&Qs.alternate===null&&c(H,$e),P=E(Qs,P,Ge),ot===null?Re=Qs:ot.sibling=Qs,ot=Qs,$e=et}if(st.done)return h(H,$e),nt&&Ao(H,Ge),Re;if($e===null){for(;!st.done;Ge++,st=V.next())st=le(H,st.value,oe),st!==null&&(P=E(st,P,Ge),ot===null?Re=st:ot.sibling=st,ot=st);return nt&&Ao(H,Ge),Re}for($e=m($e);!st.done;Ge++,st=V.next())st=J($e,H,Ge,st.value,oe),st!==null&&(s&&st.alternate!==null&&$e.delete(st.key===null?Ge:st.key),P=E(st,P,Ge),ot===null?Re=st:ot.sibling=st,ot=st);return s&&$e.forEach(function(GW){return c(H,GW)}),nt&&Ao(H,Ge),Re}function wt(H,P,V,oe){if(typeof V=="object"&&V!==null&&V.type===b&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case y:e:{for(var Re=V.key;P!==null;){if(P.key===Re){if(Re=V.type,Re===b){if(P.tag===7){h(H,P.sibling),oe=x(P,V.props.children),oe.return=H,H=oe;break e}}else if(P.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&cu(Re)===P.type){h(H,P.sibling),oe=x(P,V.props),Dh(oe,V),oe.return=H,H=oe;break e}h(H,P);break}else c(H,P);P=P.sibling}V.type===b?(oe=au(V.props.children,H.mode,oe,V.key),oe.return=H,H=oe):(oe=o0(V.type,V.key,V.props,null,H.mode,oe),Dh(oe,V),oe.return=H,H=oe)}return C(H);case v:e:{for(Re=V.key;P!==null;){if(P.key===Re)if(P.tag===4&&P.stateNode.containerInfo===V.containerInfo&&P.stateNode.implementation===V.implementation){h(H,P.sibling),oe=x(P,V.children||[]),oe.return=H,H=oe;break e}else{h(H,P);break}else c(H,P);P=P.sibling}oe=B2(V,H.mode,oe),oe.return=H,H=oe}return C(H);case N:return V=cu(V),wt(H,P,V,oe)}if(F(V))return Ae(H,P,V,oe);if(K(V)){if(Re=K(V),typeof Re!="function")throw Error(i(150));return V=Re.call(V),Fe(H,P,V,oe)}if(typeof V.then=="function")return wt(H,P,h0(V),oe);if(V.$$typeof===A)return wt(H,P,u0(H,V),oe);g0(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,P!==null&&P.tag===6?(h(H,P.sibling),oe=x(P,V),oe.return=H,H=oe):(h(H,P),oe=j2(V,H.mode,oe),oe.return=H,H=oe),C(H)):h(H,P)}return function(H,P,V,oe){try{kh=0;var Re=wt(H,P,V,oe);return of=null,Re}catch($e){if($e===af||$e===f0)throw $e;var ot=Wi(29,$e,null,H.mode);return ot.lanes=oe,ot.return=H,ot}finally{}}}var du=MR(!0),kR=MR(!1),Ns=!1;function Z2(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J2(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Os(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zs(s,c,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(dt&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=a0(s),hR(s,null,h),c}return r0(s,m,c,h),a0(s)}function Rh(s,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var m=c.lanes;m&=s.pendingLanes,h|=m,c.lanes=h,SD(s,h)}}function eS(s,c){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,h=h.next}while(h!==null);E===null?x=E=c:E=E.next=c}else x=E=c;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=c:s.next=c,h.lastBaseUpdate=c}var tS=!1;function Nh(){if(tS){var s=rf;if(s!==null)throw s}}function Oh(s,c,h,m){tS=!1;var x=s.updateQueue;Ns=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var U=D,W=U.next;U.next=null,C===null?E=W:C.next=W,C=U;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==C&&(D===null?ne.firstBaseUpdate=W:D.next=W,ne.lastBaseUpdate=U))}if(E!==null){var le=x.baseState;C=0,ne=W=U=null,D=E;do{var Q=D.lane&-536870913,J=Q!==D.lane;if(J?(Je&Q)===Q:(m&Q)===Q){Q!==0&&Q===nf&&(tS=!0),ne!==null&&(ne=ne.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ae=s,Fe=D;Q=c;var wt=h;switch(Fe.tag){case 1:if(Ae=Fe.payload,typeof Ae=="function"){le=Ae.call(wt,le,Q);break e}le=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Fe.payload,Q=typeof Ae=="function"?Ae.call(wt,le,Q):Ae,Q==null)break e;le=g({},le,Q);break e;case 2:Ns=!0}}Q=D.callback,Q!==null&&(s.flags|=64,J&&(s.flags|=8192),J=x.callbacks,J===null?x.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(W=ne=J,U=le):ne=ne.next=J,C|=Q;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;J=D,D=J.next,J.next=null,x.lastBaseUpdate=J,x.shared.pending=null}}while(!0);ne===null&&(U=le),x.baseState=U,x.firstBaseUpdate=W,x.lastBaseUpdate=ne,E===null&&(x.shared.lanes=0),Bs|=C,s.lanes=C,s.memoizedState=le}}function DR(s,c){if(typeof s!="function")throw Error(i(191,s));s.call(c)}function RR(s,c){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)DR(h[s],c)}var sf=L(null),p0=L(0);function NR(s,c){s=Fo,se(p0,s),se(sf,c),Fo=s|c.baseLanes}function nS(){se(p0,Fo),se(sf,sf.current)}function iS(){Fo=p0.current,G(sf),G(p0)}var Qi=L(null),wr=null;function Fs(s){var c=s.alternate;se(Qt,Qt.current&1),se(Qi,s),wr===null&&(c===null||sf.current!==null||c.memoizedState!==null)&&(wr=s)}function rS(s){se(Qt,Qt.current),se(Qi,s),wr===null&&(wr=s)}function OR(s){s.tag===22?(se(Qt,Qt.current),se(Qi,s),wr===null&&(wr=s)):Ls()}function Ls(){se(Qt,Qt.current),se(Qi,Qi.current)}function Ki(s){G(Qi),wr===s&&(wr=null),G(Qt)}var Qt=L(0);function m0(s){for(var c=s;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||cE(h)||fE(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var To=0,qe=null,Et=null,on=null,y0=!1,lf=!1,hu=!1,v0=0,zh=0,uf=null,zV=0;function Ht(){throw Error(i(321))}function aS(s,c){if(c===null)return!1;for(var h=0;h<c.length&&h<s.length;h++)if(!Vi(s[h],c[h]))return!1;return!0}function oS(s,c,h,m,x,E){return To=E,qe=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=s===null||s.memoizedState===null?yN:SS,hu=!1,E=h(m,x),hu=!1,lf&&(E=FR(c,h,m,x)),zR(s),E}function zR(s){R.H=Uh;var c=Et!==null&&Et.next!==null;if(To=0,on=Et=qe=null,y0=!1,zh=0,uf=null,c)throw Error(i(300));s===null||sn||(s=s.dependencies,s!==null&&l0(s)&&(sn=!0))}function FR(s,c,h,m){qe=s;var x=0;do{if(lf&&(uf=null),zh=0,lf=!1,25<=x)throw Error(i(301));if(x+=1,on=Et=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}R.H=vN,E=c(h,m)}while(lf);return E}function FV(){var s=R.H,c=s.useState()[0];return c=typeof c.then=="function"?Fh(c):c,s=s.useState()[0],(Et!==null?Et.memoizedState:null)!==s&&(qe.flags|=1024),c}function sS(){var s=v0!==0;return v0=0,s}function lS(s,c,h){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~h}function uS(s){if(y0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}y0=!1}To=0,on=Et=qe=null,lf=!1,zh=v0=0,uf=null}function oi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?qe.memoizedState=on=s:on=on.next=s,on}function Kt(){if(Et===null){var s=qe.alternate;s=s!==null?s.memoizedState:null}else s=Et.next;var c=on===null?qe.memoizedState:on.next;if(c!==null)on=c,Et=s;else{if(s===null)throw qe.alternate===null?Error(i(467)):Error(i(310));Et=s,s={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},on===null?qe.memoizedState=on=s:on=on.next=s}return on}function b0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fh(s){var c=zh;return zh+=1,uf===null&&(uf=[]),s=CR(uf,s,c),c=qe,(on===null?c.memoizedState:on.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?yN:SS),s}function x0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Fh(s);if(s.$$typeof===A)return Nn(s)}throw Error(i(438,String(s)))}function cS(s){var c=null,h=qe.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var m=qe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=b0(),qe.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(s),m=0;m<s;m++)h[m]=B;return c.index++,h}function Mo(s,c){return typeof c=="function"?c(s):c}function S0(s){var c=Kt();return fS(c,Et,s)}function fS(s,c,h){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=s.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}c.baseQueue=x=E,m.pending=null}if(E=s.baseState,x===null)s.memoizedState=E;else{c=x.next;var D=C=null,U=null,W=c,ne=!1;do{var le=W.lane&-536870913;if(le!==W.lane?(Je&le)===le:(To&le)===le){var Q=W.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),le===nf&&(ne=!0);else if((To&Q)===Q){W=W.next,Q===nf&&(ne=!0);continue}else le={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(D=U=le,C=E):U=U.next=le,qe.lanes|=Q,Bs|=Q;le=W.action,hu&&h(E,le),E=W.hasEagerState?W.eagerState:h(E,le)}else Q={lane:le,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(D=U=Q,C=E):U=U.next=Q,qe.lanes|=le,Bs|=le;W=W.next}while(W!==null&&W!==c);if(U===null?C=E:U.next=D,!Vi(E,s.memoizedState)&&(sn=!0,ne&&(h=rf,h!==null)))throw h;s.memoizedState=E,s.baseState=C,s.baseQueue=U,m.lastRenderedState=E}return x===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function dS(s){var c=Kt(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var m=h.dispatch,x=h.pending,E=c.memoizedState;if(x!==null){h.pending=null;var C=x=x.next;do E=s(E,C.action),C=C.next;while(C!==x);Vi(E,c.memoizedState)||(sn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),h.lastRenderedState=E}return[E,m]}function LR(s,c,h){var m=qe,x=Kt(),E=nt;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=c();var C=!Vi((Et||x).memoizedState,h);if(C&&(x.memoizedState=h,sn=!0),x=x.queue,pS(BR.bind(null,m,x,s),[s]),x.getSnapshot!==c||C||on!==null&&on.memoizedState.tag&1){if(m.flags|=2048,cf(9,{destroy:void 0},jR.bind(null,m,x,h,c),null),Ct===null)throw Error(i(349));E||(To&127)!==0||UR(m,c,h)}return h}function UR(s,c,h){s.flags|=16384,s={getSnapshot:c,value:h},c=qe.updateQueue,c===null?(c=b0(),qe.updateQueue=c,c.stores=[s]):(h=c.stores,h===null?c.stores=[s]:h.push(s))}function jR(s,c,h,m){c.value=h,c.getSnapshot=m,IR(c)&&PR(s)}function BR(s,c,h){return h(function(){IR(c)&&PR(s)})}function IR(s){var c=s.getSnapshot;s=s.value;try{var h=c();return!Vi(s,h)}catch{return!0}}function PR(s){var c=ru(s,2);c!==null&&ki(c,s,2)}function hS(s){var c=oi();if(typeof s=="function"){var h=s;if(s=h(),hu){Cs(!0);try{h()}finally{Cs(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:s},c}function qR(s,c,h,m){return s.baseState=h,fS(s,Et,typeof m=="function"?m:Mo)}function LV(s,c,h,m,x){if(w0(s))throw Error(i(485));if(s=c.action,s!==null){var E={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};R.T!==null?h(!0):E.isTransition=!1,m(E),h=c.pending,h===null?(E.next=c.pending=E,HR(c,E)):(E.next=h.next,c.pending=h.next=E)}}function HR(s,c){var h=c.action,m=c.payload,x=s.state;if(c.isTransition){var E=R.T,C={};R.T=C;try{var D=h(x,m),U=R.S;U!==null&&U(C,D),GR(s,c,D)}catch(W){gS(s,c,W)}finally{E!==null&&C.types!==null&&(E.types=C.types),R.T=E}}else try{E=h(x,m),GR(s,c,E)}catch(W){gS(s,c,W)}}function GR(s,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){YR(s,c,m)},function(m){return gS(s,c,m)}):YR(s,c,h)}function YR(s,c,h){c.status="fulfilled",c.value=h,XR(c),s.state=h,c=s.pending,c!==null&&(h=c.next,h===c?s.pending=null:(h=h.next,c.next=h,HR(s,h)))}function gS(s,c,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=h,XR(c),c=c.next;while(c!==m)}s.action=null}function XR(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function VR(s,c){return c}function WR(s,c){if(nt){var h=Ct.formState;if(h!==null){e:{var m=qe;if(nt){if(kt){t:{for(var x=kt,E=_r;x.nodeType!==8;){if(!E){x=null;break t}if(x=Ar(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){kt=Ar(x.nextSibling),m=x.data==="F!";break e}}Ds(m)}m=!1}m&&(c=h[0])}}return h=oi(),h.memoizedState=h.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:VR,lastRenderedState:c},h.queue=m,h=gN.bind(null,qe,m),m.dispatch=h,m=hS(!1),E=xS.bind(null,qe,!1,m.queue),m=oi(),x={state:c,dispatch:null,action:s,pending:null},m.queue=x,h=LV.bind(null,qe,x,E,h),x.dispatch=h,m.memoizedState=s,[c,h,!1]}function QR(s){var c=Kt();return KR(c,Et,s)}function KR(s,c,h){if(c=fS(s,c,VR)[0],s=S0(Mo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Fh(c)}catch(C){throw C===af?f0:C}else m=c;c=Kt();var x=c.queue,E=x.dispatch;return h!==c.memoizedState&&(qe.flags|=2048,cf(9,{destroy:void 0},UV.bind(null,x,h),null)),[m,E,s]}function UV(s,c){s.action=c}function ZR(s){var c=Kt(),h=Et;if(h!==null)return KR(c,h,s);Kt(),c=c.memoizedState,h=Kt();var m=h.queue.dispatch;return h.memoizedState=s,[c,m,!1]}function cf(s,c,h,m){return s={tag:s,create:h,deps:m,inst:c,next:null},c=qe.updateQueue,c===null&&(c=b0(),qe.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,c.lastEffect=s),s}function JR(){return Kt().memoizedState}function E0(s,c,h,m){var x=oi();qe.flags|=s,x.memoizedState=cf(1|c,{destroy:void 0},h,m===void 0?null:m)}function _0(s,c,h,m){var x=Kt();m=m===void 0?null:m;var E=x.memoizedState.inst;Et!==null&&m!==null&&aS(m,Et.memoizedState.deps)?x.memoizedState=cf(c,E,h,m):(qe.flags|=s,x.memoizedState=cf(1|c,E,h,m))}function eN(s,c){E0(8390656,8,s,c)}function pS(s,c){_0(2048,8,s,c)}function jV(s){qe.flags|=4;var c=qe.updateQueue;if(c===null)c=b0(),qe.updateQueue=c,c.events=[s];else{var h=c.events;h===null?c.events=[s]:h.push(s)}}function tN(s){var c=Kt().memoizedState;return jV({ref:c,nextImpl:s}),function(){if((dt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function nN(s,c){return _0(4,2,s,c)}function iN(s,c){return _0(4,4,s,c)}function rN(s,c){if(typeof c=="function"){s=s();var h=c(s);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function aN(s,c,h){h=h!=null?h.concat([s]):null,_0(4,4,rN.bind(null,c,s),h)}function mS(){}function oN(s,c){var h=Kt();c=c===void 0?null:c;var m=h.memoizedState;return c!==null&&aS(c,m[1])?m[0]:(h.memoizedState=[s,c],s)}function sN(s,c){var h=Kt();c=c===void 0?null:c;var m=h.memoizedState;if(c!==null&&aS(c,m[1]))return m[0];if(m=s(),hu){Cs(!0);try{s()}finally{Cs(!1)}}return h.memoizedState=[m,c],m}function yS(s,c,h){return h===void 0||(To&1073741824)!==0&&(Je&261930)===0?s.memoizedState=c:(s.memoizedState=h,s=lO(),qe.lanes|=s,Bs|=s,h)}function lN(s,c,h,m){return Vi(h,c)?h:sf.current!==null?(s=yS(s,h,m),Vi(s,c)||(sn=!0),s):(To&42)===0||(To&1073741824)!==0&&(Je&261930)===0?(sn=!0,s.memoizedState=h):(s=lO(),qe.lanes|=s,Bs|=s,c)}function uN(s,c,h,m,x){var E=I.p;I.p=E!==0&&8>E?E:8;var C=R.T,D={};R.T=D,xS(s,!1,c,h);try{var U=x(),W=R.S;if(W!==null&&W(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=OV(U,m);Lh(s,c,ne,er(s))}else Lh(s,c,m,er(s))}catch(le){Lh(s,c,{then:function(){},status:"rejected",reason:le},er())}finally{I.p=E,C!==null&&D.types!==null&&(C.types=D.types),R.T=C}}function BV(){}function vS(s,c,h,m){if(s.tag!==5)throw Error(i(476));var x=cN(s).queue;uN(s,x,c,X,h===null?BV:function(){return fN(s),h(m)})}function cN(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:X},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:h},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function fN(s){var c=cN(s);c.next===null&&(c=s.alternate.memoizedState),Lh(s,c.next.queue,{},er())}function bS(){return Nn(eg)}function dN(){return Kt().memoizedState}function hN(){return Kt().memoizedState}function IV(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var h=er();s=Os(h);var m=zs(c,s,h);m!==null&&(ki(m,c,h),Rh(m,c,h)),c={cache:V2()},s.payload=c;return}c=c.return}}function PV(s,c,h){var m=er();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},w0(s)?pN(c,h):(h=L2(s,c,h,m),h!==null&&(ki(h,s,m),mN(h,c,m)))}function gN(s,c,h){var m=er();Lh(s,c,h,m)}function Lh(s,c,h,m){var x={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(w0(s))pN(c,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var C=c.lastRenderedState,D=E(C,h);if(x.hasEagerState=!0,x.eagerState=D,Vi(D,C))return r0(s,c,x,0),Ct===null&&i0(),!1}catch{}finally{}if(h=L2(s,c,x,m),h!==null)return ki(h,s,m),mN(h,c,m),!0}return!1}function xS(s,c,h,m){if(m={lane:2,revertLane:ZS(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},w0(s)){if(c)throw Error(i(479))}else c=L2(s,h,m,2),c!==null&&ki(c,s,2)}function w0(s){var c=s.alternate;return s===qe||c!==null&&c===qe}function pN(s,c){lf=y0=!0;var h=s.pending;h===null?c.next=c:(c.next=h.next,h.next=c),s.pending=c}function mN(s,c,h){if((h&4194048)!==0){var m=c.lanes;m&=s.pendingLanes,h|=m,c.lanes=h,SD(s,h)}}var Uh={readContext:Nn,use:x0,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Uh.useEffectEvent=Ht;var yN={readContext:Nn,use:x0,useCallback:function(s,c){return oi().memoizedState=[s,c===void 0?null:c],s},useContext:Nn,useEffect:eN,useImperativeHandle:function(s,c,h){h=h!=null?h.concat([s]):null,E0(4194308,4,rN.bind(null,c,s),h)},useLayoutEffect:function(s,c){return E0(4194308,4,s,c)},useInsertionEffect:function(s,c){E0(4,2,s,c)},useMemo:function(s,c){var h=oi();c=c===void 0?null:c;var m=s();if(hu){Cs(!0);try{s()}finally{Cs(!1)}}return h.memoizedState=[m,c],m},useReducer:function(s,c,h){var m=oi();if(h!==void 0){var x=h(c);if(hu){Cs(!0);try{h(c)}finally{Cs(!1)}}}else x=c;return m.memoizedState=m.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},m.queue=s,s=s.dispatch=PV.bind(null,qe,s),[m.memoizedState,s]},useRef:function(s){var c=oi();return s={current:s},c.memoizedState=s},useState:function(s){s=hS(s);var c=s.queue,h=gN.bind(null,qe,c);return c.dispatch=h,[s.memoizedState,h]},useDebugValue:mS,useDeferredValue:function(s,c){var h=oi();return yS(h,s,c)},useTransition:function(){var s=hS(!1);return s=uN.bind(null,qe,s.queue,!0,!1),oi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,h){var m=qe,x=oi();if(nt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),Ct===null)throw Error(i(349));(Je&127)!==0||UR(m,c,h)}x.memoizedState=h;var E={value:h,getSnapshot:c};return x.queue=E,eN(BR.bind(null,m,E,s),[s]),m.flags|=2048,cf(9,{destroy:void 0},jR.bind(null,m,E,h,c),null),h},useId:function(){var s=oi(),c=Ct.identifierPrefix;if(nt){var h=ka,m=Ma;h=(m&~(1<<32-Xi(m)-1)).toString(32)+h,c="_"+c+"R_"+h,h=v0++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=zV++,c="_"+c+"r_"+h.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:bS,useFormState:WR,useActionState:WR,useOptimistic:function(s){var c=oi();c.memoizedState=c.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=xS.bind(null,qe,!0,h),h.dispatch=c,[s,c]},useMemoCache:cS,useCacheRefresh:function(){return oi().memoizedState=IV.bind(null,qe)},useEffectEvent:function(s){var c=oi(),h={impl:s};return c.memoizedState=h,function(){if((dt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},SS={readContext:Nn,use:x0,useCallback:oN,useContext:Nn,useEffect:pS,useImperativeHandle:aN,useInsertionEffect:nN,useLayoutEffect:iN,useMemo:sN,useReducer:S0,useRef:JR,useState:function(){return S0(Mo)},useDebugValue:mS,useDeferredValue:function(s,c){var h=Kt();return lN(h,Et.memoizedState,s,c)},useTransition:function(){var s=S0(Mo)[0],c=Kt().memoizedState;return[typeof s=="boolean"?s:Fh(s),c]},useSyncExternalStore:LR,useId:dN,useHostTransitionStatus:bS,useFormState:QR,useActionState:QR,useOptimistic:function(s,c){var h=Kt();return qR(h,Et,s,c)},useMemoCache:cS,useCacheRefresh:hN};SS.useEffectEvent=tN;var vN={readContext:Nn,use:x0,useCallback:oN,useContext:Nn,useEffect:pS,useImperativeHandle:aN,useInsertionEffect:nN,useLayoutEffect:iN,useMemo:sN,useReducer:dS,useRef:JR,useState:function(){return dS(Mo)},useDebugValue:mS,useDeferredValue:function(s,c){var h=Kt();return Et===null?yS(h,s,c):lN(h,Et.memoizedState,s,c)},useTransition:function(){var s=dS(Mo)[0],c=Kt().memoizedState;return[typeof s=="boolean"?s:Fh(s),c]},useSyncExternalStore:LR,useId:dN,useHostTransitionStatus:bS,useFormState:ZR,useActionState:ZR,useOptimistic:function(s,c){var h=Kt();return Et!==null?qR(h,Et,s,c):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:cS,useCacheRefresh:hN};vN.useEffectEvent=tN;function ES(s,c,h,m){c=s.memoizedState,h=h(m,c),h=h==null?c:g({},c,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var _S={enqueueSetState:function(s,c,h){s=s._reactInternals;var m=er(),x=Os(m);x.payload=c,h!=null&&(x.callback=h),c=zs(s,x,m),c!==null&&(ki(c,s,m),Rh(c,s,m))},enqueueReplaceState:function(s,c,h){s=s._reactInternals;var m=er(),x=Os(m);x.tag=1,x.payload=c,h!=null&&(x.callback=h),c=zs(s,x,m),c!==null&&(ki(c,s,m),Rh(c,s,m))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var h=er(),m=Os(h);m.tag=2,c!=null&&(m.callback=c),c=zs(s,m,h),c!==null&&(ki(c,s,h),Rh(c,s,h))}};function bN(s,c,h,m,x,E,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,C):c.prototype&&c.prototype.isPureReactComponent?!wh(h,m)||!wh(x,E):!0}function xN(s,c,h,m){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,m),c.state!==s&&_S.enqueueReplaceState(c,c.state,null)}function gu(s,c){var h=c;if("ref"in c){h={};for(var m in c)m!=="ref"&&(h[m]=c[m])}if(s=s.defaultProps){h===c&&(h=g({},h));for(var x in s)h[x]===void 0&&(h[x]=s[x])}return h}function SN(s){n0(s)}function EN(s){console.error(s)}function _N(s){n0(s)}function A0(s,c){try{var h=s.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function wN(s,c,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function wS(s,c,h){return h=Os(h),h.tag=3,h.payload={element:null},h.callback=function(){A0(s,c)},h}function AN(s){return s=Os(s),s.tag=3,s}function CN(s,c,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;s.payload=function(){return x(E)},s.callback=function(){wN(c,h,m)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){wN(c,h,m),typeof x!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function qV(s,c,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=h.alternate,c!==null&&tf(c,h,x,!0),h=Qi.current,h!==null){switch(h.tag){case 31:case 13:return wr===null?L0():h.alternate===null&&Gt===0&&(Gt=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===d0?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([m]):c.add(m),WS(s,m,x)),!1;case 22:return h.flags|=65536,m===d0?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([m]):h.add(m)),WS(s,m,x)),!1}throw Error(i(435,h.tag))}return WS(s,m,x),L0(),!1}if(nt)return c=Qi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==q2&&(s=Error(i(422),{cause:m}),$h(xr(s,h)))):(m!==q2&&(c=Error(i(423),{cause:m}),$h(xr(c,h))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,m=xr(m,h),x=wS(s.stateNode,m,x),eS(s,x),Gt!==4&&(Gt=2)),!1;var E=Error(i(520),{cause:m});if(E=xr(E,h),Yh===null?Yh=[E]:Yh.push(E),Gt!==4&&(Gt=2),c===null)return!0;m=xr(m,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,s=x&-x,h.lanes|=s,s=wS(h.stateNode,m,s),eS(h,s),!1;case 1:if(c=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Is===null||!Is.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=AN(x),CN(x,s,h,m),eS(h,x),!1}h=h.return}while(h!==null);return!1}var AS=Error(i(461)),sn=!1;function On(s,c,h,m){c.child=s===null?kR(c,null,h,m):du(c,s.child,h,m)}function $N(s,c,h,m,x){h=h.render;var E=c.ref;if("ref"in m){var C={};for(var D in m)D!=="ref"&&(C[D]=m[D])}else C=m;return lu(c),m=oS(s,c,h,C,E,x),D=sS(),s!==null&&!sn?(lS(s,c,x),ko(s,c,x)):(nt&&D&&I2(c),c.flags|=1,On(s,c,m,x),c.child)}function TN(s,c,h,m,x){if(s===null){var E=h.type;return typeof E=="function"&&!U2(E)&&E.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=E,MN(s,c,E,m,x)):(s=o0(h.type,null,m,c,c.mode,x),s.ref=c.ref,s.return=c,c.child=s)}if(E=s.child,!NS(s,x)){var C=E.memoizedProps;if(h=h.compare,h=h!==null?h:wh,h(C,m)&&s.ref===c.ref)return ko(s,c,x)}return c.flags|=1,s=wo(E,m),s.ref=c.ref,s.return=c,c.child=s}function MN(s,c,h,m,x){if(s!==null){var E=s.memoizedProps;if(wh(E,m)&&s.ref===c.ref)if(sn=!1,c.pendingProps=m=E,NS(s,x))(s.flags&131072)!==0&&(sn=!0);else return c.lanes=s.lanes,ko(s,c,x)}return CS(s,c,h,m,x)}function kN(s,c,h,m){var x=m.children,E=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((c.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,s!==null){for(m=c.child=s.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~E}else m=0,c.child=null;return DN(s,c,E,h,m)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&c0(c,E!==null?E.cachePool:null),E!==null?NR(c,E):nS(),OR(c);else return m=c.lanes=536870912,DN(s,c,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(c0(c,E.cachePool),NR(c,E),Ls(),c.memoizedState=null):(s!==null&&c0(c,null),nS(),Ls());return On(s,c,x,h),c.child}function jh(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function DN(s,c,h,m,x){var E=Q2();return E=E===null?null:{parent:an._currentValue,pool:E},c.memoizedState={baseLanes:h,cachePool:E},s!==null&&c0(c,null),nS(),OR(c),s!==null&&tf(s,c,m,!0),c.childLanes=x,null}function C0(s,c){return c=T0({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function RN(s,c,h){return du(c,s.child,null,h),s=C0(c,c.pendingProps),s.flags|=2,Ki(c),c.memoizedState=null,s}function HV(s,c,h){var m=c.pendingProps,x=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(nt){if(m.mode==="hidden")return s=C0(c,m),c.lanes=536870912,jh(null,s);if(rS(c),(s=kt)?(s=HO(s,_r),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Ms!==null?{id:Ma,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},h=pR(s),h.return=c,c.child=h,Rn=c,kt=null)):s=null,s===null)throw Ds(c);return c.lanes=536870912,null}return C0(c,m)}var E=s.memoizedState;if(E!==null){var C=E.dehydrated;if(rS(c),x)if(c.flags&256)c.flags&=-257,c=RN(s,c,h);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(i(558));else if(sn||tf(s,c,h,!1),x=(h&s.childLanes)!==0,sn||x){if(m=Ct,m!==null&&(C=ED(m,h),C!==0&&C!==E.retryLane))throw E.retryLane=C,ru(s,C),ki(m,s,C),AS;L0(),c=RN(s,c,h)}else s=E.treeContext,kt=Ar(C.nextSibling),Rn=c,nt=!0,ks=null,_r=!1,s!==null&&vR(c,s),c=C0(c,m),c.flags|=4096;return c}return s=wo(s.child,{mode:m.mode,children:m.children}),s.ref=c.ref,c.child=s,s.return=c,s}function $0(s,c){var h=c.ref;if(h===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(c.flags|=4194816)}}function CS(s,c,h,m,x){return lu(c),h=oS(s,c,h,m,void 0,x),m=sS(),s!==null&&!sn?(lS(s,c,x),ko(s,c,x)):(nt&&m&&I2(c),c.flags|=1,On(s,c,h,x),c.child)}function NN(s,c,h,m,x,E){return lu(c),c.updateQueue=null,h=FR(c,m,h,x),zR(s),m=sS(),s!==null&&!sn?(lS(s,c,E),ko(s,c,E)):(nt&&m&&I2(c),c.flags|=1,On(s,c,h,E),c.child)}function ON(s,c,h,m,x){if(lu(c),c.stateNode===null){var E=Kc,C=h.contextType;typeof C=="object"&&C!==null&&(E=Nn(C)),E=new h(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=_S,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},Z2(c),C=h.contextType,E.context=typeof C=="object"&&C!==null?Nn(C):Kc,E.state=c.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(ES(c,h,C,m),E.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&_S.enqueueReplaceState(E,E.state,null),Oh(c,m,E,x),Nh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(s===null){E=c.stateNode;var D=c.memoizedProps,U=gu(h,D);E.props=U;var W=E.context,ne=h.contextType;C=Kc,typeof ne=="object"&&ne!==null&&(C=Nn(ne));var le=h.getDerivedStateFromProps;ne=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=c.pendingProps!==D,ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||W!==C)&&xN(c,E,m,C),Ns=!1;var Q=c.memoizedState;E.state=Q,Oh(c,m,E,x),Nh(),W=c.memoizedState,D||Q!==W||Ns?(typeof le=="function"&&(ES(c,h,le,m),W=c.memoizedState),(U=Ns||bN(c,h,U,m,Q,W,C))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=W),E.props=m,E.state=W,E.context=C,m=U):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,J2(s,c),C=c.memoizedProps,ne=gu(h,C),E.props=ne,le=c.pendingProps,Q=E.context,W=h.contextType,U=Kc,typeof W=="object"&&W!==null&&(U=Nn(W)),D=h.getDerivedStateFromProps,(W=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==le||Q!==U)&&xN(c,E,m,U),Ns=!1,Q=c.memoizedState,E.state=Q,Oh(c,m,E,x),Nh();var J=c.memoizedState;C!==le||Q!==J||Ns||s!==null&&s.dependencies!==null&&l0(s.dependencies)?(typeof D=="function"&&(ES(c,h,D,m),J=c.memoizedState),(ne=Ns||bN(c,h,ne,m,Q,J,U)||s!==null&&s.dependencies!==null&&l0(s.dependencies))?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,J,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,J,U)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=J),E.props=m,E.state=J,E.context=U,m=ne):(typeof E.componentDidUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(c.flags|=1024),m=!1)}return E=m,$0(s,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,s!==null&&m?(c.child=du(c,s.child,null,x),c.child=du(c,null,h,x)):On(s,c,h,x),c.memoizedState=E.state,s=c.child):s=ko(s,c,x),s}function zN(s,c,h,m){return ou(),c.flags|=256,On(s,c,h,m),c.child}var $S={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function TS(s){return{baseLanes:s,cachePool:wR()}}function MS(s,c,h){return s=s!==null?s.childLanes&~h:0,c&&(s|=Ji),s}function FN(s,c,h){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,C;if((C=E)||(C=s!==null&&s.memoizedState===null?!1:(Qt.current&2)!==0),C&&(x=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,s===null){if(nt){if(x?Fs(c):Ls(),(s=kt)?(s=HO(s,_r),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Ms!==null?{id:Ma,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},h=pR(s),h.return=c,c.child=h,Rn=c,kt=null)):s=null,s===null)throw Ds(c);return fE(s)?c.lanes=32:c.lanes=536870912,null}var D=m.children;return m=m.fallback,x?(Ls(),x=c.mode,D=T0({mode:"hidden",children:D},x),m=au(m,x,h,null),D.return=c,m.return=c,D.sibling=m,c.child=D,m=c.child,m.memoizedState=TS(h),m.childLanes=MS(s,C,h),c.memoizedState=$S,jh(null,m)):(Fs(c),kS(c,D))}var U=s.memoizedState;if(U!==null&&(D=U.dehydrated,D!==null)){if(E)c.flags&256?(Fs(c),c.flags&=-257,c=DS(s,c,h)):c.memoizedState!==null?(Ls(),c.child=s.child,c.flags|=128,c=null):(Ls(),D=m.fallback,x=c.mode,m=T0({mode:"visible",children:m.children},x),D=au(D,x,h,null),D.flags|=2,m.return=c,D.return=c,m.sibling=D,c.child=m,du(c,s.child,null,h),m=c.child,m.memoizedState=TS(h),m.childLanes=MS(s,C,h),c.memoizedState=$S,c=jh(null,m));else if(Fs(c),fE(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var W=C.dgst;C=W,m=Error(i(419)),m.stack="",m.digest=C,$h({value:m,source:null,stack:null}),c=DS(s,c,h)}else if(sn||tf(s,c,h,!1),C=(h&s.childLanes)!==0,sn||C){if(C=Ct,C!==null&&(m=ED(C,h),m!==0&&m!==U.retryLane))throw U.retryLane=m,ru(s,m),ki(C,s,m),AS;cE(D)||L0(),c=DS(s,c,h)}else cE(D)?(c.flags|=192,c.child=s.child,c=null):(s=U.treeContext,kt=Ar(D.nextSibling),Rn=c,nt=!0,ks=null,_r=!1,s!==null&&vR(c,s),c=kS(c,m.children),c.flags|=4096);return c}return x?(Ls(),D=m.fallback,x=c.mode,U=s.child,W=U.sibling,m=wo(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,W!==null?D=wo(W,D):(D=au(D,x,h,null),D.flags|=2),D.return=c,m.return=c,m.sibling=D,c.child=m,jh(null,m),m=c.child,D=s.child.memoizedState,D===null?D=TS(h):(x=D.cachePool,x!==null?(U=an._currentValue,x=x.parent!==U?{parent:U,pool:U}:x):x=wR(),D={baseLanes:D.baseLanes|h,cachePool:x}),m.memoizedState=D,m.childLanes=MS(s,C,h),c.memoizedState=$S,jh(s.child,m)):(Fs(c),h=s.child,s=h.sibling,h=wo(h,{mode:"visible",children:m.children}),h.return=c,h.sibling=null,s!==null&&(C=c.deletions,C===null?(c.deletions=[s],c.flags|=16):C.push(s)),c.child=h,c.memoizedState=null,h)}function kS(s,c){return c=T0({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function T0(s,c){return s=Wi(22,s,null,c),s.lanes=0,s}function DS(s,c,h){return du(c,s.child,null,h),s=kS(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function LN(s,c,h){s.lanes|=c;var m=s.alternate;m!==null&&(m.lanes|=c),Y2(s.return,c,h)}function RS(s,c,h,m,x,E){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x,treeForkCount:E}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=x,C.treeForkCount=E)}function UN(s,c,h){var m=c.pendingProps,x=m.revealOrder,E=m.tail;m=m.children;var C=Qt.current,D=(C&2)!==0;if(D?(C=C&1|2,c.flags|=128):C&=1,se(Qt,C),On(s,c,m,h),m=nt?Ch:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&LN(s,h,c);else if(s.tag===19)LN(s,h,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(h=c.child,x=null;h!==null;)s=h.alternate,s!==null&&m0(s)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),RS(c,!1,x,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(s=x.alternate,s!==null&&m0(s)===null){c.child=x;break}s=x.sibling,x.sibling=h,h=x,x=s}RS(c,!0,h,null,E,m);break;case"together":RS(c,!1,null,null,void 0,m);break;default:c.memoizedState=null}return c.child}function ko(s,c,h){if(s!==null&&(c.dependencies=s.dependencies),Bs|=c.lanes,(h&c.childLanes)===0)if(s!==null){if(tf(s,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(i(153));if(c.child!==null){for(s=c.child,h=wo(s,s.pendingProps),c.child=h,h.return=c;s.sibling!==null;)s=s.sibling,h=h.sibling=wo(s,s.pendingProps),h.return=c;h.sibling=null}return c.child}function NS(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&l0(s)))}function GV(s,c,h){switch(c.tag){case 3:Ot(c,c.stateNode.containerInfo),Rs(c,an,s.memoizedState.cache),ou();break;case 27:case 5:Le(c);break;case 4:Ot(c,c.stateNode.containerInfo);break;case 10:Rs(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,rS(c),null;break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Fs(c),c.flags|=128,null):(h&c.child.childLanes)!==0?FN(s,c,h):(Fs(c),s=ko(s,c,h),s!==null?s.sibling:null);Fs(c);break;case 19:var x=(s.flags&128)!==0;if(m=(h&c.childLanes)!==0,m||(tf(s,c,h,!1),m=(h&c.childLanes)!==0),x){if(m)return UN(s,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(Qt,Qt.current),m)break;return null;case 22:return c.lanes=0,kN(s,c,h,c.pendingProps);case 24:Rs(c,an,s.memoizedState.cache)}return ko(s,c,h)}function jN(s,c,h){if(s!==null)if(s.memoizedProps!==c.pendingProps)sn=!0;else{if(!NS(s,h)&&(c.flags&128)===0)return sn=!1,GV(s,c,h);sn=(s.flags&131072)!==0}else sn=!1,nt&&(c.flags&1048576)!==0&&yR(c,Ch,c.index);switch(c.lanes=0,c.tag){case 16:e:{var m=c.pendingProps;if(s=cu(c.elementType),c.type=s,typeof s=="function")U2(s)?(m=gu(s,m),c.tag=1,c=ON(null,c,s,m,h)):(c.tag=0,c=CS(null,c,s,m,h));else{if(s!=null){var x=s.$$typeof;if(x===$){c.tag=11,c=$N(null,c,s,m,h);break e}else if(x===T){c.tag=14,c=TN(null,c,s,m,h);break e}}throw c=q(s)||s,Error(i(306,c,""))}}return c;case 0:return CS(s,c,c.type,c.pendingProps,h);case 1:return m=c.type,x=gu(m,c.pendingProps),ON(s,c,m,x,h);case 3:e:{if(Ot(c,c.stateNode.containerInfo),s===null)throw Error(i(387));m=c.pendingProps;var E=c.memoizedState;x=E.element,J2(s,c),Oh(c,m,null,h);var C=c.memoizedState;if(m=C.cache,Rs(c,an,m),m!==E.cache&&X2(c,[an],h,!0),Nh(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=zN(s,c,m,h);break e}else if(m!==x){x=xr(Error(i(424)),c),$h(x),c=zN(s,c,m,h);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(kt=Ar(s.firstChild),Rn=c,nt=!0,ks=null,_r=!0,h=kR(c,null,m,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ou(),m===x){c=ko(s,c,h);break e}On(s,c,m,h)}c=c.child}return c;case 26:return $0(s,c),s===null?(h=QO(c.type,null,c.pendingProps,null))?c.memoizedState=h:nt||(h=c.type,s=c.pendingProps,m=H0(Ne.current).createElement(h),m[Dn]=c,m[wi]=s,zn(m,h,s),bn(m),c.stateNode=m):c.memoizedState=QO(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Le(c),s===null&&nt&&(m=c.stateNode=XO(c.type,c.pendingProps,Ne.current),Rn=c,_r=!0,x=kt,Gs(c.type)?(dE=x,kt=Ar(m.firstChild)):kt=x),On(s,c,c.pendingProps.children,h),$0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&nt&&((x=m=kt)&&(m=SW(m,c.type,c.pendingProps,_r),m!==null?(c.stateNode=m,Rn=c,kt=Ar(m.firstChild),_r=!1,x=!0):x=!1),x||Ds(c)),Le(c),x=c.type,E=c.pendingProps,C=s!==null?s.memoizedProps:null,m=E.children,sE(x,E)?m=null:C!==null&&sE(x,C)&&(c.flags|=32),c.memoizedState!==null&&(x=oS(s,c,FV,null,null,h),eg._currentValue=x),$0(s,c),On(s,c,m,h),c.child;case 6:return s===null&&nt&&((s=h=kt)&&(h=EW(h,c.pendingProps,_r),h!==null?(c.stateNode=h,Rn=c,kt=null,s=!0):s=!1),s||Ds(c)),null;case 13:return FN(s,c,h);case 4:return Ot(c,c.stateNode.containerInfo),m=c.pendingProps,s===null?c.child=du(c,null,m,h):On(s,c,m,h),c.child;case 11:return $N(s,c,c.type,c.pendingProps,h);case 7:return On(s,c,c.pendingProps,h),c.child;case 8:return On(s,c,c.pendingProps.children,h),c.child;case 12:return On(s,c,c.pendingProps.children,h),c.child;case 10:return m=c.pendingProps,Rs(c,c.type,m.value),On(s,c,m.children,h),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,lu(c),x=Nn(x),m=m(x),c.flags|=1,On(s,c,m,h),c.child;case 14:return TN(s,c,c.type,c.pendingProps,h);case 15:return MN(s,c,c.type,c.pendingProps,h);case 19:return UN(s,c,h);case 31:return HV(s,c,h);case 22:return kN(s,c,h,c.pendingProps);case 24:return lu(c),m=Nn(an),s===null?(x=Q2(),x===null&&(x=Ct,E=V2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),c.memoizedState={parent:m,cache:x},Z2(c),Rs(c,an,x)):((s.lanes&h)!==0&&(J2(s,c),Oh(c,null,null,h),Nh()),x=s.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),Rs(c,an,m)):(m=E.cache,Rs(c,an,m),m!==x.cache&&X2(c,[an],h,!0))),On(s,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Do(s){s.flags|=4}function OS(s,c,h,m,x){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(dO())s.flags|=8192;else throw fu=d0,K2}else s.flags&=-16777217}function BN(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!t5(c))if(dO())s.flags|=8192;else throw fu=d0,K2}function M0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?bD():536870912,s.lanes|=c,gf|=c)}function Bh(s,c){if(!nt)switch(s.tailMode){case"hidden":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Dt(s){var c=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(c)for(var x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=h,c}function YV(s,c,h){var m=c.pendingProps;switch(P2(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(c),null;case 1:return Dt(c),null;case 3:return h=c.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),$o(an),ye(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(ef(c)?Do(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,H2())),Dt(c),null;case 26:var x=c.type,E=c.memoizedState;return s===null?(Do(c),E!==null?(Dt(c),BN(c,E)):(Dt(c),OS(c,x,null,m,h))):E?E!==s.memoizedState?(Do(c),Dt(c),BN(c,E)):(Dt(c),c.flags&=-16777217):(s=s.memoizedProps,s!==m&&Do(c),Dt(c),OS(c,x,s,m,h)),null;case 27:if(Ie(c),h=Ne.current,x=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==m&&Do(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Dt(c),null}s=me.current,ef(c)?bR(c):(s=XO(x,m,h),c.stateNode=s,Do(c))}return Dt(c),null;case 5:if(Ie(c),x=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==m&&Do(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Dt(c),null}if(E=me.current,ef(c))bR(c);else{var C=H0(Ne.current);switch(E){case 1:E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":E=C.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?C.createElement(x,{is:m.is}):C.createElement(x)}}E[Dn]=c,E[wi]=m;e:for(C=c.child;C!==null;){if(C.tag===5||C.tag===6)E.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===c)break e;for(;C.sibling===null;){if(C.return===null||C.return===c)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}c.stateNode=E;e:switch(zn(E,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Do(c)}}return Dt(c),OS(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,h),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==m&&Do(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(s=Ne.current,ef(c)){if(s=c.stateNode,h=c.memoizedProps,m=null,x=Rn,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}s[Dn]=c,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||FO(s.nodeValue,h)),s||Ds(c,!0)}else s=H0(s).createTextNode(m),s[Dn]=c,c.stateNode=s}return Dt(c),null;case 31:if(h=c.memoizedState,s===null||s.memoizedState!==null){if(m=ef(c),h!==null){if(s===null){if(!m)throw Error(i(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Dn]=c}else ou(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dt(c),s=!1}else h=H2(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return c.flags&256?(Ki(c),c):(Ki(c),null);if((c.flags&128)!==0)throw Error(i(558))}return Dt(c),null;case 13:if(m=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=ef(c),m!==null&&m.dehydrated!==null){if(s===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Dn]=c}else ou(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dt(c),x=!1}else x=H2(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Ki(c),c):(Ki(c),null)}return Ki(c),(c.flags&128)!==0?(c.lanes=h,c):(h=m!==null,s=s!==null&&s.memoizedState!==null,h&&(m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)),h!==s&&h&&(c.child.flags|=8192),M0(c,c.updateQueue),Dt(c),null);case 4:return ye(),s===null&&nE(c.stateNode.containerInfo),Dt(c),null;case 10:return $o(c.type),Dt(c),null;case 19:if(G(Qt),m=c.memoizedState,m===null)return Dt(c),null;if(x=(c.flags&128)!==0,E=m.rendering,E===null)if(x)Bh(m,!1);else{if(Gt!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(E=m0(s),E!==null){for(c.flags|=128,Bh(m,!1),s=E.updateQueue,c.updateQueue=s,M0(c,s),c.subtreeFlags=0,s=h,h=c.child;h!==null;)gR(h,s),h=h.sibling;return se(Qt,Qt.current&1|2),nt&&Ao(c,m.treeForkCount),c.child}s=s.sibling}m.tail!==null&&Gi()>O0&&(c.flags|=128,x=!0,Bh(m,!1),c.lanes=4194304)}else{if(!x)if(s=m0(E),s!==null){if(c.flags|=128,x=!0,s=s.updateQueue,c.updateQueue=s,M0(c,s),Bh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!nt)return Dt(c),null}else 2*Gi()-m.renderingStartTime>O0&&h!==536870912&&(c.flags|=128,x=!0,Bh(m,!1),c.lanes=4194304);m.isBackwards?(E.sibling=c.child,c.child=E):(s=m.last,s!==null?s.sibling=E:c.child=E,m.last=E)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Gi(),s.sibling=null,h=Qt.current,se(Qt,x?h&1|2:h&1),nt&&Ao(c,m.treeForkCount),s):(Dt(c),null);case 22:case 23:return Ki(c),iS(),m=c.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(h&536870912)!==0&&(c.flags&128)===0&&(Dt(c),c.subtreeFlags&6&&(c.flags|=8192)):Dt(c),h=c.updateQueue,h!==null&&M0(c,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048),s!==null&&G(uu),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),$o(an),Dt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function XV(s,c){switch(P2(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return $o(an),ye(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return Ie(c),null;case 31:if(c.memoizedState!==null){if(Ki(c),c.alternate===null)throw Error(i(340));ou()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Ki(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(i(340));ou()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return G(Qt),null;case 4:return ye(),null;case 10:return $o(c.type),null;case 22:case 23:return Ki(c),iS(),s!==null&&G(uu),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return $o(an),null;case 25:return null;default:return null}}function IN(s,c){switch(P2(c),c.tag){case 3:$o(an),ye();break;case 26:case 27:case 5:Ie(c);break;case 4:ye();break;case 31:c.memoizedState!==null&&Ki(c);break;case 13:Ki(c);break;case 19:G(Qt);break;case 10:$o(c.type);break;case 22:case 23:Ki(c),iS(),s!==null&&G(uu);break;case 24:$o(an)}}function Ih(s,c){try{var h=c.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&s)===s){m=void 0;var E=h.create,C=h.inst;m=E(),C.destroy=m}h=h.next}while(h!==x)}}catch(D){vt(c,c.return,D)}}function Us(s,c,h){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&s)===s){var C=m.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,x=c;var U=h,W=D;try{W()}catch(ne){vt(x,U,ne)}}}m=m.next}while(m!==E)}}catch(ne){vt(c,c.return,ne)}}function PN(s){var c=s.updateQueue;if(c!==null){var h=s.stateNode;try{RR(c,h)}catch(m){vt(s,s.return,m)}}}function qN(s,c,h){h.props=gu(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){vt(s,c,m)}}function Ph(s,c){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(x){vt(s,c,x)}}function Da(s,c){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){vt(s,c,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){vt(s,c,x)}else h.current=null}function HN(s){var c=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){vt(s,s.return,x)}}function zS(s,c,h){try{var m=s.stateNode;pW(m,s.type,h,c),m[wi]=c}catch(x){vt(s,s.return,x)}}function GN(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Gs(s.type)||s.tag===4}function FS(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||GN(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Gs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function LS(s,c,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(s),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Eo));else if(m!==4&&(m===27&&Gs(s.type)&&(h=s.stateNode,c=null),s=s.child,s!==null))for(LS(s,c,h),s=s.sibling;s!==null;)LS(s,c,h),s=s.sibling}function k0(s,c,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,c?h.insertBefore(s,c):h.appendChild(s);else if(m!==4&&(m===27&&Gs(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(k0(s,c,h),s=s.sibling;s!==null;)k0(s,c,h),s=s.sibling}function YN(s){var c=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);zn(c,m,h),c[Dn]=s,c[wi]=h}catch(E){vt(s,s.return,E)}}var Ro=!1,ln=!1,US=!1,XN=typeof WeakSet=="function"?WeakSet:Set,xn=null;function VV(s,c){if(s=s.containerInfo,aE=K0,s=aR(s),D2(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var C=0,D=-1,U=-1,W=0,ne=0,le=s,Q=null;t:for(;;){for(var J;le!==h||x!==0&&le.nodeType!==3||(D=C+x),le!==E||m!==0&&le.nodeType!==3||(U=C+m),le.nodeType===3&&(C+=le.nodeValue.length),(J=le.firstChild)!==null;)Q=le,le=J;for(;;){if(le===s)break t;if(Q===h&&++W===x&&(D=C),Q===E&&++ne===m&&(U=C),(J=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=J}h=D===-1||U===-1?null:{start:D,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(oE={focusedElem:s,selectionRange:h},K0=!1,xn=c;xn!==null;)if(c=xn,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,xn=s;else for(;xn!==null;){switch(c=xn,E=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)x=s[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,h=c,x=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var Ae=gu(h.type,x);s=m.getSnapshotBeforeUpdate(Ae,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(Fe){vt(h,h.return,Fe)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,h=s.nodeType,h===9)uE(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":uE(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=c.sibling,s!==null){s.return=c.return,xn=s;break}xn=c.return}}function VN(s,c,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Oo(s,h),m&4&&Ih(5,h);break;case 1:if(Oo(s,h),m&4)if(s=h.stateNode,c===null)try{s.componentDidMount()}catch(C){vt(h,h.return,C)}else{var x=gu(h.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(x,c,s.__reactInternalSnapshotBeforeUpdate)}catch(C){vt(h,h.return,C)}}m&64&&PN(h),m&512&&Ph(h,h.return);break;case 3:if(Oo(s,h),m&64&&(s=h.updateQueue,s!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{RR(s,c)}catch(C){vt(h,h.return,C)}}break;case 27:c===null&&m&4&&YN(h);case 26:case 5:Oo(s,h),c===null&&m&4&&HN(h),m&512&&Ph(h,h.return);break;case 12:Oo(s,h);break;case 31:Oo(s,h),m&4&&KN(s,h);break;case 13:Oo(s,h),m&4&&ZN(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=iW.bind(null,h),_W(s,h))));break;case 22:if(m=h.memoizedState!==null||Ro,!m){c=c!==null&&c.memoizedState!==null||ln,x=Ro;var E=ln;Ro=m,(ln=c)&&!E?zo(s,h,(h.subtreeFlags&8772)!==0):Oo(s,h),Ro=x,ln=E}break;case 30:break;default:Oo(s,h)}}function WN(s){var c=s.alternate;c!==null&&(s.alternate=null,WN(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&g2(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var zt=null,Ci=!1;function No(s,c,h){for(h=h.child;h!==null;)QN(s,c,h),h=h.sibling}function QN(s,c,h){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(dh,h)}catch{}switch(h.tag){case 26:ln||Da(h,c),No(s,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ln||Da(h,c);var m=zt,x=Ci;Gs(h.type)&&(zt=h.stateNode,Ci=!1),No(s,c,h),Kh(h.stateNode),zt=m,Ci=x;break;case 5:ln||Da(h,c);case 6:if(m=zt,x=Ci,zt=null,No(s,c,h),zt=m,Ci=x,zt!==null)if(Ci)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(h.stateNode)}catch(E){vt(h,c,E)}else try{zt.removeChild(h.stateNode)}catch(E){vt(h,c,E)}break;case 18:zt!==null&&(Ci?(s=zt,PO(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),Ef(s)):PO(zt,h.stateNode));break;case 4:m=zt,x=Ci,zt=h.stateNode.containerInfo,Ci=!0,No(s,c,h),zt=m,Ci=x;break;case 0:case 11:case 14:case 15:Us(2,h,c),ln||Us(4,h,c),No(s,c,h);break;case 1:ln||(Da(h,c),m=h.stateNode,typeof m.componentWillUnmount=="function"&&qN(h,c,m)),No(s,c,h);break;case 21:No(s,c,h);break;case 22:ln=(m=ln)||h.memoizedState!==null,No(s,c,h),ln=m;break;default:No(s,c,h)}}function KN(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ef(s)}catch(h){vt(c,c.return,h)}}}function ZN(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ef(s)}catch(h){vt(c,c.return,h)}}function WV(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new XN),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new XN),c;default:throw Error(i(435,s.tag))}}function D0(s,c){var h=WV(s);c.forEach(function(m){if(!h.has(m)){h.add(m);var x=rW.bind(null,s,m);m.then(x,x)}})}function $i(s,c){var h=c.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],E=s,C=c,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(Gs(D.type)){zt=D.stateNode,Ci=!1;break e}break;case 5:zt=D.stateNode,Ci=!1;break e;case 3:case 4:zt=D.stateNode.containerInfo,Ci=!0;break e}D=D.return}if(zt===null)throw Error(i(160));QN(E,C,x),zt=null,Ci=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)JN(c,s),c=c.sibling}var Wr=null;function JN(s,c){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:$i(c,s),Ti(s),m&4&&(Us(3,s,s.return),Ih(3,s),Us(5,s,s.return));break;case 1:$i(c,s),Ti(s),m&512&&(ln||h===null||Da(h,h.return)),m&64&&Ro&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Wr;if($i(c,s),Ti(s),m&512&&(ln||h===null||Da(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[ph]||E[Dn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),zn(E,m,h),E[Dn]=s,bn(E),m=E;break e;case"link":var C=JO("link","href",x).get(m+(h.href||""));if(C){for(var D=0;D<C.length;D++)if(E=C[D],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(D,1);break t}}E=x.createElement(m),zn(E,m,h),x.head.appendChild(E);break;case"meta":if(C=JO("meta","content",x).get(m+(h.content||""))){for(D=0;D<C.length;D++)if(E=C[D],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(D,1);break t}}E=x.createElement(m),zn(E,m,h),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Dn]=s,bn(E),m=E}s.stateNode=m}else e5(x,s.type,s.stateNode);else s.stateNode=ZO(x,m,s.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?e5(x,s.type,s.stateNode):ZO(x,m,s.memoizedProps)):m===null&&s.stateNode!==null&&zS(s,s.memoizedProps,h.memoizedProps)}break;case 27:$i(c,s),Ti(s),m&512&&(ln||h===null||Da(h,h.return)),h!==null&&m&4&&zS(s,s.memoizedProps,h.memoizedProps);break;case 5:if($i(c,s),Ti(s),m&512&&(ln||h===null||Da(h,h.return)),s.flags&32){x=s.stateNode;try{Hc(x,"")}catch(Ae){vt(s,s.return,Ae)}}m&4&&s.stateNode!=null&&(x=s.memoizedProps,zS(s,x,h!==null?h.memoizedProps:x)),m&1024&&(US=!0);break;case 6:if($i(c,s),Ti(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(Ae){vt(s,s.return,Ae)}}break;case 3:if(X0=null,x=Wr,Wr=G0(c.containerInfo),$i(c,s),Wr=x,Ti(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Ef(c.containerInfo)}catch(Ae){vt(s,s.return,Ae)}US&&(US=!1,eO(s));break;case 4:m=Wr,Wr=G0(s.stateNode.containerInfo),$i(c,s),Ti(s),Wr=m;break;case 12:$i(c,s),Ti(s);break;case 31:$i(c,s),Ti(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,D0(s,m)));break;case 13:$i(c,s),Ti(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(N0=Gi()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,D0(s,m)));break;case 22:x=s.memoizedState!==null;var U=h!==null&&h.memoizedState!==null,W=Ro,ne=ln;if(Ro=W||x,ln=ne||U,$i(c,s),ln=ne,Ro=W,Ti(s),m&8192)e:for(c=s.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(h===null||U||Ro||ln||pu(s)),h=null,c=s;;){if(c.tag===5||c.tag===26){if(h===null){U=h=c;try{if(E=U.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=U.stateNode;var le=U.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ae){vt(U,U.return,Ae)}}}else if(c.tag===6){if(h===null){U=c;try{U.stateNode.nodeValue=x?"":U.memoizedProps}catch(Ae){vt(U,U.return,Ae)}}}else if(c.tag===18){if(h===null){U=c;try{var J=U.stateNode;x?qO(J,!0):qO(U.stateNode,!1)}catch(Ae){vt(U,U.return,Ae)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,D0(s,h))));break;case 19:$i(c,s),Ti(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,D0(s,m)));break;case 30:break;case 21:break;default:$i(c,s),Ti(s)}}function Ti(s){var c=s.flags;if(c&2){try{for(var h,m=s.return;m!==null;){if(GN(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,E=FS(s);k0(s,E,x);break;case 5:var C=h.stateNode;h.flags&32&&(Hc(C,""),h.flags&=-33);var D=FS(s);k0(s,D,C);break;case 3:case 4:var U=h.stateNode.containerInfo,W=FS(s);LS(s,W,U);break;default:throw Error(i(161))}}catch(ne){vt(s,s.return,ne)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function eO(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;eO(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function Oo(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)VN(s,c.alternate,c),c=c.sibling}function pu(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:Us(4,c,c.return),pu(c);break;case 1:Da(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&qN(c,c.return,h),pu(c);break;case 27:Kh(c.stateNode);case 26:case 5:Da(c,c.return),pu(c);break;case 22:c.memoizedState===null&&pu(c);break;case 30:pu(c);break;default:pu(c)}s=s.sibling}}function zo(s,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=s,E=c,C=E.flags;switch(E.tag){case 0:case 11:case 15:zo(x,E,h),Ih(4,E);break;case 1:if(zo(x,E,h),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){vt(m,m.return,W)}if(m=E,x=m.updateQueue,x!==null){var D=m.stateNode;try{var U=x.shared.hiddenCallbacks;if(U!==null)for(x.shared.hiddenCallbacks=null,x=0;x<U.length;x++)DR(U[x],D)}catch(W){vt(m,m.return,W)}}h&&C&64&&PN(E),Ph(E,E.return);break;case 27:YN(E);case 26:case 5:zo(x,E,h),h&&m===null&&C&4&&HN(E),Ph(E,E.return);break;case 12:zo(x,E,h);break;case 31:zo(x,E,h),h&&C&4&&KN(x,E);break;case 13:zo(x,E,h),h&&C&4&&ZN(x,E);break;case 22:E.memoizedState===null&&zo(x,E,h),Ph(E,E.return);break;case 30:break;default:zo(x,E,h)}c=c.sibling}}function jS(s,c){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Th(h))}function BS(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Th(s))}function Qr(s,c,h,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)tO(s,c,h,m),c=c.sibling}function tO(s,c,h,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Qr(s,c,h,m),x&2048&&Ih(9,c);break;case 1:Qr(s,c,h,m);break;case 3:Qr(s,c,h,m),x&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Th(s)));break;case 12:if(x&2048){Qr(s,c,h,m),s=c.stateNode;try{var E=c.memoizedProps,C=E.id,D=E.onPostCommit;typeof D=="function"&&D(C,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){vt(c,c.return,U)}}else Qr(s,c,h,m);break;case 31:Qr(s,c,h,m);break;case 13:Qr(s,c,h,m);break;case 23:break;case 22:E=c.stateNode,C=c.alternate,c.memoizedState!==null?E._visibility&2?Qr(s,c,h,m):qh(s,c):E._visibility&2?Qr(s,c,h,m):(E._visibility|=2,ff(s,c,h,m,(c.subtreeFlags&10256)!==0||!1)),x&2048&&jS(C,c);break;case 24:Qr(s,c,h,m),x&2048&&BS(c.alternate,c);break;default:Qr(s,c,h,m)}}function ff(s,c,h,m,x){for(x=x&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var E=s,C=c,D=h,U=m,W=C.flags;switch(C.tag){case 0:case 11:case 15:ff(E,C,D,U,x),Ih(8,C);break;case 23:break;case 22:var ne=C.stateNode;C.memoizedState!==null?ne._visibility&2?ff(E,C,D,U,x):qh(E,C):(ne._visibility|=2,ff(E,C,D,U,x)),x&&W&2048&&jS(C.alternate,C);break;case 24:ff(E,C,D,U,x),x&&W&2048&&BS(C.alternate,C);break;default:ff(E,C,D,U,x)}c=c.sibling}}function qh(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=s,m=c,x=m.flags;switch(m.tag){case 22:qh(h,m),x&2048&&jS(m.alternate,m);break;case 24:qh(h,m),x&2048&&BS(m.alternate,m);break;default:qh(h,m)}c=c.sibling}}var Hh=8192;function df(s,c,h){if(s.subtreeFlags&Hh)for(s=s.child;s!==null;)nO(s,c,h),s=s.sibling}function nO(s,c,h){switch(s.tag){case 26:df(s,c,h),s.flags&Hh&&s.memoizedState!==null&&zW(h,Wr,s.memoizedState,s.memoizedProps);break;case 5:df(s,c,h);break;case 3:case 4:var m=Wr;Wr=G0(s.stateNode.containerInfo),df(s,c,h),Wr=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=Hh,Hh=16777216,df(s,c,h),Hh=m):df(s,c,h));break;default:df(s,c,h)}}function iO(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Gh(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];xn=m,aO(m,s)}iO(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rO(s),s=s.sibling}function rO(s){switch(s.tag){case 0:case 11:case 15:Gh(s),s.flags&2048&&Us(9,s,s.return);break;case 3:Gh(s);break;case 12:Gh(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,R0(s)):Gh(s);break;default:Gh(s)}}function R0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];xn=m,aO(m,s)}iO(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:Us(8,c,c.return),R0(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,R0(c));break;default:R0(c)}s=s.sibling}}function aO(s,c){for(;xn!==null;){var h=xn;switch(h.tag){case 0:case 11:case 15:Us(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Th(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,xn=m;else e:for(h=s;xn!==null;){m=xn;var x=m.sibling,E=m.return;if(WN(m),m===h){xn=null;break e}if(x!==null){x.return=E,xn=x;break e}xn=E}}}var QV={getCacheForType:function(s){var c=Nn(an),h=c.data.get(s);return h===void 0&&(h=s(),c.data.set(s,h)),h},cacheSignal:function(){return Nn(an).controller.signal}},KV=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ct=null,Ke=null,Je=0,yt=0,Zi=null,js=!1,hf=!1,IS=!1,Fo=0,Gt=0,Bs=0,mu=0,PS=0,Ji=0,gf=0,Yh=null,Mi=null,qS=!1,N0=0,oO=0,O0=1/0,z0=null,Is=null,fn=0,Ps=null,pf=null,Lo=0,HS=0,GS=null,sO=null,Xh=0,YS=null;function er(){return(dt&2)!==0&&Je!==0?Je&-Je:R.T!==null?ZS():_D()}function lO(){if(Ji===0)if((Je&536870912)===0||nt){var s=qm;qm<<=1,(qm&3932160)===0&&(qm=262144),Ji=s}else Ji=536870912;return s=Qi.current,s!==null&&(s.flags|=32),Ji}function ki(s,c,h){(s===Ct&&(yt===2||yt===9)||s.cancelPendingCommit!==null)&&(mf(s,0),qs(s,Je,Ji,!1)),gh(s,h),((dt&2)===0||s!==Ct)&&(s===Ct&&((dt&2)===0&&(mu|=h),Gt===4&&qs(s,Je,Ji,!1)),Ra(s))}function uO(s,c,h){if((dt&6)!==0)throw Error(i(327));var m=!h&&(c&127)===0&&(c&s.expiredLanes)===0||hh(s,c),x=m?eW(s,c):VS(s,c,!0),E=m;do{if(x===0){hf&&!m&&qs(s,c,0,!1);break}else{if(h=s.current.alternate,E&&!ZV(h)){x=VS(s,c,!1),E=!1;continue}if(x===2){if(E=c,s.errorRecoveryDisabledLanes&E)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var D=s;x=Yh;var U=D.current.memoizedState.isDehydrated;if(U&&(mf(D,C).flags|=256),C=VS(D,C,!1),C!==2){if(IS&&!U){D.errorRecoveryDisabledLanes|=E,mu|=E,x=4;break e}E=Mi,Mi=x,E!==null&&(Mi===null?Mi=E:Mi.push.apply(Mi,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){mf(s,0),qs(s,c,0,!0);break}e:{switch(m=s,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:qs(m,c,Ji,!js);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=N0+300-Gi(),10<x)){if(qs(m,c,Ji,!js),Gm(m,0,!0)!==0)break e;Lo=c,m.timeoutHandle=BO(cO.bind(null,m,h,Mi,z0,qS,c,Ji,mu,gf,js,E,"Throttled",-0,0),x);break e}cO(m,h,Mi,z0,qS,c,Ji,mu,gf,js,E,null,-0,0)}}break}while(!0);Ra(s)}function cO(s,c,h,m,x,E,C,D,U,W,ne,le,Q,J){if(s.timeoutHandle=-1,le=c.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Eo},nO(c,E,le);var Ae=(E&62914560)===E?N0-Gi():(E&4194048)===E?oO-Gi():0;if(Ae=FW(le,Ae),Ae!==null){Lo=E,s.cancelPendingCommit=Ae(vO.bind(null,s,c,E,h,m,x,C,D,U,ne,le,null,Q,J)),qs(s,E,C,!W);return}}vO(s,c,E,h,m,x,C,D,U)}function ZV(s){for(var c=s;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],E=x.getSnapshot;x=x.value;try{if(!Vi(E(),x))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function qs(s,c,h,m){c&=~PS,c&=~mu,s.suspendedLanes|=c,s.pingedLanes&=~c,m&&(s.warmLanes|=c),m=s.expirationTimes;for(var x=c;0<x;){var E=31-Xi(x),C=1<<E;m[E]=-1,x&=~C}h!==0&&xD(s,h,c)}function F0(){return(dt&6)===0?(Vh(0),!1):!0}function XS(){if(Ke!==null){if(yt===0)var s=Ke.return;else s=Ke,Co=su=null,uS(s),of=null,kh=0,s=Ke;for(;s!==null;)IN(s.alternate,s),s=s.return;Ke=null}}function mf(s,c){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,vW(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Lo=0,XS(),Ct=s,Ke=h=wo(s.current,null),Je=c,yt=0,Zi=null,js=!1,hf=hh(s,c),IS=!1,gf=Ji=PS=mu=Bs=Gt=0,Mi=Yh=null,qS=!1,(c&8)!==0&&(c|=c&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=c;0<m;){var x=31-Xi(m),E=1<<x;c|=s[x],m&=~E}return Fo=c,i0(),h}function fO(s,c){qe=null,R.H=Uh,c===af||c===f0?(c=$R(),yt=3):c===K2?(c=$R(),yt=4):yt=c===AS?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Zi=c,Ke===null&&(Gt=1,A0(s,xr(c,s.current)))}function dO(){var s=Qi.current;return s===null?!0:(Je&4194048)===Je?wr===null:(Je&62914560)===Je||(Je&536870912)!==0?s===wr:!1}function hO(){var s=R.H;return R.H=Uh,s===null?Uh:s}function gO(){var s=R.A;return R.A=QV,s}function L0(){Gt=4,js||(Je&4194048)!==Je&&Qi.current!==null||(hf=!0),(Bs&134217727)===0&&(mu&134217727)===0||Ct===null||qs(Ct,Je,Ji,!1)}function VS(s,c,h){var m=dt;dt|=2;var x=hO(),E=gO();(Ct!==s||Je!==c)&&(z0=null,mf(s,c)),c=!1;var C=Gt;e:do try{if(yt!==0&&Ke!==null){var D=Ke,U=Zi;switch(yt){case 8:XS(),C=6;break e;case 3:case 2:case 9:case 6:Qi.current===null&&(c=!0);var W=yt;if(yt=0,Zi=null,yf(s,D,U,W),h&&hf){C=0;break e}break;default:W=yt,yt=0,Zi=null,yf(s,D,U,W)}}JV(),C=Gt;break}catch(ne){fO(s,ne)}while(!0);return c&&s.shellSuspendCounter++,Co=su=null,dt=m,R.H=x,R.A=E,Ke===null&&(Ct=null,Je=0,i0()),C}function JV(){for(;Ke!==null;)pO(Ke)}function eW(s,c){var h=dt;dt|=2;var m=hO(),x=gO();Ct!==s||Je!==c?(z0=null,O0=Gi()+500,mf(s,c)):hf=hh(s,c);e:do try{if(yt!==0&&Ke!==null){c=Ke;var E=Zi;t:switch(yt){case 1:yt=0,Zi=null,yf(s,c,E,1);break;case 2:case 9:if(AR(E)){yt=0,Zi=null,mO(c);break}c=function(){yt!==2&&yt!==9||Ct!==s||(yt=7),Ra(s)},E.then(c,c);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:AR(E)?(yt=0,Zi=null,mO(c)):(yt=0,Zi=null,yf(s,c,E,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var D=Ke;if(C?t5(C):D.stateNode.complete){yt=0,Zi=null;var U=D.sibling;if(U!==null)Ke=U;else{var W=D.return;W!==null?(Ke=W,U0(W)):Ke=null}break t}}yt=0,Zi=null,yf(s,c,E,5);break;case 6:yt=0,Zi=null,yf(s,c,E,6);break;case 8:XS(),Gt=6;break e;default:throw Error(i(462))}}tW();break}catch(ne){fO(s,ne)}while(!0);return Co=su=null,R.H=m,R.A=x,dt=h,Ke!==null?0:(Ct=null,Je=0,i0(),Gt)}function tW(){for(;Ke!==null&&!wX();)pO(Ke)}function pO(s){var c=jN(s.alternate,s,Fo);s.memoizedProps=s.pendingProps,c===null?U0(s):Ke=c}function mO(s){var c=s,h=c.alternate;switch(c.tag){case 15:case 0:c=NN(h,c,c.pendingProps,c.type,void 0,Je);break;case 11:c=NN(h,c,c.pendingProps,c.type.render,c.ref,Je);break;case 5:uS(c);default:IN(h,c),c=Ke=gR(c,Fo),c=jN(h,c,Fo)}s.memoizedProps=s.pendingProps,c===null?U0(s):Ke=c}function yf(s,c,h,m){Co=su=null,uS(c),of=null,kh=0;var x=c.return;try{if(qV(s,x,c,h,Je)){Gt=1,A0(s,xr(h,s.current)),Ke=null;return}}catch(E){if(x!==null)throw Ke=x,E;Gt=1,A0(s,xr(h,s.current)),Ke=null;return}c.flags&32768?(nt||m===1?s=!0:hf||(Je&536870912)!==0?s=!1:(js=s=!0,(m===2||m===9||m===3||m===6)&&(m=Qi.current,m!==null&&m.tag===13&&(m.flags|=16384))),yO(c,s)):U0(c)}function U0(s){var c=s;do{if((c.flags&32768)!==0){yO(c,js);return}s=c.return;var h=YV(c.alternate,c,Fo);if(h!==null){Ke=h;return}if(c=c.sibling,c!==null){Ke=c;return}Ke=c=s}while(c!==null);Gt===0&&(Gt=5)}function yO(s,c){do{var h=XV(s.alternate,s);if(h!==null){h.flags&=32767,Ke=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=h}while(s!==null);Gt=6,Ke=null}function vO(s,c,h,m,x,E,C,D,U){s.cancelPendingCommit=null;do j0();while(fn!==0);if((dt&6)!==0)throw Error(i(327));if(c!==null){if(c===s.current)throw Error(i(177));if(E=c.lanes|c.childLanes,E|=F2,OX(s,h,E,C,D,U),s===Ct&&(Ke=Ct=null,Je=0),pf=c,Ps=s,Lo=h,HS=E,GS=x,sO=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,aW(Im,function(){return _O(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=R.T,R.T=null,x=I.p,I.p=2,C=dt,dt|=4;try{VV(s,c,h)}finally{dt=C,I.p=x,R.T=m}}fn=1,bO(),xO(),SO()}}function bO(){if(fn===1){fn=0;var s=Ps,c=pf,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=R.T,R.T=null;var m=I.p;I.p=2;var x=dt;dt|=4;try{JN(c,s);var E=oE,C=aR(s.containerInfo),D=E.focusedElem,U=E.selectionRange;if(C!==D&&D&&D.ownerDocument&&rR(D.ownerDocument.documentElement,D)){if(U!==null&&D2(D)){var W=U.start,ne=U.end;if(ne===void 0&&(ne=W),"selectionStart"in D)D.selectionStart=W,D.selectionEnd=Math.min(ne,D.value.length);else{var le=D.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),Ae=D.textContent.length,Fe=Math.min(U.start,Ae),wt=U.end===void 0?Fe:Math.min(U.end,Ae);!J.extend&&Fe>wt&&(C=wt,wt=Fe,Fe=C);var H=iR(D,Fe),P=iR(D,wt);if(H&&P&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==P.node||J.focusOffset!==P.offset)){var V=le.createRange();V.setStart(H.node,H.offset),J.removeAllRanges(),Fe>wt?(J.addRange(V),J.extend(P.node,P.offset)):(V.setEnd(P.node,P.offset),J.addRange(V))}}}}for(le=[],J=D;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<le.length;D++){var oe=le[D];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}K0=!!aE,oE=aE=null}finally{dt=x,I.p=m,R.T=h}}s.current=c,fn=2}}function xO(){if(fn===2){fn=0;var s=Ps,c=pf,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=R.T,R.T=null;var m=I.p;I.p=2;var x=dt;dt|=4;try{VN(s,c.alternate,c)}finally{dt=x,I.p=m,R.T=h}}fn=3}}function SO(){if(fn===4||fn===3){fn=0,AX();var s=Ps,c=pf,h=Lo,m=sO;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?fn=5:(fn=0,pf=Ps=null,EO(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Is=null),d2(h),c=c.stateNode,Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(dh,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=R.T,x=I.p,I.p=2,R.T=null;try{for(var E=s.onRecoverableError,C=0;C<m.length;C++){var D=m[C];E(D.value,{componentStack:D.stack})}}finally{R.T=c,I.p=x}}(Lo&3)!==0&&j0(),Ra(s),x=s.pendingLanes,(h&261930)!==0&&(x&42)!==0?s===YS?Xh++:(Xh=0,YS=s):Xh=0,Vh(0)}}function EO(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Th(c)))}function j0(){return bO(),xO(),SO(),_O()}function _O(){if(fn!==5)return!1;var s=Ps,c=HS;HS=0;var h=d2(Lo),m=R.T,x=I.p;try{I.p=32>h?32:h,R.T=null,h=GS,GS=null;var E=Ps,C=Lo;if(fn=0,pf=Ps=null,Lo=0,(dt&6)!==0)throw Error(i(331));var D=dt;if(dt|=4,rO(E.current),tO(E,E.current,C,h),dt=D,Vh(0,!1),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(dh,E)}catch{}return!0}finally{I.p=x,R.T=m,EO(s,c)}}function wO(s,c,h){c=xr(h,c),c=wS(s.stateNode,c,2),s=zs(s,c,2),s!==null&&(gh(s,2),Ra(s))}function vt(s,c,h){if(s.tag===3)wO(s,s,h);else for(;c!==null;){if(c.tag===3){wO(c,s,h);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Is===null||!Is.has(m))){s=xr(h,s),h=AN(2),m=zs(c,h,2),m!==null&&(CN(h,m,c,s),gh(m,2),Ra(m));break}}c=c.return}}function WS(s,c,h){var m=s.pingCache;if(m===null){m=s.pingCache=new KV;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(h)||(IS=!0,x.add(h),s=nW.bind(null,s,c,h),c.then(s,s))}function nW(s,c,h){var m=s.pingCache;m!==null&&m.delete(c),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Ct===s&&(Je&h)===h&&(Gt===4||Gt===3&&(Je&62914560)===Je&&300>Gi()-N0?(dt&2)===0&&mf(s,0):PS|=h,gf===Je&&(gf=0)),Ra(s)}function AO(s,c){c===0&&(c=bD()),s=ru(s,c),s!==null&&(gh(s,c),Ra(s))}function iW(s){var c=s.memoizedState,h=0;c!==null&&(h=c.retryLane),AO(s,h)}function rW(s,c){var h=0;switch(s.tag){case 31:case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),AO(s,h)}function aW(s,c){return l2(s,c)}var B0=null,vf=null,QS=!1,I0=!1,KS=!1,Hs=0;function Ra(s){s!==vf&&s.next===null&&(vf===null?B0=vf=s:vf=vf.next=s),I0=!0,QS||(QS=!0,sW())}function Vh(s,c){if(!KS&&I0){KS=!0;do for(var h=!1,m=B0;m!==null;){if(s!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-Xi(42|s)+1)-1,E&=x&~(C&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,MO(m,E))}else E=Je,E=Gm(m,m===Ct?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||hh(m,E)||(h=!0,MO(m,E));m=m.next}while(h);KS=!1}}function oW(){CO()}function CO(){I0=QS=!1;var s=0;Hs!==0&&yW()&&(s=Hs);for(var c=Gi(),h=null,m=B0;m!==null;){var x=m.next,E=$O(m,c);E===0?(m.next=null,h===null?B0=x:h.next=x,x===null&&(vf=h)):(h=m,(s!==0||(E&3)!==0)&&(I0=!0)),m=x}fn!==0&&fn!==5||Vh(s),Hs!==0&&(Hs=0)}function $O(s,c){for(var h=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var C=31-Xi(E),D=1<<C,U=x[C];U===-1?((D&h)===0||(D&m)!==0)&&(x[C]=NX(D,c)):U<=c&&(s.expiredLanes|=D),E&=~D}if(c=Ct,h=Je,h=Gm(s,s===c?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===c&&(yt===2||yt===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&u2(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||hh(s,h)){if(c=h&-h,c===s.callbackPriority)return c;switch(m!==null&&u2(m),d2(h)){case 2:case 8:h=yD;break;case 32:h=Im;break;case 268435456:h=vD;break;default:h=Im}return m=TO.bind(null,s),h=l2(h,m),s.callbackPriority=c,s.callbackNode=h,c}return m!==null&&m!==null&&u2(m),s.callbackPriority=2,s.callbackNode=null,2}function TO(s,c){if(fn!==0&&fn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(j0()&&s.callbackNode!==h)return null;var m=Je;return m=Gm(s,s===Ct?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(uO(s,m,c),$O(s,Gi()),s.callbackNode!=null&&s.callbackNode===h?TO.bind(null,s):null)}function MO(s,c){if(j0())return null;uO(s,c,!0)}function sW(){bW(function(){(dt&6)!==0?l2(mD,oW):CO()})}function ZS(){if(Hs===0){var s=nf;s===0&&(s=Pm,Pm<<=1,(Pm&261888)===0&&(Pm=256)),Hs=s}return Hs}function kO(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wm(""+s)}function DO(s,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,s.id&&h.setAttribute("form",s.id),c.parentNode.insertBefore(h,c),s=new FormData(s),h.parentNode.removeChild(h),s}function lW(s,c,h,m,x){if(c==="submit"&&h&&h.stateNode===x){var E=kO((x[wi]||null).action),C=m.submitter;C&&(c=(c=C[wi]||null)?kO(c.formAction):C.getAttribute("formAction"),c!==null&&(E=c,C=null));var D=new Jm("action","action",null,m,x);s.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Hs!==0){var U=C?DO(x,C):new FormData(x);vS(h,{pending:!0,data:U,method:x.method,action:E},null,U)}}else typeof E=="function"&&(D.preventDefault(),U=C?DO(x,C):new FormData(x),vS(h,{pending:!0,data:U,method:x.method,action:E},E,U))},currentTarget:x}]})}}for(var JS=0;JS<z2.length;JS++){var eE=z2[JS],uW=eE.toLowerCase(),cW=eE[0].toUpperCase()+eE.slice(1);Vr(uW,"on"+cW)}Vr(lR,"onAnimationEnd"),Vr(uR,"onAnimationIteration"),Vr(cR,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(CV,"onTransitionRun"),Vr($V,"onTransitionStart"),Vr(TV,"onTransitionCancel"),Vr(fR,"onTransitionEnd"),Pc("onMouseEnter",["mouseout","mouseover"]),Pc("onMouseLeave",["mouseout","mouseover"]),Pc("onPointerEnter",["pointerout","pointerover"]),Pc("onPointerLeave",["pointerout","pointerover"]),eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eu("onBeforeInput",["compositionend","keypress","textInput","paste"]),eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wh));function RO(s,c){c=(c&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var C=m.length-1;0<=C;C--){var D=m[C],U=D.instance,W=D.currentTarget;if(D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=W;try{E(x)}catch(ne){n0(ne)}x.currentTarget=null,E=U}else for(C=0;C<m.length;C++){if(D=m[C],U=D.instance,W=D.currentTarget,D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=W;try{E(x)}catch(ne){n0(ne)}x.currentTarget=null,E=U}}}}function Ze(s,c){var h=c[h2];h===void 0&&(h=c[h2]=new Set);var m=s+"__bubble";h.has(m)||(NO(c,s,2,!1),h.add(m))}function tE(s,c,h){var m=0;c&&(m|=4),NO(h,s,m,c)}var P0="_reactListening"+Math.random().toString(36).slice(2);function nE(s){if(!s[P0]){s[P0]=!0,CD.forEach(function(h){h!=="selectionchange"&&(fW.has(h)||tE(h,!1,s),tE(h,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[P0]||(c[P0]=!0,tE("selectionchange",!1,c))}}function NO(s,c,h,m){switch(l5(c)){case 2:var x=jW;break;case 8:x=BW;break;default:x=yE}h=x.bind(null,c,h,s),x=void 0,!E2||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(c,h,{capture:!0,passive:x}):s.addEventListener(c,h,!0):x!==void 0?s.addEventListener(c,h,{passive:x}):s.addEventListener(c,h,!1)}function iE(s,c,h,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var D=m.stateNode.containerInfo;if(D===x)break;if(C===4)for(C=m.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;D!==null;){if(C=jc(D),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){m=E=C;continue e}D=D.parentNode}}m=m.return}UD(function(){var W=E,ne=x2(h),le=[];e:{var Q=dR.get(s);if(Q!==void 0){var J=Jm,Ae=s;switch(s){case"keypress":if(Km(h)===0)break e;case"keydown":case"keyup":J=rV;break;case"focusin":Ae="focus",J=C2;break;case"focusout":Ae="blur",J=C2;break;case"beforeblur":case"afterblur":J=C2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ID;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=YX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=sV;break;case lR:case uR:case cR:J=WX;break;case fR:J=uV;break;case"scroll":case"scrollend":J=HX;break;case"wheel":J=fV;break;case"copy":case"cut":case"paste":J=KX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=qD;break;case"toggle":case"beforetoggle":J=hV}var Fe=(c&4)!==0,wt=!Fe&&(s==="scroll"||s==="scrollend"),H=Fe?Q!==null?Q+"Capture":null:Q;Fe=[];for(var P=W,V;P!==null;){var oe=P;if(V=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||V===null||H===null||(oe=yh(P,H),oe!=null&&Fe.push(Qh(P,oe,V))),wt)break;P=P.return}0<Fe.length&&(Q=new J(Q,Ae,null,h,ne),le.push({event:Q,listeners:Fe}))}}if((c&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",Q&&h!==b2&&(Ae=h.relatedTarget||h.fromElement)&&(jc(Ae)||Ae[Uc]))break e;if((J||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(Ae=h.relatedTarget||h.toElement,J=W,Ae=Ae?jc(Ae):null,Ae!==null&&(wt=a(Ae),Fe=Ae.tag,Ae!==wt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ae=null)):(J=null,Ae=W),J!==Ae)){if(Fe=ID,oe="onMouseLeave",H="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=qD,oe="onPointerLeave",H="onPointerEnter",P="pointer"),wt=J==null?Q:mh(J),V=Ae==null?Q:mh(Ae),Q=new Fe(oe,P+"leave",J,h,ne),Q.target=wt,Q.relatedTarget=V,oe=null,jc(ne)===W&&(Fe=new Fe(H,P+"enter",Ae,h,ne),Fe.target=V,Fe.relatedTarget=wt,oe=Fe),wt=oe,J&&Ae)t:{for(Fe=dW,H=J,P=Ae,V=0,oe=H;oe;oe=Fe(oe))V++;oe=0;for(var Re=P;Re;Re=Fe(Re))oe++;for(;0<V-oe;)H=Fe(H),V--;for(;0<oe-V;)P=Fe(P),oe--;for(;V--;){if(H===P||P!==null&&H===P.alternate){Fe=H;break t}H=Fe(H),P=Fe(P)}Fe=null}else Fe=null;J!==null&&OO(le,Q,J,Fe,!1),Ae!==null&&wt!==null&&OO(le,wt,Ae,Fe,!0)}}e:{if(Q=W?mh(W):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var ot=KD;else if(WD(Q))if(ZD)ot=_V;else{ot=SV;var $e=xV}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&v2(W.elementType)&&(ot=KD):ot=EV;if(ot&&(ot=ot(s,W))){QD(le,ot,h,ne);break e}$e&&$e(s,Q,W),s==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&y2(Q,"number",Q.value)}switch($e=W?mh(W):window,s){case"focusin":(WD($e)||$e.contentEditable==="true")&&(Vc=$e,R2=W,Ah=null);break;case"focusout":Ah=R2=Vc=null;break;case"mousedown":N2=!0;break;case"contextmenu":case"mouseup":case"dragend":N2=!1,oR(le,h,ne);break;case"selectionchange":if(AV)break;case"keydown":case"keyup":oR(le,h,ne)}var Ge;if(T2)e:{switch(s){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Xc?XD(s,h)&&(et="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(et="onCompositionStart");et&&(HD&&h.locale!=="ko"&&(Xc||et!=="onCompositionStart"?et==="onCompositionEnd"&&Xc&&(Ge=jD()):(Ts=ne,_2="value"in Ts?Ts.value:Ts.textContent,Xc=!0)),$e=q0(W,et),0<$e.length&&(et=new PD(et,s,null,h,ne),le.push({event:et,listeners:$e}),Ge?et.data=Ge:(Ge=VD(h),Ge!==null&&(et.data=Ge)))),(Ge=pV?mV(s,h):yV(s,h))&&(et=q0(W,"onBeforeInput"),0<et.length&&($e=new PD("onBeforeInput","beforeinput",null,h,ne),le.push({event:$e,listeners:et}),$e.data=Ge)),lW(le,s,W,h,ne)}RO(le,c)})}function Qh(s,c,h){return{instance:s,listener:c,currentTarget:h}}function q0(s,c){for(var h=c+"Capture",m=[];s!==null;){var x=s,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=yh(s,h),x!=null&&m.unshift(Qh(s,x,E)),x=yh(s,c),x!=null&&m.push(Qh(s,x,E))),s.tag===3)return m;s=s.return}return[]}function dW(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function OO(s,c,h,m,x){for(var E=c._reactName,C=[];h!==null&&h!==m;){var D=h,U=D.alternate,W=D.stateNode;if(D=D.tag,U!==null&&U===m)break;D!==5&&D!==26&&D!==27||W===null||(U=W,x?(W=yh(h,E),W!=null&&C.unshift(Qh(h,W,U))):x||(W=yh(h,E),W!=null&&C.push(Qh(h,W,U)))),h=h.return}C.length!==0&&s.push({event:c,listeners:C})}var hW=/\r\n?/g,gW=/\u0000|\uFFFD/g;function zO(s){return(typeof s=="string"?s:""+s).replace(hW,`
`).replace(gW,"")}function FO(s,c){return c=zO(c),zO(s)===c}function _t(s,c,h,m,x,E){switch(h){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Hc(s,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Hc(s,""+m);break;case"className":Xm(s,"class",m);break;case"tabIndex":Xm(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Xm(s,h,m);break;case"style":FD(s,m,E);break;case"data":if(c!=="object"){Xm(s,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Wm(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(c!=="input"&&_t(s,c,"name",x.name,x,null),_t(s,c,"formEncType",x.formEncType,x,null),_t(s,c,"formMethod",x.formMethod,x,null),_t(s,c,"formTarget",x.formTarget,x,null)):(_t(s,c,"encType",x.encType,x,null),_t(s,c,"method",x.method,x,null),_t(s,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Wm(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Eo);break;case"onScroll":m!=null&&Ze("scroll",s);break;case"onScrollEnd":m!=null&&Ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=Wm(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":Ze("beforetoggle",s),Ze("toggle",s),Ym(s,"popover",m);break;case"xlinkActuate":So(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":So(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":So(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":So(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":So(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":So(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":So(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":So(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":So(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ym(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=PX.get(h)||h,Ym(s,h,m))}}function rE(s,c,h,m,x,E){switch(h){case"style":FD(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof m=="string"?Hc(s,m):(typeof m=="number"||typeof m=="bigint")&&Hc(s,""+m);break;case"onScroll":m!=null&&Ze("scroll",s);break;case"onScrollEnd":m!=null&&Ze("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Eo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$D.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),c=h.slice(2,x?h.length-7:void 0),E=s[wi]||null,E=E!=null?E[h]:null,typeof E=="function"&&s.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(c,m,x);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):Ym(s,h,m)}}}function zn(s,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",s),Ze("load",s);var m=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var C=h[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:_t(s,c,E,C,h,null)}}x&&_t(s,c,"srcSet",h.srcSet,h,null),m&&_t(s,c,"src",h.src,h,null);return;case"input":Ze("invalid",s);var D=E=C=x=null,U=null,W=null;for(m in h)if(h.hasOwnProperty(m)){var ne=h[m];if(ne!=null)switch(m){case"name":x=ne;break;case"type":C=ne;break;case"checked":U=ne;break;case"defaultChecked":W=ne;break;case"value":E=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,c));break;default:_t(s,c,m,ne,h,null)}}RD(s,E,D,U,W,C,x,!1);return;case"select":Ze("invalid",s),m=C=E=null;for(x in h)if(h.hasOwnProperty(x)&&(D=h[x],D!=null))switch(x){case"value":E=D;break;case"defaultValue":C=D;break;case"multiple":m=D;default:_t(s,c,x,D,h,null)}c=E,h=C,s.multiple=!!m,c!=null?qc(s,!!m,c,!1):h!=null&&qc(s,!!m,h,!0);return;case"textarea":Ze("invalid",s),E=x=m=null;for(C in h)if(h.hasOwnProperty(C)&&(D=h[C],D!=null))switch(C){case"value":m=D;break;case"defaultValue":x=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:_t(s,c,C,D,h,null)}OD(s,m,x,E);return;case"option":for(U in h)if(h.hasOwnProperty(U)&&(m=h[U],m!=null))switch(U){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(s,c,U,m,h,null)}return;case"dialog":Ze("beforetoggle",s),Ze("toggle",s),Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":Ze("load",s);break;case"video":case"audio":for(m=0;m<Wh.length;m++)Ze(Wh[m],s);break;case"image":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"embed":case"source":case"link":Ze("error",s),Ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in h)if(h.hasOwnProperty(W)&&(m=h[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:_t(s,c,W,m,h,null)}return;default:if(v2(c)){for(ne in h)h.hasOwnProperty(ne)&&(m=h[ne],m!==void 0&&rE(s,c,ne,m,h,void 0));return}}for(D in h)h.hasOwnProperty(D)&&(m=h[D],m!=null&&_t(s,c,D,m,h,null))}function pW(s,c,h,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,D=null,U=null,W=null,ne=null;for(J in h){var le=h[J];if(h.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":U=le;default:m.hasOwnProperty(J)||_t(s,c,J,null,m,le)}}for(var Q in m){var J=m[Q];if(le=h[Q],m.hasOwnProperty(Q)&&(J!=null||le!=null))switch(Q){case"type":E=J;break;case"name":x=J;break;case"checked":W=J;break;case"defaultChecked":ne=J;break;case"value":C=J;break;case"defaultValue":D=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,c));break;default:J!==le&&_t(s,c,Q,J,m,le)}}m2(s,C,D,U,W,ne,E,x);return;case"select":J=C=D=Q=null;for(E in h)if(U=h[E],h.hasOwnProperty(E)&&U!=null)switch(E){case"value":break;case"multiple":J=U;default:m.hasOwnProperty(E)||_t(s,c,E,null,m,U)}for(x in m)if(E=m[x],U=h[x],m.hasOwnProperty(x)&&(E!=null||U!=null))switch(x){case"value":Q=E;break;case"defaultValue":D=E;break;case"multiple":C=E;default:E!==U&&_t(s,c,x,E,m,U)}c=D,h=C,m=J,Q!=null?qc(s,!!h,Q,!1):!!m!=!!h&&(c!=null?qc(s,!!h,c,!0):qc(s,!!h,h?[]:"",!1));return;case"textarea":J=Q=null;for(D in h)if(x=h[D],h.hasOwnProperty(D)&&x!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:_t(s,c,D,null,m,x)}for(C in m)if(x=m[C],E=h[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":Q=x;break;case"defaultValue":J=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&_t(s,c,C,x,m,E)}ND(s,Q,J);return;case"option":for(var Ae in h)if(Q=h[Ae],h.hasOwnProperty(Ae)&&Q!=null&&!m.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:_t(s,c,Ae,null,m,Q)}for(U in m)if(Q=m[U],J=h[U],m.hasOwnProperty(U)&&Q!==J&&(Q!=null||J!=null))switch(U){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(s,c,U,Q,m,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in h)Q=h[Fe],h.hasOwnProperty(Fe)&&Q!=null&&!m.hasOwnProperty(Fe)&&_t(s,c,Fe,null,m,Q);for(W in m)if(Q=m[W],J=h[W],m.hasOwnProperty(W)&&Q!==J&&(Q!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:_t(s,c,W,Q,m,J)}return;default:if(v2(c)){for(var wt in h)Q=h[wt],h.hasOwnProperty(wt)&&Q!==void 0&&!m.hasOwnProperty(wt)&&rE(s,c,wt,void 0,m,Q);for(ne in m)Q=m[ne],J=h[ne],!m.hasOwnProperty(ne)||Q===J||Q===void 0&&J===void 0||rE(s,c,ne,Q,m,J);return}}for(var H in h)Q=h[H],h.hasOwnProperty(H)&&Q!=null&&!m.hasOwnProperty(H)&&_t(s,c,H,null,m,Q);for(le in m)Q=m[le],J=h[le],!m.hasOwnProperty(le)||Q===J||Q==null&&J==null||_t(s,c,le,Q,m,J)}function LO(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mW(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var x=h[m],E=x.transferSize,C=x.initiatorType,D=x.duration;if(E&&D&&LO(C)){for(C=0,D=x.responseEnd,m+=1;m<h.length;m++){var U=h[m],W=U.startTime;if(W>D)break;var ne=U.transferSize,le=U.initiatorType;ne&&LO(le)&&(U=U.responseEnd,C+=ne*(U<D?1:(D-W)/(U-W)))}if(--m,c+=8*(E+C)/(x.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var aE=null,oE=null;function H0(s){return s.nodeType===9?s:s.ownerDocument}function UO(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jO(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function sE(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var lE=null;function yW(){var s=window.event;return s&&s.type==="popstate"?s===lE?!1:(lE=s,!0):(lE=null,!1)}var BO=typeof setTimeout=="function"?setTimeout:void 0,vW=typeof clearTimeout=="function"?clearTimeout:void 0,IO=typeof Promise=="function"?Promise:void 0,bW=typeof queueMicrotask=="function"?queueMicrotask:typeof IO<"u"?function(s){return IO.resolve(null).then(s).catch(xW)}:BO;function xW(s){setTimeout(function(){throw s})}function Gs(s){return s==="head"}function PO(s,c){var h=c,m=0;do{var x=h.nextSibling;if(s.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(m===0){s.removeChild(x),Ef(c);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Kh(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,Kh(h);for(var E=h.firstChild;E;){var C=E.nextSibling,D=E.nodeName;E[ph]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=C}}else h==="body"&&Kh(s.ownerDocument.body);h=x}while(h);Ef(c)}function qO(s,c){var h=s;s=0;do{var m=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=m}while(h)}function uE(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":uE(h),g2(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function SW(s,c,h,m){for(;s.nodeType===1;){var x=h;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[ph])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=Ar(s.nextSibling),s===null)break}return null}function EW(s,c,h){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Ar(s.nextSibling),s===null))return null;return s}function HO(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ar(s.nextSibling),s===null))return null;return s}function cE(s){return s.data==="$?"||s.data==="$~"}function fE(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function _W(s,c){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||h.readyState!=="loading")c();else{var m=function(){c(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Ar(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var dE=null;function GO(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(c===0)return Ar(s.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}s=s.nextSibling}return null}function YO(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return s;c--}else h!=="/$"&&h!=="/&"||c++}s=s.previousSibling}return null}function XO(s,c,h){switch(c=H0(h),s){case"html":if(s=c.documentElement,!s)throw Error(i(452));return s;case"head":if(s=c.head,!s)throw Error(i(453));return s;case"body":if(s=c.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Kh(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);g2(s)}var Cr=new Map,VO=new Set;function G0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Uo=I.d;I.d={f:wW,r:AW,D:CW,C:$W,L:TW,m:MW,X:DW,S:kW,M:RW};function wW(){var s=Uo.f(),c=F0();return s||c}function AW(s){var c=Bc(s);c!==null&&c.tag===5&&c.type==="form"?fN(c):Uo.r(s)}var bf=typeof document>"u"?null:document;function WO(s,c,h){var m=bf;if(m&&typeof c=="string"&&c){var x=vr(c);x='link[rel="'+s+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),VO.has(x)||(VO.add(x),s={rel:s,crossOrigin:h,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),zn(c,"link",s),bn(c),m.head.appendChild(c)))}}function CW(s){Uo.D(s),WO("dns-prefetch",s,null)}function $W(s,c){Uo.C(s,c),WO("preconnect",s,c)}function TW(s,c,h){Uo.L(s,c,h);var m=bf;if(m&&s&&c){var x='link[rel="preload"][as="'+vr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+vr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+vr(h.imageSizes)+'"]')):x+='[href="'+vr(s)+'"]';var E=x;switch(c){case"style":E=xf(s);break;case"script":E=Sf(s)}Cr.has(E)||(s=g({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:s,as:c},h),Cr.set(E,s),m.querySelector(x)!==null||c==="style"&&m.querySelector(Zh(E))||c==="script"&&m.querySelector(Jh(E))||(c=m.createElement("link"),zn(c,"link",s),bn(c),m.head.appendChild(c)))}}function MW(s,c){Uo.m(s,c);var h=bf;if(h&&s){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+vr(m)+'"][href="'+vr(s)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Sf(s)}if(!Cr.has(E)&&(s=g({rel:"modulepreload",href:s},c),Cr.set(E,s),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jh(E)))return}m=h.createElement("link"),zn(m,"link",s),bn(m),h.head.appendChild(m)}}}function kW(s,c,h){Uo.S(s,c,h);var m=bf;if(m&&s){var x=Ic(m).hoistableStyles,E=xf(s);c=c||"default";var C=x.get(E);if(!C){var D={loading:0,preload:null};if(C=m.querySelector(Zh(E)))D.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":c},h),(h=Cr.get(E))&&hE(s,h);var U=C=m.createElement("link");bn(U),zn(U,"link",s),U._p=new Promise(function(W,ne){U.onload=W,U.onerror=ne}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Y0(C,c,m)}C={type:"stylesheet",instance:C,count:1,state:D},x.set(E,C)}}}function DW(s,c){Uo.X(s,c);var h=bf;if(h&&s){var m=Ic(h).hoistableScripts,x=Sf(s),E=m.get(x);E||(E=h.querySelector(Jh(x)),E||(s=g({src:s,async:!0},c),(c=Cr.get(x))&&gE(s,c),E=h.createElement("script"),bn(E),zn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function RW(s,c){Uo.M(s,c);var h=bf;if(h&&s){var m=Ic(h).hoistableScripts,x=Sf(s),E=m.get(x);E||(E=h.querySelector(Jh(x)),E||(s=g({src:s,async:!0,type:"module"},c),(c=Cr.get(x))&&gE(s,c),E=h.createElement("script"),bn(E),zn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function QO(s,c,h,m){var x=(x=Ne.current)?G0(x):null;if(!x)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=xf(h.href),h=Ic(x).hoistableStyles,m=h.get(c),m||(m={type:"style",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=xf(h.href);var E=Ic(x).hoistableStyles,C=E.get(s);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,C),(E=x.querySelector(Zh(s)))&&!E._p&&(C.instance=E,C.state.loading=5),Cr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Cr.set(s,h),E||NW(x,s,h,C.state))),c&&m===null)throw Error(i(528,""));return C}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Sf(h),h=Ic(x).hoistableScripts,m=h.get(c),m||(m={type:"script",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function xf(s){return'href="'+vr(s)+'"'}function Zh(s){return'link[rel="stylesheet"]['+s+"]"}function KO(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function NW(s,c,h,m){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=s.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),zn(c,"link",h),bn(c),s.head.appendChild(c))}function Sf(s){return'[src="'+vr(s)+'"]'}function Jh(s){return"script[async]"+s}function ZO(s,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var m=s.querySelector('style[data-href~="'+vr(h.href)+'"]');if(m)return c.instance=m,bn(m),m;var x=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),bn(m),zn(m,"style",x),Y0(m,h.precedence,s),c.instance=m;case"stylesheet":x=xf(h.href);var E=s.querySelector(Zh(x));if(E)return c.state.loading|=4,c.instance=E,bn(E),E;m=KO(h),(x=Cr.get(x))&&hE(m,x),E=(s.ownerDocument||s).createElement("link"),bn(E);var C=E;return C._p=new Promise(function(D,U){C.onload=D,C.onerror=U}),zn(E,"link",m),c.state.loading|=4,Y0(E,h.precedence,s),c.instance=E;case"script":return E=Sf(h.src),(x=s.querySelector(Jh(E)))?(c.instance=x,bn(x),x):(m=h,(x=Cr.get(E))&&(m=g({},h),gE(m,x)),s=s.ownerDocument||s,x=s.createElement("script"),bn(x),zn(x,"link",m),s.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Y0(m,h.precedence,s));return c.instance}function Y0(s,c,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var D=m[C];if(D.dataset.precedence===c)E=D;else if(E!==x)break}E?E.parentNode.insertBefore(s,E.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(s,c.firstChild))}function hE(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function gE(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var X0=null;function JO(s,c,h){if(X0===null){var m=new Map,x=X0=new Map;x.set(h,m)}else x=X0,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),x=0;x<h.length;x++){var E=h[x];if(!(E[ph]||E[Dn]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(c)||"";C=s+C;var D=m.get(C);D?D.push(E):m.set(C,[E])}}return m}function e5(s,c,h){s=s.ownerDocument||s,s.head.insertBefore(h,c==="title"?s.querySelector("head > title"):null)}function OW(s,c,h){if(h===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function t5(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function zW(s,c,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=xf(m.href),E=c.querySelector(Zh(x));if(E){c=E._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=V0.bind(s),c.then(s,s)),h.state.loading|=4,h.instance=E,bn(E);return}E=c.ownerDocument||c,m=KO(m),(x=Cr.get(x))&&hE(m,x),E=E.createElement("link"),bn(E);var C=E;C._p=new Promise(function(D,U){C.onload=D,C.onerror=U}),zn(E,"link",m),h.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=V0.bind(s),c.addEventListener("load",h),c.addEventListener("error",h))}}var pE=0;function FW(s,c){return s.stylesheets&&s.count===0&&Q0(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var m=setTimeout(function(){if(s.stylesheets&&Q0(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+c);0<s.imgBytes&&pE===0&&(pE=62500*mW());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Q0(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>pE?50:800)+c);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function V0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Q0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var W0=null;function Q0(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,W0=new Map,c.forEach(LW,s),W0=null,V0.call(s))}function LW(s,c){if(!(c.state.loading&4)){var h=W0.get(s);if(h)var m=h.get(null);else{h=new Map,W0.set(s,h);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),m=C)}m&&h.set(null,m)}x=c.instance,C=x.getAttribute("data-precedence"),E=h.get(C)||m,E===m&&h.set(null,x),h.set(C,x),this.count++,m=V0.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),c.state.loading|=4}}var eg={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function UW(s,c,h,m,x,E,C,D,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=c2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c2(0),this.hiddenUpdates=c2(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function n5(s,c,h,m,x,E,C,D,U,W,ne,le){return s=new UW(s,c,h,C,U,W,ne,le,D),c=1,E===!0&&(c|=24),E=Wi(3,null,null,c),s.current=E,E.stateNode=s,c=V2(),c.refCount++,s.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:c},Z2(E),s}function i5(s){return s?(s=Kc,s):Kc}function r5(s,c,h,m,x,E){x=i5(x),m.context===null?m.context=x:m.pendingContext=x,m=Os(c),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=zs(s,m,c),h!==null&&(ki(h,s,c),Rh(h,s,c))}function a5(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<c?h:c}}function mE(s,c){a5(s,c),(s=s.alternate)&&a5(s,c)}function o5(s){if(s.tag===13||s.tag===31){var c=ru(s,67108864);c!==null&&ki(c,s,67108864),mE(s,67108864)}}function s5(s){if(s.tag===13||s.tag===31){var c=er();c=f2(c);var h=ru(s,c);h!==null&&ki(h,s,c),mE(s,c)}}var K0=!0;function jW(s,c,h,m){var x=R.T;R.T=null;var E=I.p;try{I.p=2,yE(s,c,h,m)}finally{I.p=E,R.T=x}}function BW(s,c,h,m){var x=R.T;R.T=null;var E=I.p;try{I.p=8,yE(s,c,h,m)}finally{I.p=E,R.T=x}}function yE(s,c,h,m){if(K0){var x=vE(m);if(x===null)iE(s,c,m,Z0,h),u5(s,m);else if(PW(x,s,c,h,m))m.stopPropagation();else if(u5(s,m),c&4&&-1<IW.indexOf(s)){for(;x!==null;){var E=Bc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=Jl(E.pendingLanes);if(C!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var U=1<<31-Xi(C);D.entanglements[1]|=U,C&=~U}Ra(E),(dt&6)===0&&(O0=Gi()+500,Vh(0))}}break;case 31:case 13:D=ru(E,2),D!==null&&ki(D,E,2),F0(),mE(E,2)}if(E=vE(m),E===null&&iE(s,c,m,Z0,h),E===x)break;x=E}x!==null&&m.stopPropagation()}else iE(s,c,m,null,h)}}function vE(s){return s=x2(s),bE(s)}var Z0=null;function bE(s){if(Z0=null,s=jc(s),s!==null){var c=a(s);if(c===null)s=null;else{var h=c.tag;if(h===13){if(s=o(c),s!==null)return s;s=null}else if(h===31){if(s=l(c),s!==null)return s;s=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return Z0=s,null}function l5(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CX()){case mD:return 2;case yD:return 8;case Im:case $X:return 32;case vD:return 268435456;default:return 32}default:return 32}}var xE=!1,Ys=null,Xs=null,Vs=null,tg=new Map,ng=new Map,Ws=[],IW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u5(s,c){switch(s){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":tg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ng.delete(c.pointerId)}}function ig(s,c,h,m,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:c,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=Bc(c),c!==null&&o5(c)),s):(s.eventSystemFlags|=m,c=s.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),s)}function PW(s,c,h,m,x){switch(c){case"focusin":return Ys=ig(Ys,s,c,h,m,x),!0;case"dragenter":return Xs=ig(Xs,s,c,h,m,x),!0;case"mouseover":return Vs=ig(Vs,s,c,h,m,x),!0;case"pointerover":var E=x.pointerId;return tg.set(E,ig(tg.get(E)||null,s,c,h,m,x)),!0;case"gotpointercapture":return E=x.pointerId,ng.set(E,ig(ng.get(E)||null,s,c,h,m,x)),!0}return!1}function c5(s){var c=jc(s.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){s.blockedOn=c,wD(s.priority,function(){s5(h)});return}}else if(c===31){if(c=l(h),c!==null){s.blockedOn=c,wD(s.priority,function(){s5(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function J0(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var h=vE(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);b2=m,h.target.dispatchEvent(m),b2=null}else return c=Bc(h),c!==null&&o5(c),s.blockedOn=h,!1;c.shift()}return!0}function f5(s,c,h){J0(s)&&h.delete(c)}function qW(){xE=!1,Ys!==null&&J0(Ys)&&(Ys=null),Xs!==null&&J0(Xs)&&(Xs=null),Vs!==null&&J0(Vs)&&(Vs=null),tg.forEach(f5),ng.forEach(f5)}function e1(s,c){s.blockedOn===c&&(s.blockedOn=null,xE||(xE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qW)))}var t1=null;function d5(s){t1!==s&&(t1=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){t1===s&&(t1=null);for(var c=0;c<s.length;c+=3){var h=s[c],m=s[c+1],x=s[c+2];if(typeof m!="function"){if(bE(m||h)===null)continue;break}var E=Bc(h);E!==null&&(s.splice(c,3),c-=3,vS(E,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function Ef(s){function c(U){return e1(U,s)}Ys!==null&&e1(Ys,s),Xs!==null&&e1(Xs,s),Vs!==null&&e1(Vs,s),tg.forEach(c),ng.forEach(c);for(var h=0;h<Ws.length;h++){var m=Ws[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Ws.length&&(h=Ws[0],h.blockedOn===null);)c5(h),h.blockedOn===null&&Ws.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],E=h[m+1],C=x[wi]||null;if(typeof E=="function")C||d5(h);else if(C){var D=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[wi]||null)D=C.formAction;else if(bE(x)!==null)continue}else D=C.action;typeof D=="function"?h[m+1]=D:(h.splice(m,3),m-=3),d5(h)}}}function h5(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function c(){x!==null&&(x(),x=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),x!==null&&(x(),x=null)}}}function SE(s){this._internalRoot=s}n1.prototype.render=SE.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,m=er();r5(h,m,s,c,null,null)},n1.prototype.unmount=SE.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;r5(s.current,2,null,s,null,null),F0(),c[Uc]=null}};function n1(s){this._internalRoot=s}n1.prototype.unstable_scheduleHydration=function(s){if(s){var c=_D();s={blockedOn:null,target:s,priority:c};for(var h=0;h<Ws.length&&c!==0&&c<Ws[h].priority;h++);Ws.splice(h,0,s),h===0&&c5(s)}};var g5=t.version;if(g5!=="19.2.0")throw Error(i(527,g5,"19.2.0"));I.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(c),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var HW={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i1.isDisabled&&i1.supportsFiber)try{dh=i1.inject(HW),Yi=i1}catch{}}return ag.createRoot=function(s,c){if(!r(s))throw Error(i(299));var h=!1,m="",x=SN,E=EN,C=_N;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=n5(s,1,!1,null,null,h,m,null,x,E,C,h5),s[Uc]=c.current,nE(s),new SE(c)},ag.hydrateRoot=function(s,c,h){if(!r(s))throw Error(i(299));var m=!1,x="",E=SN,C=EN,D=_N,U=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.formState!==void 0&&(U=h.formState)),c=n5(s,1,!0,c,h??null,m,x,U,E,C,D,h5),c.context=i5(null),h=c.current,m=er(),m=f2(m),x=Os(m),x.callback=null,zs(h,x,m),h=m,c.current.lanes=h,gh(c,h),Ra(c),s[Uc]=c.current,nE(s),new n1(c)},ag.version="19.2.0",ag}var w5;function tQ(){if(w5)return wE.exports;w5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wE.exports=eQ(),wE.exports}var nQ=tQ();const iQ=dL(nQ);var A5="popstate";function rQ(e={}){function t(r,a){let{pathname:o="/",search:l="",hash:u=""}=bc(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xw("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=r.location.href,f=u.indexOf("#");l=f===-1?u:u.slice(0,f)}return l+"#"+(typeof a=="string"?a:pp(a))}function i(r,a){dr(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return oQ(t,n,i,e)}function Ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aQ(){return Math.random().toString(36).substring(2,10)}function C5(e,t){return{usr:e.state,key:e.key,idx:t}}function xw(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?bc(t):t,state:n,key:t&&t.key||i||aQ()}}function pp({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function bc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function oQ(e,t,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,o=r.history,l="POP",u=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function g(){l="POP";let S=d(),_=S==null?null:S-f;f=S,u&&u({action:l,location:b.location,delta:_})}function p(S,_){l="PUSH";let w=xw(b.location,S,_);n&&n(w,S),f=d()+1;let A=C5(w,f),$=b.createHref(w);try{o.pushState(A,"",$)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign($)}a&&u&&u({action:l,location:b.location,delta:1})}function y(S,_){l="REPLACE";let w=xw(b.location,S,_);n&&n(w,S),f=d();let A=C5(w,f),$=b.createHref(w);o.replaceState(A,"",$),a&&u&&u({action:l,location:b.location,delta:0})}function v(S){return sQ(S)}let b={get action(){return l},get location(){return e(r,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(A5,g),u=S,()=>{r.removeEventListener(A5,g),u=null}},createHref(S){return t(r,S)},createURL:v,encodeLocation(S){let _=v(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(S){return o.go(S)}};return b}function sQ(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ut(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:pp(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function hL(e,t,n="/"){return lQ(e,t,n,!1)}function lQ(e,t,n,i){let r=typeof t=="string"?bc(t):t,a=us(r.pathname||"/",n);if(a==null)return null;let o=gL(e);uQ(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let f=xQ(a);l=vQ(o[u],f,i)}return l}function gL(e,t=[],n=[],i="",r=!1){let a=(o,l,u=r,f)=>{let d={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(i)&&u)return;Ut(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length)}let g=es([i,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(Ut(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),gL(o.children,t,p,g,u)),!(o.path==null&&!o.index)&&t.push({path:g,score:mQ(g,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of pL(o.path))a(o,l,!0,u)}),t}function pL(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let o=pL(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),r&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function uQ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yQ(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var cQ=/^:[\w-]+$/,fQ=3,dQ=2,hQ=1,gQ=10,pQ=-2,$5=e=>e==="*";function mQ(e,t){let n=e.split("/"),i=n.length;return n.some($5)&&(i+=pQ),t&&(i+=dQ),n.filter(r=>!$5(r)).reduce((r,a)=>r+(cQ.test(a)?fQ:a===""?hQ:gQ),i)}function yQ(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function vQ(e,t,n=!1){let{routesMeta:i}=e,r={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],f=l===i.length-1,d=a==="/"?t:t.slice(a.length)||"/",g=by({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},d),p=u.route;if(!g&&f&&n&&!i[i.length-1].route.index&&(g=by({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:es([a,g.pathname]),pathnameBase:AQ(es([a,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(a=es([a,g.pathnameBase]))}return o}function by(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=bQ(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,{paramName:d,isOptional:g},p)=>{if(d==="*"){let v=l[p]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[p];return g&&!y?f[d]=void 0:f[d]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:e}}function bQ(e,t=!1,n=!0){dr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function xQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return dr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function us(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var SQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EQ=e=>SQ.test(e);function _Q(e,t="/"){let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?bc(e):e,a;if(n)if(EQ(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),dr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=T5(n.substring(1),"/"):a=T5(n,t)}else a=t;return{pathname:a,search:CQ(i),hash:$Q(r)}}function T5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function TE(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wQ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UC(e){let t=wQ(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function jC(e,t,n,i=!1){let r;typeof e=="string"?r=bc(e):(r={...e},Ut(!r.pathname||!r.pathname.includes("?"),TE("?","pathname","search",r)),Ut(!r.pathname||!r.pathname.includes("#"),TE("#","pathname","hash",r)),Ut(!r.search||!r.search.includes("#"),TE("#","search","hash",r)));let a=e===""||r.pathname==="",o=a?"/":r.pathname,l;if(o==null)l=n;else{let g=t.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;r.pathname=p.join("/")}l=g>=0?t[g]:"/"}let u=_Q(r,l),f=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||d)&&(u.pathname+="/"),u}var es=e=>e.join("/").replace(/\/\/+/g,"/"),AQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$Q=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mL=["POST","PUT","PATCH","DELETE"];new Set(mL);var MQ=["GET",...mL];new Set(MQ);var Fd=re.createContext(null);Fd.displayName="DataRouter";var Jv=re.createContext(null);Jv.displayName="DataRouterState";re.createContext(!1);var yL=re.createContext({isTransitioning:!1});yL.displayName="ViewTransition";var kQ=re.createContext(new Map);kQ.displayName="Fetchers";var DQ=re.createContext(null);DQ.displayName="Await";var xa=re.createContext(null);xa.displayName="Navigation";var Xp=re.createContext(null);Xp.displayName="Location";var oo=re.createContext({outlet:null,matches:[],isDataRoute:!1});oo.displayName="Route";var BC=re.createContext(null);BC.displayName="RouteError";function RQ(e,{relative:t}={}){Ut(Ld(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=re.useContext(xa),{hash:r,pathname:a,search:o}=Vp(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:es([n,a])),i.createHref({pathname:l,search:o,hash:r})}function Ld(){return re.useContext(Xp)!=null}function ms(){return Ut(Ld(),"useLocation() may be used only in the context of a <Router> component."),re.useContext(Xp).location}var vL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bL(e){re.useContext(xa).static||re.useLayoutEffect(e)}function xL(){let{isDataRoute:e}=re.useContext(oo);return e?GQ():NQ()}function NQ(){Ut(Ld(),"useNavigate() may be used only in the context of a <Router> component.");let e=re.useContext(Fd),{basename:t,navigator:n}=re.useContext(xa),{matches:i}=re.useContext(oo),{pathname:r}=ms(),a=JSON.stringify(UC(i)),o=re.useRef(!1);return bL(()=>{o.current=!0}),re.useCallback((u,f={})=>{if(dr(o.current,vL),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=jC(u,JSON.parse(a),r,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:es([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,a,r,e])}re.createContext(null);function Vp(e,{relative:t}={}){let{matches:n}=re.useContext(oo),{pathname:i}=ms(),r=JSON.stringify(UC(n));return re.useMemo(()=>jC(e,JSON.parse(r),i,t==="path"),[e,r,i,t])}function OQ(e,t){return SL(e,t)}function SL(e,t,n,i,r){Ut(Ld(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=re.useContext(xa),{matches:o}=re.useContext(oo),l=o[o.length-1],u=l?l.params:{},f=l?l.pathname:"/",d=l?l.pathnameBase:"/",g=l&&l.route;{let w=g&&g.path||"";EL(f,!g||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=ms(),y;if(t){let w=typeof t=="string"?bc(t):t;Ut(d==="/"||w.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),y=w}else y=p;let v=y.pathname||"/",b=v;if(d!=="/"){let w=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=hL(e,{pathname:b});dr(g||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),dr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=jQ(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:es([d,a.encodeLocation?a.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:es([d,a.encodeLocation?a.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,i,r);return t&&_?re.createElement(Xp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function zQ(){let e=HQ(),t=TQ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=re.createElement(re.Fragment,null,re.createElement("p",null," Hey developer "),re.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",re.createElement("code",{style:a},"ErrorBoundary")," or"," ",re.createElement("code",{style:a},"errorElement")," prop on your route.")),re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},t),n?re.createElement("pre",{style:r},n):null,o)}var FQ=re.createElement(zQ,null),LQ=class extends re.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?re.createElement(oo.Provider,{value:this.props.routeContext},re.createElement(BC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UQ({routeContext:e,match:t,children:n}){let i=re.useContext(Fd);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),re.createElement(oo.Provider,{value:e},n)}function jQ(e,t=[],n=null,i=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let d=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);Ut(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<a.length;d++){let g=a[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:p,errors:y}=n,v=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||v){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let f=n&&i?(d,g)=>{i(d,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((d,g,p)=>{let y,v=!1,b=null,S=null;n&&(y=o&&g.route.id?o[g.route.id]:void 0,b=g.route.errorElement||FQ,l&&(u<0&&p===0?(EL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):u===p&&(v=!0,S=g.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,p+1)),w=()=>{let A;return y?A=b:v?A=S:g.route.Component?A=re.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=d,re.createElement(UQ,{match:g,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?re.createElement(LQ,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):w()},null)}function IC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BQ(e){let t=re.useContext(Fd);return Ut(t,IC(e)),t}function IQ(e){let t=re.useContext(Jv);return Ut(t,IC(e)),t}function PQ(e){let t=re.useContext(oo);return Ut(t,IC(e)),t}function PC(e){let t=PQ(e),n=t.matches[t.matches.length-1];return Ut(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function qQ(){return PC("useRouteId")}function HQ(){let e=re.useContext(BC),t=IQ("useRouteError"),n=PC("useRouteError");return e!==void 0?e:t.errors?.[n]}function GQ(){let{router:e}=BQ("useNavigate"),t=PC("useNavigate"),n=re.useRef(!1);return bL(()=>{n.current=!0}),re.useCallback(async(r,a={})=>{dr(n.current,vL),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))},[e,t])}var M5={};function EL(e,t,n){!t&&!M5[e]&&(M5[e]=!0,dr(!1,n))}re.memo(YQ);function YQ({routes:e,future:t,state:n,unstable_onError:i}){return SL(e,void 0,n,i,t)}function _L({to:e,replace:t,state:n,relative:i}){Ut(Ld(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=re.useContext(xa);dr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=re.useContext(oo),{pathname:o}=ms(),l=xL(),u=jC(e,UC(a),o,i==="path"),f=JSON.stringify(u);return re.useEffect(()=>{l(JSON.parse(f),{replace:t,state:n,relative:i})},[l,f,i,t,n]),null}function Zs(e){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XQ({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){Ut(!Ld(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=re.useMemo(()=>({basename:o,navigator:r,static:a,future:{}}),[o,r,a]);typeof n=="string"&&(n=bc(n));let{pathname:u="/",search:f="",hash:d="",state:g=null,key:p="default"}=n,y=re.useMemo(()=>{let v=us(u,o);return v==null?null:{location:{pathname:v,search:f,hash:d,state:g,key:p},navigationType:i}},[o,u,f,d,g,p,i]);return dr(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:re.createElement(xa.Provider,{value:l},re.createElement(Xp.Provider,{children:t,value:y}))}function VQ({children:e,location:t}){return OQ(Sw(e),t)}function Sw(e,t=[]){let n=[];return re.Children.forEach(e,(i,r)=>{if(!re.isValidElement(i))return;let a=[...t,r];if(i.type===re.Fragment){n.push.apply(n,Sw(i.props.children,a));return}Ut(i.type===Zs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Sw(i.props.children,a)),n.push(o)}),n}var G1="get",Y1="application/x-www-form-urlencoded";function eb(e){return e!=null&&typeof e.tagName=="string"}function WQ(e){return eb(e)&&e.tagName.toLowerCase()==="button"}function QQ(e){return eb(e)&&e.tagName.toLowerCase()==="form"}function KQ(e){return eb(e)&&e.tagName.toLowerCase()==="input"}function ZQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JQ(e,t){return e.button===0&&(!t||t==="_self")&&!ZQ(e)}var r1=null;function eK(){if(r1===null)try{new FormData(document.createElement("form"),0),r1=!1}catch{r1=!0}return r1}var tK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ME(e){return e!=null&&!tK.has(e)?(dr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Y1}"`),null):e}function nK(e,t){let n,i,r,a,o;if(QQ(e)){let l=e.getAttribute("action");i=l?us(l,t):null,n=e.getAttribute("method")||G1,r=ME(e.getAttribute("enctype"))||Y1,a=new FormData(e)}else if(WQ(e)||KQ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(i=u?us(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||G1,r=ME(e.getAttribute("formenctype"))||ME(l.getAttribute("enctype"))||Y1,a=new FormData(l,e),!eK()){let{name:f,type:d,value:g}=e;if(d==="image"){let p=f?`${f}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else f&&a.append(f,g)}}else{if(eb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=G1,i=null,r=Y1,o=e}return a&&r==="text/plain"&&(o=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qC(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function iK(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&us(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function rK(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aK(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function oK(e,t,n){let i=await Promise.all(e.map(async r=>{let a=t.routes[r.route.id];if(a){let o=await rK(a,n);return o.links?o.links():[]}return[]}));return cK(i.flat(1).filter(aK).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function k5(e,t,n,i,r,a){let o=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,l=(u,f)=>n[f].pathname!==u.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,f)=>o(u,f)||l(u,f)):a==="data"?t.filter((u,f)=>{let d=i.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,f)||l(u,f))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function sK(e,t,{includeHydrateFallback:n}={}){return lK(e.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function lK(e){return[...new Set(e)]}function uK(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function cK(e,t){let n=new Set;return new Set(t),e.reduce((i,r)=>{let a=JSON.stringify(uK(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function wL(){let e=re.useContext(Fd);return qC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function fK(){let e=re.useContext(Jv);return qC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var HC=re.createContext(void 0);HC.displayName="FrameworkContext";function AL(){let e=re.useContext(HC);return qC(e,"You must render this element inside a <HydratedRouter> element"),e}function dK(e,t){let n=re.useContext(HC),[i,r]=re.useState(!1),[a,o]=re.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:f,onMouseLeave:d,onTouchStart:g}=t,p=re.useRef(null);re.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=_=>{_.forEach(w=>{o(w.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return p.current&&S.observe(p.current),()=>{S.disconnect()}}},[e]),re.useEffect(()=>{if(i){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[i]);let y=()=>{r(!0)},v=()=>{r(!1),o(!1)};return n?e!=="intent"?[a,p,{}]:[a,p,{onFocus:og(l,y),onBlur:og(u,v),onMouseEnter:og(f,y),onMouseLeave:og(d,v),onTouchStart:og(g,y)}]:[!1,p,{}]}function og(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function hK({page:e,...t}){let{router:n}=wL(),i=re.useMemo(()=>hL(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?re.createElement(pK,{page:e,matches:i,...t}):null}function gK(e){let{manifest:t,routeModules:n}=AL(),[i,r]=re.useState([]);return re.useEffect(()=>{let a=!1;return oK(e,t,n).then(o=>{a||r(o)}),()=>{a=!0}},[e,t,n]),i}function pK({page:e,matches:t,...n}){let i=ms(),{manifest:r,routeModules:a}=AL(),{basename:o}=wL(),{loaderData:l,matches:u}=fK(),f=re.useMemo(()=>k5(e,t,u,r,i,"data"),[e,t,u,r,i]),d=re.useMemo(()=>k5(e,t,u,r,i,"assets"),[e,t,u,r,i]),g=re.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let v=new Set,b=!1;if(t.forEach(_=>{let w=r.routes[_.route.id];!w||!w.hasLoader||(!f.some(A=>A.route.id===_.route.id)&&_.route.id in l&&a[_.route.id]?.shouldRevalidate||w.hasClientLoader?b=!0:v.add(_.route.id))}),v.size===0)return[];let S=iK(e,o,"data");return b&&v.size>0&&S.searchParams.set("_routes",t.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,l,i,r,f,t,e,a]),p=re.useMemo(()=>sK(d,r),[d,r]),y=gK(d);return re.createElement(re.Fragment,null,g.map(v=>re.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>re.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),y.map(({key:v,link:b})=>re.createElement("link",{key:v,nonce:n.nonce,...b})))}function mK(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var CL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CL&&(window.__reactRouterVersion="7.9.6")}catch{}function yK({basename:e,children:t,window:n}){let i=re.useRef();i.current==null&&(i.current=rQ({window:n,v5Compat:!0}));let r=i.current,[a,o]=re.useState({action:r.action,location:r.location}),l=re.useCallback(u=>{re.startTransition(()=>o(u))},[o]);return re.useLayoutEffect(()=>r.listen(l),[r,l]),re.createElement(XQ,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:r})}var $L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Du=re.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:d,viewTransition:g,...p},y){let{basename:v}=re.useContext(xa),b=typeof f=="string"&&$L.test(f),S,_=!1;if(typeof f=="string"&&b&&(S=f,CL))try{let z=new URL(window.location.href),B=f.startsWith("//")?new URL(z.protocol+f):new URL(f),j=us(B.pathname,v);B.origin===z.origin&&j!=null?f=j+B.search+B.hash:_=!0}catch{dr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=RQ(f,{relative:r}),[A,$,M]=dK(i,p),k=SK(f,{replace:o,state:l,target:u,preventScrollReset:d,relative:r,viewTransition:g});function T(z){t&&t(z),z.defaultPrevented||k(z)}let N=re.createElement("a",{...p,...M,href:S||w,onClick:_||a?t:T,ref:mK(y,$),target:u,"data-discover":!b&&n==="render"?"true":void 0});return A&&!b?re.createElement(re.Fragment,null,N,re.createElement(hK,{page:w})):N});Du.displayName="Link";var vK=re.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:o,viewTransition:l,children:u,...f},d){let g=Vp(o,{relative:f.relative}),p=ms(),y=re.useContext(Jv),{navigator:v,basename:b}=re.useContext(xa),S=y!=null&&CK(g)&&l===!0,_=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,w=p.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(w=w.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&b&&(A=us(A,b)||A);const $=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=w===_||!r&&w.startsWith(_)&&w.charAt($)==="/",k=A!=null&&(A===_||!r&&A.startsWith(_)&&A.charAt(_.length)==="/"),T={isActive:M,isPending:k,isTransitioning:S},N=M?t:void 0,z;typeof i=="function"?z=i(T):z=[i,M?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(T):a;return re.createElement(Du,{...f,"aria-current":N,className:z,ref:d,style:B,to:o,viewTransition:l},typeof u=="function"?u(T):u)});vK.displayName="NavLink";var bK=re.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:r,state:a,method:o=G1,action:l,onSubmit:u,relative:f,preventScrollReset:d,viewTransition:g,...p},y)=>{let v=wK(),b=AK(l,{relative:f}),S=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&$L.test(l),w=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let $=A.nativeEvent.submitter,M=$?.getAttribute("formmethod")||o;v($||A.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:r,state:a,relative:f,preventScrollReset:d,viewTransition:g})};return re.createElement("form",{ref:y,method:S,action:b,onSubmit:i?u:w,...p,"data-discover":!_&&e==="render"?"true":void 0})});bK.displayName="Form";function xK(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TL(e){let t=re.useContext(Fd);return Ut(t,xK(e)),t}function SK(e,{target:t,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:o}={}){let l=xL(),u=ms(),f=Vp(e,{relative:a});return re.useCallback(d=>{if(JQ(d,t)){d.preventDefault();let g=n!==void 0?n:pp(u)===pp(f);l(e,{replace:g,state:i,preventScrollReset:r,relative:a,viewTransition:o})}},[u,l,f,n,i,t,e,r,a,o])}var EK=0,_K=()=>`__${String(++EK)}__`;function wK(){let{router:e}=TL("useSubmit"),{basename:t}=re.useContext(xa),n=qQ();return re.useCallback(async(i,r={})=>{let{action:a,method:o,encType:l,formData:u,body:f}=nK(i,t);if(r.navigate===!1){let d=r.fetcherKey||_K();await e.fetch(d,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function AK(e,{relative:t}={}){let{basename:n}=re.useContext(xa),i=re.useContext(oo);Ut(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Vp(e||".",{relative:t})},o=ms();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(g=>g).forEach(g=>l.append("index",g));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:es([n,a.pathname])),pp(a)}function CK(e,{relative:t}={}){let n=re.useContext(yL);Ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=TL("useViewTransitionState"),r=Vp(e,{relative:t});if(!n.isTransitioning)return!1;let a=us(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=us(n.nextLocation.pathname,i)||n.nextLocation.pathname;return by(r.pathname,o)!=null||by(r.pathname,a)!=null}const ML=re.createContext(null);function $K({children:e}){const[t,n]=re.useState(null);re.useEffect(()=>{const a=localStorage.getItem("kiwi-user");a&&n(JSON.parse(a))},[]);const i=a=>{n(a),localStorage.setItem("kiwi-user",JSON.stringify(a))},r=()=>{n(null),localStorage.removeItem("kiwi-user")};return O.jsx(ML.Provider,{value:{user:t,login:i,logout:r},children:e})}function kL(){return re.useContext(ML)}function TK(){const[e,t]=re.useState(!1);return O.jsx("nav",{className:"navbar",children:O.jsxs("div",{className:"nav-container",children:[O.jsx(Du,{to:"/",className:"nav-logo",children:" Kiwi"}),O.jsxs("div",{className:"hamburger",onClick:()=>t(!e),children:[O.jsx("span",{}),O.jsx("span",{}),O.jsx("span",{})]}),O.jsxs("div",{className:`nav-links ${e?"show":""}`,children:[O.jsx(Du,{to:"/",onClick:()=>t(!1),children:"Home"}),O.jsx(Du,{to:"/why-kiwi",onClick:()=>t(!1),children:"Why Kiwi"}),O.jsx(Du,{to:"/about",onClick:()=>t(!1),children:"About"}),O.jsx(Du,{to:"/contact",onClick:()=>t(!1),children:"Contact"}),O.jsx("a",{href:"http://app.kiwivoiceassistant.com",className:"nav-btn",onClick:()=>t(!1),target:"_blank",rel:"noopener noreferrer",children:"Login"})]})]})})}const MK=()=>O.jsxs("footer",{className:"footer",children:[O.jsxs("p",{children:[" ",new Date().getFullYear()," Kiwi. All rights reserved."]}),O.jsx("p",{children:"Made with care for every senior."})]}),kK=()=>{const e=re.useRef(null),[t,n]=re.useState(!0),i=()=>{const a=e.current;a.paused?a.play():a.pause()},r=()=>{const a=e.current;a.muted=!a.muted,n(a.muted)};return O.jsxs("div",{style:{position:"relative",maxWidth:"800px",margin:"auto"},children:[O.jsx("video",{ref:e,src:"/Kiwi-voice/Hero.mp4",autoPlay:!0,loop:!0,muted:t,playsInline:!0,onClick:i,style:{width:"100%",borderRadius:"14px",cursor:"pointer",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),O.jsx("button",{onClick:r,style:{position:"absolute",bottom:"15px",right:"15px",padding:"10px 14px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"white",border:"none",cursor:"pointer",fontSize:"14px",backdropFilter:"blur(5px)"},children:t?"":""})]})},DK=()=>O.jsxs("div",{children:[O.jsx("style",{children:`
        html {
          scroll-behavior: smooth;
        }
        .no-bullets li {
          list-style: none;
          margin: 0.4rem 0;
        }
        .video-section {
          width: 100%;
          height: 70vh;
          overflow: hidden;
          position: relative;
        }
        .video-section video {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
      `}),O.jsxs("section",{className:"hero",children:[O.jsx("h1",{children:"Technology That Finally Serves Seniors."}),O.jsx("p",{children:"Kiwi is a 100% voice-controlled smart assistant watch designed for safety, connection, and peace of mind  no screens, no apps, no confusion."}),O.jsx("button",{className:"button-primary",onClick:()=>document.getElementById("get-started").scrollIntoView({behavior:"smooth"}),children:"Get Started"}),O.jsx("button",{className:"button-secondary",onClick:()=>document.getElementById("features").scrollIntoView({behavior:"smooth"}),children:"Learn More"})]}),O.jsxs("section",{className:"section",style:{textAlign:"center"},children:[O.jsx("h2",{children:"See Kiwi in Action"}),O.jsx("p",{className:"subtitle",children:"A quick look at how Kiwi makes seniors' lives easier."}),O.jsx("div",{style:{maxWidth:"800px",margin:"auto"},children:O.jsx(kK,{})})]}),O.jsxs("section",{className:"section",id:"features",children:[O.jsx("h2",{children:"Why Kiwi?"}),O.jsx("p",{className:"subtitle",children:"A breakthrough senior-first wearable with natural voice interface."}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"100% Voice Controlled"}),O.jsx("p",{children:"No screens, no apps  just natural conversation that feels effortless."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Smart Emergency Detection"}),O.jsx("p",{children:"Automatically senses falls or abnormal vitals and alerts family instantly."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Medication & Routine Coach"}),O.jsx("p",{children:"Kiwi remembers schedules and offers gentle reminders throughout the day."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Proactive Family Dashboard"}),O.jsx("p",{children:"Real-time health updates, alerts, and insights for loved ones."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Senior-First Comfort Design"}),O.jsx("p",{children:"Lightweight, stylish, and intuitive  designed specially for seniors."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Built for Safety & Independence"}),O.jsx("p",{children:"Gives seniors autonomy while ensuring 24/7 voice-activated support."})]})]})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"Why Traditional Wearables Fail"}),O.jsx("p",{className:"subtitle",children:"Kiwi isnt an improvement  its a redesign for seniors."}),O.jsxs("div",{className:"comparison",children:[O.jsxs("div",{className:"comp-box",children:[O.jsx("h3",{children:"Traditional Wearables"}),O.jsxs("ul",{className:"no-bullets",children:[O.jsx("li",{children:" Complex touch screens"}),O.jsx("li",{children:" Requires smartphone pairing"}),O.jsx("li",{children:" Multiple menus & buttons"}),O.jsx("li",{children:" Fitness-first  not senior care"}),O.jsx("li",{children:" Looks like a medical tracker"})]})]}),O.jsxs("div",{className:"comp-box",children:[O.jsx("h3",{children:"Kiwi Watch"}),O.jsxs("ul",{className:"no-bullets",children:[O.jsx("li",{children:" Pure voice interaction"}),O.jsx("li",{children:" Works independently  no phone"}),O.jsx("li",{children:" Senior-friendly & intuitive"}),O.jsx("li",{children:" Designed for safety & care"}),O.jsx("li",{children:" Elegant non-medical appearance"})]})]})]})]}),O.jsxs("section",{className:"section",id:"get-started",children:[O.jsx("h2",{children:"Get Started With Kiwi"}),O.jsx("p",{className:"subtitle",children:"Begin your journey toward safer, smarter senior independence."}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Create Your Kiwi Account"}),O.jsx("p",{children:"Set up your profile in under a minute and personalize your preferences."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Choose Your Voice"}),O.jsx("p",{children:"Select from soothing, natural-sounding voices specially made for seniors."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Start Talking"}),O.jsx("p",{children:"Ask Kiwi anything  reminders, health checks, assistance, or safety alerts."})]})]})]})]}),RK=/("(?:[^\\"]|\\.)*")|[:,]/g;function kE(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(o,l,u){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const f=JSON.stringify(o,r);if(f===void 0)return f;const d=i-l.length-u;if(f.length<=d){const g=f.replace(RK,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(o=JSON.parse(f),r=void 0),typeof o=="object"&&o!==null){const g=l+n,p=[];let y=0,v,b;if(Array.isArray(o)){v="[",b="]";const{length:S}=o;for(;y<S;y++)p.push(a(o[y],g,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(o),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,$=a(o[w],g,A.length+(y===_-1?0:1));$!==void 0&&p.push(A+$)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${l}`)}return f})(e,"",0)}function qi(e,t,n){return e.fields=t||[],e.fname=n,e}function Wt(e){return e==null?null:e.fname}function ei(e){return e==null?null:e.fields}function DL(e){return e.length===1?NK(e[0]):OK(e)}const NK=e=>function(t){return t[e]},OK=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function te(e){throw Error(e)}function so(e){const t=[],n=e.length;let i=null,r=0,a="",o,l,u;e=e+"";function f(){t.push(a+e.substring(o,l)),a="",o=l+1}for(o=l=0;l<n;++l)if(u=e[l],u==="\\")a+=e.substring(o,l++),o=l;else if(u===i)f(),i=null,r=-1;else{if(i)continue;o===r&&u==='"'||o===r&&u==="'"?(o=l+1,i=u):u==="."&&!r?l>o?f():o=l+1:u==="["?(l>o&&f(),r=o=l+1):u==="]"&&(r||te("Access path missing open bracket: "+e),r>0&&f(),r=0,o=l+1)}return r&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),l>o&&(l++,f()),t}function Lr(e,t,n){const i=so(e);return e=i.length===1?i[0]:e,qi((n&&n.get||DL)(i),[e],t||e)}const Wp=Lr("id"),ri=qi(e=>e,[],"identity"),sl=qi(()=>0,[],"zero"),Ud=qi(()=>1,[],"one"),Ur=qi(()=>!0,[],"true"),Js=qi(()=>!1,[],"false"),GC=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function zK(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const RL=0,YC=1,XC=2,NL=3,OL=4;function tb(e,t,n=zK){let i=e||RL;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=YC&&n(t||"error","ERROR",arguments),this},warn(){return i>=XC&&n(t||"warn","WARN",arguments),this},info(){return i>=NL&&n(t||"log","INFO",arguments),this},debug(){return i>=OL&&n(t||"log","DEBUG",arguments),this}}}var ae=Array.isArray;function Se(e){return e===Object(e)}const D5=e=>e!=="__proto__";function jd(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=FK(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;Bd(t,i,n[i],r)}return t},{})}function Bd(e,t,n,i){if(!D5(t))return;let r,a;if(Se(n)&&!ae(n)){a=Se(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Bd(a,r,n[r]):D5(r)&&(a[r]=n[r])}else e[t]=n}function FK(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function rt(e){return e[e.length-1]}function Zn(e){return e==null||e===""?null:+e}const zL=e=>t=>e*Math.exp(t),FL=e=>t=>Math.log(e*t),LL=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),UL=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,xy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function nb(e,t,n,i){const r=n(e[0]),a=n(rt(e)),o=(a-r)*t;return[i(r-o),i(a-o)]}function jL(e,t){return nb(e,t,Zn,ri)}function BL(e,t){var n=Math.sign(e[0]);return nb(e,t,FL(n),zL(n))}function IL(e,t,n){return nb(e,t,xy(n),xy(1/n))}function PL(e,t,n){return nb(e,t,LL(n),UL(n))}function ib(e,t,n,i,r){const a=i(e[0]),o=i(rt(e)),l=t!=null?i(t):(a+o)/2;return[r(l+(a-l)*n),r(l+(o-l)*n)]}function VC(e,t,n){return ib(e,t,n,Zn,ri)}function WC(e,t,n){const i=Math.sign(e[0]);return ib(e,t,n,FL(i),zL(i))}function Sy(e,t,n,i){return ib(e,t,n,xy(i),xy(1/i))}function QC(e,t,n,i){return ib(e,t,n,LL(i),UL(i))}function qL(e){return 1+~~(new Date(e).getMonth()/3)}function HL(e){return 1+~~(new Date(e).getUTCMonth()/3)}function _e(e){return e!=null?ae(e)?e:[e]:[]}function GL(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Pe(e){return typeof e=="function"}const LK="descending";function KC(e,t,n){n=n||{},t=_e(t)||[];const i=[],r=[],a={},o=n.comparator||UK;return _e(e).forEach((l,u)=>{l!=null&&(i.push(t[u]===LK?-1:1),r.push(l=Pe(l)?l:Lr(l,null,n)),(ei(l)||[]).forEach(f=>a[f]=1))}),r.length===0?null:qi(o(r,i),Object.keys(a))}const Id=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),UK=(e,t)=>e.length===1?jK(e[0],t[0]):BK(e,t,e.length),jK=(e,t)=>function(n,i){return Id(e(n),e(i))*t},BK=(e,t,n)=>(t.push(0),function(i,r){let a,o=0,l=-1;for(;o===0&&++l<n;)a=e[l],o=Id(a(i),a(r));return o*t[l]});function ai(e){return Pe(e)?e:()=>e}function ZC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function He(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ka(e,t){let n=0,i,r,a,o;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=o=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>o&&(o=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=o=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>o&&(o=r))}return[a,o]}function YL(e,t){const n=e.length;let i=-1,r,a,o,l,u;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(l=u=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,l=i),o<a&&(o=a,u=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(l=u=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,l=i),o<a&&(o=a,u=i))}return[l,u]}function we(e,t){return Object.hasOwn(e,t)}const a1={};function Pd(e){let t={},n;function i(a){return we(t,a)&&t[a]!==a1}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,o){return i(a)||(++r.size,t[a]===a1&&--r.empty),t[a]=o,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=a1),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let o=0;for(const l in t){const u=t[l];u!==a1&&(!n||!n(u))&&(a[l]=u,++o)}r.size=o,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function XL(e,t,n,i,r,a){if(!n&&n!==0)return a;const o=+n;let l=e[0],u=rt(e),f;u<l&&(f=l,l=u,u=f),f=Math.abs(t-l);const d=Math.abs(u-t);return f<d&&f<=o?i:d<=o?r:a}function ve(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),He(i,n)}function Uf(e,t,n,i){let r=t[0],a=t[t.length-1],o;return r>a&&(o=r,r=a,a=o),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Ul(e){return typeof e=="boolean"}function yl(e){return Object.prototype.toString.call(e)==="[object Date]"}function VL(e){return e&&Pe(e[Symbol.iterator])}function ut(e){return typeof e=="number"}function JC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ee(e){return typeof e=="string"}function e3(e,t,n){e&&(e=t?_e(e).map(l=>l.replace(/\\(.)/g,"$1")):_e(e));const i=e&&e.length,r=n&&n.get||DL,a=l=>r(t?[l]:so(l));let o;if(!i)o=function(){return""};else if(i===1){const l=a(e[0]);o=function(u){return""+l(u)}}else{const l=e.map(a);o=function(u){let f=""+l[0](u),d=0;for(;++d<i;)f+="|"+l[d](u);return f}}return qi(o,e,"key")}function WL(e,t){const n=e[0],i=rt(e),r=+t;return r?r===1?i:n+r*(i-n):n}const IK=1e4;function QL(e){e=+e||IK;let t,n,i;const r=()=>{t={},n={},i=0},a=(o,l)=>(++i>e&&(n=t,t={},i=1),t[o]=l);return r(),{clear:r,has:o=>we(t,o)||we(n,o),get:o=>we(t,o)?t[o]:we(n,o)?a(o,n[o]):void 0,set:(o,l)=>we(t,o)?t[o]=l:a(o,l)}}function KL(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const o=i||new t.constructor(r+a);let l=0,u=0,f=0;for(;l<r&&u<a;++f)o[f]=e(t[l],n[u])>0?n[u++]:t[l++];for(;l<r;++l,++f)o[f]=t[l];for(;u<a;++u,++f)o[f]=n[u];return o}function Rg(e,t){let n="";for(;--t>=0;)n+=e;return n}function ZL(e,t,n,i){const r=n||" ",a=e+"",o=t-a.length;return o<=0?a:i==="left"?Rg(r,o)+a:i==="center"?Rg(r,~~(o/2))+a+Rg(r,Math.ceil(o/2)):a+Rg(r,o)}function Qp(e){return e&&rt(e)-e[0]||0}function pe(e){return ae(e)?`[${e.map(t=>t===null?"null":pe(t))}]`:Se(e)||Ee(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function t3(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const PK=e=>ut(e)||yl(e)?e:Date.parse(e);function n3(e,t){return t=t||PK,e==null||e===""?null:t(e)}function i3(e){return e==null||e===""?null:e+""}function ha(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function JL(e,t,n,i){const r=i??"",a=e+"",o=a.length,l=Math.max(0,t-r.length);return o<=t?a:n==="left"?r+a.slice(o-l):n==="center"?a.slice(0,Math.ceil(l/2))+r+a.slice(o-~~(l/2)):a.slice(0,l)+r}function nl(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var R5={},DE={},RE=34,sg=10,NE=13;function e9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function qK(e,t){var n=e9(e);return function(i,r){return t(n(i),r,e)}}function N5(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Di(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function HK(e){return e<0?"-"+Di(-e,6):e>9999?"+"+Di(e,6):Di(e,4)}function GK(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":HK(e.getUTCFullYear())+"-"+Di(e.getUTCMonth()+1,2)+"-"+Di(e.getUTCDate(),2)+(r?"T"+Di(t,2)+":"+Di(n,2)+":"+Di(i,2)+"."+Di(r,3)+"Z":i?"T"+Di(t,2)+":"+Di(n,2)+":"+Di(i,2)+"Z":n||t?"T"+Di(t,2)+":"+Di(n,2)+"Z":"")}function YK(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(S,_){if(y)return y(S,_-1);v=S,y=p?qK(S,p):e9(S)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,S=0,_,w=v<=0,A=!1;g.charCodeAt(v-1)===sg&&--v,g.charCodeAt(v-1)===NE&&--v;function $(){if(w)return DE;if(A)return A=!1,R5;var k,T=b,N;if(g.charCodeAt(T)===RE){for(;b++<v&&g.charCodeAt(b)!==RE||g.charCodeAt(++b)===RE;);return(k=b)>=v?w=!0:(N=g.charCodeAt(b++))===sg?A=!0:N===NE&&(A=!0,g.charCodeAt(b)===sg&&++b),g.slice(T+1,k-1).replace(/""/g,'"')}for(;b<v;){if((N=g.charCodeAt(k=b++))===sg)A=!0;else if(N===NE)A=!0,g.charCodeAt(b)===sg&&++b;else if(N!==n)continue;return g.slice(T,k)}return w=!0,g.slice(T,v)}for(;(_=$())!==DE;){for(var M=[];_!==R5&&_!==DE;)M.push(_),_=$();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function o(g,p){return p==null&&(p=N5(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function l(g,p){return p==null&&(p=N5(g)),a(g,p).join(`
`)}function u(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?GK(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:o,formatBody:l,formatRows:u,formatRow:f,formatValue:d}}function XK(e){return e}function VK(e){if(e==null)return XK;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],o=e.translate[1];return function(l,u){u||(t=n=0);var f=2,d=l.length,g=new Array(d);for(g[0]=(t+=l[0])*i+a,g[1]=(n+=l[1])*r+o;f<d;)g[f]=l[f],++f;return g}}function WK(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function QK(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return O5(e,n)})}:O5(e,t)}function O5(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=t9(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function t9(e,t){var n=VK(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&WK(g,v)}function a(d){return n(d)}function o(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function l(d){for(var g=o(d);g.length<4;)g.push(g[0]);return g}function u(d){return d.map(l)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=o(d.arcs);break;case"MultiLineString":p=d.arcs.map(o);break;case"Polygon":p=u(d.arcs);break;case"MultiPolygon":p=d.arcs.map(u);break;default:return null}return{type:g,coordinates:p}}return f(t)}function KK(e,t){var n={},i={},r={},a=[],o=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++o],t[o]=f,t[d]=p)}),t.forEach(function(f){var d=l(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function l(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function u(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return u(r,i),u(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function ZK(e){return t9(e,JK.apply(this,arguments))}function JK(e,t,n){var i,r,a;if(arguments.length>1)i=eZ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:KK(e,i)}}function eZ(e,t,n){var i=[],r=[],a;function o(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function l(g){g.forEach(o)}function u(g){g.forEach(l)}function f(g){g.forEach(u)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":l(g.arcs);break;case"MultiLineString":case"Polygon":u(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function ts(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qd(e){let t,n,i;e.length!==2?(t=ts,n=(l,u)=>ts(e(l),u),i=(l,u)=>e(l)-u):(t=e===ts||e===tZ?e:nZ,n=e,i=e);function r(l,u,f=0,d=l.length){if(f<d){if(t(u,u)!==0)return d;do{const g=f+d>>>1;n(l[g],u)<0?f=g+1:d=g}while(f<d)}return f}function a(l,u,f=0,d=l.length){if(f<d){if(t(u,u)!==0)return d;do{const g=f+d>>>1;n(l[g],u)<=0?f=g+1:d=g}while(f<d)}return f}function o(l,u,f=0,d=l.length){const g=r(l,u,f,d-1);return g>f&&i(l[g-1],u)>-i(l[g],u)?g-1:g}return{left:r,center:o,right:a}}function nZ(){return 0}function n9(e){return e===null?NaN:+e}function*iZ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const i9=qd(ts),_l=i9.right,rZ=i9.left;qd(n9).center;function aZ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r));else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,a+=i*(l-r))}if(n>1)return a/(n-1)}function oZ(e,t){const n=aZ(e,t);return n&&Math.sqrt(n)}class yi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],o=t+a,l=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);l&&(n[i++]=l),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,a=r-(o-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=o+r,r==i-o&&(o=i))}return o}}class z5 extends Map{constructor(t,n=o9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Ew(this,t))}has(t){return super.has(Ew(this,t))}set(t,n){return super.set(r9(this,t),n)}delete(t){return super.delete(a9(this,t))}}class Ey extends Set{constructor(t,n=o9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Ew(this,t))}add(t){return super.add(r9(this,t))}delete(t){return super.delete(a9(this,t))}}function Ew({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function r9({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function a9({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function o9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sZ(e,t){return Array.from(t,n=>e[n])}function lZ(e=ts){if(e===ts)return s9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function s9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uZ=Math.sqrt(50),cZ=Math.sqrt(10),fZ=Math.sqrt(2);function _y(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=uZ?10:a>=cZ?5:a>=fZ?2:1;let l,u,f;return r<0?(f=Math.pow(10,-r)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,r)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?_y(e,t,n*2):[l,u,f]}function _w(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,o]=i?_y(t,e,n):_y(e,t,n);if(!(a>=r))return[];const l=a-r+1,u=new Array(l);if(i)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(r+f)/-o;else for(let f=0;f<l;++f)u[f]=(r+f)*o;return u}function ww(e,t,n){return t=+t,e=+e,n=+n,_y(e,t,n)[2]}function wl(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?ww(t,e,n):ww(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Iu(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Aw(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function l9(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?s9:lZ(r);i>n;){if(i-n>600){const u=i-n+1,f=t-n+1,d=Math.log(u),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(u-g)/u)*(f-u/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/u+p)),v=Math.min(i,Math.floor(t+(u-f)*g/u+p));l9(e,t,y,v,r)}const a=e[t];let o=n,l=i;for(lg(e,n,t),r(e[i],a)>0&&lg(e,n,i);o<l;){for(lg(e,o,l),++o,--l;r(e[o],a)<0;)++o;for(;r(e[l],a)>0;)--l}r(e[n],a)===0?lg(e,n,l):(++l,lg(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function lg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Cw(e,t,n){if(e=Float64Array.from(iZ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Aw(e);if(t>=1)return Iu(e);var i,r=(i-1)*t,a=Math.floor(r),o=Iu(l9(e,a).subarray(0,a+1)),l=Aw(e.subarray(a+1));return o+(l-o)*(r-a)}}function u9(e,t,n=n9){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(r-a)}}function dZ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function c9(e,t){return Cw(e,.5,t)}function*hZ(e){for(const t of e)yield*t}function f9(e){return Array.from(hZ(e))}function ar(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function d9(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function gZ(e,...t){e=new Ey(e),t=t.map(pZ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function pZ(e){return e instanceof Ey?e:new Ey(e)}function mZ(...e){const t=new Ey;for(const n of e)for(const i of n)t.add(i);return t}function yZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function td(e){return e=wy(Math.abs(e)),e?e[1]:NaN}function vZ(e,t){return function(n,i){for(var r=n.length,a=[],o=0,l=e[0],u=0;r>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),a.push(n.substring(r-=l,r+l)),!((u+=l+1)>i));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function bZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var xZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ku(e){if(!(t=xZ.exec(e)))throw new Error("invalid format: "+e);var t;return new r3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ku.prototype=r3.prototype;function r3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}r3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SZ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var h9;function EZ(e,t){var n=wy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(h9=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+wy(e,Math.max(0,t+a-1))[0]}function F5(e,t){var n=wy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const L5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F5(e*100,t),r:F5,s:EZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function U5(e){return e}var j5=Array.prototype.map,B5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function g9(e){var t=e.grouping===void 0||e.thousands===void 0?U5:vZ(j5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?U5:bZ(j5.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Ku(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,S=g.zero,_=g.width,w=g.comma,A=g.precision,$=g.trim,M=g.type;M==="n"?(w=!0,M="g"):L5[M]||(A===void 0&&(A=12),$=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?o:"",N=L5[M],z=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(j){var K=k,Y=T,q,F,R;if(M==="c")Y=N(j)+Y,j="";else{j=+j;var I=j<0||1/j<0;if(j=isNaN(j)?u:N(Math.abs(j),A),$&&(j=SZ(j)),I&&+j==0&&v!=="+"&&(I=!1),K=(I?v==="("?v:l:v==="-"||v==="("?"":v)+K,Y=(M==="s"?B5[8+h9/3]:"")+Y+(I&&v==="("?")":""),z){for(q=-1,F=j.length;++q<F;)if(R=j.charCodeAt(q),48>R||R>57){Y=(R===46?r+j.slice(q+1):j.slice(q))+Y,j=j.slice(0,q);break}}}w&&!S&&(j=t(j,1/0));var X=K.length+j.length+Y.length,Z=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(j=t(Z+j,Z.length?_-Y.length:1/0),Z=""),y){case"<":j=K+j+Y+Z;break;case"=":j=K+Z+j+Y;break;case"^":j=Z.slice(0,X=Z.length>>1)+K+j+Y+Z.slice(X);break;default:j=Z+K+j+Y;break}return a(j)}return B.toString=function(){return g+""},B}function d(g,p){var y=f((g=Ku(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(td(p)/3)))*3,b=Math.pow(10,-v),S=B5[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var o1,rb,a3;_Z({thousands:",",grouping:[3],currency:["$",""]});function _Z(e){return o1=g9(e),rb=o1.format,a3=o1.formatPrefix,o1}function p9(e){return Math.max(0,-td(Math.abs(e)))}function m9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(td(t)/3)))*3-td(Math.abs(e)))}function y9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,td(t)-td(e))+1}const OE=new Date,zE=new Date;function yn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const o=r(a),l=r.ceil(a);return a-o<l-a?o:l},r.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,l)=>{const u=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let f;do u.push(f=new Date(+a)),t(a,l),e(a);while(f<a&&a<o);return u},r.filter=a=>yn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(r.count=(a,o)=>(OE.setTime(+a),zE.setTime(+o),e(OE),e(zE),Math.floor(n(OE,zE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const nd=yn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);nd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):nd);nd.range;const Vo=1e3,Dr=Vo*60,Wo=Dr*60,cs=Wo*24,o3=cs*7,I5=cs*30,FE=cs*365,Qo=yn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vo)},(e,t)=>(t-e)/Vo,e=>e.getUTCSeconds());Qo.range;const ab=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vo)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getMinutes());ab.range;const ob=yn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getUTCMinutes());ob.range;const sb=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vo-e.getMinutes()*Dr)},(e,t)=>{e.setTime(+e+t*Wo)},(e,t)=>(t-e)/Wo,e=>e.getHours());sb.range;const lb=yn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wo)},(e,t)=>(t-e)/Wo,e=>e.getUTCHours());lb.range;const ns=yn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Dr)/cs,e=>e.getDate()-1);ns.range;const vl=yn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cs,e=>e.getUTCDate()-1);vl.range;const v9=yn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cs,e=>Math.floor(e/cs));v9.range;function xc(e){return yn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dr)/o3)}const Hd=xc(0),Ay=xc(1),wZ=xc(2),AZ=xc(3),id=xc(4),CZ=xc(5),$Z=xc(6);Hd.range;Ay.range;wZ.range;AZ.range;id.range;CZ.range;$Z.range;function Sc(e){return yn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/o3)}const Gd=Sc(0),Cy=Sc(1),TZ=Sc(2),MZ=Sc(3),rd=Sc(4),kZ=Sc(5),DZ=Sc(6);Gd.range;Cy.range;TZ.range;MZ.range;rd.range;kZ.range;DZ.range;const mp=yn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mp.range;const yp=yn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yp.range;const Za=yn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Za.range;const Ja=yn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ja.range;function b9(e,t,n,i,r,a){const o=[[Qo,1,Vo],[Qo,5,5*Vo],[Qo,15,15*Vo],[Qo,30,30*Vo],[a,1,Dr],[a,5,5*Dr],[a,15,15*Dr],[a,30,30*Dr],[r,1,Wo],[r,3,3*Wo],[r,6,6*Wo],[r,12,12*Wo],[i,1,cs],[i,2,2*cs],[n,1,o3],[t,1,I5],[t,3,3*I5],[e,1,FE]];function l(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:u(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function u(f,d,g){const p=Math.abs(d-f)/g,y=qd(([,,S])=>S).right(o,p);if(y===o.length)return e.every(wl(f/FE,d/FE,g));if(y===0)return nd.every(Math.max(wl(f,d,g),1));const[v,b]=o[p/o[y-1][2]<o[y][2]/p?y-1:y];return v.every(b)}return[l,u]}const[RZ,NZ]=b9(Ja,yp,Gd,v9,lb,ob),[OZ,zZ]=b9(Za,mp,Hd,ns,sb,ab),Pn="year",Li="quarter",ti="month",gn="week",Ui="date",Kn="day",eo="dayofyear",hr="hours",gr="minutes",jr="seconds",ga="milliseconds",s3=[Pn,Li,ti,gn,Ui,Kn,eo,hr,gr,jr,ga],LE=s3.reduce((e,t,n)=>(e[t]=1+n,e),{});function l3(e){const t=_e(e).slice(),n={};return t.length||te("Missing time unit."),t.forEach(r=>{we(LE,r)?n[r]=1:te(`Invalid time unit: ${r}.`)}),(n[gn]||n[Kn]?1:0)+(n[Li]||n[ti]||n[Ui]?1:0)+(n[eo]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((r,a)=>LE[r]-LE[a]),t}const FZ={[Pn]:"%Y ",[Li]:"Q%q ",[ti]:"%b ",[Ui]:"%d ",[gn]:"W%U ",[Kn]:"%a ",[eo]:"%j ",[hr]:"%H:00",[gr]:"00:%M",[jr]:":%S",[ga]:".%L",[`${Pn}-${ti}`]:"%Y-%m ",[`${Pn}-${ti}-${Ui}`]:"%Y-%m-%d ",[`${hr}-${gr}`]:"%H:%M"};function x9(e,t){const n=He({},FZ,t),i=l3(e),r=i.length;let a="",o=0,l,u;for(o=0;o<r;)for(l=i.length;l>o;--l)if(u=i.slice(o,l).join("-"),n[u]!=null){a+=n[u],o=l;break}return a.trim()}const Ru=new Date;function u3(e){return Ru.setFullYear(e),Ru.setMonth(0),Ru.setDate(1),Ru.setHours(0,0,0,0),Ru}function S9(e){return _9(new Date(e))}function E9(e){return $w(new Date(e))}function _9(e){return ns.count(u3(e.getFullYear())-1,e)}function $w(e){return Hd.count(u3(e.getFullYear())-1,e)}function Tw(e){return u3(e).getDay()}function LZ(e,t,n,i,r,a,o){if(0<=e&&e<100){const l=new Date(-1,t,n,i,r,a,o);return l.setFullYear(e),l}return new Date(e,t,n,i,r,a,o)}function w9(e){return C9(new Date(e))}function A9(e){return Mw(new Date(e))}function C9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return vl.count(t-1,e)}function Mw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Gd.count(t-1,e)}function kw(e){return Ru.setTime(Date.UTC(e,0,1)),Ru.getUTCDay()}function UZ(e,t,n,i,r,a,o){if(0<=e&&e<100){const l=new Date(Date.UTC(-1,t,n,i,r,a,o));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(e,t,n,i,r,a,o))}function $9(e,t,n,i,r){const a=t||1,o=rt(e),l=(_,w,A)=>(A=A||_,jZ(n[A],i[A],_===o&&a,w)),u=new Date,f=ha(e),d=f[Pn]?l(Pn):ai(2012),g=f[ti]?l(ti):f[Li]?l(Li):sl,p=f[gn]&&f[Kn]?l(Kn,1,gn+Kn):f[gn]?l(gn,1):f[Kn]?l(Kn,1):f[Ui]?l(Ui,1):f[eo]?l(eo,1):Ud,y=f[hr]?l(hr):sl,v=f[gr]?l(gr):sl,b=f[jr]?l(jr):sl,S=f[ga]?l(ga):sl;return function(_){u.setTime(+_);const w=d(u);return r(w,g(u),p(u,w),y(u),v(u),b(u),S(u))}}function jZ(e,t,n,i){const r=n<=1?e:i?(a,o)=>i+n*Math.floor((e(a,o)-i)/n):(a,o)=>n*Math.floor(e(a,o)/n);return t?(a,o)=>t(r(a,o),o):r}function ad(e,t,n){return t+e*7-(n+6)%7}const BZ={[Pn]:e=>e.getFullYear(),[Li]:e=>Math.floor(e.getMonth()/3),[ti]:e=>e.getMonth(),[Ui]:e=>e.getDate(),[hr]:e=>e.getHours(),[gr]:e=>e.getMinutes(),[jr]:e=>e.getSeconds(),[ga]:e=>e.getMilliseconds(),[eo]:e=>_9(e),[gn]:e=>$w(e),[gn+Kn]:(e,t)=>ad($w(e),e.getDay(),Tw(t)),[Kn]:(e,t)=>ad(1,e.getDay(),Tw(t))},IZ={[Li]:e=>3*e,[gn]:(e,t)=>ad(e,0,Tw(t))};function T9(e,t){return $9(e,t||1,BZ,IZ,LZ)}const PZ={[Pn]:e=>e.getUTCFullYear(),[Li]:e=>Math.floor(e.getUTCMonth()/3),[ti]:e=>e.getUTCMonth(),[Ui]:e=>e.getUTCDate(),[hr]:e=>e.getUTCHours(),[gr]:e=>e.getUTCMinutes(),[jr]:e=>e.getUTCSeconds(),[ga]:e=>e.getUTCMilliseconds(),[eo]:e=>C9(e),[gn]:e=>Mw(e),[Kn]:(e,t)=>ad(1,e.getUTCDay(),kw(t)),[gn+Kn]:(e,t)=>ad(Mw(e),e.getUTCDay(),kw(t))},qZ={[Li]:e=>3*e,[gn]:(e,t)=>ad(e,0,kw(t))};function M9(e,t){return $9(e,t||1,PZ,qZ,UZ)}const HZ={[Pn]:Za,[Li]:mp.every(3),[ti]:mp,[gn]:Hd,[Ui]:ns,[Kn]:ns,[eo]:ns,[hr]:sb,[gr]:ab,[jr]:Qo,[ga]:nd},GZ={[Pn]:Ja,[Li]:yp.every(3),[ti]:yp,[gn]:Gd,[Ui]:vl,[Kn]:vl,[eo]:vl,[hr]:lb,[gr]:ob,[jr]:Qo,[ga]:nd};function Yd(e){return HZ[e]}function Xd(e){return GZ[e]}function k9(e,t,n){return e?e.offset(t,n):void 0}function D9(e,t,n){return k9(Yd(e),t,n)}function R9(e,t,n){return k9(Xd(e),t,n)}function N9(e,t,n,i){return e?e.range(t,n,i):void 0}function O9(e,t,n,i){return N9(Yd(e),t,n,i)}function z9(e,t,n,i){return N9(Xd(e),t,n,i)}const Ng=1e3,Og=Ng*60,zg=Og*60,ub=zg*24,YZ=ub*7,P5=ub*30,Dw=ub*365,F9=[Pn,ti,Ui,hr,gr,jr,ga],Fg=F9.slice(0,-1),Lg=Fg.slice(0,-1),Ug=Lg.slice(0,-1),XZ=Ug.slice(0,-1),VZ=[Pn,gn],q5=[Pn,ti],L9=[Pn],ug=[[Fg,1,Ng],[Fg,5,5*Ng],[Fg,15,15*Ng],[Fg,30,30*Ng],[Lg,1,Og],[Lg,5,5*Og],[Lg,15,15*Og],[Lg,30,30*Og],[Ug,1,zg],[Ug,3,3*zg],[Ug,6,6*zg],[Ug,12,12*zg],[XZ,1,ub],[VZ,1,YZ],[q5,1,P5],[q5,3,3*P5],[L9,1,Dw]];function U9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Qp(t))/n;let r=qd(l=>l[2]).right(ug,i),a,o;return r===ug.length?(a=L9,o=wl(t[0]/Dw,t[1]/Dw,n)):r?(r=ug[i/ug[r-1][2]<ug[r][2]/i?r-1:r],a=r[0],o=r[1]):(a=F9,o=Math.max(wl(t[0],t[1],n),1)),{units:a,step:o}}function UE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function j9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,f=fg(r),d=dg(r),g=fg(a),p=dg(a),y=fg(o),v=dg(o),b=fg(l),S=dg(l),_=fg(u),w=dg(u),A={a:I,A:X,b:Z,B:ce,c:null,d:W5,e:W5,f:yJ,g:$J,G:MJ,H:gJ,I:pJ,j:mJ,L:B9,m:vJ,M:bJ,p:L,q:G,Q:Z5,s:J5,S:xJ,u:SJ,U:EJ,V:_J,w:wJ,W:AJ,x:null,X:null,y:CJ,Y:TJ,Z:kJ,"%":K5},$={a:se,A:me,b:be,B:Ne,c:null,d:Q5,e:Q5,f:OJ,g:HJ,G:YJ,H:DJ,I:RJ,j:NJ,L:P9,m:zJ,M:FJ,p:Xe,q:Ot,Q:Z5,s:J5,S:LJ,u:UJ,U:jJ,V:BJ,w:IJ,W:PJ,x:null,X:null,y:qJ,Y:GJ,Z:XJ,"%":K5},M={a:B,A:j,b:K,B:Y,c:q,d:X5,e:X5,f:cJ,g:Y5,G:G5,H:V5,I:V5,j:oJ,L:uJ,m:aJ,M:sJ,p:z,q:rJ,Q:dJ,s:hJ,S:lJ,u:JZ,U:eJ,V:tJ,w:ZZ,W:nJ,x:F,X:R,y:Y5,Y:G5,Z:iJ,"%":fJ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),$.x=k(n,$),$.X=k(i,$),$.c=k(t,$);function k(ye,Le){return function(Ie){var de=[],nn=-1,Qe=0,qt=ye.length,rn,Xr,fh;for(Ie instanceof Date||(Ie=new Date(+Ie));++nn<qt;)ye.charCodeAt(nn)===37&&(de.push(ye.slice(Qe,nn)),(Xr=H5[rn=ye.charAt(++nn)])!=null?rn=ye.charAt(++nn):Xr=rn==="e"?" ":"0",(fh=Le[rn])&&(rn=fh(Ie,Xr)),de.push(rn),Qe=nn+1);return de.push(ye.slice(Qe,nn)),de.join("")}}function T(ye,Le){return function(Ie){var de=cg(1900,void 0,1),nn=N(de,ye,Ie+="",0),Qe,qt;if(nn!=Ie.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Le&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Qe=jE(cg(de.y,0,1)),qt=Qe.getUTCDay(),Qe=qt>4||qt===0?Cy.ceil(Qe):Cy(Qe),Qe=vl.offset(Qe,(de.V-1)*7),de.y=Qe.getUTCFullYear(),de.m=Qe.getUTCMonth(),de.d=Qe.getUTCDate()+(de.w+6)%7):(Qe=UE(cg(de.y,0,1)),qt=Qe.getDay(),Qe=qt>4||qt===0?Ay.ceil(Qe):Ay(Qe),Qe=ns.offset(Qe,(de.V-1)*7),de.y=Qe.getFullYear(),de.m=Qe.getMonth(),de.d=Qe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),qt="Z"in de?jE(cg(de.y,0,1)).getUTCDay():UE(cg(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(qt+5)%7:de.w+de.U*7-(qt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,jE(de)):UE(de)}}function N(ye,Le,Ie,de){for(var nn=0,Qe=Le.length,qt=Ie.length,rn,Xr;nn<Qe;){if(de>=qt)return-1;if(rn=Le.charCodeAt(nn++),rn===37){if(rn=Le.charAt(nn++),Xr=M[rn in H5?Le.charAt(nn++):rn],!Xr||(de=Xr(ye,Ie,de))<0)return-1}else if(rn!=Ie.charCodeAt(de++))return-1}return de}function z(ye,Le,Ie){var de=f.exec(Le.slice(Ie));return de?(ye.p=d.get(de[0].toLowerCase()),Ie+de[0].length):-1}function B(ye,Le,Ie){var de=y.exec(Le.slice(Ie));return de?(ye.w=v.get(de[0].toLowerCase()),Ie+de[0].length):-1}function j(ye,Le,Ie){var de=g.exec(Le.slice(Ie));return de?(ye.w=p.get(de[0].toLowerCase()),Ie+de[0].length):-1}function K(ye,Le,Ie){var de=_.exec(Le.slice(Ie));return de?(ye.m=w.get(de[0].toLowerCase()),Ie+de[0].length):-1}function Y(ye,Le,Ie){var de=b.exec(Le.slice(Ie));return de?(ye.m=S.get(de[0].toLowerCase()),Ie+de[0].length):-1}function q(ye,Le,Ie){return N(ye,t,Le,Ie)}function F(ye,Le,Ie){return N(ye,n,Le,Ie)}function R(ye,Le,Ie){return N(ye,i,Le,Ie)}function I(ye){return o[ye.getDay()]}function X(ye){return a[ye.getDay()]}function Z(ye){return u[ye.getMonth()]}function ce(ye){return l[ye.getMonth()]}function L(ye){return r[+(ye.getHours()>=12)]}function G(ye){return 1+~~(ye.getMonth()/3)}function se(ye){return o[ye.getUTCDay()]}function me(ye){return a[ye.getUTCDay()]}function be(ye){return u[ye.getUTCMonth()]}function Ne(ye){return l[ye.getUTCMonth()]}function Xe(ye){return r[+(ye.getUTCHours()>=12)]}function Ot(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Le=k(ye+="",A);return Le.toString=function(){return ye},Le},parse:function(ye){var Le=T(ye+="",!1);return Le.toString=function(){return ye},Le},utcFormat:function(ye){var Le=k(ye+="",$);return Le.toString=function(){return ye},Le},utcParse:function(ye){var Le=T(ye+="",!0);return Le.toString=function(){return ye},Le}}}var H5={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,WZ=/^%/,QZ=/[\\^$*+?|[\]().{}]/g;function ct(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function KZ(e){return e.replace(QZ,"\\$&")}function fg(e){return new RegExp("^(?:"+e.map(KZ).join("|")+")","i")}function dg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ZZ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function JZ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function eJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function tJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function nJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function G5(e,t,n){var i=Mn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Y5(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function iJ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function rJ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function aJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function X5(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function oJ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function V5(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function sJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function lJ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function uJ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function cJ(e,t,n){var i=Mn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function fJ(e,t,n){var i=WZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function dJ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function hJ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function W5(e,t){return ct(e.getDate(),t,2)}function gJ(e,t){return ct(e.getHours(),t,2)}function pJ(e,t){return ct(e.getHours()%12||12,t,2)}function mJ(e,t){return ct(1+ns.count(Za(e),e),t,3)}function B9(e,t){return ct(e.getMilliseconds(),t,3)}function yJ(e,t){return B9(e,t)+"000"}function vJ(e,t){return ct(e.getMonth()+1,t,2)}function bJ(e,t){return ct(e.getMinutes(),t,2)}function xJ(e,t){return ct(e.getSeconds(),t,2)}function SJ(e){var t=e.getDay();return t===0?7:t}function EJ(e,t){return ct(Hd.count(Za(e)-1,e),t,2)}function I9(e){var t=e.getDay();return t>=4||t===0?id(e):id.ceil(e)}function _J(e,t){return e=I9(e),ct(id.count(Za(e),e)+(Za(e).getDay()===4),t,2)}function wJ(e){return e.getDay()}function AJ(e,t){return ct(Ay.count(Za(e)-1,e),t,2)}function CJ(e,t){return ct(e.getFullYear()%100,t,2)}function $J(e,t){return e=I9(e),ct(e.getFullYear()%100,t,2)}function TJ(e,t){return ct(e.getFullYear()%1e4,t,4)}function MJ(e,t){var n=e.getDay();return e=n>=4||n===0?id(e):id.ceil(e),ct(e.getFullYear()%1e4,t,4)}function kJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ct(t/60|0,"0",2)+ct(t%60,"0",2)}function Q5(e,t){return ct(e.getUTCDate(),t,2)}function DJ(e,t){return ct(e.getUTCHours(),t,2)}function RJ(e,t){return ct(e.getUTCHours()%12||12,t,2)}function NJ(e,t){return ct(1+vl.count(Ja(e),e),t,3)}function P9(e,t){return ct(e.getUTCMilliseconds(),t,3)}function OJ(e,t){return P9(e,t)+"000"}function zJ(e,t){return ct(e.getUTCMonth()+1,t,2)}function FJ(e,t){return ct(e.getUTCMinutes(),t,2)}function LJ(e,t){return ct(e.getUTCSeconds(),t,2)}function UJ(e){var t=e.getUTCDay();return t===0?7:t}function jJ(e,t){return ct(Gd.count(Ja(e)-1,e),t,2)}function q9(e){var t=e.getUTCDay();return t>=4||t===0?rd(e):rd.ceil(e)}function BJ(e,t){return e=q9(e),ct(rd.count(Ja(e),e)+(Ja(e).getUTCDay()===4),t,2)}function IJ(e){return e.getUTCDay()}function PJ(e,t){return ct(Cy.count(Ja(e)-1,e),t,2)}function qJ(e,t){return ct(e.getUTCFullYear()%100,t,2)}function HJ(e,t){return e=q9(e),ct(e.getUTCFullYear()%100,t,2)}function GJ(e,t){return ct(e.getUTCFullYear()%1e4,t,4)}function YJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?rd(e):rd.ceil(e),ct(e.getUTCFullYear()%1e4,t,4)}function XJ(){return"+0000"}function K5(){return"%"}function Z5(e){return+e}function J5(e){return Math.floor(+e/1e3)}var _f,c3,H9,f3,G9;VJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VJ(e){return _f=j9(e),c3=_f.format,H9=_f.parse,f3=_f.utcFormat,G9=_f.utcParse,_f}function jg(e){const t={};return n=>t[n]||(t[n]=e(n))}function WJ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=QJ(i,r);const o=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+o}}function QJ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function Y9(e){const t=jg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Ku(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return WJ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,o){o=Ku(o??",f");const l=wl(i,r,a),u=Math.max(Math.abs(i),Math.abs(r));let f;if(o.precision==null)switch(o.type){case"s":return isNaN(f=m9(l,u))||(o.precision=f),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(f=y9(l,u))||(o.precision=f-(o.type==="e"));break}case"f":case"%":{isNaN(f=p9(l))||(o.precision=f-(o.type==="%")*2);break}}return t(o)}}}let Rw;X9();function X9(){return Rw=Y9({format:rb,formatPrefix:a3})}function V9(e){return Y9(g9(e))}function $y(e){return arguments.length?Rw=V9(e):Rw}function e6(e,t,n){n=n||{},Se(n)||te(`Invalid time multi-format specifier: ${n}`);const i=t(jr),r=t(gr),a=t(hr),o=t(Ui),l=t(gn),u=t(ti),f=t(Li),d=t(Pn),g=e(n[ga]||".%L"),p=e(n[jr]||":%S"),y=e(n[gr]||"%I:%M"),v=e(n[hr]||"%I %p"),b=e(n[Ui]||n[Kn]||"%a %d"),S=e(n[gn]||"%b %d"),_=e(n[ti]||"%B"),w=e(n[Li]||"%B"),A=e(n[Pn]||"%Y");return $=>(i($)<$?g:r($)<$?p:a($)<$?y:o($)<$?v:u($)<$?l($)<$?b:S:d($)<$?f($)<$?_:w:A)($)}function W9(e){const t=jg(e.format),n=jg(e.utcFormat);return{timeFormat:i=>Ee(i)?t(i):e6(t,Yd,i),utcFormat:i=>Ee(i)?n(i):e6(n,Xd,i),timeParse:jg(e.parse),utcParse:jg(e.utcParse)}}let Nw;Q9();function Q9(){return Nw=W9({format:c3,parse:H9,utcFormat:f3,utcParse:G9})}function K9(e){return W9(j9(e))}function vp(e){return arguments.length?Nw=K9(e):Nw}const Ow=(e,t)=>He({},e,t);function Z9(e,t){const n=e?V9(e):$y(),i=t?K9(t):vp();return Ow(n,i)}function d3(e,t){const n=arguments.length;return n&&n!==2&&te("defaultLocale expects either zero or two arguments."),n?Ow($y(e),vp(t)):Ow($y(),vp())}function KJ(){return X9(),Q9(),d3()}const ZJ=/^(data:|([A-Za-z]+:)?\/\/)/,JJ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,eee=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,t6="file://";function tee(e){return t=>({options:t||{},sanitize:iee,load:nee,fileAccess:!1,file:ree(),http:oee})}async function nee(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t?.http)}async function iee(e,t){t=He({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,o;const l=JJ.test(e.replace(eee,""));(e==null||typeof e!="string"||!l)&&te("Sanitize failure, invalid URI: "+pe(e));const u=ZJ.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),a=(r=e.startsWith(t6))||t.mode==="file"||t.mode!=="http"&&!u&&n,r?e=e.slice(t6.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function ree(e){return aee}async function aee(){te("No file system access.")}async function oee(e,t){const n=He({},this.options.http,t),i=t&&t.response,r=await fetch(e,n);return r.ok?Pe(r[i])?r[i]():r.text():te(r.status+""+r.statusText)}const see=e=>e!=null&&e===e,lee=e=>e==="true"||e==="false"||e===!0||e===!1,uee=e=>!Number.isNaN(Date.parse(e)),J9=e=>!Number.isNaN(+e)&&!(e instanceof Date),cee=e=>J9(e)&&Number.isInteger(+e),zw={boolean:t3,integer:Zn,number:Zn,date:n3,string:i3,unknown:ri},s1=[lee,cee,J9,uee],fee=["boolean","integer","number","date"];function e7(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=s1.length,r=s1.map((a,o)=>o+1);for(let a=0,o=0,l,u;a<n;++a)for(u=t?e[a][t]:e[a],l=0;l<i;++l)if(r[l]&&see(u)&&!s1[l](u)&&(r[l]=0,++o,o===s1.length))return"string";return fee[r.reduce((a,o)=>a===0?o:a,0)-1]}function t7(e,t){return t.reduce((n,i)=>(n[i]=e7(e,i),n),{})}function n6(e){const t=function(n,i){const r={delimiter:e};return h3(n,i?He(i,r):r)};return t.responseType="text",t}function h3(e,t){return t.header&&(e=t.header.map(pe).join(t.delimiter)+`
`+e),YK(t.delimiter).parse(e+"")}h3.responseType="text";function dee(e){return typeof Buffer=="function"&&Pe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function g3(e,t){const n=t&&t.property?Lr(t.property):ri;return Se(e)&&!dee(e)?hee(n(e),t):n(JSON.parse(e))}g3.responseType="json";function hee(e,t){return!ae(e)&&VL(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const gee={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function n7(e,t){let n,i,r,a;return e=g3(e,t),t&&t.feature?(n=QK,r=t.feature):t&&t.mesh?(n=ZK,r=t.mesh,a=gee[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):te("Invalid TopoJSON object: "+r),i&&i.features||[i]}n7.responseType="json";const X1={dsv:h3,csv:n6(","),tsv:n6("	"),json:g3,topojson:n7};function p3(e,t){return arguments.length>1?(X1[e]=t,this):we(X1,e)?X1[e]:null}function i7(e){const t=p3(e);return t&&t.responseType||"text"}function r7(e,t,n,i){t=t||{};const r=p3(t.type||"json");return r||te("Unknown data format type: "+t.type),e=r(e,t),t.parse&&pee(e,t.parse,n,i),we(e,"columns")&&delete e.columns,e}function pee(e,t,n,i){if(!e.length)return;const r=vp();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),o,l,u,f,d,g;t==="auto"&&(t=t7(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!zw[v])throw Error("Illegal format pattern: "+y+":"+v);return zw[v]});for(u=0,d=e.length,g=a.length;u<d;++u)for(o=e[u],f=0;f<g;++f)l=a[f],o[l]=p[f](o[l])}const cb=tee();function fb(e){const t=e||ri,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function V1(e,t){try{await t(e)}catch(n){e.error(n)}}const a7=Symbol("vega_id");let mee=1;function db(e){return!!(e&&ke(e))}function ke(e){return e[a7]}function o7(e,t){return e[a7]=t,e}function ht(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:o7(t,mee++)}function m3(e){return hb(e,ht({}))}function hb(e,t){for(const n in e)t[n]=e[n];return t}function s7(e,t){return o7(t,ke(e))}function Ec(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function l7(e){return e&&e.constructor===_c}function _c(){const e=[],t=[],n=[],i=[],r=[];let a=null,o=!1;return{constructor:_c,insert(l){const u=_e(l),f=u.length;for(let d=0;d<f;++d)e.push(u[d]);return this},remove(l){const u=Pe(l)?i:t,f=_e(l),d=f.length;for(let g=0;g<d;++g)u.push(f[g]);return this},modify(l,u,f){const d={field:u,value:ai(f)};return Pe(l)?(d.filter=l,r.push(d)):(d.tuple=l,n.push(d)),this},encode(l,u){return Pe(l)?r.push({filter:l,field:u}):n.push({tuple:l,field:u}),this},clean(l){return a=l,this},reflow(){return o=!0,this},pulse(l,u){const f={},d={};let g,p,y,v,b,S;for(g=0,p=u.length;g<p;++g)f[ke(u[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[ke(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],u.forEach(w=>{v(w)&&(f[ke(w)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],S=ke(b),f[S]?f[S]=1:l.add.push(ht(e[g]));for(g=0,p=u.length;g<p;++g)b=u[g],f[ke(b)]<0&&l.rem.push(b);function _(w,A,$){$?w[A]=$(w):l.encode=A,o||(d[ke(w)]=w)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,S=f[ke(b)],S>0&&(_(b,v,y.value),l.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,u.forEach(w=>{v(w)&&f[ke(w)]>0&&_(w,y.field,y.value)}),l.modifies(y.field);if(o)l.mod=t.length||i.length?u.filter(w=>f[ke(w)]>0):u.slice();else for(S in d)l.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&l.clean(!0),l}}}const W1="_:mod:_";function gb(){Object.defineProperty(this,W1,{writable:!0,value:{}})}gb.prototype={set(e,t,n,i){const r=this,a=r[e],o=r[W1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||i)&&(r[e]=n,o[e]=ae(n)?1+n.length:-1),r},modified(e,t){const n=this[W1];if(arguments.length){if(ae(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[W1]={},this}};let yee=0;const vee="pulse",bee=new gb,xee=1,See=2;function $t(e,t,n,i){this.id=++yee,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function i6(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}$t.prototype={targets(){return this._targets||(this._targets=fb(Wp))},set(e){return this.value!==e?(this.value=e,1):0},skip:i6(xee),modified:i6(See),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new gb,r=this._argops=this._argops||[],a=[];let o,l,u,f;const d=(g,p,y)=>{y instanceof $t?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(o in e)if(l=e[o],o===vee)_e(l).forEach(g=>{g instanceof $t?g!==this&&(g.targets().add(this),a.push(g)):te("Pulse parameters must be operator instances.")}),this.source=l;else if(ae(l))for(i.set(o,-1,Array(u=l.length)),f=0;f<u;++f)d(o,f,l[f]);else d(o,-1,l);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||bee,n=this._argops;let i,r,a,o;if(n){const l=n.length;for(r=0;r<l;++r)i=n[r],a=i.op,o=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,o);if(n.initonly){for(r=0;r<l;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Eee(e,t,n,i){let r=1,a;return e instanceof $t?a=e:e&&e.prototype instanceof $t?a=new e:Pe(e)?a=new $t(null,e):(r=0,a=new $t(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function _ee(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let wee=0;function pb(e,t,n){this.id=++wee,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function el(e,t,n){return new pb(e,t,n)}pb.prototype={_filter:Ur,_apply:ri,targets(){return this._targets||(this._targets=fb(Wp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=el(e);return this.targets().add(t),t},apply(e){const t=el(null,e);return this.targets().add(t),t},merge(){const e=el();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=el();return this.targets().add(el(null,null,ZC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(el(null,null,()=>n=!0)),t.targets().add(el(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ur,this._targets=null}};function Aee(e,t,n,i){const r=this,a=el(n,i),o=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let l;typeof e=="string"&&typeof document<"u"?l=document.querySelectorAll(e):l=_e(e);const u=l.length;for(let f=0;f<u;++f)l[f].addEventListener(t,o);return a}function Cee(e,t){const n=this.locale();return r7(e,t,n.timeParse,n.utcParse)}function $ee(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Tee(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:i7(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function Mee(e,t,n){const i=this,r=i._pending||kee(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ur).insert(a.data||[])),r.done(),a}function kee(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Dee={skip:!0};function Ree(e,t,n,i,r){return(e instanceof $t?Oee:Nee)(this,e,t,n,i,r),this}function Nee(e,t,n,i,r,a){const o=He({},a,Dee);let l,u;Pe(n)||(n=ai(n)),i===void 0?l=f=>e.touch(n(f)):Pe(i)?(u=new $t(null,i,r,!1),l=f=>{u.evaluate(f);const d=n(f),g=u.value;l7(g)?e.pulse(d,g,a):e.update(d,g,o)}):l=f=>e.update(n(f),i,o),t.apply(l)}function Oee(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const o=a||{},l=new $t(null,zee(n,i),r,!1);l.modified(o.force),l.rank=t.rank,t.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),e.connect(n,[l]))}}function zee(e,t){return t=Pe(t)?t:ai(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function Fee(e){e.rank=++this._rank}function Lee(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&te("Cycle detected in dataflow graph.")}const Ty={},La=1,il=2,qo=4,Uee=La|il,r6=La|qo,wf=La|il|qo,a6=8,hg=16,o6=32,s6=64;function bl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function BE(e,t){const n=[];return nl(e,t,i=>n.push(i)),n}function l6(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function l1(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}bl.prototype={StopPropagation:Ty,ADD:La,REM:il,MOD:qo,ADD_REM:Uee,ADD_MOD:r6,ALL:wf,REFLOW:a6,SOURCE:hg,NO_SOURCE:o6,NO_FIELDS:s6,fork(e){return new bl(this.dataflow).init(this,e)},clone(){const e=this.fork(wf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(wf|hg)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new bl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&s6)&&(n.fields=e.fields),t&La?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&il?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&qo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&o6?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||wf;return t&La&&this.add.length||t&il&&this.rem.length||t&qo&&this.mod.length},reflow(e){if(e)return this.fork(wf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(qo,l6(this,La))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ae(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ae(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&La&&(n.addF=l1(n.addF,t)),e&il&&(n.remF=l1(n.remF,t)),e&qo&&(n.modF=l1(n.modF,t)),e&hg&&(n.srcF=l1(n.srcF,t)),n},materialize(e){e=e||wf;const t=this;return e&La&&t.addF&&(t.add=BE(t.add,t.addF),t.addF=null),e&il&&t.remF&&(t.rem=BE(t.rem,t.remF),t.remF=null),e&qo&&t.modF&&(t.mod=BE(t.mod,t.modF),t.modF=null),e&hg&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&hg)return nl(n.source,n.srcF,i),n;e&La&&nl(n.add,n.addF,i),e&il&&nl(n.rem,n.remF,i),e&qo&&nl(n.mod,n.modF,i);const r=n.source;if(e&a6&&r){const a=n.add.length+n.mod.length;a===r.length||(a?nl(r,l6(n,r6),i):nl(r,n.srcF,i))}return n}};function y3(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const l=r.fields||(r.fields={});for(const u in o.fields)l[u]=1}o.changed(r.ADD)&&(a|=r.ADD),o.changed(r.REM)&&(a|=r.REM),o.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}ve(y3,bl,{fork(e){const t=new bl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ae(e)?e.some(i=>n[i]):n[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function jee(e,t,n){const i=this,r=[];if(i._pulse)return u7(i);if(i._pending&&await i._pending,t&&await V1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new bl(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=fb(Wp);let o=0,l,u,f;try{for(;i._heap.size()>0;){if(l=i._heap.pop(),l.rank!==l.qrank){i._enqueue(l,!0);continue}u=l.run(i._getPulse(l,e)),u.then?u=await u:u.async&&(r.push(u.async),u=Ty),u!==Ty&&l._targets&&l._targets.forEach(d=>i._enqueue(d)),++o}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${o} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await V1(i,d[g].callback)}return n&&await V1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function Bee(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Iee(e,t,n){return this._pulse?u7(this):(this.evaluate(e,t,n),this)}function Pee(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function u7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function qee(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Hee(e,t){const n=e.source,i=this._clock;return n&&ae(n)?new y3(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Gee(this._pulse,n&&n.pulse)}function Gee(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Ty&&(e.source=t.source),e)}const v3={skip:!1,force:!1};function Yee(e,t){const n=t||v3;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Xee(e,t,n){const i=n||v3;return(e.set(t)||i.force)&&this.touch(e,i),this}function Vee(e,t,n){this.touch(e,n||v3);const i=new bl(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function Wee(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),c7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Qee(t,0,e)):i=n,i}}}function c7(e,t,n,i){let r,a;const o=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(o,r)<0){e[n]=r,n=a;continue}break}return e[n]=o}function Qee(e,t,n){const i=t,r=e.length,a=e[t];let o=(t<<1)+1,l;for(;o<r;)l=o+1,l<r&&n(e[o],e[l])>=0&&(o=l),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=a,c7(e,i,t,n)}function Gf(){this.logger(tb()),this.logLevel(YC),this._clock=0,this._rank=0,this._locale=d3();try{this._loader=cb()}catch{}this._touched=fb(Wp),this._input={},this._pulse=null,this._heap=Wee((e,t)=>e.qrank-t.qrank),this._postrun=[]}function gg(e){return function(){return this._log[e].apply(this,arguments)}}Gf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:gg("error"),warn:gg("warn"),info:gg("info"),debug:gg("debug"),logLevel:gg("level"),cleanThreshold:1e4,add:Eee,connect:_ee,rank:Fee,rerank:Lee,pulse:Vee,touch:Yee,update:Xee,changeset:_c,ingest:$ee,parse:Cee,preload:Mee,request:Tee,events:Aee,on:Ree,evaluate:jee,run:Iee,runAsync:Bee,runAfter:Pee,_enqueue:qee,_getPulse:Hee};function ee(e,t){$t.call(this,e,null,t)}ve(ee,$t,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const od={};function f7(e){const t=d7(e);return t&&t.Definition||null}function d7(e){return e=e&&e.toLowerCase(),we(od,e)?od[e]:null}function*h7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function b3(e,t,n){const i=Float64Array.from(h7(e,n));return i.sort(ts),t.map(r=>u9(i,r))}function x3(e,t){return b3(e,[.25,.5,.75],t)}function S3(e,t){const n=e.length,i=oZ(e,t),r=x3(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function g7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],o=e.extent[1],l,u,f,d,g,p;const y=e.span||o-a||Math.abs(a)||1;if(e.step)l=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);l=e.steps[Math.max(0,g-1)]}else{for(u=Math.ceil(Math.log(t)/i),f=e.minstep||0,l=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-u));Math.ceil(y/l)>t;)l*=n;for(g=0,p=r.length;g<p;++g)d=l/r[g],d>=f&&y/d<=t&&(l=d)}d=Math.log(l);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/l+b)*l,a=a<d?d-l:d,o=Math.ceil(o/l)*l),{start:a,stop:o===a?a+l:o,step:l}}var Br=Math.random;function Kee(e){Br=e}function p7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(h7(e,i)),a=r.length,o=t;let l,u,f,d;for(f=0,d=Array(o);f<o;++f){for(l=0,u=0;u<a;++u)l+=r[~~(Br()*a)];d[f]=l/a}return d.sort(ts),[Cw(d,n/2),Cw(d,1-n/2)]}function m7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let o=0,l=1,u=i(e[0]),f=u,d=u+t,g;for(;l<r;++l){if(g=i(e[l]),g>=d){for(f=(u+f)/2;o<l;++o)a[o]=f;d=g+t,u=g}f=g}for(f=(u+f)/2;o<l;++o)a[o]=f;return n?Zee(a,t+t/4):a}function Zee(e,t){const n=e.length;let i=0,r=1,a,o;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(o=r+(i+a-r-r>>1);o<r;)e[o++]=e[r];for(;o>r;)e[o--]=e[i]}i=r,r=a}return e}function Jee(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function ete(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(o){return arguments.length?(n=o||0,r=i-n,a):n},max(o){return arguments.length?(i=o||0,r=i-n,a):i},sample(){return n+Math.floor(r*Br())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const l=Math.floor(o);return l<n?0:l>=i?1:(l-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return a.min(e).max(t)}const y7=Math.sqrt(2*Math.PI),tte=Math.SQRT2;let pg=NaN;function mb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(pg===pg)n=pg,pg=NaN;else{do n=Br()*2-1,i=Br()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,pg=i*a}return e+n*t}function E3(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*y7)}function yb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const o=Math.exp(-r*r/2);let l;r<7.07106781186547?(l=.0352624965998911*r+.700383064443688,l=l*r+6.37396220353165,l=l*r+33.912866078383,l=l*r+112.079291497871,l=l*r+221.213596169931,l=l*r+220.206867912376,a=o*l,l=.0883883476483184*r+1.75566716318264,l=l*r+16.064177579207,l=l*r+86.7807322029461,l=l*r+296.564248779674,l=l*r+637.333633378831,l=l*r+793.826512519948,l=l*r+440.413735824752,a=a/l):(l=r+.65,l=r+4/l,l=r+3/l,l=r+2/l,l=r+1/l,a=o/l/2.506628274631)}return i>0?1-a:a}function vb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*tte*nte(2*e-1)}function nte(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function _3(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>mb(n,i),pdf:a=>E3(a,n,i),cdf:a=>yb(a,n,i),icdf:a=>vb(a,n,i)};return r.mean(e).stdev(t)}function w3(e,t){const n=_3();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=S3(e)),r):t},sample(){return e[~~(Br()*i)]+t*n.sample()},pdf(a){let o=0,l=0;for(;l<i;++l)o+=n.pdf((a-e[l])/t);return o/t/i},cdf(a){let o=0,l=0;for(;l<i;++l)o+=n.cdf((a-e[l])/t);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function A3(e,t){return e=e||0,t=t??1,Math.exp(e+mb()*t)}function C3(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*y7*e)}function $3(e,t,n){return yb(Math.log(e),t,n)}function T3(e,t,n){return Math.exp(vb(e,t,n))}function v7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>A3(n,i),pdf:a=>C3(a,n,i),cdf:a=>$3(a,n,i),icdf:a=>T3(a,n,i)};return r.mean(e).stdev(t)}function b7(e,t){let n=0,i;function r(o){const l=[];let u=0,f;for(f=0;f<n;++f)u+=l[f]=o[f]==null?1:+o[f];for(f=0;f<n;++f)l[f]/=u;return l}const a={weights(o){return arguments.length?(i=r(t=o||[]),a):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),a.weights(t)):e},sample(){const o=Br();let l=e[n-1],u=i[0],f=0;for(;f<n-1;u+=i[++f])if(o<u){l=e[f];break}return l.sample()},pdf(o){let l=0,u=0;for(;u<n;++u)l+=i[u]*e[u].pdf(o);return l},cdf(o){let l=0,u=0;for(;u<n;++u)l+=i[u]*e[u].cdf(o);return l},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function M3(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Br()}function k3(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function D3(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function R3(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function x7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>M3(n,i),pdf:a=>k3(a,n,i),cdf:a=>D3(a,n,i),icdf:a=>R3(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function N3(e,t,n){let i=0,r=0;for(const a of e){const o=n(a);t(a)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Kp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function bb(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),o=new Float64Array(r);let l=0,u=0,f=0,d,g,p;for(p of e)a[l]=d=+t(p),o[l]=g=+n(p),++l,u+=(d-u)/l,f+=(g-f)/l;for(l=0;l<r;++l)a[l]-=u,o[l]-=f;return[a,o,u,f]}function Zp(e,t,n,i){let r=-1,a,o;for(const l of e)a=t(l),o=n(l),a!=null&&(a=+a)>=a&&o!=null&&(o=+o)>=o&&i(a,o,++r)}function Vd(e,t,n,i,r){let a=0,o=0;return Zp(e,t,n,(l,u)=>{const f=u-r(l),d=u-i;a+=f*f,o+=d*d}),1-a/o}function O3(e,t,n){let i=0,r=0,a=0,o=0,l=0;Zp(e,t,n,(d,g)=>{++l,i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,o+=(d*d-o)/l});const u=Kp(i,r,a,o),f=d=>u[0]+u[1]*d;return{coef:u,predict:f,rSquared:Vd(e,t,n,r,f)}}function S7(e,t,n){let i=0,r=0,a=0,o=0,l=0;Zp(e,t,n,(d,g)=>{++l,d=Math.log(d),i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,o+=(d*d-o)/l});const u=Kp(i,r,a,o),f=d=>u[0]+u[1]*Math.log(d);return{coef:u,predict:f,rSquared:Vd(e,t,n,r,f)}}function E7(e,t,n){const[i,r,a,o]=bb(e,t,n);let l=0,u=0,f=0,d=0,g=0,p,y,v;Zp(e,t,n,(w,A)=>{p=i[g++],y=Math.log(A),v=p*A,l+=(A*y-l)/g,u+=(v-u)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,S]=Kp(u/o,l/o,f/o,d/o),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:Vd(e,t,n,o,_)}}function _7(e,t,n){let i=0,r=0,a=0,o=0,l=0,u=0;Zp(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++u,i+=(y-i)/u,r+=(v-r)/u,a+=(y*v-a)/u,o+=(y*y-o)/u,l+=(p-l)/u});const f=Kp(i,r,a,o),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Vd(e,t,n,l,d)}}function z3(e,t,n){const[i,r,a,o]=bb(e,t,n),l=i.length;let u=0,f=0,d=0,g=0,p=0,y,v,b,S;for(y=0;y<l;)v=i[y],b=r[y++],S=v*v,u+=(S-u)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,g+=(v*b-g)/y,p+=(S*b-p)/y;const _=d-u*u,w=u*_-f*f,A=(p*u-g*f)/w,$=(g*_-p*f)/w,M=-A*u,k=T=>(T=T-a,A*T*T+$*T+M+o);return{coef:[M-$*a+A*a*a+o,$-2*A*a,A],predict:k,rSquared:Vd(e,t,n,o,k)}}function w7(e,t,n,i){if(i===0)return N3(e,t,n);if(i===1)return O3(e,t,n);if(i===2)return z3(e,t,n);const[r,a,o,l]=bb(e,t,n),u=r.length,f=[],d=[],g=i+1;let p,y,v,b,S;for(p=0;p<g;++p){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=rte(d),w=A=>{A-=o;let $=l+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<g;++p)$+=_[p]*Math.pow(A,p);return $};return{coef:ite(g,_,-o,l),predict:w,rSquared:Vd(e,t,n,l,w)}}function ite(e,t,n,i){const r=Array(e);let a,o,l,u;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(l=t[a],u=1,r[a]+=l,o=1;o<=a;++o)u*=(a+1-o)/o,r[a-o]+=l*Math.pow(n,o)*u;return r[0]+=i,r}function rte(e){const t=e.length-1,n=[];let i,r,a,o,l;for(i=0;i<t;++i){for(o=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][o])&&(o=r);for(a=i;a<t+1;++a)l=e[a][i],e[a][i]=e[a][o],e[a][o]=l;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(l=0,a=r+1;a<t;++a)l+=e[a][r]*n[a];n[r]=(e[t][r]-l)/e[r][r]}return n}const u6=2,c6=1e-12;function A7(e,t,n,i){const[r,a,o,l]=bb(e,t,n,!0),u=r.length,f=Math.max(2,~~(i*u)),d=new Float64Array(u),g=new Float64Array(u),p=new Float64Array(u).fill(1);for(let y=-1;++y<=u6;){const v=[0,f-1];for(let S=0;S<u;++S){const _=r[S],w=v[0],A=v[1],$=_-r[w]>r[A]-_?w:A;let M=0,k=0,T=0,N=0,z=0;const B=1/Math.abs(r[$]-_||1);for(let Y=w;Y<=A;++Y){const q=r[Y],F=a[Y],R=ate(Math.abs(_-q)*B)*p[Y],I=q*R;M+=R,k+=I,T+=F*R,N+=F*I,z+=q*I}const[j,K]=Kp(k/M,T/M,N/M,z/M);d[S]=j+K*_,g[S]=Math.abs(a[S]-d[S]),ote(r,S+1,v)}if(y===u6)break;const b=c9(g);if(Math.abs(b)<c6)break;for(let S=0,_,w;S<u;++S)_=g[S]/(6*b),p[S]=_>=1?c6:(w=1-_*_)*w}return ste(r,d,o,l)}function ate(e){return(e=1-e*e*e)*e*e}function ote(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function ste(e,t,n,i){const r=e.length,a=[];let o=0,l=0,u=[],f;for(;o<r;++o)f=e[o]+n,u[0]===f?u[1]+=(t[o]-u[1])/++l:(l=0,u[1]+=i,u=[f,t[o]],a.push(u));return u[1]+=i,a}const lte=.5*Math.PI/180;function xb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],o=t[1],l=o-a,u=l/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*l));return f.push(r(o)),f}else{d.push(r(o));for(let b=n;--b>0;)d.push(r(a+b/n*l))}let g=f[0],p=d[d.length-1];const y=1/l,v=ute(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=u&&cte(g,b,p,y,v)>lte?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function ute(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const o=t[a][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function cte(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),o=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-o)}function fte(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function Fw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:fte(e)}function C7(e,t,n){return n||e+(t?"_"+t:"")}const IE=()=>{},dte={init:IE,add:IE,rem:IE,idx:0},bp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Jp=Object.keys(bp).filter(e=>e!=="__count__");function hte(e,t){return(n,i)=>He({name:e,aggregate_param:i,out:n||e},dte,t)}[...Jp,"__count__"].forEach(e=>{bp[e]=hte(e,bp[e])});function $7(e,t,n){return bp[e](n,t)}function T7(e,t){return e.idx-t.idx}function gte(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=bp[r]())})};return e.forEach(n),Object.values(t).sort(T7)}function pte(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function mte(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function yte(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function vte(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function M7(e,t){const n=t||ri,i=gte(e),r=e.slice().sort(T7);function a(o){this._ops=i,this._out=r,this.cell=o,this.init()}return a.prototype.init=pte,a.prototype.add=mte,a.prototype.rem=yte,a.prototype.set=vte,a.prototype.get=n,a.fields=e.map(o=>o.out),a}function F3(e){this._key=e?Lr(e):ke,this.reset()}const Hn=F3.prototype;Hn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Hn.add=function(e){this._add.push(e)};Hn.rem=function(e){this._rem.push(e)};Hn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),o={};let l,u,f;for(l=0;l<r;++l)o[n(t[l])]=1;for(l=0,u=0;l<i;++l)o[n(f=e[l])]?o[n(f)]=0:a[u++]=f;return this._rem=[],this._add=a};Hn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",we(n,a)||(n[a]=1,++r);return r};Hn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=YL(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Hn.argmin=function(e){return this.extent(e)[0]||{}};Hn.argmax=function(e){return this.extent(e)[1]||{}};Hn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Hn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Hn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=x3(this.values(),e),this._get=e),this._q};Hn.q1=function(e){return this.quartile(e)[0]};Hn.q2=function(e){return this.quartile(e)[1]};Hn.q3=function(e){return this.quartile(e)[2]};Hn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=p7(this.values(),1e3,.05,e),this._get=e),this._ci};Hn.ci0=function(e){return this.ci(e)[0]};Hn.ci1=function(e){return this.ci(e)[1]};function Al(e){ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Al.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Jp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ve(Al,ee,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(l){let u,f,d,g;for(u in l)for(d=l[u].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function o(l,u,f){const d=n[f],g=i[f++];for(const p in g){const y=l?l+"|"+p:p;u[d]=g[p],f<r?o(y,u,f):t[y]||e.cell(y,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=_e(ei(w)),$=A.length;let M=0,k;for(;M<$;++M)i[k=A[M]]||(i[k]=1,t.push(k))}this._dims=_e(e.groupby),this._dnames=this._dims.map(w=>{const A=Wt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:Fw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],o=e.ops||["count"],l=e.aggregate_params||[null],u=e.as||[],f=a.length,d={};let g,p,y,v,b,S,_;for(f!==o.length&&te("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(g=a[_],p=o[_],y=l[_]||null,g==null&&p!=="count"&&te("Null aggregate field specified."),b=Wt(g),S=C7(p,b,u[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push($7(p,y,S))}return this._measures=this._measures.map(w=>M7(w,w.field)),Object.create(null)},cellkey:Fw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new F3),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let o=0;o<r;++o)a[n[o]]=i[o](e);return t?s7(t.tuple,a):ht(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,o=e.rem,l=e.mod;let u,f,d,g;if(i)for(f in i)u=i[f],(!r||u.num)&&o.push(u.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)u=n[d],(u.num===0&&r?o:l).push(this.celltuple(u)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const bte=1e-14;function L3(e){ee.call(this,null,e)}L3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ve(L3,ee,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,o=e.as||["bin0","bin1"],l=o[0],u=o[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(ei(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[l]=g,d[u]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[l]=i(d)),t.modifies(n?o:l)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=g7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,o,l;(o=e.anchor)!=null&&(l=o-(r+i*Math.floor((o-r)/i)),r+=l,a+=l);const u=function(f){let d=Zn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(bte+(d-r)/i))};return u.start=r,u.stop=n.stop,u.step=i,this.value=qi(u,ei(t),e.name||"bin_"+Wt(t))}});function k7(e,t,n){const i=e;let r=t||[],a=n||[],o={},l=0;return{add:u=>a.push(u),remove:u=>o[i(u)]=++l,size:()=>r.length,data:(u,f)=>(l&&(r=r.filter(d=>!o[i(d)]),o={},l=0),f&&u&&r.sort(u),a.length&&(r=u?KL(u,r,a.sort(u)):r.concat(a),a=[]),r)}}function U3(e){ee.call(this,[],e)}U3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ve(U3,ee,{transform(e,t){const n=t.fork(t.ALL),i=k7(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(Ec(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function D7(e){$t.call(this,null,xte,e)}ve(D7,$t);function xte(e){return this.value&&!e.modified()?this.value:KC(e.fields,e.orders)}function j3(e){ee.call(this,null,e)}j3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Ste(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ve(j3,ee,{transform(e,t){const n=g=>p=>{for(var y=Ste(l(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)o.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,o=this._stop,l=e.field,u=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let l,u,f;for(l in n)u=i[l],f=n[l]||0,!u&&f?(i[l]=u=ht({}),u[r]=l,u[a]=f,o.add.push(u)):f===0?(u&&o.rem.push(u),n[l]=null,i[l]=null):u[a]!==f&&(u[a]=f,o.mod.push(u));return o.modifies(t)}});function B3(e){ee.call(this,null,e)}B3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ve(B3,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let l=this.value;return o?(l&&(n.rem=l),l=t.materialize(t.SOURCE).source,n.add=this.value=Ete(l,r,a,e.filter||Ur)):n.mod=l,n.source=this.value,n.modifies(i)}});function Ete(e,t,n,i){for(var r=[],a={},o=e.length,l=0,u,f;l<o;++l)for(a[t]=f=e[l],u=0;u<o;++u)a[n]=e[u],i(a)&&(r.push(ht(a)),a={},a[t]=f);return r}const f6={kde:w3,mixture:b7,normal:_3,lognormal:v7,uniform:x7},_te="distributions",d6="function",wte="field";function R7(e,t){const n=e[d6];we(f6,n)||te("Unknown distribution function: "+n);const i=f6[n]();for(const r in e)r===wte?i.data((e.from||t()).map(e[r])):r===_te?i[r](e[r].map(a=>R7(a,t))):typeof i[r]===d6&&i[r](e[r]);return i}function I3(e){ee.call(this,null,e)}const N7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ate={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:N7},{name:"weights",type:"number",array:!0}]};I3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:N7.concat(Ate)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve(I3,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=R7(e.distribution,Cte(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),!e.extent&&!i.data&&te("Missing density extent parameter."),o=i[o];const l=e.as||["value","density"],u=e.extent||Ka(i.data()),f=xb(o,u,r,a).map(d=>{const g={};return g[l[0]]=d[0],g[l[1]]=d[1],ht(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function Cte(e){return()=>e.materialize(e.SOURCE).source}function O7(e,t){return e?e.map((n,i)=>t[i]||Wt(n)):null}function P3(e,t,n){const i=[],r=g=>g(u);let a,o,l,u,f,d;if(t==null)i.push(e.map(n));else for(a={},o=0,l=e.length;o<l;++o)u=e[o],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(u));return i}const z7="bin";function q3(e){ee.call(this,null,e)}q3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:z7}]};const $te=(e,t)=>Qp(Ka(e,t))/30;ve(q3,ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=P3(t.source,e.groupby,ri),r=e.smooth||!1,a=e.field,o=e.step||$te(n,a),l=Ec((v,b)=>a(v)-a(b)),u=e.as||z7,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(l);y=-1;for(const b of m7(v,o,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][u]=b}return this.value={start:d,stop:g,step:o},t.reflow(!0).modifies(u)}});function F7(e){$t.call(this,null,Tte,e),this.modified(!0)}ve(F7,$t);function Tte(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:qi(n=>t(n,e),ei(t),Wt(t))}function H3(e){ee.call(this,[void 0,void 0],e)}H3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ve(H3,ee,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],o=n[1];if((r||a==null)&&(a=1/0,o=-1/0),t.visit(r?t.SOURCE:t.ADD,l=>{const u=Zn(i(l));u!=null&&(u<a&&(a=u),u>o&&(o=u))}),!Number.isFinite(a)||!Number.isFinite(o)){let l=Wt(i);l&&(l=` for field "${l}"`),t.dataflow.warn(`Infinite extent${l}: [${a}, ${o}]`),a=o=void 0}this.value=[a,o]}});function G3(e,t){$t.call(this,e),this.parent=t,this.count=0}ve(G3,$t,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Sb(e){ee.call(this,{},e),this._keys=Pd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ve(Sb,ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=we(r,e)&&r[e],o,l;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(l=i||(l=this._group[e])&&l.tuple,o=n.dataflow,a=new G3(n.fork(n.NO_SOURCE),this),o.add(a).connect(t(o,e,l)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,o=e.modified("key"),l=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const f=ke(u),d=a.get(f);d!==void 0&&(a.delete(f),l(d).rem(u))}),t.visit(t.ADD,u=>{const f=i(u);a.set(ke(u),f),l(f).add(u)}),o||t.modified(i.fields)?t.visit(t.MOD,u=>{const f=ke(u),d=a.get(f),g=i(u);d===g?l(g).mod(u):(a.set(f,g),l(d).rem(u),l(g).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{l(a.get(ke(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const f=ke(u),d=a.get(f),g=i(u);d!==g&&(a.set(f,g),l(d).rem(u),l(g).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function L7(e){$t.call(this,null,Mte,e)}ve(L7,$t);function Mte(e){return this.value&&!e.modified()?this.value:ae(e.name)?_e(e.name).map(t=>Lr(t)):Lr(e.name,e.as)}function Y3(e){ee.call(this,Pd(),e)}Y3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ve(Y3,ee,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,o=r.rem,l=r.mod,u=e.expr;let f=!0;t.visit(t.REM,g=>{const p=ke(g);i.has(p)?i.delete(p):o.push(g)}),t.visit(t.ADD,g=>{u(g,e)?a.push(g):i.set(ke(g),1)});function d(g){const p=ke(g),y=u(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),o.push(g)):f&&y&&!v&&l.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function X3(e){ee.call(this,[],e)}X3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ve(X3,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=O7(i,e.as||[]),a=e.index||null,o=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{const u=i.map(v=>v(l)),f=u.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=m3(l),g=0;g<o;++g)p[r[g]]=(y=u[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function V3(e){ee.call(this,[],e)}V3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ve(V3,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Wt),a=e.as||["key","value"],o=a[0],l=a[1],u=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<u;++d)g=m3(f),g[o]=r[d],g[l]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function W3(e){ee.call(this,null,e)}W3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ve(W3,ee,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,o=>o[i]=n(o,e))}});function U7(e){ee.call(this,[],e)}ve(U7,ee,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,o,l,u;if(a>0){for(o=[];--a>=0;)o.push(u=ht(i(e))),r.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else l=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,r=r.slice(-a);return n.source=this.value=r,n}});const u1={value:"value",median:c9,mean:dZ,min:Aw,max:Iu},kte=[];function Q3(e){ee.call(this,[],e)}Q3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Dte(e){var t=e.method||u1.value,n;if(u1[t]==null)te("Unrecognized imputation method: "+t);else return t===u1.value?(n=e.value!==void 0?e.value:0,()=>n):u1[t]}function Rte(e){const t=e.field;return n=>n?t(n):NaN}ve(Q3,ee,{transform(e,t){var n=t.fork(t.ALL),i=Dte(e),r=Rte(e),a=Wt(e.field),o=Wt(e.key),l=(e.groupby||[]).map(Wt),u=Nte(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=u.domain.length,p,y,v,b,S,_,w,A,$,M;for(S=0,A=u.length;S<A;++S)for(p=u[S],v=p.values,y=NaN,w=0;w<g;++w)if(p[w]==null){for(b=u.domain[w],M={_impute:!0},_=0,$=v.length;_<$;++_)M[l[_]]=v[_];M[o]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ht(M))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function Nte(e,t,n,i){var r=_=>_(S),a=[],o=i?i.slice():[],l={},u={},f,d,g,p,y,v,b,S;for(o.forEach((_,w)=>l[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=l[v]||(l[v]=o.push(v)),d=(f=t?t.map(r):kte)+"",(g=u[d])||(g=u[d]=[],a.push(g),g.values=f),g[y-1]=S;return a.domain=o,a}function K3(e){Al.call(this,e)}K3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Jp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ve(K3,Al,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{He(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Z3(e){ee.call(this,null,e)}Z3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve(Z3,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=P3(i,e.groupby,e.field),a=(e.groupby||[]).map(Wt),o=e.bandwidth,l=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;l!=="pdf"&&l!=="cdf"&&te("Invalid density method: "+l),e.resolve==="shared"&&(d||(d=Ka(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=w3(y,o)[l],b=e.counts?y.length:1,S=d||Ka(y);xb(v,S,g,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[u[0]]=_[0],w[u[1]]=_[1]*b,f.push(ht(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function j7(e){$t.call(this,null,Ote,e)}ve(j7,$t);function Ote(e){return this.value&&!e.modified()?this.value:e3(e.fields,e.flat)}function B7(e){ee.call(this,[],e),this._pending=null}ve(B7,ee,{transform(e,t){const n=t.dataflow;return this._pending?PE(this,t,this._pending):zte(e)?t.StopPropagation:e.values?PE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=_e(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>PE(this,t,_e(i.data)))}});function zte(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function PE(e,t,n){n.forEach(ht);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function J3(e){ee.call(this,{},e)}J3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ve(J3,ee,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,o=e.modified(),l=n.length;let u=o?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,l>1&&!d&&te('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*p&&te('The "as" parameter has too few output field names.'),d=d||r.map(Wt),g=function(v){for(var b=0,S=0,_,w;b<l;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||te("Missing output field names."),g=function(v){for(var b=0,S;b<l;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),o?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),u|=y?t.MOD:0),t.visit(u,g),f.modifies(d)}});function I7(e){$t.call(this,null,Fte,e)}ve(I7,$t);function Fte(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,o;for(a=0;a<n;++a)o=t[a],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function P7(e){$t.call(this,null,Lte,e)}ve(P7,$t);function Lte(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function q7(e){ee.call(this,null,e)}ve(q7,ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function e$(e){Al.call(this,e)}e$.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Jp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ve(e$,Al,{_transform:Al.prototype.transform,transform(e,t){return this._transform(Ute(e,t),t)}});function Ute(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=ei(n).concat(ei(i)),o=Bte(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>r),fields:o.map(l=>jte(l,n,i,a)),as:o.map(l=>l+""),modified:e.modified.bind(e)}}function jte(e,t,n,i){return qi(r=>t(r)===e?n(r):NaN,i,e+"")}function Bte(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const o=e(a);i[o]||(i[o]=1,r.push(o))}),r.sort(Id),t?r.slice(0,t):r}function H7(e){Sb.call(this,e)}ve(H7,Sb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(ei(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const o=r(a);i(a).forEach(l=>o.mod(l))}),t.visit(t.ADD,a=>{const o=r(a);i(a).forEach(l=>o.add(ht(l)))}),t.visit(t.REM,a=>{const o=r(a);i(a).forEach(l=>o.rem(l))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function t$(e){ee.call(this,null,e)}t$.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ve(t$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=O7(e.fields,e.as||[]),a=i?(l,u)=>Ite(l,u,i,r):hb;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,l=>{const u=ke(l);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,l=>{const u=a(l,ht({}));o[ke(l)]=u,n.add.push(u)}),t.visit(t.MOD,l=>{n.mod.push(a(l,o[ke(l)]))}),n}});function Ite(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function G7(e){ee.call(this,null,e)}ve(G7,ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function n$(e){ee.call(this,null,e)}n$.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Pte=1e-14;ve(n$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=P3(r,e.groupby,e.field),o=(e.groupby||[]).map(Wt),l=[],u=e.step||.01,f=e.probs||ar(u/2,1-Pte,u),d=f.length;return a.forEach(g=>{const p=b3(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<o.length;++b)v[o[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],l.push(ht(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});function Y7(e){ee.call(this,null,e)}ve(Y7,ee,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=m3(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const o in r)a[o]=r[o],n.modifies(o);n.mod.push(a)})),n}});function i$(e){ee.call(this,[],e),this.count=0}i$.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ve(i$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[ke(g)]=1,d),{});let o=this.value,l=this.count,u=0;function f(d){let g,p;o.length<r?o.push(d):(p=~~((l+1)*Br()),p<o.length&&p>=u&&(g=o[p],a[ke(g)]&&n.rem.push(g),o[p]=d)),++l}if(t.rem.length&&(t.visit(t.REM,d=>{const g=ke(d);a[g]&&(a[g]=-1,n.rem.push(d)),--l}),o=o.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&o.length<r&&t.source&&(u=l=o.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),u=-1),i&&o.length>r){const d=o.length-r;for(let g=0;g<d;++g)a[ke(o[g])]=-1,n.rem.push(o[g]);o=o.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||u<0)&&(n.add=o.filter(d=>!a[ke(d)])),this.count=l,this.value=n.source=o,n}});function r$(e){ee.call(this,null,e)}r$.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ve(r$,ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ar(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ht(a)}),n.add=t.add.concat(this.value),n}});function X7(e){ee.call(this,null,e),this.modified(!0)}ve(X7,ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function a$(e){ee.call(this,null,e)}const V7=["unit0","unit1"];a$.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:s3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:V7}]};ve(a$,ee,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),o=(r?Xd:Yd)(a.unit).offset,l=e.as||V7,u=l[0],f=l[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ei(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[u]=null,i&&(v[f]=null)):(v[u]=S=_=a(b),i&&(v[f]=_=o(S,d)),S<g&&(g=S),_>p&&(p=_))}),a.start=g,a.stop=p,t.modifies(i?l:u)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:U9({extent:e.extent||Ka(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=l3(i),o=this.value||{},l=(n?M9:T9)(a,r);return l.unit=rt(a),l.units=a,l.step=r,l.start=o.start,l.stop=o.stop,this.value=l}});function W7(e){ee.call(this,Pd(),e)}ve(W7,ee,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=l=>r.set(i(l),l);let o=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,l=>r.delete(i(l))),t.visit(t.ADD,a)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function Q7(e){ee.call(this,null,e)}ve(Q7,ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ec(e.sort)):t.source).map(e.field))}});function qte(e,t,n,i){const r=xp[e](t,n);return{init:r.init||sl,update:function(a,o){o[i]=r.next(a)}}}const xp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=xp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");const n=xp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=Hte(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function Hte(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Gte=Object.keys(xp);function K7(e){const t=_e(e.ops),n=_e(e.fields),i=_e(e.params),r=_e(e.aggregate_params),a=_e(e.as),o=this.outputs=[],l=this.windows=[],u={},f={},d=[],g=[];let p=!0;function y(v){_e(ei(v)).forEach(b=>u[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=Wt(S),$=C7(v,A,a[b]);if(y(S),o.push($),we(xp,v))l.push(qte(v,S,_,$));else{if(S==null&&v!=="count"&&te("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let M=f[A];M||(M=f[A]=[],M.field=S,g.push(M)),M.push($7(v,w,$))}}),(d.length||g.length)&&(this.cell=Yte(g,d,p)),this.inputs=Object.keys(u)}const Z7=K7.prototype;Z7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Z7.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(r[o]);for(o=e.p1;o<e.i1;++o)n.add(r[o]);n.set(t)}for(o=0;o<a;++o)i[o].update(e,t)};function Yte(e,t,n){e=e.map(u=>M7(u,u.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),o=0;o<r;++o)a[o]=new e[o](i);if(i.store)var l=i.data=new F3;return i.add=function(u){if(i.num+=1,!n){l&&l.add(u);for(let f=0;f<r;++f)a[f].add(a[f].get(u),u)}},i.rem=function(u){if(i.num-=1,!n){l&&l.rem(u);for(let f=0;f<r;++f)a[f].rem(a[f].get(u),u)}},i.set=function(u){let f,d;for(l&&l.values(),f=0,d=t.length;f<d;++f)u[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(u)},i.init=function(){i.num=0,l&&l.reset();for(let u=0;u<r;++u)a[u].init()},i}function o$(e){ee.call(this,{},e),this._mlen=0,this._mods=[]}o$.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gte.concat(Jp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ve(o$,ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Ec(e.sort),r=Fw(e.groupby),a=l=>this.group(r(l));let o=this.state;(!o||n)&&(o=this.state=new K7(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,l=>a(l).add(l))):(t.visit(t.REM,l=>a(l).remove(l)),t.visit(t.ADD,l=>a(l).add(l)));for(let l=0,u=this._mlen;l<u;++l)Xte(this._mods[l],o,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=k7(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Xte(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,o=i.frame||[null,0],l=e.data(n),u=l.length,f=a?qd(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:r||ai(-1)};t.init();for(let g=0;g<u;++g)Vte(d,o,g,u),a&&Wte(d,f),t.update(d,l[g])}function Vte(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Wte(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,o=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<o&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const Qte=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Al,bin:L3,collect:U3,compare:D7,countpattern:j3,cross:B3,density:I3,dotbin:q3,expression:F7,extent:H3,facet:Sb,field:L7,filter:Y3,flatten:X3,fold:V3,formula:W3,generate:U7,impute:Q3,joinaggregate:K3,kde:Z3,key:j7,load:B7,lookup:J3,multiextent:I7,multivalues:P7,params:q7,pivot:e$,prefacet:H7,project:t$,proxy:G7,quantile:n$,relay:Y7,sample:i$,sequence:r$,sieve:X7,subflow:G3,timeunit:a$,tupleindex:W7,values:Q7,window:o$},Symbol.toStringTag,{value:"Module"}));function gt(e){return function(){return e}}const h6=Math.abs,Yn=Math.atan2,yu=Math.cos,Kte=Math.max,qE=Math.min,Na=Math.sin,Lu=Math.sqrt,Vn=1e-12,sd=Math.PI,My=sd/2,J7=2*sd;function Zte(e){return e>1?0:e<-1?sd:Math.acos(e)}function g6(e){return e>=1?My:e<=-1?-My:Math.asin(e)}const Lw=Math.PI,Uw=2*Lw,Tu=1e-6,Jte=Uw-Tu;function eU(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ene(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return eU;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let s$=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?eU:ene(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=i-t,f=r-n,d=o-t,g=l-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Tu)if(!(Math.abs(g*u-f*d)>Tu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-o,v=r-l,b=u*u+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((Lw-Math.acos((b+p-S)/(2*_*w)))/2),$=A/w,M=A/_;Math.abs($-1)>Tu&&this._append`L${t+$*d},${n+$*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+M*u},${this._y1=n+M*f}`}}arc(t,n,i,r,a,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),u=i*Math.sin(r),f=t+l,d=n+u,g=1^o,p=o?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Tu||Math.abs(this._y1-d)>Tu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%Uw+Uw),p>Jte?this._append`A${i},${i},0,1,${g},${t-l},${n-u}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>Tu&&this._append`A${i},${i},0,${+(p>=Lw)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Eb(){return new s$}Eb.prototype=s$.prototype;function _b(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new s$(t)}function tne(e){return e.innerRadius}function nne(e){return e.outerRadius}function ine(e){return e.startAngle}function rne(e){return e.endAngle}function ane(e){return e&&e.padAngle}function one(e,t,n,i,r,a,o,l){var u=n-e,f=i-t,d=o-r,g=l-a,p=g*u-d*f;if(!(p*p<Vn))return p=(d*(t-a)-g*(e-r))/p,[e+p*u,t+p*f]}function c1(e,t,n,i,r,a,o){var l=e-n,u=t-i,f=(o?a:-a)/Lu(l*l+u*u),d=f*u,g=-f*l,p=e+d,y=t+g,v=n+d,b=i+g,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,$=w*w+A*A,M=r-a,k=p*b-v*y,T=(A<0?-1:1)*Lu(Kte(0,M*M*$-k*k)),N=(k*A-w*T)/$,z=(-k*w-A*T)/$,B=(k*A+w*T)/$,j=(-k*w+A*T)/$,K=N-S,Y=z-_,q=B-S,F=j-_;return K*K+Y*Y>q*q+F*F&&(N=B,z=j),{cx:N,cy:z,x01:-d,y01:-g,x11:N*(r/M-1),y11:z*(r/M-1)}}function sne(){var e=tne,t=nne,n=gt(0),i=null,r=ine,a=rne,o=ane,l=null,u=_b(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-My,b=a.apply(this,arguments)-My,S=h6(b-v),_=b>v;if(l||(l=d=u()),y<p&&(g=y,y=p,p=g),!(y>Vn))l.moveTo(0,0);else if(S>J7-Vn)l.moveTo(y*yu(v),y*Na(v)),l.arc(0,0,y,v,b,!_),p>Vn&&(l.moveTo(p*yu(b),p*Na(b)),l.arc(0,0,p,b,v,_));else{var w=v,A=b,$=v,M=b,k=S,T=S,N=o.apply(this,arguments)/2,z=N>Vn&&(i?+i.apply(this,arguments):Lu(p*p+y*y)),B=qE(h6(y-p)/2,+n.apply(this,arguments)),j=B,K=B,Y,q;if(z>Vn){var F=g6(z/p*Na(N)),R=g6(z/y*Na(N));(k-=F*2)>Vn?(F*=_?1:-1,$+=F,M-=F):(k=0,$=M=(v+b)/2),(T-=R*2)>Vn?(R*=_?1:-1,w+=R,A-=R):(T=0,w=A=(v+b)/2)}var I=y*yu(w),X=y*Na(w),Z=p*yu(M),ce=p*Na(M);if(B>Vn){var L=y*yu(A),G=y*Na(A),se=p*yu($),me=p*Na($),be;if(S<sd)if(be=one(I,X,se,me,L,G,Z,ce)){var Ne=I-be[0],Xe=X-be[1],Ot=L-be[0],ye=G-be[1],Le=1/Na(Zte((Ne*Ot+Xe*ye)/(Lu(Ne*Ne+Xe*Xe)*Lu(Ot*Ot+ye*ye)))/2),Ie=Lu(be[0]*be[0]+be[1]*be[1]);j=qE(B,(p-Ie)/(Le-1)),K=qE(B,(y-Ie)/(Le+1))}else j=K=0}T>Vn?K>Vn?(Y=c1(se,me,I,X,y,K,_),q=c1(L,G,Z,ce,y,K,_),l.moveTo(Y.cx+Y.x01,Y.cy+Y.y01),K<B?l.arc(Y.cx,Y.cy,K,Yn(Y.y01,Y.x01),Yn(q.y01,q.x01),!_):(l.arc(Y.cx,Y.cy,K,Yn(Y.y01,Y.x01),Yn(Y.y11,Y.x11),!_),l.arc(0,0,y,Yn(Y.cy+Y.y11,Y.cx+Y.x11),Yn(q.cy+q.y11,q.cx+q.x11),!_),l.arc(q.cx,q.cy,K,Yn(q.y11,q.x11),Yn(q.y01,q.x01),!_))):(l.moveTo(I,X),l.arc(0,0,y,w,A,!_)):l.moveTo(I,X),!(p>Vn)||!(k>Vn)?l.lineTo(Z,ce):j>Vn?(Y=c1(Z,ce,L,G,p,-j,_),q=c1(I,X,se,me,p,-j,_),l.lineTo(Y.cx+Y.x01,Y.cy+Y.y01),j<B?l.arc(Y.cx,Y.cy,j,Yn(Y.y01,Y.x01),Yn(q.y01,q.x01),!_):(l.arc(Y.cx,Y.cy,j,Yn(Y.y01,Y.x01),Yn(Y.y11,Y.x11),!_),l.arc(0,0,p,Yn(Y.cy+Y.y11,Y.cx+Y.x11),Yn(q.cy+q.y11,q.cx+q.x11),_),l.arc(q.cx,q.cy,j,Yn(q.y11,q.x11),Yn(q.y01,q.x01),!_))):l.arc(0,0,p,M,$,_)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-sd/2;return[yu(g)*d,Na(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:gt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:gt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:gt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:gt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:gt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:gt(+d),f):a},f.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:gt(+d),f):o},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function tU(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nU(e){this._context=e}nU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function l$(e){return new nU(e)}function iU(e){return e[0]}function rU(e){return e[1]}function aU(e,t){var n=gt(!0),i=null,r=l$,a=null,o=_b(l);e=typeof e=="function"?e:e===void 0?iU:gt(e),t=typeof t=="function"?t:t===void 0?rU:gt(t);function l(u){var f,d=(u=tU(u)).length,g,p=!1,y;for(i==null&&(a=r(y=o())),f=0;f<=d;++f)!(f<d&&n(g=u[f],f,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,u),+t(g,f,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:gt(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:gt(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:gt(!!u),l):n},l.curve=function(u){return arguments.length?(r=u,i!=null&&(a=r(i)),l):r},l.context=function(u){return arguments.length?(u==null?i=a=null:a=r(i=u),l):i},l}function oU(e,t,n){var i=null,r=gt(!0),a=null,o=l$,l=null,u=_b(f);e=typeof e=="function"?e:e===void 0?iU:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?rU:gt(+n);function f(g){var p,y,v,b=(g=tU(g)).length,S,_=!1,w,A=new Array(b),$=new Array(b);for(a==null&&(l=o(w=u())),p=0;p<=b;++p){if(!(p<b&&r(S=g[p],p,g))===_)if(_=!_)y=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=y;--v)l.point(A[v],$[v]);l.lineEnd(),l.areaEnd()}_&&(A[p]=+e(S,p,g),$[p]=+t(S,p,g),l.point(i?+i(S,p,g):A[p],n?+n(S,p,g):$[p]))}if(w)return l=null,w+""||null}function d(){return aU().defined(r).curve(o).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:gt(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:gt(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:gt(!!g),f):r},f.curve=function(g){return arguments.length?(o=g,a!=null&&(l=o(a)),f):o},f.context=function(g){return arguments.length?(g==null?a=l=null:l=o(a=g),f):a},f}const lne={draw(e,t){const n=Lu(t/sd);e.moveTo(n,0),e.arc(0,0,n,0,J7)}};function une(e,t){let n=null,i=_b(r);e=typeof e=="function"?e:gt(e||lne),t=typeof t=="function"?t:gt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:gt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:gt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function Cl(){}function ky(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wb(e){this._context=e}wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ky(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ky(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cne(e){return new wb(e)}function sU(e){this._context=e}sU.prototype={areaStart:Cl,areaEnd:Cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ky(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fne(e){return new sU(e)}function lU(e){this._context=e}lU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ky(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dne(e){return new lU(e)}function uU(e,t){this._basis=new wb(e),this._beta=t}uU.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,o=t[n]-r,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+u*a),this._beta*t[l]+(1-this._beta)*(r+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const hne=(function e(t){function n(i){return t===1?new wb(i):new uU(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function Dy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function u$(e,t){this._context=e,this._k=(1-t)/6}u$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Dy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Dy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gne=(function e(t){function n(i){return new u$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function c$(e,t){this._context=e,this._k=(1-t)/6}c$.prototype={areaStart:Cl,areaEnd:Cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Dy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pne=(function e(t){function n(i){return new c$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function f$(e,t){this._context=e,this._k=(1-t)/6}f$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mne=(function e(t){function n(i){return new f$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function d$(e,t,n){var i=e._x1,r=e._y1,a=e._x2,o=e._y2;if(e._l01_a>Vn){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Vn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,o,e._x2,e._y2)}function cU(e,t){this._context=e,this._alpha=t}cU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:d$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yne=(function e(t){function n(i){return t?new cU(i,t):new u$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function fU(e,t){this._context=e,this._alpha=t}fU.prototype={areaStart:Cl,areaEnd:Cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:d$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vne=(function e(t){function n(i){return t?new fU(i,t):new c$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function dU(e,t){this._context=e,this._alpha=t}dU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:d$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bne=(function e(t){function n(i){return t?new dU(i,t):new f$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function hU(e){this._context=e}hU.prototype={areaStart:Cl,areaEnd:Cl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xne(e){return new hU(e)}function p6(e){return e<0?-1:1}function m6(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),l=(a*r+o*i)/(i+r);return(p6(a)+p6(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function y6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function HE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,o=e._y1,l=(a-i)/3;e._context.bezierCurveTo(i+l,r+l*t,a-l,o-l*n,a,o)}function Ry(e){this._context=e}Ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HE(this,this._t0,y6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,HE(this,y6(this,n=m6(this,e,t)),n);break;default:HE(this,this._t0,n=m6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function gU(e){this._context=new pU(e)}(gU.prototype=Object.create(Ry.prototype)).point=function(e,t){Ry.prototype.point.call(this,t,e)};function pU(e){this._context=e}pU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function Sne(e){return new Ry(e)}function Ene(e){return new gU(e)}function mU(e){this._context=e}mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=v6(e),r=v6(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function v6(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);for(r[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function _ne(e){return new mU(e)}function Ab(e,t){this._context=e,this._t=t}Ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function wne(e){return new Ab(e,.5)}function Ane(e){return new Ab(e,0)}function Cne(e){return new Ab(e,1)}function xl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const $ne=()=>typeof Image<"u"?Image:null;function lo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function jl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const jw=Symbol("implicit");function h$(){var e=new z5,t=[],n=[],i=jw;function r(a){let o=e.get(a);if(o===void 0){if(i!==jw)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new z5;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return h$(t,n).unknown(i)},lo.apply(r,arguments),r}function Wd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function em(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Bl(){}var Zu=.7,ld=1/Zu,Yf="\\s*([+-]?\\d+)\\s*",Sp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tne=/^#([0-9a-f]{3,8})$/,Mne=new RegExp(`^rgb\\(${Yf},${Yf},${Yf}\\)$`),kne=new RegExp(`^rgb\\(${Ga},${Ga},${Ga}\\)$`),Dne=new RegExp(`^rgba\\(${Yf},${Yf},${Yf},${Sp}\\)$`),Rne=new RegExp(`^rgba\\(${Ga},${Ga},${Ga},${Sp}\\)$`),Nne=new RegExp(`^hsl\\(${Sp},${Ga},${Ga}\\)$`),One=new RegExp(`^hsla\\(${Sp},${Ga},${Ga},${Sp}\\)$`),b6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wd(Bl,Ep,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x6,formatHex:x6,formatHex8:zne,formatHsl:Fne,formatRgb:S6,toString:S6});function x6(){return this.rgb().formatHex()}function zne(){return this.rgb().formatHex8()}function Fne(){return yU(this).formatHsl()}function S6(){return this.rgb().formatRgb()}function Ep(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?E6(t):n===3?new En(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mne.exec(e))?new En(t[1],t[2],t[3],1):(t=kne.exec(e))?new En(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Dne.exec(e))?f1(t[1],t[2],t[3],t[4]):(t=Rne.exec(e))?f1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nne.exec(e))?A6(t[1],t[2]/100,t[3]/100,1):(t=One.exec(e))?A6(t[1],t[2]/100,t[3]/100,t[4]):b6.hasOwnProperty(e)?E6(b6[e]):e==="transparent"?new En(NaN,NaN,NaN,0):null}function E6(e){return new En(e>>16&255,e>>8&255,e&255,1)}function f1(e,t,n,i){return i<=0&&(e=t=n=NaN),new En(e,t,n,i)}function g$(e){return e instanceof Bl||(e=Ep(e)),e?(e=e.rgb(),new En(e.r,e.g,e.b,e.opacity)):new En}function $l(e,t,n,i){return arguments.length===1?g$(e):new En(e,t,n,i??1)}function En(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Wd(En,$l,em(Bl,{brighter(e){return e=e==null?ld:Math.pow(ld,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zu:Math.pow(Zu,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new En(Pu(this.r),Pu(this.g),Pu(this.b),Ny(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_6,formatHex:_6,formatHex8:Lne,formatRgb:w6,toString:w6}));function _6(){return`#${Uu(this.r)}${Uu(this.g)}${Uu(this.b)}`}function Lne(){return`#${Uu(this.r)}${Uu(this.g)}${Uu(this.b)}${Uu((isNaN(this.opacity)?1:this.opacity)*255)}`}function w6(){const e=Ny(this.opacity);return`${e===1?"rgb(":"rgba("}${Pu(this.r)}, ${Pu(this.g)}, ${Pu(this.b)}${e===1?")":`, ${e})`}`}function Ny(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uu(e){return e=Pu(e),(e<16?"0":"")+e.toString(16)}function A6(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new aa(e,t,n,i)}function yU(e){if(e instanceof aa)return new aa(e.h,e.s,e.l,e.opacity);if(e instanceof Bl||(e=Ep(e)),!e)return new aa;if(e instanceof aa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,l=a-r,u=(a+r)/2;return l?(t===a?o=(n-i)/l+(n<i)*6:n===a?o=(i-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+r:2-a-r,o*=60):l=u>0&&u<1?0:o,new aa(o,l,u,e.opacity)}function Oy(e,t,n,i){return arguments.length===1?yU(e):new aa(e,t,n,i??1)}function aa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Wd(aa,Oy,em(Bl,{brighter(e){return e=e==null?ld:Math.pow(ld,e),new aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zu:Math.pow(Zu,e),new aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new En(GE(e>=240?e-240:e+120,r,i),GE(e,r,i),GE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new aa(C6(this.h),d1(this.s),d1(this.l),Ny(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ny(this.opacity);return`${e===1?"hsl(":"hsla("}${C6(this.h)}, ${d1(this.s)*100}%, ${d1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C6(e){return e=(e||0)%360,e<0?e+360:e}function d1(e){return Math.max(0,Math.min(1,e||0))}function GE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vU=Math.PI/180,bU=180/Math.PI,zy=18,xU=.96422,SU=1,EU=.82521,_U=4/29,Xf=6/29,wU=3*Xf*Xf,Une=Xf*Xf*Xf;function AU(e){if(e instanceof Ya)return new Ya(e.l,e.a,e.b,e.opacity);if(e instanceof Ko)return CU(e);e instanceof En||(e=g$(e));var t=WE(e.r),n=WE(e.g),i=WE(e.b),r=YE((.2225045*t+.7168786*n+.0606169*i)/SU),a,o;return t===n&&n===i?a=o=r:(a=YE((.4360747*t+.3850649*n+.1430804*i)/xU),o=YE((.0139322*t+.0971045*n+.7141733*i)/EU)),new Ya(116*r-16,500*(a-r),200*(r-o),e.opacity)}function Fy(e,t,n,i){return arguments.length===1?AU(e):new Ya(e,t,n,i??1)}function Ya(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Wd(Ya,Fy,em(Bl,{brighter(e){return new Ya(this.l+zy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ya(this.l-zy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=xU*XE(t),e=SU*XE(e),n=EU*XE(n),new En(VE(3.1338561*t-1.6168667*e-.4906146*n),VE(-.9787684*t+1.9161415*e+.033454*n),VE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function YE(e){return e>Une?Math.pow(e,1/3):e/wU+_U}function XE(e){return e>Xf?e*e*e:wU*(e-_U)}function VE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function WE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jne(e){if(e instanceof Ko)return new Ko(e.h,e.c,e.l,e.opacity);if(e instanceof Ya||(e=AU(e)),e.a===0&&e.b===0)return new Ko(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*bU;return new Ko(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ly(e,t,n,i){return arguments.length===1?jne(e):new Ko(e,t,n,i??1)}function Ko(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function CU(e){if(isNaN(e.h))return new Ya(e.l,0,0,e.opacity);var t=e.h*vU;return new Ya(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Wd(Ko,Ly,em(Bl,{brighter(e){return new Ko(this.h,this.c,this.l+zy*(e??1),this.opacity)},darker(e){return new Ko(this.h,this.c,this.l-zy*(e??1),this.opacity)},rgb(){return CU(this).rgb()}}));var $U=-.14861,p$=1.78277,m$=-.29227,Cb=-.90649,_p=1.97294,$6=_p*Cb,T6=_p*p$,M6=p$*m$-Cb*$U;function Bne(e){if(e instanceof qu)return new qu(e.h,e.s,e.l,e.opacity);e instanceof En||(e=g$(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(M6*i+$6*t-T6*n)/(M6+$6-T6),a=i-r,o=(_p*(n-r)-m$*a)/Cb,l=Math.sqrt(o*o+a*a)/(_p*r*(1-r)),u=l?Math.atan2(o,a)*bU-120:NaN;return new qu(u<0?u+360:u,l,r,e.opacity)}function Bw(e,t,n,i){return arguments.length===1?Bne(e):new qu(e,t,n,i??1)}function qu(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Wd(qu,Bw,em(Bl,{brighter(e){return e=e==null?ld:Math.pow(ld,e),new qu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zu:Math.pow(Zu,e),new qu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*vU,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new En(255*(t+n*($U*i+p$*r)),255*(t+n*(m$*i+Cb*r)),255*(t+n*(_p*i)),this.opacity)}}));function TU(e,t,n,i,r){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*i+o*r)/6}function MU(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],o=i>0?e[i-1]:2*r-a,l=i<t-1?e[i+2]:2*a-r;return TU((n-i/t)*t,o,r,a,l)}}function kU(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],l=e[(i+2)%t];return TU((n-i/t)*t,r,a,o,l)}}const $b=e=>()=>e;function DU(e,t){return function(n){return e+n*t}}function Ine(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Tb(e,t){var n=t-e;return n?DU(e,n>180||n<-180?n-360*Math.round(n/360):n):$b(isNaN(e)?t:e)}function Pne(e){return(e=+e)==1?_n:function(t,n){return n-t?Ine(t,n,e):$b(isNaN(t)?n:t)}}function _n(e,t){var n=t-e;return n?DU(e,n):$b(isNaN(e)?t:e)}const Iw=(function e(t){var n=Pne(t);function i(r,a){var o=n((r=$l(r)).r,(a=$l(a)).r),l=n(r.g,a.g),u=n(r.b,a.b),f=_n(r.opacity,a.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=u(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function RU(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o,l;for(o=0;o<n;++o)l=$l(t[o]),i[o]=l.r||0,r[o]=l.g||0,a[o]=l.b||0;return i=e(i),r=e(r),a=e(a),l.opacity=1,function(u){return l.r=i(u),l.g=r(u),l.b=a(u),l+""}}}var qne=RU(MU),Hne=RU(kU);function y$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function NU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gne(e,t){return(NU(t)?y$:OU)(e,t)}function OU(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=Il(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<i;++o)a[o]=r[o](l);return a}}function zU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ia(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function FU(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Il(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var Pw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QE=new RegExp(Pw.source,"g");function Yne(e){return function(){return e}}function Xne(e){return function(t){return e(t)+""}}function LU(e,t){var n=Pw.lastIndex=QE.lastIndex=0,i,r,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(i=Pw.exec(e))&&(r=QE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:ia(i,r)})),n=QE.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Xne(u[0].x):Yne(t):(t=u.length,function(f){for(var d=0,g;d<t;++d)l[(g=u[d]).i]=g.x(f);return l.join("")})}function Il(e,t){var n=typeof t,i;return t==null||n==="boolean"?$b(t):(n==="number"?ia:n==="string"?(i=Ep(t))?(t=i,Iw):LU:t instanceof Ep?Iw:t instanceof Date?zU:NU(t)?y$:Array.isArray(t)?OU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?FU:ia)(e,t)}function Vne(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Wne(e,t){var n=Tb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function tm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var k6=180/Math.PI,qw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UU(e,t,n,i,r,a){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*k6,skewX:Math.atan(u)*k6,scaleX:o,scaleY:l}}var h1;function Qne(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qw:UU(t.a,t.b,t.c,t.d,t.e,t.f)}function Kne(e){return e==null||(h1||(h1=document.createElementNS("http://www.w3.org/2000/svg","g")),h1.setAttribute("transform",e),!(e=h1.transform.baseVal.consolidate()))?qw:(e=e.matrix,UU(e.a,e.b,e.c,e.d,e.e,e.f))}function jU(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:ia(f,g)},{i:b-2,x:ia(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function o(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:ia(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function l(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:ia(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function u(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:ia(f,g)},{i:b-2,x:ia(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),o(f.rotate,d.rotate,g,p),l(f.skewX,d.skewX,g,p),u(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)g[(S=p[v]).i]=S.x(y);return g.join("")}}}var Zne=jU(Qne,"px, ","px)","deg)"),Jne=jU(Kne,", ",")",")"),eie=1e-12;function D6(e){return((e=Math.exp(e))+1/e)/2}function tie(e){return((e=Math.exp(e))-1/e)/2}function nie(e){return((e=Math.exp(2*e))-1)/(e+1)}const iie=(function e(t,n,i){function r(a,o){var l=a[0],u=a[1],f=a[2],d=o[0],g=o[1],p=o[2],y=d-l,v=g-u,b=y*y+v*v,S,_;if(b<eie)_=Math.log(p/f)/t,S=function(T){return[l+T*y,u+T*v,f*Math.exp(t*T*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),$=(p*p-f*f-i*b)/(2*p*n*w),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt($*$+1)-$);_=(k-M)/t,S=function(T){var N=T*_,z=D6(M),B=f/(n*w)*(z*nie(t*N+M)-tie(M));return[l+B*y,u+B*v,f*z/D6(t*N+M)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var o=Math.max(.001,+a),l=o*o,u=l*l;return e(o,l,u)},r})(Math.SQRT2,2,4);function BU(e){return function(t,n){var i=e((t=Oy(t)).h,(n=Oy(n)).h),r=_n(t.s,n.s),a=_n(t.l,n.l),o=_n(t.opacity,n.opacity);return function(l){return t.h=i(l),t.s=r(l),t.l=a(l),t.opacity=o(l),t+""}}}const rie=BU(Tb);var aie=BU(_n);function oie(e,t){var n=_n((e=Fy(e)).l,(t=Fy(t)).l),i=_n(e.a,t.a),r=_n(e.b,t.b),a=_n(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=a(o),e+""}}function IU(e){return function(t,n){var i=e((t=Ly(t)).h,(n=Ly(n)).h),r=_n(t.c,n.c),a=_n(t.l,n.l),o=_n(t.opacity,n.opacity);return function(l){return t.h=i(l),t.c=r(l),t.l=a(l),t.opacity=o(l),t+""}}}const sie=IU(Tb);var lie=IU(_n);function PU(e){return(function t(n){n=+n;function i(r,a){var o=e((r=Bw(r)).h,(a=Bw(a)).h),l=_n(r.s,a.s),u=_n(r.l,a.l),f=_n(r.opacity,a.opacity);return function(d){return r.h=o(d),r.s=l(d),r.l=u(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const uie=PU(Tb);var cie=PU(_n);function v$(e,t){t===void 0&&(t=e,e=Il);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[l](o-l)}}function fie(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const die=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Il,interpolateArray:Gne,interpolateBasis:MU,interpolateBasisClosed:kU,interpolateCubehelix:uie,interpolateCubehelixLong:cie,interpolateDate:zU,interpolateDiscrete:Vne,interpolateHcl:sie,interpolateHclLong:lie,interpolateHsl:rie,interpolateHslLong:aie,interpolateHue:Wne,interpolateLab:oie,interpolateNumber:ia,interpolateNumberArray:y$,interpolateObject:FU,interpolateRgb:Iw,interpolateRgbBasis:qne,interpolateRgbBasisClosed:Hne,interpolateRound:tm,interpolateString:LU,interpolateTransformCss:Zne,interpolateTransformSvg:Jne,interpolateZoom:iie,piecewise:v$,quantize:fie},Symbol.toStringTag,{value:"Module"}));function hie(e){return function(){return e}}function Hw(e){return+e}var R6=[0,1];function zi(e){return e}function Gw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:hie(isNaN(t)?NaN:.5)}function gie(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function pie(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=Gw(r,i),a=n(o,a)):(i=Gw(i,r),a=n(a,o)),function(l){return a(i(l))}}function mie(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Gw(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=_l(e,l,1,i)-1;return a[u](r[u](l))}}function nm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mb(){var e=R6,t=R6,n=Il,i,r,a,o=zi,l,u,f;function d(){var p=Math.min(e.length,t.length);return o!==zi&&(o=gie(e[0],e[p-1])),l=p>2?mie:pie,u=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(u||(u=l(e.map(i),t,n)))(i(o(p)))}return g.invert=function(p){return o(r((f||(f=l(t,e.map(i),ia)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,Hw),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=tm,d()},g.clamp=function(p){return arguments.length?(o=p?!0:zi,d()):o!==zi},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function qU(){return Mb()(zi,zi)}function HU(e,t,n,i){var r=wl(e,t,n),a;switch(i=Ku(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=m9(r,o))&&(i.precision=a),a3(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=y9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=p9(r))&&(i.precision=a-(i.type==="%")*2);break}}return rb(i)}function wc(e){var t=e.domain;return e.ticks=function(n){var i=t();return _w(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return HU(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,o=i[r],l=i[a],u,f,d=10;for(l<o&&(f=o,o=l,l=f,f=r,r=a,a=f);d-- >0;){if(f=ww(o,l,n),f===u)return i[r]=o,i[a]=l,t(i);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function GU(){var e=qU();return e.copy=function(){return nm(e,GU())},lo.apply(e,arguments),wc(e)}function YU(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,Hw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return YU(e).unknown(t)},e=arguments.length?Array.from(e,Hw):[0,1],wc(n)}function XU(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),e[n]=t.floor(r),e[i]=t.ceil(a),e}function N6(e){return Math.log(e)}function O6(e){return Math.exp(e)}function yie(e){return-Math.log(-e)}function vie(e){return-Math.exp(-e)}function bie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xie(e){return e===10?bie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Sie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z6(e){return(t,n)=>-e(-t,n)}function b$(e){const t=e(N6,O6),n=t.domain;let i=10,r,a;function o(){return r=Sie(i),a=xie(i),n()[0]<0?(r=z6(r),a=z6(a),e(yie,vie)):e(N6,O6),t}return t.base=function(l){return arguments.length?(i=+l,o()):i},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],d=u[u.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=l==null?10:+l;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=_w(f,d,S))}else _=_w(p,y,Math.min(y-p,S)).map(a);return g?_.reverse():_},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=Ku(u)).precision==null&&(u.trim=!0),u=rb(u)),l===1/0)return u;const f=Math.max(1,i*l/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?u(d):""}},t.nice=()=>n(XU(n(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),t}function VU(){const e=b$(Mb()).domain([1,10]);return e.copy=()=>nm(e,VU()).base(e.base()),lo.apply(e,arguments),e}function F6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function L6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function x$(e){var t=1,n=e(F6(t),L6(t));return n.constant=function(i){return arguments.length?e(F6(t=+i),L6(t)):t},wc(n)}function WU(){var e=x$(Mb());return e.copy=function(){return nm(e,WU()).constant(e.constant())},lo.apply(e,arguments)}function U6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Eie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _ie(e){return e<0?-e*e:e*e}function S$(e){var t=e(zi,zi),n=1;function i(){return n===1?e(zi,zi):n===.5?e(Eie,_ie):e(U6(n),U6(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},wc(t)}function E$(){var e=S$(Mb());return e.copy=function(){return nm(e,E$()).exponent(e.exponent())},lo.apply(e,arguments),e}function wie(){return E$.apply(null,arguments).exponent(.5)}function QU(){var e=[],t=[],n=[],i;function r(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=u9(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?i:t[_l(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ts),r()},a.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return QU().domain(e).range(t).unknown(i)},lo.apply(a,arguments)}function KU(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function o(u){return u!=null&&u<=u?r[_l(i,u,0,n)]:a}function l(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,l()):r.slice()},o.invertExtent=function(u){var f=r.indexOf(u);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return i.slice()},o.copy=function(){return KU().domain([e,t]).range(r).unknown(a)},lo.apply(wc(o),arguments)}function ZU(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[_l(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return ZU().domain(e).range(t).unknown(n)},lo.apply(r,arguments)}function Aie(e){return new Date(e)}function Cie(e){return e instanceof Date?+e:+new Date(+e)}function _$(e,t,n,i,r,a,o,l,u,f){var d=qU(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),$=f("%Y");function M(k){return(u(k)<k?y:l(k)<k?v:o(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:$)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Cie)):p().map(Aie)},d.ticks=function(k){var T=p();return e(T[0],T[T.length-1],k??10)},d.tickFormat=function(k,T){return T==null?M:f(T)},d.nice=function(k){var T=p();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?p(XU(T,k)):d},d.copy=function(){return nm(d,_$(e,t,n,i,r,a,o,l,u,f))},d}function $ie(){return lo.apply(_$(OZ,zZ,Za,mp,Hd,ns,sb,ab,Qo,c3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tie(){return lo.apply(_$(RZ,NZ,Ja,yp,Gd,vl,lb,ob,Qo,f3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kb(){var e=0,t=1,n,i,r,a,o=zi,l=!1,u;function f(g){return g==null||isNaN(g=+g)?u:o(r===0?.5:(g=(a(g)-n)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(o=g,f):o};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,o=g(y,v),f):[o(0),o(1)]}}return f.range=d(Il),f.rangeRound=d(tm),f.unknown=function(g){return arguments.length?(u=g,f):u},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Pl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function w$(){var e=wc(kb()(zi));return e.copy=function(){return Pl(e,w$())},jl.apply(e,arguments)}function JU(){var e=b$(kb()).domain([1,10]);return e.copy=function(){return Pl(e,JU()).base(e.base())},jl.apply(e,arguments)}function ej(){var e=x$(kb());return e.copy=function(){return Pl(e,ej()).constant(e.constant())},jl.apply(e,arguments)}function A$(){var e=S$(kb());return e.copy=function(){return Pl(e,A$()).exponent(e.exponent())},jl.apply(e,arguments)}function Mie(){return A$.apply(null,arguments).exponent(.5)}function Db(){var e=0,t=.5,n=1,i=1,r,a,o,l,u,f=zi,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?l:u),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),o=d(n=+n),l=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=v$(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(Il),y.rangeRound=v(tm),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),o=b(n),l=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,y}}function tj(){var e=wc(Db()(zi));return e.copy=function(){return Pl(e,tj())},jl.apply(e,arguments)}function nj(){var e=b$(Db()).domain([.1,1,10]);return e.copy=function(){return Pl(e,nj()).base(e.base())},jl.apply(e,arguments)}function ij(){var e=x$(Db());return e.copy=function(){return Pl(e,ij()).constant(e.constant())},jl.apply(e,arguments)}function C$(){var e=S$(Db());return e.copy=function(){return Pl(e,C$()).exponent(e.exponent())},jl.apply(e,arguments)}function kie(){return C$.apply(null,arguments).exponent(.5)}function uo(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Die=uo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Rie=uo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Nie=uo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Oie=uo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),zie=uo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Fie=uo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Lie=uo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Uie=uo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),jie=uo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Bie=uo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function $$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Iie="identity",ud="linear",fs="log",im="pow",rm="sqrt",Rb="symlog",Ju="time",ec="utc",Xa="sequential",Qd="diverging",cd="quantile",Nb="quantize",Ob="threshold",T$="ordinal",Yw="point",rj="band",M$="bin-ordinal",vn="continuous",am="discrete",om="discretizing",Hr="interpolating",k$="temporal";function Pie(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function qie(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,o,l,u,f;for(r<i&&(l=i,i=r,r=l),u=0,f=n.length;u<f;++u)n[u]>=i&&n[u]<=r&&(a<0&&(a=u),o=u);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function D$(){const e=h$().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,o=!1,l=0,u=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=$$(g,l,u);let b=i[p-0];r=(y-b)/(v||1),o&&(r=Math.floor(r)),b+=(y-b-r*(g-l))*f,a=r*(1-l),o&&(b=Math.round(b),a=Math.round(a));const S=ar(g).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(o=!!g,d()):o},e.padding=function(g){return arguments.length?(u=Math.max(0,Math.min(1,g)),l=u,d()):l},e.paddingInner=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.paddingOuter=function(g){return arguments.length?(u=Math.max(0,Math.min(1,g)),d()):u},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],S=+g[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,_l(y,b)-1),w=b===S?_:_l(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return D$().domain(t()).range(i).round(o).paddingInner(l).paddingOuter(u).align(f)},d()}function aj(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return aj(t())},e}function Hie(){return aj(D$().paddingInner(1))}var Gie=Array.prototype.map;function Yie(e){return Gie.call(e,Zn)}const Xie=Array.prototype.slice;function oj(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(_l(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Yie(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Xie.call(i),n):t.slice()},n.tickFormat=function(i,r){return HU(e[0],rt(e),i??10,r)},n.copy=function(){return oj().domain(n.domain()).range(n.range())},n}const Uy=new Map,sj=Symbol("vega_scale");function lj(e){return e[sj]=!0,e}function j6(e){return e&&e[sj]===!0}function Vie(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Pie(a):a.invertExtent?qie(a):void 0),a.type=e,lj(a)};return i.metadata=ha(_e(n)),i}function ft(e,t,n){return arguments.length>1?(Uy.set(e,Vie(e,t,n)),this):uj(e)?Uy.get(e):void 0}ft(Iie,YU);ft(ud,GU,vn);ft(fs,VU,[vn,fs]);ft(im,E$,vn);ft(rm,wie,vn);ft(Rb,WU,vn);ft(Ju,$ie,[vn,k$]);ft(ec,Tie,[vn,k$]);ft(Xa,w$,[vn,Hr]);ft(`${Xa}-${ud}`,w$,[vn,Hr]);ft(`${Xa}-${fs}`,JU,[vn,Hr,fs]);ft(`${Xa}-${im}`,A$,[vn,Hr]);ft(`${Xa}-${rm}`,Mie,[vn,Hr]);ft(`${Xa}-${Rb}`,ej,[vn,Hr]);ft(`${Qd}-${ud}`,tj,[vn,Hr]);ft(`${Qd}-${fs}`,nj,[vn,Hr,fs]);ft(`${Qd}-${im}`,C$,[vn,Hr]);ft(`${Qd}-${rm}`,kie,[vn,Hr]);ft(`${Qd}-${Rb}`,ij,[vn,Hr]);ft(cd,QU,[om,cd]);ft(Nb,KU,om);ft(Ob,ZU,om);ft(M$,oj,[am,om]);ft(T$,h$,am);ft(rj,D$,am);ft(Yw,Hie,am);function uj(e){return Uy.has(e)}function Ac(e,t){const n=Uy.get(e);return n&&n.metadata[t]}function R$(e){return Ac(e,vn)}function fd(e){return Ac(e,am)}function Xw(e){return Ac(e,om)}function cj(e){return Ac(e,fs)}function Wie(e){return Ac(e,k$)}function fj(e){return Ac(e,Hr)}function dj(e){return Ac(e,cd)}const Qie=["clamp","base","constant","exponent"];function hj(e,t){const n=t[0],i=rt(t)-n;return function(r){return e(n+r*i)}}function zb(e,t,n){return v$(N$(t||"rgb",n),e)}function gj(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function pj(e,t,n){const i=n-t;let r,a,o;return!i||!Number.isFinite(i)?ai(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),o=ft(a)().domain([t,n]).range([0,1]),Qie.forEach(l=>e[l]?o[l](e[l]()):0),o)}function N$(e,t){const n=die[Kie(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Kie(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Zie={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Jie={accent:Rie,category10:Die,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Nie,observable10:Oie,paired:zie,pastel1:Fie,pastel2:Lie,set1:Uie,set2:jie,set3:Bie,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function mj(e){if(ae(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function yj(e,t){for(const n in e)O$(n,t(e[n]))}const B6={};yj(Jie,mj);yj(Zie,e=>zb(mj(e)));function O$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(B6[e]=t,this):B6[e]}const Q1="symbol",ere="discrete",tre="gradient",nre=e=>ae(e)?e.map(t=>String(t)):String(e),ire=(e,t)=>e[1]-t[1],rre=(e,t)=>t[1]-e[1];function z$(e,t,n){let i;return ut(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Qp(e.domain())/n||1)+1))),Se(t)&&(i=t.step,t=t.interval),Ee(t)&&(t=e.type===Ju?Yd(t):e.type==ec?Xd(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function vj(e,t,n){let i=e.range(),r=i[0],a=rt(i),o=ire;if(r>a&&(i=a,a=r,r=i,o=rre),r=Math.floor(r),a=Math.ceil(a),t=t.map(l=>[l,e(l)]).filter(l=>r<=l[1]&&l[1]<=a).sort(o).map(l=>l[0]),n>0&&t.length>1){const l=[t[0],rt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,f)=>!(f%2));t.length<3&&(t=l)}return t}function F$(e,t){return e.bins?vj(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function bj(e,t,n,i,r,a){const o=t.type;let l=nre;if(o===Ju||r===Ju)l=e.timeFormat(i);else if(o===ec||r===ec)l=e.utcFormat(i);else if(cj(o)){const u=e.formatFloat(i);if(a||t.bins)l=u;else{const f=xj(t,n,!1);l=d=>f(d)?u(d):""}}else if(t.tickFormat){const u=t.domain();l=e.formatSpan(u[0],u[u.length-1],n,i)}else i&&(l=e.format(i));return l}function xj(e,t,n){const i=F$(e,t),r=e.base(),a=Math.log(r),o=Math.max(1,r*t/i.length),l=u=>{let f=u/Math.pow(r,Math.round(Math.log(u)/a));return f*r<r-.5&&(f*=r),f<=o};return n?i.filter(l):l}const Vw={[cd]:"quantiles",[Nb]:"thresholds",[Ob]:"domain"},Sj={[cd]:"quantiles",[Nb]:"domain"};function Ej(e,t){return e.bins?sre(e.bins):e.type===fs?xj(e,t,!0):Vw[e.type]?ore(e[Vw[e.type]]()):F$(e,t)}function are(e,t,n){const i=t[Sj[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)a=Math.min(a,i[o]-i[o-1]);return e.formatSpan(0,a,30,n)}function ore(e){const t=[-1/0].concat(e);return t.max=1/0,t}function sre(e){const t=e.slice(0,-1);return t.max=rt(e),t}const lre=e=>Vw[e.type]||e.bins;function _j(e,t,n,i,r,a,o){const l=Sj[t.type]&&a!==Ju&&a!==ec?are(e,t,r):bj(e,t,n,r,a,o);return i===Q1&&lre(t)?ure(l):i===ere?cre(l):fre(l)}const ure=e=>(t,n,i)=>{const r=I6(i[n+1],I6(i.max,1/0)),a=P6(t,e),o=P6(r,e);return a&&o?a+"  "+o:o?"< "+o:" "+a},I6=(e,t)=>e??t,cre=e=>(t,n)=>n?e(t):null,fre=e=>t=>e(t),P6=(e,t)=>Number.isFinite(e)?t(e):null;function dre(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+rt(t),a=r-i;if(e.type===Ob){const o=n?a/n:.1;i-=o,r+=o,a=r-i}return o=>(o-i)/a}function hre(e,t,n,i){const r=i||t.type;return Ee(n)&&Wie(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Ju?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===ec?e.utcFormat("%A, %d %B %Y, %X UTC"):_j(e,t,5,null,n,i,!0)}function wj(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=hre(e,t,n.format,n.formatType);if(Xw(t.type)){const a=Ej(t).slice(1).map(r),o=a.length;return`${o} boundar${o===1?"y":"ies"}: ${a.join(", ")}`}else if(fd(t.type)){const a=t.domain(),o=a.length,l=o>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${l}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(rt(a))}`}}let Aj=0;function gre(){Aj=0}const jy="p_";function L$(e){return e&&e.gradient}function Cj(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?jy:"";return r||(r=e.id="gradient_"+Aj++,i==="radial"?(e.x1=Oa(e.x1,.5),e.y1=Oa(e.y1,.5),e.r1=Oa(e.r1,0),e.x2=Oa(e.x2,.5),e.y2=Oa(e.y2,.5),e.r2=Oa(e.r2,.5),a=jy):(e.x1=Oa(e.x1,0),e.y1=Oa(e.y1,0),e.x2=Oa(e.x2,1),e.y2=Oa(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Oa(e,t){return e??t}function $j(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const q6={basis:{curve:cne},"basis-closed":{curve:fne},"basis-open":{curve:dne},bundle:{curve:hne,tension:"beta",value:.85},cardinal:{curve:gne,tension:"tension",value:0},"cardinal-open":{curve:mne,tension:"tension",value:0},"cardinal-closed":{curve:pne,tension:"tension",value:0},"catmull-rom":{curve:yne,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vne,tension:"alpha",value:.5},"catmull-rom-open":{curve:bne,tension:"alpha",value:.5},linear:{curve:l$},"linear-closed":{curve:xne},monotone:{horizontal:Ene,vertical:Sne},natural:{curve:_ne},step:{curve:wne},"step-after":{curve:Cne},"step-before":{curve:Ane}};function U$(e,t,n){var i=we(q6,e)&&q6[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const pre={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},mre=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,yre=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,vre=/^((\s+,?\s*)|(,\s*))/,bre=/^[01]/;function dd(e){const t=[];return(e.match(mre)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),o=pre[a],l=xre(a,o,i.slice(1).trim()),u=l.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...l.slice(0,o)]),u!==o){a==="m"&&(r=r==="M"?"L":"l");for(let f=o;f<u;f+=o)t.push([r,...l.slice(f,f+o)])}}),t}function xre(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const o=e==="a"&&(a===3||a===4)?bre:yre,l=n.slice(r).match(o);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const u=n.slice(r).match(vre);u!==null&&(r+=u[0].length)}return i}const Tl=Math.PI/180,Sre=1e-14,Nu=Math.PI/2,Ba=Math.PI*2,Af=Math.sqrt(3)/2;var KE={},ZE={},Tj=[].join;function Ere(e,t,n,i,r,a,o,l,u){const f=Tj.call(arguments);if(KE[f])return KE[f];const d=o*Tl,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(l-e)*.5+g*(u-t)*.5,v=p*(u-t)*.5-g*(l-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=g/n,w=-g/i,A=p/i,$=S*l+_*u,M=w*l+A*u,k=S*e+_*t,T=w*e+A*t;let z=1/((k-$)*(k-$)+(T-M)*(T-M))-.25;z<0&&(z=0);let B=Math.sqrt(z);a==r&&(B=-B);const j=.5*($+k)-B*(T-M),K=.5*(M+T)+B*(k-$),Y=Math.atan2(M-K,$-j);let F=Math.atan2(T-K,k-j)-Y;F<0&&a===1?F+=Ba:F>0&&a===0&&(F-=Ba);const R=Math.ceil(Math.abs(F/(Nu+.001))),I=[];for(let X=0;X<R;++X){const Z=Y+X*F/R,ce=Y+(X+1)*F/R;I[X]=[j,K,Z,ce,n,i,g,p]}return KE[f]=I}function _re(e){const t=Tj.call(e);if(ZE[t])return ZE[t];var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7];const d=f*o,g=-u*l,p=u*o,y=f*l,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),$=8/3*A*A/Math.sin(w),M=n+v-$*b,k=i+b+$*v,T=n+S,N=i+_,z=T+$*_,B=N-$*S;return ZE[t]=[d*M+g*k,p*M+y*k,d*z+g*B,p*z+y*B,d*T+g*N,p*T+y*N]}const $r=["l",0,0,0,0,0,0,0];function wre(e,t,n){const i=$r[0]=e[0];if(i==="a"||i==="A")$r[1]=t*e[1],$r[2]=n*e[2],$r[3]=e[3],$r[4]=e[4],$r[5]=e[5],$r[6]=t*e[6],$r[7]=n*e[7];else if(i==="h"||i==="H")$r[1]=t*e[1];else if(i==="v"||i==="V")$r[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)$r[r]=(r%2==1?t:n)*e[r];return $r}function wp(e,t,n,i,r,a){var o,l=null,u=0,f=0,d=0,g=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(o=t[w],(r!==1||a!==1)&&(o=wre(o,r,a)),o[0]){case"l":u+=o[1],f+=o[2],e.lineTo(u+n,f+i);break;case"L":u=o[1],f=o[2],e.lineTo(u+n,f+i);break;case"h":u+=o[1],e.lineTo(u+n,f+i);break;case"H":u=o[1],e.lineTo(u+n,f+i);break;case"v":f+=o[1],e.lineTo(u+n,f+i);break;case"V":f=o[1],e.lineTo(u+n,f+i);break;case"m":u+=o[1],f+=o[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"M":u=o[1],f=o[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"c":p=u+o[5],y=f+o[6],d=u+o[3],g=f+o[4],e.bezierCurveTo(u+o[1]+n,f+o[2]+i,d+n,g+i,p+n,y+i),u=p,f=y;break;case"C":u=o[5],f=o[6],d=o[3],g=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,d+n,g+i,u+n,f+i);break;case"s":p=u+o[3],y=f+o[4],d=2*u-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,u+o[1]+n,f+o[2]+i,p+n,y+i),d=u+o[1],g=f+o[2],u=p,f=y;break;case"S":p=o[3],y=o[4],d=2*u-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,o[1]+n,o[2]+i,p+n,y+i),u=p,f=y,d=o[1],g=o[2];break;case"q":p=u+o[3],y=f+o[4],d=u+o[1],g=f+o[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),u=p,f=y;break;case"Q":p=o[3],y=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,p+n,y+i),u=p,f=y,d=o[1],g=o[2];break;case"t":p=u+o[1],y=f+o[2],l[0].match(/[QqTt]/)===null?(d=u,g=f):l[0]==="t"?(d=2*u-v,g=2*f-b):l[0]==="q"&&(d=2*u-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),u=p,f=y,d=u+o[1],g=f+o[2];break;case"T":p=o[1],y=o[2],d=2*u-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),u=p,f=y;break;case"a":H6(e,u+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+f+i]),u+=o[6],f+=o[7];break;case"A":H6(e,u+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),u=o[6],f=o[7];break;case"z":case"Z":u=S,f=_,e.closePath();break}l=o}}function H6(e,t,n,i){const r=Ere(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const o=_re(r[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const G6=.5773502691896257,Y6={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ba)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n,r=i-n*G6,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n,r=i-n*G6;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Af*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Mj(e){return we(Y6,e)?Y6[e]:Are(e)}var JE={};function Are(e){if(!we(JE,e)){const t=dd(e);JE[e]={draw:function(n,i){wp(n,t,0,0,Math.sqrt(i)/2)}}}return JE[e]}const Ks=.448084975506;function Cre(e){return e.x}function $re(e){return e.y}function Tre(e){return e.width}function Mre(e){return e.height}function jo(e){return typeof e=="function"?e:()=>+e}function g1(e,t,n){return Math.max(t,Math.min(e,n))}function kj(){var e=Cre,t=$re,n=Tre,i=Mre,r=jo(0),a=r,o=r,l=r,u=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=g1(+r.call(this,d),0,w),$=g1(+a.call(this,d),0,w),M=g1(+o.call(this,d),0,w),k=g1(+l.call(this,d),0,w);if(u||(u=y=Eb()),A<=0&&$<=0&&M<=0&&k<=0)u.rect(v,b,S,_);else{var T=v+S,N=b+_;u.moveTo(v+A,b),u.lineTo(T-$,b),u.bezierCurveTo(T-Ks*$,b,T,b+Ks*$,T,b+$),u.lineTo(T,N-k),u.bezierCurveTo(T,N-Ks*k,T-Ks*k,N,T-k,N),u.lineTo(v+M,N),u.bezierCurveTo(v+Ks*M,N,v,N-Ks*M,v,N-M),u.lineTo(v,b+A),u.bezierCurveTo(v,b+Ks*A,v+Ks*A,b,v+A,b),u.closePath()}if(y)return u=null,y+""||null}return f.x=function(d){return arguments.length?(e=jo(d),f):e},f.y=function(d){return arguments.length?(t=jo(d),f):t},f.width=function(d){return arguments.length?(n=jo(d),f):n},f.height=function(d){return arguments.length?(i=jo(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=jo(d),a=g!=null?jo(g):r,l=p!=null?jo(p):r,o=y!=null?jo(y):a,f):r},f.context=function(d){return arguments.length?(u=d??null,f):u},f}function Dj(){var e,t,n,i,r=null,a,o,l,u;function f(g,p,y){const v=y/2;if(a){var b=l-p,S=g-o;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*u,A=(S/=_)*u,$=Math.atan2(S,b);r.moveTo(o-w,l-A),r.lineTo(g-b*v,p-S*v),r.arc(g,p,v,$-Math.PI,$),r.lineTo(o+w,l+A),r.arc(o,l,u,$,$+Math.PI)}else r.arc(g,p,v,0,Ba);r.closePath()}else a=1;o=g,l=p,u=v}function d(g){var p,y=g.length,v,b=!1,S;for(r==null&&(r=S=Eb()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(S)return r=null,S+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function sm(e,t){return e??t}const lm=e=>e.x||0,um=e=>e.y||0,kre=e=>e.width||0,Dre=e=>e.height||0,Rre=e=>(e.x||0)+(e.width||0),Nre=e=>(e.y||0)+(e.height||0),Ore=e=>e.startAngle||0,zre=e=>e.endAngle||0,Fre=e=>e.padAngle||0,Lre=e=>e.innerRadius||0,Ure=e=>e.outerRadius||0,jre=e=>e.cornerRadius||0,Bre=e=>sm(e.cornerRadiusTopLeft,e.cornerRadius)||0,Ire=e=>sm(e.cornerRadiusTopRight,e.cornerRadius)||0,Pre=e=>sm(e.cornerRadiusBottomRight,e.cornerRadius)||0,qre=e=>sm(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Hre=e=>sm(e.size,64),Gre=e=>e.size||1,Fb=e=>e.defined!==!1,Yre=e=>Mj(e.shape||"circle"),Xre=sne().startAngle(Ore).endAngle(zre).padAngle(Fre).innerRadius(Lre).outerRadius(Ure).cornerRadius(jre),Vre=oU().x(lm).y1(um).y0(Nre).defined(Fb),Wre=oU().y(um).x1(lm).x0(Rre).defined(Fb),Qre=aU().x(lm).y(um).defined(Fb),Kre=kj().x(lm).y(um).width(kre).height(Dre).cornerRadius(Bre,Ire,Pre,qre),Zre=une().type(Yre).size(Hre),Jre=Dj().x(lm).y(um).defined(Fb).size(Gre);function j$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function eae(e,t){return Xre.context(e)(t)}function tae(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Wre:Vre).curve(U$(i,n.orient,n.tension)).context(e)(t)}function nae(e,t){const n=t[0],i=n.interpolate||"linear";return Qre.curve(U$(i,n.orient,n.tension)).context(e)(t)}function Kd(e,t,n,i){return Kre.context(e)(t,n,i)}function iae(e,t){return(t.mark.shape||t.shape).context(e)(t)}function rae(e,t){return Zre.context(e)(t)}function aae(e,t){return Jre.context(e)(t)}var Rj=1;function oae(){Rj=1}function B$(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+Rj++),o=r.clipping[a]||(r.clipping[a]={id:a});return Pe(i)?o.path=i(null):j$(n)?o.path=Kd(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function cn(e){this.clear(),e&&this.union(e)}cn.prototype={clone(){return new cn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:o}=this,l=Math.cos(e),u=Math.sin(e),f=t-t*l+n*u,d=n-t*u-n*l;return[l*i-u*r+f,u*i+l*r+d,l*i-u*o+f,u*i+l*o+d,l*a-u*r+f,u*a+l*r+d,l*a-u*o+f,u*a+l*o+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Lb(e){this.mark=e,this.bounds=this.bounds||new cn}function Ub(e){Lb.call(this,e),this.items=this.items||[]}ve(Ub,Lb);class Nj{constructor(t){this._pending=0,this._loader=t||cb()}pending(){return this._pending}sanitizeURL(t){const n=this;return X6(n),n._loader.sanitize(t,{context:"href"}).then(i=>(mg(n),i)).catch(()=>(mg(n),null))}loadImage(t){const n=this,i=$ne();return X6(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const o=new i,l=we(r,"crossOrigin")?r.crossOrigin:"anonymous";return l!=null&&(o.crossOrigin=l),o.onload=()=>mg(n),o.onerror=()=>mg(n),o.src=a,o}).catch(r=>(mg(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function X6(e){e._pending+=1}function mg(e){e._pending-=1}function ys(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?sae(t,i):0))}return e}function sae(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const lae=Ba-1e-8;let jb,K1,Z1,ju,Ww,J1,Qw,Kw;const ll=(e,t)=>jb.add(e,t),ey=(e,t)=>ll(K1=e,Z1=t),V6=e=>ll(e,jb.y1),W6=e=>ll(jb.x1,e),Ou=(e,t)=>Ww*e+Qw*t,zu=(e,t)=>J1*e+Kw*t,e_=(e,t)=>ll(Ou(e,t),zu(e,t)),t_=(e,t)=>ey(Ou(e,t),zu(e,t));function cm(e,t){return jb=e,t?(ju=t*Tl,Ww=Kw=Math.cos(ju),J1=Math.sin(ju),Qw=-J1):(Ww=Kw=1,ju=J1=Qw=0),uae}const uae={beginPath(){},closePath(){},moveTo:t_,lineTo:t_,rect(e,t,n,i){ju?(e_(e+n,t),e_(e+n,t+i),e_(e,t+i),t_(e,t)):(ll(e+n,t+i),ey(e,t))},quadraticCurveTo(e,t,n,i){const r=Ou(e,t),a=zu(e,t),o=Ou(n,i),l=zu(n,i);Q6(K1,r,o,V6),Q6(Z1,a,l,W6),ey(o,l)},bezierCurveTo(e,t,n,i,r,a){const o=Ou(e,t),l=zu(e,t),u=Ou(n,i),f=zu(n,i),d=Ou(r,a),g=zu(r,a);K6(K1,o,u,d,V6),K6(Z1,l,f,g,W6),ey(d,g)},arc(e,t,n,i,r,a){if(i+=ju,r+=ju,K1=n*Math.cos(r)+e,Z1=n*Math.sin(r)+t,Math.abs(r-i)>lae)ll(e-n,t-n),ll(e+n,t+n);else{const o=f=>ll(n*Math.cos(f)+e,n*Math.sin(f)+t);let l,u;if(o(i),o(r),r!==i)if(i=i%Ba,i<0&&(i+=Ba),r=r%Ba,r<0&&(r+=Ba),r<i&&(a=!a,l=i,i=r,r=l),a)for(r-=Ba,l=i-i%Nu,u=0;u<4&&l>r;++u,l-=Nu)o(l);else for(l=i-i%Nu+Nu,u=0;u<4&&l<r;++u,l=l+Nu)o(l)}}};function Q6(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function K6(e,t,n,i,r){const a=i-e+3*t-3*n,o=e+n-2*t,l=e-t;let u=0,f=0,d;Math.abs(a)>Sre?(d=o*o+l*a,d>=0&&(d=Math.sqrt(d),u=(-o+d)/a,f=(-o-d)/a)):u=.5*l/o,0<u&&u<1&&r(Z6(u,e,t,n,i)),0<f&&f<1&&r(Z6(f,e,t,n,i))}function Z6(e,t,n,i,r){const a=1-e,o=a*a,l=e*e;return o*a*t+3*o*e*n+3*a*l*i+l*e*r}var Sl=(Sl=xl(1,1))?Sl.getContext("2d"):null;const Zw=new cn;function I$(e){return function(t,n){if(!Sl)return!0;e(Sl,t),Zw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:o}=Zw;for(let l=r;l<=o;++l)for(let u=i;u<=a;++u)if(Sl.isPointInPath(u,l))return!0;return!1}}function P$(e,t){return t.contains(e.x||0,e.y||0)}function Oj(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(Zw.set(n,i,n+r,i+a))}function zj(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return jf(t,n,i,r,a)}function jf(e,t,n,i,r){const{x1:a,y1:o,x2:l,y2:u}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=l-t),S===2&&(y=-d,v=-(o-n)),S===3&&(y=d,v=u-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function hd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Jr(e,t){return e??t}function J6(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function cae(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Jr(t.x1,.5)*i,n.y1+Jr(t.y1,.5)*r,Math.max(i,r)*Jr(t.r1,0),n.x1+Jr(t.x2,.5)*i,n.y1+Jr(t.y2,.5)*r,Math.max(i,r)*Jr(t.r2,.5));else{const o=Jr(t.x1,0),l=Jr(t.y1,0),u=Jr(t.x2,1),f=Jr(t.y2,0);if(o===u||l===f||i===r)a=e.createLinearGradient(n.x1+o*i,n.y1+l*r,n.x1+u*i,n.y1+f*r);else{const d=xl(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=J6(g.createLinearGradient(o,l,u,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return J6(a,t.stops)}function Fj(e,t,n){return L$(n)?cae(e,n,t.bounds):n}function By(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Fj(e,t,t.fill),!0):!1}var fae=[];function gd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Fj(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||fae),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function dae(e,t){return e.zindex-t.zindex||e.index-t.index}function q$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(dae)}function pa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=q$(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Iy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=q$(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function H$(e){return function(t,n,i){pa(n,r=>{(!i||i.intersects(r.bounds))&&Lj(e,t,r,r)})}}function hae(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Lj(e,t,n.items[0],n.items)}}function Lj(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(hd(t,n),n.fill&&By(t,n,r)&&t.fill(),n.stroke&&gd(t,n,r)&&t.stroke()))}function Bb(e){return e=e||Ur,function(t,n,i,r,a,o){return i*=t.pixelRatio,r*=t.pixelRatio,Iy(n,l=>{const u=l.bounds;if(!(u&&!u.contains(a,o)||!u)&&e(t,l,i,r,a,o))return l})}}function fm(e,t){return function(n,i,r,a){var o=Array.isArray(i)?i[0]:i,l=t??o.fill,u=o.stroke&&n.isPointInStroke,f,d;return u&&(f=o.strokeWidth,d=o.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:l&&n.isPointInPath(r,a)||u&&n.isPointInStroke(r,a)}}function G$(e){return Bb(fm(e))}function Hu(e,t){return"translate("+e+","+t+")"}function Y$(e){return"rotate("+e+")"}function gae(e,t){return"scale("+e+","+t+")"}function Uj(e){return Hu(e.x||0,e.y||0)}function pae(e){return Hu(e.x||0,e.y||0)+(e.angle?" "+Y$(e.angle):"")}function mae(e){return Hu(e.x||0,e.y||0)+(e.angle?" "+Y$(e.angle):"")+(e.scaleX||e.scaleY?" "+gae(e.scaleX||1,e.scaleY||1):"")}function X$(e,t,n){function i(o,l){o("transform",pae(l)),o("d",t(null,l))}function r(o,l){return t(cm(o,l.angle),l),ys(o,l).translate(l.x||0,l.y||0)}function a(o,l){var u=l.x||0,f=l.y||0,d=l.angle||0;o.translate(u,f),d&&o.rotate(d*=Tl),o.beginPath(),t(o,l),d&&o.rotate(-d),o.translate(-u,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:H$(a),pick:G$(a),isect:n||I$(a)}}var yae=X$("arc",eae);function vae(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,o,l;--r>=0;)e[r].defined!==!1&&(l=Math.abs(e[r][i]-n),l<a&&(a=l,o=e[r]));return o}function bae(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,o;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],o=r*r+a*a,o<n))return e[i];return null}function xae(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function V$(e,t,n){function i(u,f){var d=f.mark.items;d.length&&u("d",t(null,d))}function r(u,f){var d=f.items;return d.length===0?u:(t(cm(u),d),ys(u,d[0]))}function a(u,f){u.beginPath(),t(u,f)}const o=fm(a);function l(u,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=u.pixelRatio,g*=u.pixelRatio,o(u,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:hae(a),pick:l,isect:P$,tip:n}}var Sae=V$("area",tae,vae);function Eae(e,t){var n=t.clip;e.save(),Pe(n)?(e.beginPath(),n(e),e.clip()):jj(e,t.group)}function jj(e,t){e.beginPath(),j$(t)?Kd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Bj(e){const t=Jr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function _ae(e,t){e("transform",Uj(t))}function Ij(e,t){const n=Bj(t);e("d",Kd(null,t,n,n))}function wae(e,t){e("class","background"),e("aria-hidden",!0),Ij(e,t)}function Aae(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Ij(e,t):e("d","")}function Cae(e,t,n){const i=t.clip?B$(n,t,t):null;e("clip-path",i)}function $ae(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ys(e,t),e.translate(t.x||0,t.y||0)}function Ap(e,t,n,i){const r=Bj(t);e.beginPath(),Kd(e,t,(n||0)+r,(i||0)+r)}const Tae=fm(Ap),Mae=fm(Ap,!1),kae=fm(Ap,!0);function Dae(e,t,n,i){pa(t,r=>{const a=r.x||0,o=r.y||0,l=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(Ap(e,r,a,o),hd(e,r),r.fill&&By(e,r,u)&&e.fill(),r.stroke&&!l&&gd(e,r,u)&&e.stroke()),e.save(),e.translate(a,o),r.clip&&jj(e,r),n&&n.translate(-a,-o),pa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,o),e.restore(),l&&r.stroke&&u&&(Ap(e,r,a,o),hd(e,r),gd(e,r,u)&&e.stroke())})}function Rae(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const o=n*e.pixelRatio,l=i*e.pixelRatio;return Iy(t,u=>{let f,d,g;const p=u.bounds;if(p&&!p.contains(r,a))return;d=u.x||0,g=u.y||0;const y=d+(u.width||0),v=g+(u.height||0),b=u.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&j$(u)&&!kae(e,u,o,l))return e.restore(),null;const S=u.strokeForeground,_=t.interactive!==!1;return _&&S&&u.stroke&&Mae(e,u,o,l)?(e.restore(),u):(f=Iy(u,w=>Nae(w,d,g)?this.pick(w,n,i,d,g):null),!f&&_&&(u.fill||!S&&u.stroke)&&Tae(e,u,o,l)&&(f=u),e.restore(),f||null)})}function Nae(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Oae={type:"group",tag:"g",nested:!1,attr:_ae,bound:$ae,draw:Dae,pick:Rae,isect:Oj,content:Cae,background:wae,foreground:Aae},Cp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function W$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function Q$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function K$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Ib(e,t){return e==="center"?t/2:e==="right"?t:0}function Pb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function zae(e,t,n){const i=W$(t,n),r=Q$(t,i),a=K$(t,i),o=(t.x||0)-Ib(t.align,r),l=(t.y||0)-Pb(t.baseline,a),u=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",u,Cp["xmlns:xlink"],"xlink:href"),e("transform",Hu(o,l)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Fae(e,t){const n=t.image,i=Q$(t,n),r=K$(t,n),a=(t.x||0)-Ib(t.align,i),o=(t.y||0)-Pb(t.baseline,r);return e.set(a,o,a+i,o+r)}function Lae(e,t,n){pa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=W$(i,this);let a=Q$(i,r),o=K$(i,r);if(a===0||o===0)return;let l=(i.x||0)-Ib(i.align,a),u=(i.y||0)-Pb(i.baseline,o),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,u+=(o-p)/2,o=p):(p=o*d,l+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(hd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,l,u,a,o))})}var Uae={type:"image",tag:"image",nested:!1,attr:zae,bound:Fae,draw:Lae,pick:Bb(),isect:Ur,get:W$,xOffset:Ib,yOffset:Pb},jae=V$("line",nae,bae);function Bae(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",mae(t)),e("d",t.path)}function ty(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,o=t.scaleY||1,l=(t.angle||0)*Tl,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=dd(n)).path=n),l&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(l),wp(e,u,0,0,a,o),e.rotate(-l),e.translate(-i,-r)):wp(e,u,i,r,a,o)}function Iae(e,t){return ty(cm(e,t.angle),t)?e.set(0,0,0,0):ys(e,t,!0)}var Pae={type:"path",tag:"path",nested:!1,attr:Bae,bound:Iae,draw:H$(ty),pick:G$(ty),isect:I$(ty)};function qae(e,t){e("d",Kd(null,t))}function Hae(e,t){var n,i;return ys(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function e4(e,t){e.beginPath(),Kd(e,t)}var Gae={type:"rect",tag:"path",nested:!1,attr:qae,bound:Hae,draw:H$(e4),pick:G$(e4),isect:Oj};function Yae(e,t){e("transform",Uj(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Xae(e,t){var n,i;return ys(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function Pj(e,t,n){var i,r,a,o;return t.stroke&&gd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,o=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,o),!0):!1}function Vae(e,t,n){pa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&Pj(e,i,r)&&(hd(e,i),e.stroke())}})}function Wae(e,t,n,i){return e.isPointInStroke?Pj(e,t,1)&&e.isPointInStroke(n,i):!1}var Qae={type:"rule",tag:"line",nested:!1,attr:Yae,bound:Xae,draw:Vae,pick:Bb(Wae),isect:zj},Kae=X$("shape",iae),Zae=X$("symbol",rae,P$);const t4=QL();var lr={height:co,measureWidth:Z$,estimateWidth:Py,width:Py,canvas:qj};qj(!0);function qj(e){lr.width=e&&Sl?Z$:Py}function Py(e,t){return Hj(kl(e,t),co(e))}function Hj(e,t){return~~(.8*e.length*t)}function Z$(e,t){return co(e)<=0||!(t=kl(e,t))?0:Gj(t,qb(e))}function Gj(e,t){const n=`(${t}) ${e}`;let i=t4.get(n);return i===void 0&&(Sl.font=t,i=Sl.measureText(e).width,t4.set(n,i)),i}function co(e){return e.fontSize!=null?+e.fontSize||0:11}function Ml(e){return e.lineHeight!=null?e.lineHeight:co(e)+2}function Jae(e){return ae(e)?e.length>1?e:e[0]:e}function dm(e){return Jae(e.lineBreak&&e.text&&!ae(e.text)?e.text.split(e.lineBreak):e.text)}function J$(e){const t=dm(e);return(ae(t)?t.length-1:0)*Ml(e)}function kl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?toe(e,n):n}function eoe(e){if(lr.width===Z$){const t=qb(e);return n=>Gj(n,t)}else if(lr.width===Py){const t=co(e);return n=>Hj(n,t)}else return t=>lr.width(e,t)}function toe(e,t){var n=+e.limit,i=eoe(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",o=0,l=t.length,u;if(n-=i(r),a){for(;o<l;)u=o+l>>>1,i(t.slice(u))>n?o=u+1:l=u;return r+t.slice(o)}else{for(;o<l;)u=1+(o+l>>>1),i(t.slice(0,u))<n?o=u:l=u-1;return t.slice(0,o)+r}}function hm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function qb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+co(e)+"px "+hm(e,t)}function eT(e){var t=e.baseline,n=co(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ml(e):t==="line-bottom"?.29*n-.5*Ml(e):0)}const noe={left:"start",center:"middle",right:"end"},tp=new cn;function Hb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Nu,t+=i*Math.cos(r),n+=i*Math.sin(r)),tp.x1=t,tp.y1=n,tp}function ioe(e,t){var n=t.dx||0,i=(t.dy||0)+eT(t),r=Hb(t),a=r.x1,o=r.y1,l=t.angle||0,u;e("text-anchor",noe[t.align]||"start"),l?(u=Hu(a,o)+" "+Y$(l),(n||i)&&(u+=" "+Hu(n,i))):u=Hu(a+n,o+i),e("transform",u)}function tT(e,t,n){var i=lr.height(t),r=t.align,a=Hb(t),o=a.x1,l=a.y1,u=t.dx||0,f=(t.dy||0)+eT(t)-Math.round(.8*i),d=dm(t),g;if(ae(d)?(i+=Ml(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,lr.width(t,y)),0)):g=lr.width(t,d),r==="center"?u-=g/2:r==="right"&&(u-=g),e.set(u+=o,f+=l,u+g,f+i),t.angle&&!n)e.rotate(t.angle*Tl,o,l);else if(n===2)return e.rotatedPoints(t.angle*Tl,o,l);return e}function roe(e,t,n){pa(t,i=>{var r=i.opacity==null?1:i.opacity,a,o,l,u,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=qb(i),e.textAlign=i.align||"left",a=Hb(i),o=a.x1,l=a.y1,i.angle&&(e.save(),e.translate(o,l),e.rotate(i.angle*Tl),o=l=0),o+=i.dx||0,l+=(i.dy||0)+eT(i),d=dm(i),hd(e,i),ae(d))for(f=Ml(i),u=0;u<d.length;++u)g=kl(i,d[u]),i.fill&&By(e,i,r)&&e.fillText(g,o,l),i.stroke&&gd(e,i,r)&&e.strokeText(g,o,l),l+=f;else g=kl(i,d),i.fill&&By(e,i,r)&&e.fillText(g,o,l),i.stroke&&gd(e,i,r)&&e.strokeText(g,o,l);i.angle&&e.restore()}})}function aoe(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Hb(t),l=o.x1,u=o.y1,f=tT(tp,t,1),d=-t.angle*Tl,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(l-g*l+p*u),v=p*r+g*a+(u-p*l-g*u);return f.contains(y,v)}function ooe(e,t){const n=tT(tp,e,2);return jf(t,n[0],n[1],n[2],n[3])||jf(t,n[0],n[1],n[4],n[5])||jf(t,n[4],n[5],n[6],n[7])||jf(t,n[2],n[3],n[6],n[7])}var soe={type:"text",tag:"text",nested:!1,attr:ioe,bound:tT,draw:roe,pick:Bb(aoe),isect:ooe},loe=V$("trail",aae,xae),pr={arc:yae,area:Sae,group:Oae,image:Uae,line:jae,path:Pae,rect:Gae,rule:Qae,shape:Kae,symbol:Zae,text:soe,trail:loe};function Jw(e,t,n){var i=pr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new cn),e,n)}var n4={mark:null};function Yj(e,t,n){var i=pr[e.marktype],r=i.bound,a=e.items,o=a&&a.length,l,u,f,d;if(i.nested)return o?f=a[0]:(n4.mark=e,f=n4),d=Jw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new cn,o)for(l=0,u=a.length;l<u;++l)t.union(Jw(a[l],r,n));return e.bounds=t}const uoe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Xj(e,t){return JSON.stringify(e,uoe,t)}function Vj(e){const t=typeof e=="string"?JSON.parse(e):e;return Wj(t)}function Wj(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&Wj(n[r]);return t&&Yj(e),e}class Qj{constructor(t){arguments.length?this.root=Vj(t):(this.root=i4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ub(this.root)])}toJSON(t){return Xj(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=i4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function i4(e,t){const n={bounds:new cn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ul(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function nT(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function hn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=ul(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Mr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function Kj(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Gb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function coe(e,t,n,i){var r=e&&e.mark,a,o;if(r&&(a=pr[r.marktype]).tip){for(o=Gb(t,n),o[0]-=i[0],o[1]-=i[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=a.tip(r.items,o)}return e}let iT=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||cb(),this._tooltip=n||foe}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),o=ul(null,"a");for(const l in r)o.setAttribute(l,r[l]);o.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=coe(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,o=a.width(),l=a.height();let u=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,f+=t.y||0;return{x:u,y:f,width:o,height:l,left:u,top:f,right:u+o,bottom:f+l}}};function foe(e,t,n,i){e.element().setAttribute("title",i||"")}class gm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Nj(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(o=>{o&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const doe="keydown",hoe="keypress",goe="keyup",Zj="dragenter",ny="dragleave",Jj="dragover",eA="pointerdown",poe="pointerup",qy="pointermove",iy="pointerout",eB="pointerover",tA="mousedown",moe="mouseup",tB="mousemove",Hy="mouseout",nB="mouseover",Gy="click",yoe="dblclick",voe="wheel",iB="mousewheel",Yy="touchstart",Xy="touchmove",Vy="touchend",boe=[doe,hoe,goe,Zj,ny,Jj,eA,poe,qy,iy,eB,tA,moe,tB,Hy,nB,Gy,yoe,voe,iB,Yy,Xy,Vy],nA=qy,np=Hy,iA=Gy;class pm extends iT{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=boe,this.pointermove=a4([qy,tB],[eB,nB],[iy,Hy]),this.dragover=a4([Jj],[Zj],[ny]),this.pointerout=o4([iy,Hy]),this.dragleave=o4([ny])}initialize(t,n,i){return this._canvas=t&&nT(t,"canvas"),[Gy,tA,eA,qy,iy,ny].forEach(r=>r4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(iB,t)}pointerdown(t){this._down=this._active,this.fire(eA,t)}mousedown(t){this._down=this._active,this.fire(tA,t)}click(t){this._down===this._active&&(this.fire(Gy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Yy,t,!0)}touchmove(t){this.fire(Xy,t,!0)}touchend(t){this.fire(Vy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===iA&&r&&r.href?this.handleHref(n,r,r.href):(t===nA||t===np)&&this.handleTooltip(n,r,t!==np),a)for(let o=0,l=a.length;o<l;++o)a[o].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(r4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Gb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const o=this.context();return pr[t.marktype].pick.call(this,o,t,n,i,r,a)}}const xoe=e=>e===Yy||e===Xy||e===Vy?[Yy,Xy,Vy]:[e];function r4(e,t){xoe(t).forEach(n=>Soe(e,n))}function Soe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Bg(e,t,n){t.forEach(i=>e.fire(i,n))}function a4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Bg(this,e,i):((!r||!r.exit)&&Bg(this,n,i),this._active=a,Bg(this,t,i),Bg(this,e,i))}}function o4(e){return function(t){Bg(this,e,t),this._active=null}}function Eoe(){return typeof window<"u"&&window.devicePixelRatio||1}function _oe(e,t,n,i,r,a){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,l=e.getContext("2d"),u=o?Eoe():r;e.width=t*u,e.height=n*u;for(const f in a)l[f]=a[f];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*i[0],u*i[1]),e}class Wy extends gm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new cn,this._tempb=new cn}initialize(t,n,i,r,a,o){return this._options=o||{},this._canvas=this._options.externalContext?null:xl(1,1,this._options.type),t&&this._canvas&&(Mr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)_oe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||te("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,o=this._height,l=this._dirty,u=woe(r,a,o);i.save();const f=this._redraw||l.empty()?(this._redraw=!1,u.expand(1)):Aoe(i,u.intersect(l),r);return this.clear(-r[0],-r[1],a,o),this.draw(i,t,f,n),i.restore(),l.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=pr[n.marktype];n.clip&&Eae(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,o=this.context();a.type!=="pdf"&&!a.externalContext&&o.clearRect(t,n,i,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,i,r))}}const woe=(e,t,n)=>new cn().set(0,0,t,n).translate(-e[0],-e[1]);function Aoe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class rB extends iT{constructor(t,n){super(t,n);const i=this;i._hrefHandler=n_(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=n_(i,(r,a)=>{i.handleTooltip(r,a,r.type!==np)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(iA,this._hrefHandler),r.removeEventListener(nA,this._tooltipHandler),r.removeEventListener(np,this._tooltipHandler)),this._svg=r=t&&nT(t,"svg"),r&&(r.addEventListener(iA,this._hrefHandler),r.addEventListener(nA,this._tooltipHandler),r.addEventListener(np,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const o={type:t,handler:n,listener:n_(this,n)};(r[i]||(r[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const n_=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},aB="aria-hidden",rT="aria-label",aT="role",oT="aria-roledescription",oB="graphics-object",sT="graphics-symbol",sB=(e,t,n)=>({[aT]:e,[oT]:t,[rT]:n||void 0}),Coe=ha(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),s4={axis:{desc:"axis",caption:Moe},legend:{desc:"legend",caption:koe},"title-text":{desc:"title",caption:e=>`Title text '${u4(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${u4(e)}'`}},l4={ariaRole:aT,ariaRoleDescription:oT,description:rT};function lB(e,t){const n=t.aria===!1;if(e(aB,n||void 0),n||t.description==null)for(const i in l4)e(l4[i],void 0);else{const i=t.mark.marktype;e(rT,t.description),e(aT,t.ariaRole||(i==="group"?oB:sT)),e(oT,t.ariaRoleDescription||`${i} mark`)}}function uB(e){return e.aria===!1?{[aB]:!0}:Coe[e.role]?null:s4[e.role]?Toe(e,s4[e.role]):$oe(e)}function $oe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return sB(n?oB:sT,`${t} mark container`,e.description)}function Toe(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return sB(t.role||sT,t.desc,n.description||i(n))}catch{return null}}function u4(e){return _e(e.text).join(" ")}function Moe(e){const t=e.datum,n=e.orient,i=t.title?cB(e):null,r=e.context,a=r.scales[t.scale].value,o=r.dataflow.locale(),l=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${fd(l)?"discrete":l} scale with ${wj(o,a,e)}`}function koe(e){const t=e.datum,n=t.title?cB(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),o=e.context,l=o.scales[r[a[0]]].value,u=o.dataflow.locale();return Roe(i)+(n?` titled '${n}'`:"")+` for ${Doe(a)} with ${wj(u,l,e)}`}function cB(e){try{return _e(rt(e.items).items[0].text).join(" ")}catch{return null}}function Doe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rt(e)}function Roe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const fB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Noe=e=>fB(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function lT(){let e="",t="",n="";const i=[],r=()=>t=n="",a=u=>{t&&(e+=`${t}>${n}`,r()),i.push(u)},o=(u,f)=>(f!=null&&(t+=` ${u}="${Noe(f)}"`),l),l={open(u,...f){a(u),t="<"+u;for(const d of f)for(const g in d)o(g,d[g]);return l},close(){const u=i.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,r(),l},attr:o,text:u=>(n+=fB(u),l),toString:()=>e};return l}const dB=e=>hB(lT(),e)+"";function hB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):hB(e,i)}return e.close()}const Qy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Ky={blend:"mix-blend-mode"},gB={fill:"none","stroke-miterlimit":10},yg=0,c4="http://www.w3.org/2000/xmlns/",dn=Cp.xmlns;class uT extends gm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=hn(t,0,"svg",dn),this._svg.setAttributeNS(c4,"xmlns",dn),this._svg.setAttributeNS(c4,"xmlns:xlink",Cp["xmlns:xlink"]),this._svg.setAttribute("version",Cp.version),this._svg.setAttribute("class","marks"),Mr(t,1),this._root=hn(this._svg,yg,"g",dn),cl(this._root,gB),Mr(this._svg,yg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(cl(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=hn(t,yg,"rect",dn),cl(i,{width:this._width,height:this._height,fill:n}));const r=dB(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Mr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,o,l,u,f;for(l=0,u=t.length;l<u;++l)if(i=t[l],r=i.mark,r.marktype!==a&&(a=r.marktype,o=pr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,f4(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){o.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(o,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=o.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,f4(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,o=n.marktype,l=pr[o],u=n.interactive===!1?"none":null,f=l.tag==="g",d=d4(n,t,i,"g",a);if(o!=="group"&&r!=null&&!r.includes(o))return Mr(d,0),n._svg;d.setAttribute("class",Kj(n));const g=uB(n);for(const b in g)ui(d,b,g[b]);f||ui(d,"pointer-events",u),ui(d,"clip-path",n.clip?B$(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=d4(b,d,p,l.tag,a);S&&(this._update(l,_,b),f&&Foe(this,_,b,r)),p=_,++y};return l.nested?n.items.length&&v(n.items[0]):pa(n,v),Mr(d,y),d}_update(t,n,i){Zo=n,Qn=n.__values__,lB(ip,i),t.attr(ip,i,this);const r=Uoe[t.type];r&&r.call(this,t,n,i),Zo&&this.style(Zo,i)}style(t,n){if(n!=null){for(const i in Qy){let r=i==="font"?hm(n):n[i];if(r===Qn[i])continue;const a=Qy[i];r==null?t.removeAttribute(a):(L$(r)&&(r=Cj(r,this._defs.gradient,pB())),t.setAttribute(a,r+"")),Qn[i]=r}for(const i in Ky)ry(t,Ky[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=hn(t,yg+1,"defs",dn)),r=Ooe(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=hn(t,yg+1,"defs",dn)),r=zoe(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Mr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function f4(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Ooe(e,t,n){let i,r,a;if(t.gradient==="radial"){let o=hn(e,n++,"pattern",dn);cl(o,{id:jy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=hn(o,0,"rect",dn),cl(o,{width:1,height:1,fill:`url(${pB()}#${t.id})`}),e=hn(e,n++,"radialGradient",dn),cl(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=hn(e,n++,"linearGradient",dn),cl(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=hn(e,i,"stop",dn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Mr(e,i),n}function zoe(e,t,n){let i;return e=hn(e,n,"clipPath",dn),e.setAttribute("id",t.id),t.path?(i=hn(e,0,"path",dn),i.setAttribute("d",t.path)):(i=hn(e,0,"rect",dn),cl(i,{x:0,y:0,width:t.width,height:t.height})),Mr(e,1),n+1}function Foe(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;pa(n,o=>{r=e.mark(t,o,r,i),++a}),Mr(t,1+a)}function d4(e,t,n,i,r){let a=e._svg,o;if(!a&&(o=t.ownerDocument,a=ul(o,i,dn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const l=ul(o,"path",dn);a.appendChild(l),l.__data__=e;const u=ul(o,"g",dn);a.appendChild(u),u.__data__=e;const f=ul(o,"path",dn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||Loe(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Loe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Zo=null,Qn=null;const Uoe={group(e,t,n){const i=Zo=t.childNodes[2];Qn=i.__values__,e.foreground(ip,n,this),Qn=t.__values__,Zo=t.childNodes[1],e.content(ip,n,this);const r=Zo=t.childNodes[0];e.background(ip,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Qn.events&&(ui(i,"pointer-events",a),ui(r,"pointer-events",a),Qn.events=a),n.strokeForeground&&n.stroke){const o=n.fill;ui(i,"display",null),this.style(r,n),ui(r,"stroke",null),o&&(n.fill=null),Qn=i.__values__,this.style(i,n),o&&(n.fill=o),Zo=null}else ui(i,"display","none")},image(e,t,n){n.smooth===!1?(ry(t,"image-rendering","optimizeSpeed"),ry(t,"image-rendering","pixelated")):ry(t,"image-rendering",null)},text(e,t,n){const i=dm(n);let r,a,o,l;ae(i)?(a=i.map(u=>kl(n,u)),r=a.join(`
`),r!==Qn.text&&(Mr(t,0),o=t.ownerDocument,l=Ml(n),a.forEach((u,f)=>{const d=ul(o,"tspan",dn);d.__data__=n,d.textContent=u,f&&(d.setAttribute("x",0),d.setAttribute("dy",l)),t.appendChild(d)}),Qn.text=r)):(a=kl(n,i),a!==Qn.text&&(t.textContent=a,Qn.text=a)),ui(t,"font-family",hm(n)),ui(t,"font-size",co(n)+"px"),ui(t,"font-style",n.fontStyle),ui(t,"font-variant",n.fontVariant),ui(t,"font-weight",n.fontWeight)}};function ip(e,t,n){t!==Qn[e]&&(n?joe(Zo,e,t,n):ui(Zo,e,t),Qn[e]=t)}function ry(e,t,n){n!==Qn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Qn[t]=n)}function cl(e,t){for(const n in t)ui(e,n,t[n])}function ui(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function joe(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function pB(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class mB extends gm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=lT();n.open("svg",He({},Cp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",gB,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=pr[n.marktype],r=i.tag,a=[lB,i.attr];t.open("g",{class:Kj(n),"clip-path":n.clip?B$(this,n,n.group):null},uB(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const o=l=>{const u=this.href(l);if(u&&t.open("a",u),t.open(r,this.attr(n,l,a,r!=="g"?r:null)),r==="text"){const f=dm(l);if(ae(f)){const d={x:0,dy:Ml(l)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(kl(l,f[g])).close()}else t.text(kl(l,f))}else if(r==="g"){const f=l.strokeForeground,d=l.fill,g=l.stroke;f&&g&&(l.stroke=null),t.open("path",this.attr(n,l,i.background,"bgrect")).close(),t.open("g",this.attr(n,l,i.content)),pa(l,p=>this.mark(t,p)),t.close(),f&&g?(d&&(l.fill=null),l.stroke=g,t.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),d&&(l.fill=d)):t.open("path",this.attr(n,l,i.foreground,"bgfore")).close()}t.close(),u&&t.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):pa(n,o),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},o=(l,u,f,d)=>{a[d||l]=u};return Array.isArray(i)?i.forEach(l=>l(o,n,this)):i(o,n,this),r&&Boe(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const o=n[a],l=o.stops;o.gradient==="radial"?(t.open("pattern",{id:jy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:a,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<l.length;++u)t.open("stop",{offset:l[u].offset,"stop-color":l[u].color}).close();t.close()}for(const a in i){const o=i[a];t.open("clipPath",{id:a}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Boe(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=hm(t),e["font-size"]=co(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Qy){let l=t[o];const u=Qy[o];l==="transparent"&&(u==="fill"||u==="stroke")||l!=null&&(L$(l)&&(l=Cj(l,r.gradient,"")),e[u]=l)}for(const o in Ky){const l=t[o];l!=null&&(a=a||[],a.push(`${Ky[o]}: ${l};`))}return a&&(e.style=a.join(" ")),e}const ta={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Ioe(e){ta.svgMarkTypes=e.svgMarkTypes??["text"],ta.svgOnTop=e.svgOnTop??!0,ta.debug=e.debug??!1}class rA extends gm{constructor(t){super(t),this._svgRenderer=new uT(t),this._canvasRenderer=new Wy(t)}initialize(t,n,i,r,a){this._root_el=hn(t,0,"div");const o=hn(this._root_el,0,"div"),l=hn(this._root_el,1,"div");return this._root_el.style.position="relative",ta.debug||(o.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=ta.svgOnTop?l:o,this._canvasEl=ta.svgOnTop?o:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return ta.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!ta.svgMarkTypes.includes(a));this._svgRenderer.render(t,ta.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return ta.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class yB extends pm{constructor(t,n){super(t,n)}initialize(t,n,i){const r=hn(hn(t,0,"div"),ta.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const vB="canvas",bB="hybrid",xB="png",SB="svg",EB="none",fl={Canvas:vB,PNG:xB,SVG:SB,Hybrid:bB,None:EB},tc={};tc[vB]=tc[xB]={renderer:Wy,headless:Wy,handler:pm};tc[SB]={renderer:uT,headless:mB,handler:rB};tc[bB]={renderer:rA,headless:rA,handler:yB};tc[EB]={};function Yb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(tc[e]=t,this):tc[e]}function _B(e,t,n){const i=[],r=new cn().union(t),a=e.marktype;return a?wB(e,r,n,i):a==="group"?AB(e,r,n,i):te("Intersect scene must be mark node or group item.")}function wB(e,t,n,i){if(Poe(e,t,n)){const r=e.items,a=e.marktype,o=r.length;let l=0;if(a==="group")for(;l<o;++l)AB(r[l],t,n,i);else for(const u=pr[a].isect;l<o;++l){const f=r[l];CB(f,t,u)&&i.push(f)}}return i}function Poe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function AB(e,t,n,i){n&&n(e.mark)&&CB(e,t,pr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const o=e.x||0,l=e.y||0;t.translate(-o,-l);for(let u=0;u<a;++u)wB(r[u],t,n,i);t.translate(o,l)}return i}function CB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const i_=new cn;function $B(e){const t=e.clip;if(Pe(t))t(cm(i_.clear()));else if(t)i_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(i_)}const qoe=1e-9;function cT(e,t,n){return e===t?!0:n==="path"?TB(e,t):e instanceof Date&&t instanceof Date?+e==+t:ut(e)&&ut(t)?Math.abs(e-t)<=qoe:!e||!t||!Se(e)&&!Se(t)?e==t:Hoe(e,t)}function TB(e,t){return cT(dd(e),dd(t))}function Hoe(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!cT(e[r],t[r],r))return!1;return typeof e==typeof t}function Goe(){oae(),gre()}const pd="top",oa="left",sa="right",Dl="bottom",Yoe="top-left",Xoe="top-right",Voe="bottom-left",Woe="bottom-right",fT="start",aA="middle",ci="end",Qoe="x",Koe="y",Xb="group",dT="axis",hT="title",Zoe="frame",Joe="scope",gT="legend",MB="row-header",kB="row-footer",DB="row-title",RB="column-header",NB="column-footer",OB="column-title",ese="padding",tse="symbol",zB="fit",FB="fit-x",LB="fit-y",nse="pad",pT="none",p1="all",oA="each",mT="flush",dl="column",hl="row";function UB(e){ee.call(this,null,e)}ve(UB,ee,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=pr[r],o=a.bound;let l=i.bounds,u;if(a.nested)i.items.length&&n.dirty(i.items[0]),l=m1(i,o),i.items.forEach(f=>{f.bounds.clear().union(l)});else if(r===Xb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),l.clear(),i.items.forEach(f=>l.union(m1(f,o))),i.role){case dT:case gT:case hT:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,f=>{l.union(m1(f,o))}),t.visit(t.MOD,f=>{u=u||l.alignsWith(f.bounds),n.dirty(f),l.union(m1(f,o))}),u&&(l.clear(),i.items.forEach(f=>l.union(f.bounds)));return $B(i),t.modifies("bounds")}});function m1(e,t,n){return t(e.bounds.clear(),e,n)}const h4=":vega_identifier:";function yT(e){ee.call(this,0,e)}yT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ve(yT,ee,{transform(e,t){const n=ise(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function ise(e){return e._signals[h4]||(e._signals[h4]=e.add(0))}function jB(e){ee.call(this,null,e)}ve(jB,ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,rse(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Xb?Ub:Lb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function rse(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function BB(e){ee.call(this,null,e)}const g4={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!IB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},IB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),p4=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(IB(r,a=e[n].bounds,t))return!0},ase=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ose=(e,t,n)=>{var i=e.range(),r=new cn;return t===pd||t===Dl?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},m4=e=>(e.forEach(t=>t.opacity=1),e),y4=(e,t)=>e.reflow(t.modified()).modifies("opacity");ve(BB,ee,{transform(e,t){const n=g4[e.method]||g4.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,o;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(m4(r),t=y4(t,e)),t;if(r=r.filter(ase),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=m4(r),t=y4(t,e),a.length>=3&&p4(a,i)){do a=n(a,i);while(a.length>=3&&p4(a,i));a.length<3&&!rt(r).opacity&&(a.length>1&&(rt(a).opacity=0),rt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=ose(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(u=>{o(u)||(u.opacity=0)}));const l=a[0].mark.bounds.clear();return r.forEach(u=>{u.opacity&&l.union(u.bounds)}),t}});function PB(e){ee.call(this,null,e)}ve(PB,ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Wn=new cn;function Bf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function sse(e){var t=e.items[0].orient;return t===oa||t===sa}function lse(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function use(e,t,n,i){var r=t.items[0],a=r.datum,o=r.translate!=null?r.translate:.5,l=r.orient,u=lse(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[u[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&J$(v),w=0,A=0,$,M;switch(Wn.clear().union(S),S.clear(),($=u[0])>-1&&S.union(r.items[$].bounds),($=u[1])>-1&&S.union(r.items[$].bounds),l){case pd:w=g||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(f,0),v&&y1(e,v,M,b,_,0,-1,S);break;case oa:w=-d,A=g||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,f),v&&y1(e,v,M,b,_,1,-1,S);break;case sa:w=n+d,A=g||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,f),v&&y1(e,v,M,b,_,1,1,S);break;case Dl:w=g||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,M),v&&y1(e,v,M,b,0,0,1,S);break;default:w=r.x,A=r.y}return ys(S.translate(w,A),r),Bf(r,"x",w+o)|Bf(r,"y",A+o)&&(r.bounds=Wn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function y1(e,t,n,i,r,a,o,l){const u=t.bounds;if(t.auto){const f=o*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(u.translate(-d,-g)),e.dirty(t)}l.union(u)}const v4=(e,t)=>Math.floor(Math.min(e,t)),b4=(e,t)=>Math.ceil(Math.max(e,t));function cse(e){var t=e.items,n=t.length,i=0,r,a;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Xb)switch(r.role){case dT:case gT:case hT:break;case MB:o.rowheaders.push(...a);break;case kB:o.rowfooters.push(...a);break;case RB:o.colheaders.push(...a);break;case NB:o.colfooters.push(...a);break;case DB:o.rowtitle=a[0];break;case OB:o.coltitle=a[0];break;default:o.marks.push(...a)}return o}function fse(e){return new cn().set(0,0,e.width||0,e.height||0)}function dse(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ft(e,t,n){const i=Se(e)?e[t]:e;return i??(n!==void 0?n:0)}function x4(e){return e<0?Math.ceil(-e):0}function qB(e,t,n){var i=!n.nodirty,r=n.bounds===mT?fse:dse,a=Wn.set(0,0,0,0),o=Ft(n.align,dl),l=Ft(n.align,hl),u=Ft(n.padding,dl),f=Ft(n.padding,hl),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(g),w=0,A=Array(p),$=Array(p),M=Array(p),k,T,N,z,B,j,K,Y,q,F,R;for(T=0;T<d;++T)v[T]=0;for(T=0;T<g;++T)_[T]=0;for(T=0;T<p;++T)j=t[T],B=M[T]=r(j),j.x=j.x||0,A[T]=0,j.y=j.y||0,$[T]=0,N=T%d,z=~~(T/d),b=Math.max(b,K=Math.ceil(B.x2)),w=Math.max(w,Y=Math.ceil(B.y2)),v[N]=Math.max(v[N],K),_[z]=Math.max(_[z],Y),y[T]=u+x4(B.x1),S[T]=f+x4(B.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(o===oA)for(N=1;N<d;++N){for(R=0,T=N;T<p;T+=d)R<y[T]&&(R=y[T]);for(T=N;T<p;T+=d)y[T]=R+v[N-1]}else if(o===p1){for(R=0,T=0;T<p;++T)T%d&&R<y[T]&&(R=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=R+b)}else for(o=!1,N=1;N<d;++N)for(T=N;T<p;T+=d)y[T]+=v[N-1];if(l===oA)for(z=1;z<g;++z){for(R=0,T=z*d,k=T+d;T<k;++T)R<S[T]&&(R=S[T]);for(T=z*d;T<k;++T)S[T]=R+_[z-1]}else if(l===p1){for(R=0,T=d;T<p;++T)R<S[T]&&(R=S[T]);for(T=d;T<p;++T)S[T]=R+w}else for(l=!1,z=1;z<g;++z)for(T=z*d,k=T+d;T<k;++T)S[T]+=_[z-1];for(q=0,T=0;T<p;++T)q=y[T]+(T%d?q:0),A[T]+=q-t[T].x;for(N=0;N<d;++N)for(F=0,T=N;T<p;T+=d)F+=S[T],$[T]+=F-t[T].y;if(o&&Ft(n.center,dl)&&g>1)for(T=0;T<p;++T)B=o===p1?b:v[T%d],q=B-M[T].x2-t[T].x-A[T],q>0&&(A[T]+=q/2);if(l&&Ft(n.center,hl)&&d!==1)for(T=0;T<p;++T)B=l===p1?w:_[~~(T/d)],F=B-M[T].y2-t[T].y-$[T],F>0&&($[T]+=F/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],$[T]));switch(q=Ft(n.anchor,Qoe),F=Ft(n.anchor,Koe),Ft(n.anchor,dl)){case ci:q-=a.width();break;case aA:q-=a.width()/2}switch(Ft(n.anchor,hl)){case ci:F-=a.height();break;case aA:F-=a.height()/2}for(q=Math.round(q),F=Math.round(F),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)j=t[T],j.x+=A[T]+=q,j.y+=$[T]+=F,a.union(j.mark.bounds.union(j.bounds.translate(A[T],$[T]))),i&&e.dirty(j);return a}function hse(e,t,n){var i=cse(t),r=i.marks,a=n.bounds===mT?gse:pse,o=n.offset,l=n.columns||r.length,u=l<=0?1:Math.ceil(r.length/l),f=u*l,d,g,p,y,v,b,S;const _=qB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Ft(n.headerBand,hl,null),d=v1(e,i.rowheaders,r,l,u,-Ft(o,"rowHeader"),v4,0,a,"x1",0,l,1,b)),i.colheaders&&(b=Ft(n.headerBand,dl,null),g=v1(e,i.colheaders,r,l,l,-Ft(o,"columnHeader"),v4,1,a,"y1",0,1,l,b)),i.rowfooters&&(b=Ft(n.footerBand,hl,null),p=v1(e,i.rowfooters,r,l,u,Ft(o,"rowFooter"),b4,0,a,"x2",l-1,l,1,b)),i.colfooters&&(b=Ft(n.footerBand,dl,null),y=v1(e,i.colfooters,r,l,l,Ft(o,"columnFooter"),b4,1,a,"y2",f-l,1,l,b)),i.rowtitle&&(v=Ft(n.titleAnchor,hl),S=Ft(o,"rowTitle"),S=v===ci?p+S:d-S,b=Ft(n.titleBand,hl,.5),S4(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Ft(n.titleAnchor,dl),S=Ft(o,"columnTitle"),S=v===ci?y+S:g-S,b=Ft(n.titleBand,dl,.5),S4(e,i.coltitle,S,1,_,b))}function gse(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function pse(e,t){return e.bounds[t]}function v1(e,t,n,i,r,a,o,l,u,f,d,g,p,y){var v=n.length,b=0,S=0,_,w,A,$,M,k,T,N,z;if(!v)return b;for(_=d;_<v;_+=g)n[_]&&(b=o(b,u(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,$=t.length;w<$;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,$=t.length;w<$;++w,_+=g){for(k=t[w],M=k.mark.bounds,A=_;A>=0&&(T=n[A])==null;A-=p);l?(N=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),z=b):(N=b,z=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(k.bounds.translate(N-(k.x||0),z-(k.y||0))),k.x=N,k.y=z,e.dirty(k),S=o(S,M[f])}return S}function S4(e,t,n,i,r,a){if(t){e.dirty(t);var o=n,l=n;i?o=Math.round(r.x1+a*r.width()):l=Math.round(r.y1+a*r.height()),t.bounds.translate(o-(t.x||0),l-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=l,e.dirty(t)}}function mse(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function yse(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function vse(e,t,n,i,r,a,o){const l=mse(n,t),u=yse(e,l("offset",0)),f=l("anchor",fT),d=f===ci?1:f===aA?.5:0,g={align:oA,bounds:l("bounds",mT),columns:l("direction")==="vertical"?1:e.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(t){case oa:g.anchor={x:Math.floor(i.x1)-u,column:ci,y:d*(o||i.height()+2*i.y1),row:f};break;case sa:g.anchor={x:Math.ceil(i.x2)+u,y:d*(o||i.height()+2*i.y1),row:f};break;case pd:g.anchor={y:Math.floor(r.y1)-u,row:ci,x:d*(a||r.width()+2*r.x1),column:f};break;case Dl:g.anchor={y:Math.ceil(r.y2)+u,x:d*(a||r.width()+2*r.x1),column:f};break;case Yoe:g.anchor={x:u,y:u};break;case Xoe:g.anchor={x:a-u,y:u,column:ci};break;case Voe:g.anchor={x:u,y:o-u,row:ci};break;case Woe:g.anchor={x:a-u,y:o-u,column:ci,row:ci};break}return g}function bse(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,o=n.x,l=n.y,u,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Sse(e,n,n.items[0].items[0]),a=xse(n,a),u=2*n.padding,f=2*n.padding,a.empty()||(u=Math.ceil(a.width()+u),f=Math.ceil(a.height()+f)),i.type===tse&&Ese(n.items[0].items[0].items[0].items),r!==pT&&(n.x=o=0,n.y=l=0),n.width=u,n.height=f,ys(a.set(o,l,o+u,l+f),n),n.mark.bounds.clear().union(a),n}function xse(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Sse(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&vg(e,n,r,a);else{var o=t.items[1].items[0],l=o.anchor,u=t.titlePadding||0,f=i-o.x,d=i-o.y;switch(o.orient){case oa:r+=Math.ceil(o.bounds.width())+u;break;case sa:case Dl:break;default:a+=o.bounds.height()+u}switch((r||a)&&vg(e,n,r,a),o.orient){case oa:d+=Cf(t,n,o,l,1,1);break;case sa:f+=Cf(t,n,o,ci,0,0)+u,d+=Cf(t,n,o,l,1,1);break;case Dl:f+=Cf(t,n,o,l,0,0),d+=Cf(t,n,o,ci,-1,0,1)+u;break;default:f+=Cf(t,n,o,l,0,0)}(f||d)&&vg(e,o,f,d),(f=Math.round(o.bounds.x1-i))<0&&(vg(e,n,-f,0),vg(e,o,-f,0))}}function Cf(e,t,n,i,r,a,o){const l=e.datum.type!=="symbol",u=n.datum.vgrad,f=l&&(a||!u)&&!o?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=u&&a?d:0,p=u&&a?0:d,y=r<=0?0:J$(n);return Math.round(i===fT?g:i===ci?p-y:.5*(d-y))}function vg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Ese(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function _se(e,t,n,i,r){var a=t.items[0],o=a.frame,l=a.orient,u=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=l===oa||l===sa?i:n,v=0,b=0,S=0,_=0,w=0,A;if(o!==Xb?l===oa?(v=r.y2,y=r.y1):l===sa?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):l===oa&&(v=i,y=0),A=u===fT?v:u===ci?y:(v+y)/2,p&&p.text){switch(l){case pd:case Dl:w=g.bounds.height()+d;break;case oa:_=g.bounds.width()+d;break;case sa:_=-g.bounds.width()-d;break}Wn.clear().union(p.bounds),Wn.translate(_-(p.x||0),w-(p.y||0)),Bf(p,"x",_)|Bf(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Wn),p.mark.bounds.clear().union(Wn),e.dirty(p)),Wn.clear().union(p.bounds)}else Wn.clear();switch(Wn.union(g.bounds),l){case pd:b=A,S=r.y1-Wn.height()-f;break;case oa:b=r.x1-Wn.width()-f,S=A;break;case sa:b=r.x2+Wn.width()+f,S=A;break;case Dl:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return Bf(a,"x",b)|Bf(a,"y",S)&&(Wn.translate(b,S),e.dirty(a),a.bounds.clear().union(Wn),t.bounds.clear().union(Wn),e.dirty(a)),a.bounds}function HB(e){ee.call(this,null,e)}ve(HB,ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&hse(n,i,e.layout),Ase(n,i,e)}),wse(e.mark.group)?t.reflow():t}});function wse(e){return e&&e.mark.role!=="legend-entry"}function Ase(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),o=new cn().set(0,0,r,a),l=o.clone(),u=o.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case dT:y=sse(g)?l:u,y.union(use(e,g,r,a));break;case hT:d=g;break;case gT:f.push(bse(e,g));break;case Zoe:case Joe:case MB:case kB:case DB:case RB:case NB:case OB:l.union(g.bounds),u.union(g.bounds);break;default:o.union(g.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||sa,p!==pT&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];qB(e,w,vse(w,_,n.legends,l,u,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===zB||n.autosize.type===FB||n.autosize.type===LB))switch(_.orient){case oa:case sa:o.add(w.x1,0).add(w.x2,0);break;case pd:case Dl:o.add(0,w.y1).add(0,w.y2)}else o.union(w)})}o.union(l).union(u),d&&o.union(_se(e,d,r,a,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Cse(e,t,o,n)}function Cse(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let o=e._width,l=e._height,u=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-u)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===ese){const v=e.padding();o-=v.left+v.right,l-=v.top+v.bottom}a===pT?(f=0,g=0,u=o,d=l):a===zB?(u=Math.max(0,o-f-p),d=Math.max(0,l-g-y)):a===FB?(u=Math.max(0,o-f-p),l=d+g+y):a===LB?(o=u+f+p,d=Math.max(0,l-g-y)):a===nse&&(o=u+f+p,l=d+g+y),e._resizeView(o,l,u,d,[f,g],r.resize)}const $se=Object.freeze(Object.defineProperty({__proto__:null,bound:UB,identifier:yT,mark:jB,overlap:BB,render:PB,viewlayout:HB},Symbol.toStringTag,{value:"Module"}));function GB(e){ee.call(this,null,e)}ve(GB,ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,l=z$(a,o,e.minstep),u=e.format||bj(n,a,l,e.formatSpecifier,e.formatType,!!e.values),f=e.values?vj(a,e.values,l):F$(a,l);return r&&(i.rem=r),r=f.map((d,g)=>ht({index:g/(f.length-1||1),value:d,label:u(d)})),e.extra&&r.length&&r.push(ht({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function YB(e){ee.call(this,null,e)}function Tse(){return ht({})}function Mse(e){const t=Pd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ve(YB,ee,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Tse,a=e.key||ke,o=this.value;return ae(i.encode)&&(i.encode=null),o&&(e.modified("key")||t.modified(a))&&te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Mse(a)),t.visit(t.ADD,l=>{const u=a(l);let f=o.get(u);f?f.exit?(o.empty--,i.add.push(f)):i.mod.push(f):(f=r(l),o.set(u,f),i.add.push(f)),f.datum=l,f.exit=!1}),t.visit(t.MOD,l=>{const u=a(l),f=o.get(u);f&&(f.datum=l,i.mod.push(f))}),t.visit(t.REM,l=>{const u=a(l),f=o.get(u);l===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function XB(e){ee.call(this,null,e)}ve(XB,ee,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(ae(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var o=a==="enter",l=r.update||Js,u=r.enter||Js,f=r.exit||Js,d=(a&&!o?r[a]:l)||Js;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{u(g,e),l(g,e)}),n.modifies(u.output),n.modifies(l.output),d!==Js&&d!==l&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Js&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),o||d!==Js){const g=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(g,p=>{const y=u(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function VB(e){ee.call(this,[],e)}ve(VB,ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||Q1,o=e.scale,l=+e.limit,u=z$(o,e.count==null?5:e.count,e.minstep),f=!!e.values||a===Q1,d=e.format||_j(n,o,u,a,e.formatSpecifier,e.formatType,f),g=e.values||Ej(o,u),p,y,v,b,S;return r&&(i.rem=r),a===Q1?(l&&g.length>l?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,l-1),S=!0):r=g,Pe(v=e.size)?(!e.values&&o(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ai(b=v||8),r=r.map((_,w)=>ht({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=g[r.length],r.push(ht({index:r.length,label:`${g.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===tre?(p=o.domain(),y=pj(o,p[0],rt(p)),g.length<3&&!e.values&&p[0]!==rt(p)&&(g=[p[0],rt(p)]),r=g.map((_,w)=>ht({index:w,label:d(_,w,g),value:_,perc:y(_)}))):(v=g.length-1,y=dre(o),r=g.map((_,w)=>ht({index:w,label:d(_,w,g),value:_,perc:w?y(_):0,perc2:w===v?1:y(g[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const kse=e=>e.source.x,Dse=e=>e.source.y,Rse=e=>e.target.x,Nse=e=>e.target.y;function vT(e){ee.call(this,{},e)}vT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ve(vT,ee,{transform(e,t){var n=e.sourceX||kse,i=e.sourceY||Dse,r=e.targetX||Rse,a=e.targetY||Nse,o=e.as||"path",l=e.orient||"vertical",u=e.shape||"line",f=E4.get(u+"-"+l)||E4.get(u);return f||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[o]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(o)}});const WB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Ose=(e,t,n,i)=>WB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),QB=(e,t,n,i)=>{var r=n-e,a=i-t,o=Math.hypot(r,a)/2,l=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+l+" 0 1 "+n+","+i},zse=(e,t,n,i)=>QB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),KB=(e,t,n,i)=>{const r=n-e,a=i-t,o=.2*(r+a),l=.2*(a-r);return"M"+e+","+t+"C"+(e+o)+","+(t+l)+" "+(n+l)+","+(i-o)+" "+n+","+i},Fse=(e,t,n,i)=>KB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Lse=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Use=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,jse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),l=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*l+"L"+i*o+","+i*l},Bse=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Ise=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},Pse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),l=Math.sin(n),u=(t+i)/2;return"M"+t*r+","+t*a+"C"+u*r+","+u*a+" "+u*o+","+u*l+" "+i*o+","+i*l},E4=Pd({line:WB,"line-radial":Ose,arc:QB,"arc-radial":zse,curve:KB,"curve-radial":Fse,"orthogonal-horizontal":Lse,"orthogonal-vertical":Use,"orthogonal-radial":jse,"diagonal-horizontal":Bse,"diagonal-vertical":Ise,"diagonal-radial":Pse});function bT(e){ee.call(this,null,e)}bT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ve(bT,ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Ud,o=e.startAngle||0,l=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,f=u.map(a),d=f.length,g=o,p=(l-o)/d9(f),y=ar(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=u[y[v]],b[i]=g,b[r]=g+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const qse=5;function Hse(e){const t=e.type;return!e.bins&&(t===ud||t===im||t===rm)}function ZB(e){return R$(e)&&e!==Xa}const Gse=ha(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function JB(e){ee.call(this,null,e),this.modified(!0)}ve(JB,ee,{transform(e,t){var n=t.dataflow,i=this.value,r=Yse(e);(!i||r!==i.type)&&(this.value=i=ft(r)());for(r in e)if(!Gse[r]){if(r==="padding"&&ZB(i.type))continue;Pe(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Zse(i,e,Kse(i,e,Vse(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Yse(e){var t=e.type,n="",i;return t===Xa?Xa+"-"+ud:(Xse(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Xa+"-":i===3?Qd+"-":""),(n+t||ud).toLowerCase())}function Xse(e){const t=e.type;return R$(t)&&t!==Ju&&t!==ec&&(e.scheme||e.range&&e.range.length&&e.range.every(Ee))}function Vse(e,t,n){const i=Wse(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,o=t.zero||t.zero===void 0&&Hse(e),l,u;if(!r)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(l=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[l]<0&&(r[l]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[l]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const f=u>r[l]?l+1:u<r[0]?0:l;f!==l&&n.warn("Scale domainMid exceeds domain min or max.",u),r.splice(f,0,u)}return ZB(a)&&t.padding&&r[0]!==rt(r)&&(r=Qse(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(eI(a,r,n)),a===T$&&e.unknown(t.domainImplicit?jw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&z$(e,t.nice)||null),r.length}function Wse(e,t,n){return t?(e.domain(eI(e.type,t,n)),t.length):-1}function Qse(e,t,n,i,r,a){var o=Math.abs(rt(n)-n[0]),l=o/(o-2*i),u=e===fs?WC(t,null,l):e===rm?Sy(t,null,l,.5):e===im?Sy(t,null,l,r||1):e===Rb?QC(t,null,l,a||1):VC(t,null,l);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function eI(e,t,n){if(cj(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+pe(t))}return t}function Kse(e,t,n){let i=t.bins;if(i&&!ae(i)){const r=e.domain(),a=r[0],o=rt(r),l=i.step;let u=i.start==null?a:i.start,f=i.stop==null?o:i.stop;l||te("Scale bins parameter missing step property."),u<a&&(u=l*Math.ceil(a/l)),f>o&&(f=l*Math.floor(o/l)),i=ar(u,f+l/2,l)}return i?e.bins=i:e.bins&&delete e.bins,e.type===M$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Zse(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Jse(i,t,n);else if(t.scheme&&(a=ele(i,t,n),Pe(a))){if(e.interpolator)return e.interpolator(a);te(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&fj(i))return e.interpolator(zb(sA(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(N$(t.interpolate,t.interpolateGamma)):Pe(e.round)?e.round(r):Pe(e.rangeRound)&&e.interpolate(r?tm:Il),a&&e.range(sA(a,t.reverse))}function Jse(e,t,n){e!==rj&&e!==Yw&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===Yw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$$(n,r,i)]}function ele(e,t,n){var i=t.schemeExtent,r,a;return ae(t.scheme)?a=zb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=O$(r),a||te(`Unrecognized scheme name: ${t.scheme}`)),n=e===Ob?n+1:e===M$?n-1:e===cd||e===Nb?+t.schemeCount||qse:n,fj(e)?_4(a,i,t.reverse):Pe(a)?gj(_4(a,i),n):e===T$?a:a.slice(0,n)}function _4(e,t,n){return Pe(e)&&(t||n)?hj(e,sA(t||[0,1],n)):e}function sA(e,t){return t?e.slice().reverse():e}function tI(e){ee.call(this,null,e)}ve(tI,ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ec(e.sort)),this.modified(n),t}});const w4="zero",nI="center",iI="normalize",rI=["y0","y1"];function xT(e){ee.call(this,null,e)}xT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:w4,values:[w4,nI,iI]},{name:"as",type:"string",array:!0,length:2,default:rI}]};ve(xT,ee,{transform(e,t){var n=e.as||rI,i=n[0],r=n[1],a=Ec(e.sort),o=e.field||Ud,l=e.offset===nI?tle:e.offset===iI?nle:ile,u,f,d,g;for(u=rle(t.source,e.groupby,a,o),f=0,d=u.length,g=u.max;f<d;++f)l(u[f],g,o,i,r);return t.reflow(e.modified()).modifies(n)}});function tle(e,t,n,i,r){for(var a=(t-e.sum)/2,o=e.length,l=0,u;l<o;++l)u=e[l],u[i]=a,u[r]=a+=Math.abs(n(u))}function nle(e,t,n,i,r){for(var a=1/e.sum,o=0,l=e.length,u=0,f=0,d;u<l;++u)d=e[u],d[i]=o,d[r]=o=a*(f+=Math.abs(n(d)))}function ile(e,t,n,i,r){for(var a=0,o=0,l=e.length,u=0,f,d;u<l;++u)d=e[u],f=+n(d),f<0?(d[i]=o,d[r]=o+=f):(d[i]=a,d[r]=a+=f)}function rle(e,t,n,i){var r=[],a=b=>b(d),o,l,u,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(o={},l=0,u=e.length;l<u;++l)d=e[l],g=t.map(a),p=o[g],p||(o[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],l=0,y=0,u=p.length;l<u;++l)y+=Math.abs(i(p[l]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const ale=Object.freeze(Object.defineProperty({__proto__:null,axisticks:GB,datajoin:YB,encode:XB,legendentries:VB,linkpath:vT,pie:bT,scale:JB,sortitems:tI,stack:xT},Symbol.toStringTag,{value:"Module"}));var Oe=1e-6,Zy=1e-12,Ve=Math.PI,Vt=Ve/2,Jy=Ve/4,bi=Ve*2,Zt=180/Ve,Ye=Ve/180,it=Math.abs,Zd=Math.atan,Ir=Math.atan2,ze=Math.cos,b1=Math.ceil,aI=Math.exp,lA=Math.hypot,ev=Math.log,r_=Math.pow,De=Math.sin,Rr=Math.sign||function(e){return e>0?1:e<0?-1:0},xi=Math.sqrt,ST=Math.tan;function oI(e){return e>1?0:e<-1?Ve:Math.acos(e)}function ji(e){return e>1?Vt:e<-1?-Vt:Math.asin(e)}function Bn(){}function tv(e,t){e&&C4.hasOwnProperty(e.type)&&C4[e.type](e,t)}var A4={Feature:function(e,t){tv(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)tv(n[i].geometry,t)}},C4={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){uA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)uA(n[i],t,0)},Polygon:function(e,t){$4(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)$4(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)tv(n[i],t)}};function uA(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function $4(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)uA(e[n],t,1);t.polygonEnd()}function Yo(e,t){e&&A4.hasOwnProperty(e.type)?A4[e.type](e,t):tv(e,t)}var nv=new yi,iv=new yi,sI,lI,cA,fA,dA,to={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){nv=new yi,to.lineStart=ole,to.lineEnd=sle},polygonEnd:function(){var e=+nv;iv.add(e<0?bi+e:e),this.lineStart=this.lineEnd=this.point=Bn},sphere:function(){iv.add(bi)}};function ole(){to.point=lle}function sle(){uI(sI,lI)}function lle(e,t){to.point=uI,sI=e,lI=t,e*=Ye,t*=Ye,cA=e,fA=ze(t=t/2+Jy),dA=De(t)}function uI(e,t){e*=Ye,t*=Ye,t=t/2+Jy;var n=e-cA,i=n>=0?1:-1,r=i*n,a=ze(t),o=De(t),l=dA*o,u=fA*a+l*ze(r),f=l*i*De(r);nv.add(Ir(f,u)),cA=e,fA=a,dA=o}function ule(e){return iv=new yi,Yo(e,to),iv*2}function rv(e){return[Ir(e[1],e[0]),ji(e[2])]}function nc(e){var t=e[0],n=e[1],i=ze(n);return[i*ze(t),i*De(t),De(n)]}function x1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function md(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function a_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function S1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function av(e){var t=xi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bt,Ni,Yt,ir,Mu,cI,fI,Vf,rp,rl,ds,Ho={point:hA,lineStart:T4,lineEnd:M4,polygonStart:function(){Ho.point=hI,Ho.lineStart=cle,Ho.lineEnd=fle,rp=new yi,to.polygonStart()},polygonEnd:function(){to.polygonEnd(),Ho.point=hA,Ho.lineStart=T4,Ho.lineEnd=M4,nv<0?(Bt=-(Yt=180),Ni=-(ir=90)):rp>Oe?ir=90:rp<-Oe&&(Ni=-90),ds[0]=Bt,ds[1]=Yt},sphere:function(){Bt=-(Yt=180),Ni=-(ir=90)}};function hA(e,t){rl.push(ds=[Bt=e,Yt=e]),t<Ni&&(Ni=t),t>ir&&(ir=t)}function dI(e,t){var n=nc([e*Ye,t*Ye]);if(Vf){var i=md(Vf,n),r=[i[1],-i[0],0],a=md(r,i);av(a),a=rv(a);var o=e-Mu,l=o>0?1:-1,u=a[0]*Zt*l,f,d=it(o)>180;d^(l*Mu<u&&u<l*e)?(f=a[1]*Zt,f>ir&&(ir=f)):(u=(u+360)%360-180,d^(l*Mu<u&&u<l*e)?(f=-a[1]*Zt,f<Ni&&(Ni=f)):(t<Ni&&(Ni=t),t>ir&&(ir=t))),d?e<Mu?nr(Bt,e)>nr(Bt,Yt)&&(Yt=e):nr(e,Yt)>nr(Bt,Yt)&&(Bt=e):Yt>=Bt?(e<Bt&&(Bt=e),e>Yt&&(Yt=e)):e>Mu?nr(Bt,e)>nr(Bt,Yt)&&(Yt=e):nr(e,Yt)>nr(Bt,Yt)&&(Bt=e)}else rl.push(ds=[Bt=e,Yt=e]);t<Ni&&(Ni=t),t>ir&&(ir=t),Vf=n,Mu=e}function T4(){Ho.point=dI}function M4(){ds[0]=Bt,ds[1]=Yt,Ho.point=hA,Vf=null}function hI(e,t){if(Vf){var n=e-Mu;rp.add(it(n)>180?n+(n>0?360:-360):n)}else cI=e,fI=t;to.point(e,t),dI(e,t)}function cle(){to.lineStart()}function fle(){hI(cI,fI),to.lineEnd(),it(rp)>Oe&&(Bt=-(Yt=180)),ds[0]=Bt,ds[1]=Yt,Vf=null}function nr(e,t){return(t-=e)<0?t+360:t}function dle(e,t){return e[0]-t[0]}function k4(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function hle(e){var t,n,i,r,a,o,l;if(ir=Yt=-(Bt=Ni=1/0),rl=[],Yo(e,Ho),n=rl.length){for(rl.sort(dle),t=1,i=rl[0],a=[i];t<n;++t)r=rl[t],k4(i,r[0])||k4(i,r[1])?(nr(i[0],r[1])>nr(i[0],i[1])&&(i[1]=r[1]),nr(r[0],i[1])>nr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(l=nr(i[1],r[0]))>o&&(o=l,Bt=r[0],Yt=i[1])}return rl=ds=null,Bt===1/0||Ni===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bt,Ni],[Yt,ir]]}var Ig,ov,sv,lv,uv,cv,fv,dv,gA,pA,mA,gI,pI,fi,di,hi,la={sphere:Bn,point:ET,lineStart:D4,lineEnd:R4,polygonStart:function(){la.lineStart=mle,la.lineEnd=yle},polygonEnd:function(){la.lineStart=D4,la.lineEnd=R4}};function ET(e,t){e*=Ye,t*=Ye;var n=ze(t);mm(n*ze(e),n*De(e),De(t))}function mm(e,t,n){++Ig,sv+=(e-sv)/Ig,lv+=(t-lv)/Ig,uv+=(n-uv)/Ig}function D4(){la.point=gle}function gle(e,t){e*=Ye,t*=Ye;var n=ze(t);fi=n*ze(e),di=n*De(e),hi=De(t),la.point=ple,mm(fi,di,hi)}function ple(e,t){e*=Ye,t*=Ye;var n=ze(t),i=n*ze(e),r=n*De(e),a=De(t),o=Ir(xi((o=di*a-hi*r)*o+(o=hi*i-fi*a)*o+(o=fi*r-di*i)*o),fi*i+di*r+hi*a);ov+=o,cv+=o*(fi+(fi=i)),fv+=o*(di+(di=r)),dv+=o*(hi+(hi=a)),mm(fi,di,hi)}function R4(){la.point=ET}function mle(){la.point=vle}function yle(){mI(gI,pI),la.point=ET}function vle(e,t){gI=e,pI=t,e*=Ye,t*=Ye,la.point=mI;var n=ze(t);fi=n*ze(e),di=n*De(e),hi=De(t),mm(fi,di,hi)}function mI(e,t){e*=Ye,t*=Ye;var n=ze(t),i=n*ze(e),r=n*De(e),a=De(t),o=di*a-hi*r,l=hi*i-fi*a,u=fi*r-di*i,f=lA(o,l,u),d=ji(f),g=f&&-d/f;gA.add(g*o),pA.add(g*l),mA.add(g*u),ov+=d,cv+=d*(fi+(fi=i)),fv+=d*(di+(di=r)),dv+=d*(hi+(hi=a)),mm(fi,di,hi)}function ble(e){Ig=ov=sv=lv=uv=cv=fv=dv=0,gA=new yi,pA=new yi,mA=new yi,Yo(e,la);var t=+gA,n=+pA,i=+mA,r=lA(t,n,i);return r<Zy&&(t=cv,n=fv,i=dv,ov<Oe&&(t=sv,n=lv,i=uv),r=lA(t,n,i),r<Zy)?[NaN,NaN]:[Ir(n,t)*Zt,ji(i/r)*Zt]}function yA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function vA(e,t){return it(e)>Ve&&(e-=Math.round(e/bi)*bi),[e,t]}vA.invert=vA;function yI(e,t,n){return(e%=bi)?t||n?yA(O4(e),z4(t,n)):O4(e):t||n?z4(t,n):vA}function N4(e){return function(t,n){return t+=e,it(t)>Ve&&(t-=Math.round(t/bi)*bi),[t,n]}}function O4(e){var t=N4(e);return t.invert=N4(-e),t}function z4(e,t){var n=ze(e),i=De(e),r=ze(t),a=De(t);function o(l,u){var f=ze(u),d=ze(l)*f,g=De(l)*f,p=De(u),y=p*n+d*i;return[Ir(g*r-y*a,d*n-p*i),ji(y*r+g*a)]}return o.invert=function(l,u){var f=ze(u),d=ze(l)*f,g=De(l)*f,p=De(u),y=p*r-g*a;return[Ir(g*r+p*a,d*n+y*i),ji(y*n-d*i)]},o}function xle(e){e=yI(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n},t}function Sle(e,t,n,i,r,a){if(n){var o=ze(t),l=De(t),u=i*n;r==null?(r=t+i*bi,a=t-u/2):(r=F4(o,r),a=F4(o,a),(i>0?r<a:r>a)&&(r+=i*bi));for(var f,d=r;i>0?d>a:d<a;d-=u)f=rv([o,-l*ze(d),-l*De(d)]),e.point(f[0],f[1])}}function F4(e,t){t=nc(t),t[0]-=e,av(t);var n=oI(-t[1]);return((-t[2]<0?-n:n)+bi-Oe)%bi}function vI(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Bn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ay(e,t){return it(e[0]-t[0])<Oe&&it(e[1]-t[1])<Oe}function E1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function bI(e,t,n,i,r){var a=[],o=[],l,u;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(ay(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),l=0;l<b;++l)r.point((S=v[l])[0],S[1]);r.lineEnd();return}_[0]+=2*Oe}a.push(w=new E1(S,v,null,!0)),o.push(w.o=new E1(S,null,w,!1)),a.push(w=new E1(_,v,null,!1)),o.push(w.o=new E1(_,null,w,!0))}}),!!a.length){for(o.sort(t),L4(a),L4(o),l=0,u=o.length;l<u;++l)o[l].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(l=0,u=d.length;l<u;++l)r.point((g=d[l])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,l=d.length-1;l>=0;--l)r.point((g=d[l])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function L4(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function o_(e){return it(e[0])<=Ve?e[0]:Rr(e[0])*((it(e[0])+Ve)%bi-Ve)}function Ele(e,t){var n=o_(t),i=t[1],r=De(i),a=[De(n),-ze(n),0],o=0,l=0,u=new yi;r===1?i=Vt+Oe:r===-1&&(i=-Vt-Oe);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=o_(y),b=y[1]/2+Jy,S=De(b),_=ze(b),w=0;w<p;++w,v=$,S=k,_=T,y=A){var A=g[w],$=o_(A),M=A[1]/2+Jy,k=De(M),T=ze(M),N=$-v,z=N>=0?1:-1,B=z*N,j=B>Ve,K=S*k;if(u.add(Ir(K*z*De(B),_*T+K*ze(B))),o+=j?N+z*bi:N,j^v>=n^$>=n){var Y=md(nc(y),nc(A));av(Y);var q=md(a,Y);av(q);var F=(j^N>=0?-1:1)*ji(q[2]);(i>F||i===F&&(Y[0]||Y[1]))&&(l+=j^N>=0?1:-1)}}return(o<-Oe||o<Oe&&u<-Zy)^l&1}function xI(e,t,n,i){return function(r){var a=t(r),o=vI(),l=t(o),u=!1,f,d,g,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=f9(d);var $=Ele(f,i);d.length?(u||(r.polygonStart(),u=!0),bI(d,wle,$,n,r)):$&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,M){e($,M)&&r.point($,M)}function v($,M){a.point($,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _($,M){g.push([$,M]),l.point($,M)}function w(){l.lineStart(),g=[]}function A(){_(g[0][0],g[0][1]),l.lineEnd();var $=l.clean(),M=o.result(),k,T=M.length,N,z,B;if(g.pop(),f.push(g),g=null,!!T){if($&1){if(z=M[0],(N=z.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),k=0;k<N;++k)r.point((B=z[k])[0],B[1]);r.lineEnd()}return}T>1&&$&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(_le))}}return p}}function _le(e){return e.length>1}function wle(e,t){return((e=e.x)[0]<0?e[1]-Vt-Oe:Vt-e[1])-((t=t.x)[0]<0?t[1]-Vt-Oe:Vt-t[1])}const U4=xI(function(){return!0},Ale,$le,[-Ve,-Vt]);function Ale(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,o){var l=a>0?Ve:-Ve,u=it(a-t);it(u-Ve)<Oe?(e.point(t,n=(n+o)/2>0?Vt:-Vt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),r=0):i!==l&&u>=Ve&&(it(t-i)<Oe&&(t-=i*Oe),it(a-l)<Oe&&(a-=l*Oe),n=Cle(t,n,a,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),r=0),e.point(t=a,n=o),i=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Cle(e,t,n,i){var r,a,o=De(e-n);return it(o)>Oe?Zd((De(t)*(a=ze(i))*De(n)-De(i)*(r=ze(t))*De(e))/(r*a*o)):(t+i)/2}function $le(e,t,n,i){var r;if(e==null)r=n*Vt,i.point(-Ve,r),i.point(0,r),i.point(Ve,r),i.point(Ve,0),i.point(Ve,-r),i.point(0,-r),i.point(-Ve,-r),i.point(-Ve,0),i.point(-Ve,r);else if(it(e[0]-t[0])>Oe){var a=e[0]<t[0]?Ve:-Ve;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Tle(e){var t=ze(e),n=2*Ye,i=t>0,r=it(t)>Oe;function a(d,g,p,y){Sle(y,e,n,p,d,g)}function o(d,g){return ze(d)*ze(g)>t}function l(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,$=o(S,_),M=i?$?0:f(S,_):$?f(S+(S<0?Ve:-Ve),_):0;if(!g&&(v=y=$)&&d.lineStart(),$!==y&&(A=u(g,w),(!A||ay(g,A)||ay(w,A))&&(w[2]=1)),$!==y)b=0,$?(d.lineStart(),A=u(w,g),d.point(A[0],A[1])):(A=u(g,w),d.point(A[0],A[1],2),d.lineEnd()),g=A;else if(r&&g&&i^$){var k;!(M&p)&&(k=u(w,g,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}$&&(!g||!ay(g,w))&&d.point(w[0],w[1]),g=w,y=$,p=M},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function u(d,g,p){var y=nc(d),v=nc(g),b=[1,0,0],S=md(y,v),_=x1(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var $=t*_/A,M=-t*w/A,k=md(b,S),T=S1(b,$),N=S1(S,M);a_(T,N);var z=k,B=x1(T,z),j=x1(z,z),K=B*B-j*(x1(T,T)-1);if(!(K<0)){var Y=xi(K),q=S1(z,(-B-Y)/j);if(a_(q,T),q=rv(q),!p)return q;var F=d[0],R=g[0],I=d[1],X=g[1],Z;R<F&&(Z=F,F=R,R=Z);var ce=R-F,L=it(ce-Ve)<Oe,G=L||ce<Oe;if(!L&&X<I&&(Z=I,I=X,X=Z),G?L?I+X>0^q[1]<(it(q[0]-F)<Oe?I:X):I<=q[1]&&q[1]<=X:ce>Ve^(F<=q[0]&&q[0]<=R)){var se=S1(z,(-B+Y)/j);return a_(se,T),[q,rv(se)]}}}function f(d,g){var p=i?e:Ve-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return xI(o,l,a,i?[0,-e]:[-Ve,e-Ve])}function Mle(e,t,n,i,r,a){var o=e[0],l=e[1],u=t[0],f=t[1],d=0,g=1,p=u-o,y=f-l,v;if(v=n-o,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-o,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-l,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-l,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=o+d*p,e[1]=l+d*y),g<1&&(t[0]=o+g*p,t[1]=l+g*y),!0}}}}}var Pg=1e9,_1=-Pg;function SI(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=o(f,g))!==(v=o(d,g))||u(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function o(f,d){return it(f[0]-e)<Oe?d>0?0:3:it(f[0]-n)<Oe?d>0?2:1:it(f[1]-t)<Oe?d>0?1:0:d>0?3:2}function l(f,d){return u(f.x,d.x)}function u(f,d){var g=o(f,1),p=o(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=vI(),p,y,v,b,S,_,w,A,$,M,k,T={point:N,lineStart:K,lineEnd:Y,polygonStart:B,polygonEnd:j};function N(F,R){r(F,R)&&d.point(F,R)}function z(){for(var F=0,R=0,I=y.length;R<I;++R)for(var X=y[R],Z=1,ce=X.length,L=X[0],G,se,me=L[0],be=L[1];Z<ce;++Z)G=me,se=be,L=X[Z],me=L[0],be=L[1],se<=i?be>i&&(me-G)*(i-se)>(be-se)*(e-G)&&++F:be<=i&&(me-G)*(i-se)<(be-se)*(e-G)&&--F;return F}function B(){d=g,p=[],y=[],k=!0}function j(){var F=z(),R=k&&F,I=(p=f9(p)).length;(R||I)&&(f.polygonStart(),R&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),I&&bI(p,l,F,a,f),f.polygonEnd()),d=f,p=y=v=null}function K(){T.point=q,y&&y.push(v=[]),M=!0,$=!1,w=A=NaN}function Y(){p&&(q(b,S),_&&$&&g.rejoin(),p.push(g.result())),T.point=N,$&&d.lineEnd()}function q(F,R){var I=r(F,R);if(y&&v.push([F,R]),M)b=F,S=R,_=I,M=!1,I&&(d.lineStart(),d.point(F,R));else if(I&&$)d.point(F,R);else{var X=[w=Math.max(_1,Math.min(Pg,w)),A=Math.max(_1,Math.min(Pg,A))],Z=[F=Math.max(_1,Math.min(Pg,F)),R=Math.max(_1,Math.min(Pg,R))];Mle(X,Z,e,t,n,i)?($||(d.lineStart(),d.point(X[0],X[1])),d.point(Z[0],Z[1]),I||d.lineEnd(),k=!1):I&&(d.lineStart(),d.point(F,R),k=!1)}w=F,A=R,$=I}return T}}function j4(e,t,n){var i=ar(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function B4(e,t,n){var i=ar(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function kle(){var e,t,n,i,r,a,o,l,u=10,f=u,d=90,g=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return ar(b1(i/d)*d,n,d).map(v).concat(ar(b1(l/g)*g,o,g).map(b)).concat(ar(b1(t/u)*u,e,u).filter(function(A){return it(A%d)>Oe}).map(p)).concat(ar(b1(a/f)*f,r,f).filter(function(A){return it(A%g)>Oe}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(o).slice(1),v(n).reverse().slice(1),b(l).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],l=+A[0][1],o=+A[1][1],i>n&&(A=i,i=n,n=A),l>o&&(A=l,l=o,o=A),_.precision(S)):[[i,l],[n,o]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],g=+A[1],_):[d,g]},_.stepMinor=function(A){return arguments.length?(u=+A[0],f=+A[1],_):[u,f]},_.precision=function(A){return arguments.length?(S=+A,p=j4(a,r,90),y=B4(t,e,S),v=j4(l,o,90),b=B4(i,n,S),_):S},_.extentMajor([[-180,-90+Oe],[180,90-Oe]]).extentMinor([[-180,-80-Oe],[180,80+Oe]])}const $p=e=>e;var s_=new yi,bA=new yi,EI,_I,xA,SA,Xo={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){Xo.lineStart=Dle,Xo.lineEnd=Nle},polygonEnd:function(){Xo.lineStart=Xo.lineEnd=Xo.point=Bn,s_.add(it(bA)),bA=new yi},result:function(){var e=s_/2;return s_=new yi,e}};function Dle(){Xo.point=Rle}function Rle(e,t){Xo.point=wI,EI=xA=e,_I=SA=t}function wI(e,t){bA.add(SA*e-xA*t),xA=e,SA=t}function Nle(){wI(EI,_I)}var yd=1/0,hv=yd,Tp=-yd,gv=Tp,pv={point:Ole,lineStart:Bn,lineEnd:Bn,polygonStart:Bn,polygonEnd:Bn,result:function(){var e=[[yd,hv],[Tp,gv]];return Tp=gv=-(hv=yd=1/0),e}};function Ole(e,t){e<yd&&(yd=e),e>Tp&&(Tp=e),t<hv&&(hv=t),t>gv&&(gv=t)}var EA=0,_A=0,qg=0,mv=0,yv=0,If=0,wA=0,AA=0,Hg=0,AI,CI,Ia,Pa,kr={point:ic,lineStart:I4,lineEnd:P4,polygonStart:function(){kr.lineStart=Lle,kr.lineEnd=Ule},polygonEnd:function(){kr.point=ic,kr.lineStart=I4,kr.lineEnd=P4},result:function(){var e=Hg?[wA/Hg,AA/Hg]:If?[mv/If,yv/If]:qg?[EA/qg,_A/qg]:[NaN,NaN];return EA=_A=qg=mv=yv=If=wA=AA=Hg=0,e}};function ic(e,t){EA+=e,_A+=t,++qg}function I4(){kr.point=zle}function zle(e,t){kr.point=Fle,ic(Ia=e,Pa=t)}function Fle(e,t){var n=e-Ia,i=t-Pa,r=xi(n*n+i*i);mv+=r*(Ia+e)/2,yv+=r*(Pa+t)/2,If+=r,ic(Ia=e,Pa=t)}function P4(){kr.point=ic}function Lle(){kr.point=jle}function Ule(){$I(AI,CI)}function jle(e,t){kr.point=$I,ic(AI=Ia=e,CI=Pa=t)}function $I(e,t){var n=e-Ia,i=t-Pa,r=xi(n*n+i*i);mv+=r*(Ia+e)/2,yv+=r*(Pa+t)/2,If+=r,r=Pa*e-Ia*t,wA+=r*(Ia+e),AA+=r*(Pa+t),Hg+=r*3,ic(Ia=e,Pa=t)}function TI(e){this._context=e}TI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,bi);break}}},result:Bn};var CA=new yi,l_,MI,kI,Gg,Yg,Mp={point:Bn,lineStart:function(){Mp.point=Ble},lineEnd:function(){l_&&DI(MI,kI),Mp.point=Bn},polygonStart:function(){l_=!0},polygonEnd:function(){l_=null},result:function(){var e=+CA;return CA=new yi,e}};function Ble(e,t){Mp.point=DI,MI=Gg=e,kI=Yg=t}function DI(e,t){Gg-=e,Yg-=t,CA.add(xi(Gg*Gg+Yg*Yg)),Gg=e,Yg=t}let q4,vv,H4,G4;class Y4{constructor(t){this._append=t==null?RI:Ile(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==H4||this._append!==vv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,H4=i,vv=this._append,G4=this._,this._=r}this._+=G4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function RI(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ile(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return RI;if(t!==q4){const n=10**t;q4=t,vv=function(r){let a=1;this._+=r[0];for(const o=r.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return vv}function NI(e,t){let n=3,i=4.5,r,a;function o(l){return l&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Yo(l,r(a))),a.result()}return o.area=function(l){return Yo(l,r(Xo)),Xo.result()},o.measure=function(l){return Yo(l,r(Mp)),Mp.result()},o.bounds=function(l){return Yo(l,r(pv)),pv.result()},o.centroid=function(l){return Yo(l,r(kr)),kr.result()},o.projection=function(l){return arguments.length?(r=l==null?(e=null,$p):(e=l).stream,o):e},o.context=function(l){return arguments.length?(a=l==null?(t=null,new Y4(n)):new TI(t=l),typeof i!="function"&&a.pointRadius(i),o):t},o.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(a.pointRadius(+l),+l),o):i},o.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const u=Math.floor(l);if(!(u>=0))throw new RangeError(`invalid digits: ${l}`);n=u}return t===null&&(a=new Y4(n)),o},o.projection(e).digits(n).context(t)}function Vb(e){return function(t){var n=new $A;for(var i in e)n[i]=e[i];return n.stream=t,n}}function $A(){}$A.prototype={constructor:$A,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _T(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Yo(n,e.stream(pv)),t(pv.result()),i!=null&&e.clipExtent(i),e}function Wb(e,t,n){return _T(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(a-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([l,u])},n)}function wT(e,t,n){return Wb(e,[[0,0],t],n)}function AT(e,t,n){return _T(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),o=(r-a*(i[1][0]+i[0][0]))/2,l=-a*i[0][1];e.scale(150*a).translate([o,l])},n)}function CT(e,t,n){return _T(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),o=-a*i[0][0],l=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([o,l])},n)}var X4=16,Ple=ze(30*Ye);function V4(e,t){return+t?Hle(e,t):qle(e)}function qle(e){return Vb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Hle(e,t){function n(i,r,a,o,l,u,f,d,g,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var $=o+p,M=l+y,k=u+v,T=xi($*$+M*M+k*k),N=ji(k/=T),z=it(it(k)-1)<Oe||it(a-g)<Oe?(a+g)/2:Ir(M,$),B=e(z,N),j=B[0],K=B[1],Y=j-i,q=K-r,F=w*Y-_*q;(F*F/A>t||it((_*Y+w*q)/A-.5)>.3||o*p+l*y+u*v<Ple)&&(n(i,r,a,o,l,u,j,K,z,$/=T,M/=T,k,b,S),S.point(j,K),n(j,K,z,$,M,k,f,d,g,p,y,v,b,S))}}return function(i){var r,a,o,l,u,f,d,g,p,y,v,b,S={point:_,lineStart:w,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(N,z){N=e(N,z),i.point(N[0],N[1])}function w(){g=NaN,S.point=A,i.lineStart()}function A(N,z){var B=nc([N,z]),j=e(N,z);n(g,p,d,y,v,b,g=j[0],p=j[1],d=N,y=B[0],v=B[1],b=B[2],X4,i),i.point(g,p)}function $(){S.point=_,i.lineEnd()}function M(){w(),S.point=k,S.lineEnd=T}function k(N,z){A(r=N,z),a=g,o=p,l=y,u=v,f=b,S.point=A}function T(){n(g,p,d,y,v,b,a,o,r,l,u,f,X4,i),S.lineEnd=$,$()}return S}}var Gle=Vb({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function Yle(e){return Vb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Xle(e,t,n,i,r){function a(o,l){return o*=i,l*=r,[t+e*o,n-e*l]}return a.invert=function(o,l){return[(o-t)/e*i,(n-l)/e*r]},a}function W4(e,t,n,i,r,a){if(!a)return Xle(e,t,n,i,r);var o=ze(a),l=De(a),u=o*e,f=l*e,d=o/e,g=l/e,p=(l*n-o*t)/e,y=(l*t+o*n)/e;function v(b,S){return b*=i,S*=r,[u*b-f*S+t,n-f*b-u*S]}return v.invert=function(b,S){return[i*(d*b-g*S+p),r*(y-g*b-d*S)]},v}function fo(e){return OI(function(){return e})()}function OI(e){var t,n=150,i=480,r=250,a=0,o=0,l=0,u=0,f=0,d,g=0,p=1,y=1,v=null,b=U4,S=null,_,w,A,$=$p,M=.5,k,T,N,z,B;function j(F){return N(F[0]*Ye,F[1]*Ye)}function K(F){return F=N.invert(F[0],F[1]),F&&[F[0]*Zt,F[1]*Zt]}j.stream=function(F){return z&&B===F?z:z=Gle(Yle(d)(b(k($(B=F)))))},j.preclip=function(F){return arguments.length?(b=F,v=void 0,q()):b},j.postclip=function(F){return arguments.length?($=F,S=_=w=A=null,q()):$},j.clipAngle=function(F){return arguments.length?(b=+F?Tle(v=F*Ye):(v=null,U4),q()):v*Zt},j.clipExtent=function(F){return arguments.length?($=F==null?(S=_=w=A=null,$p):SI(S=+F[0][0],_=+F[0][1],w=+F[1][0],A=+F[1][1]),q()):S==null?null:[[S,_],[w,A]]},j.scale=function(F){return arguments.length?(n=+F,Y()):n},j.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],Y()):[i,r]},j.center=function(F){return arguments.length?(a=F[0]%360*Ye,o=F[1]%360*Ye,Y()):[a*Zt,o*Zt]},j.rotate=function(F){return arguments.length?(l=F[0]%360*Ye,u=F[1]%360*Ye,f=F.length>2?F[2]%360*Ye:0,Y()):[l*Zt,u*Zt,f*Zt]},j.angle=function(F){return arguments.length?(g=F%360*Ye,Y()):g*Zt},j.reflectX=function(F){return arguments.length?(p=F?-1:1,Y()):p<0},j.reflectY=function(F){return arguments.length?(y=F?-1:1,Y()):y<0},j.precision=function(F){return arguments.length?(k=V4(T,M=F*F),q()):xi(M)},j.fitExtent=function(F,R){return Wb(j,F,R)},j.fitSize=function(F,R){return wT(j,F,R)},j.fitWidth=function(F,R){return AT(j,F,R)},j.fitHeight=function(F,R){return CT(j,F,R)};function Y(){var F=W4(n,0,0,p,y,g).apply(null,t(a,o)),R=W4(n,i-F[0],r-F[1],p,y,g);return d=yI(l,u,f),T=yA(t,R),N=yA(d,T),k=V4(T,M),q()}function q(){return z=B=null,j}return function(){return t=e.apply(this,arguments),j.invert=t.invert&&K,Y()}}function $T(e){var t=0,n=Ve/3,i=OI(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ye,n=a[1]*Ye):[t*Zt,n*Zt]},r}function Vle(e){var t=ze(e);function n(i,r){return[i*t,De(r)/t]}return n.invert=function(i,r){return[i/t,ji(r*t)]},n}function Wle(e,t){var n=De(e),i=(n+De(t))/2;if(it(i)<Oe)return Vle(e);var r=1+n*(2*i-n),a=xi(r)/i;function o(l,u){var f=xi(r-2*i*De(u))/i;return[f*De(l*=i),a-f*ze(l)]}return o.invert=function(l,u){var f=a-u,d=Ir(l,it(f))*Rr(f);return f*i<0&&(d-=Ve*Rr(l)*Rr(f)),[d/i,ji((r-(l*l+f*f)*i*i)/(2*i))]},o}function bv(){return $T(Wle).scale(155.424).center([0,33.6442])}function zI(){return bv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Qle(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Kle(){var e,t,n=zI(),i,r=bv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=bv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,f={point:function(p,y){u=[p,y]}};function d(p){var y=p[0],v=p[1];return u=null,i.point(y,v),u||(a.point(y,v),u)||(l.point(y,v),u)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?o:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Qle([n.stream(t=p),r.stream(p),o.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),o.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),o.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Oe,b+.12*y+Oe],[v-.214*y-Oe,b+.234*y-Oe]]).stream(f),l=o.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Oe,b+.166*y+Oe],[v-.115*y-Oe,b+.234*y-Oe]]).stream(f),g()},d.fitExtent=function(p,y){return Wb(d,p,y)},d.fitSize=function(p,y){return wT(d,p,y)},d.fitWidth=function(p,y){return AT(d,p,y)},d.fitHeight=function(p,y){return CT(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function FI(e){return function(t,n){var i=ze(t),r=ze(n),a=e(i*r);return a===1/0?[2,0]:[a*r*De(t),a*De(n)]}}function ym(e){return function(t,n){var i=xi(t*t+n*n),r=e(i),a=De(r),o=ze(r);return[Ir(t*a,i*o),ji(i&&n*a/i)]}}var LI=FI(function(e){return xi(2/(1+e))});LI.invert=ym(function(e){return 2*ji(e/2)});function Zle(){return fo(LI).scale(124.75).clipAngle(180-.001)}var UI=FI(function(e){return(e=oI(e))&&e/De(e)});UI.invert=ym(function(e){return e});function Jle(){return fo(UI).scale(79.4188).clipAngle(180-.001)}function Qb(e,t){return[e,ev(ST((Vt+t)/2))]}Qb.invert=function(e,t){return[e,2*Zd(aI(t))-Vt]};function eue(){return jI(Qb).scale(961/bi)}function jI(e){var t=fo(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,o=null,l,u,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?o=l=u=f=null:(o=+g[0][0],l=+g[0][1],u=+g[1][0],f=+g[1][1]),d()):o==null?null:[[o,l],[u,f]]};function d(){var g=Ve*i(),p=t(xle(t.rotate()).invert([0,0]));return a(o==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Qb?[[Math.max(p[0]-g,o),l],[Math.min(p[0]+g,u),f]]:[[o,Math.max(p[1]-g,l)],[u,Math.min(p[1]+g,f)]])}return d()}function w1(e){return ST((Vt+e)/2)}function tue(e,t){var n=ze(e),i=e===t?De(e):ev(n/ze(t))/ev(w1(t)/w1(e)),r=n*r_(w1(e),i)/i;if(!i)return Qb;function a(o,l){r>0?l<-Vt+Oe&&(l=-Vt+Oe):l>Vt-Oe&&(l=Vt-Oe);var u=r/r_(w1(l),i);return[u*De(i*o),r-u*ze(i*o)]}return a.invert=function(o,l){var u=r-l,f=Rr(i)*xi(o*o+u*u),d=Ir(o,it(u))*Rr(u);return u*i<0&&(d-=Ve*Rr(o)*Rr(u)),[d/i,2*Zd(r_(r/f,1/i))-Vt]},a}function nue(){return $T(tue).scale(109.5).parallels([30,30])}function xv(e,t){return[e,t]}xv.invert=xv;function iue(){return fo(xv).scale(152.63)}function rue(e,t){var n=ze(e),i=e===t?De(e):(n-ze(t))/(t-e),r=n/i+e;if(it(i)<Oe)return xv;function a(o,l){var u=r-l,f=i*o;return[u*De(f),r-u*ze(f)]}return a.invert=function(o,l){var u=r-l,f=Ir(o,it(u))*Rr(u);return u*i<0&&(f-=Ve*Rr(o)*Rr(u)),[f/i,r-Rr(i)*xi(o*o+u*u)]},a}function aue(){return $T(rue).scale(131.154).center([0,13.9389])}var ap=1.340264,op=-.081106,sp=893e-6,lp=.003796,Sv=xi(3)/2,oue=12;function BI(e,t){var n=ji(Sv*De(t)),i=n*n,r=i*i*i;return[e*ze(n)/(Sv*(ap+3*op*i+r*(7*sp+9*lp*i))),n*(ap+op*i+r*(sp+lp*i))]}BI.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,o,l,u;a<oue&&(l=n*(ap+op*i+r*(sp+lp*i))-t,u=ap+3*op*i+r*(7*sp+9*lp*i),n-=o=l/u,i=n*n,r=i*i*i,!(it(o)<Zy));++a);return[Sv*e*(ap+3*op*i+r*(7*sp+9*lp*i))/ze(n),ji(De(n)/Sv)]};function sue(){return fo(BI).scale(177.158)}function II(e,t){var n=ze(t),i=ze(e)*n;return[n*De(e)/i,De(t)/i]}II.invert=ym(Zd);function lue(){return fo(II).scale(144.049).clipAngle(60)}function uue(){var e=1,t=0,n=0,i=1,r=1,a=0,o,l,u=null,f,d,g,p=1,y=1,v=Vb({point:function($,M){var k=A([$,M]);this.stream.point(k[0],k[1])}}),b=$p,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A($){var M=$[0]*p,k=$[1]*y;if(a){var T=k*o-M*l;M=M*o+k*l,k=T}return[M+t,k+n]}return A.invert=function($){var M=$[0]-t,k=$[1]-n;if(a){var T=k*o+M*l;M=M*o-k*l,k=T}return[M/p,k/y]},A.stream=function($){return S&&_===$?S:S=v(b(_=$))},A.postclip=function($){return arguments.length?(b=$,u=f=d=g=null,w()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(u=f=d=g=null,$p):SI(u=+$[0][0],f=+$[0][1],d=+$[1][0],g=+$[1][1]),w()):u==null?null:[[u,f],[d,g]]},A.scale=function($){return arguments.length?(e=+$,w()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],w()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*Ye,l=De(a),o=ze(a),w()):a*Zt},A.reflectX=function($){return arguments.length?(i=$?-1:1,w()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,w()):r<0},A.fitExtent=function($,M){return Wb(A,$,M)},A.fitSize=function($,M){return wT(A,$,M)},A.fitWidth=function($,M){return AT(A,$,M)},A.fitHeight=function($,M){return CT(A,$,M)},A}function PI(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}PI.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,o=a*a;n-=r=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(it(r)>Oe&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function cue(){return fo(PI).scale(175.295)}function qI(e,t){return[ze(t)*De(e),De(t)]}qI.invert=ym(ji);function fue(){return fo(qI).scale(249.5).clipAngle(90+Oe)}function HI(e,t){var n=ze(t),i=1+ze(e)*n;return[n*De(e)/i,De(t)/i]}HI.invert=ym(function(e){return 2*Zd(e)});function due(){return fo(HI).scale(250).clipAngle(142)}function GI(e,t){return[ev(ST((Vt+t)/2)),-e]}GI.invert=function(e,t){return[-t,2*Zd(aI(e))-Vt]};function hue(){var e=jI(GI),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var gue=Math.abs,TA=Math.cos,Ev=Math.sin,pue=1e-6,YI=Math.PI,MA=YI/2,Q4=mue(2);function K4(e){return e>1?MA:e<-1?-MA:Math.asin(e)}function mue(e){return e>0?Math.sqrt(e):0}function yue(e,t){var n=e*Ev(t),i=30,r;do t-=r=(t+Ev(t)-n)/(1+TA(t));while(gue(r)>pue&&--i>0);return t/2}function vue(e,t,n){function i(r,a){return[e*r*TA(a=yue(n,a)),t*Ev(a)]}return i.invert=function(r,a){return a=K4(a/t),[r/(e*TA(a)),K4((2*a+Ev(2*a))/n)]},i}var bue=vue(Q4/MA,Q4,YI);function xue(){return fo(bue).scale(169.529)}const Sue=NI(),kA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Eue(e,t){return function n(){const i=t();return i.type=e,i.path=NI().projection(i),i.copy=i.copy||function(){const r=n();return kA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},lj(i)}}function TT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(_v[e]=Eue(e,t),this):_v[e]||null}function XI(e){return e&&e.path||Sue}const _v={albers:zI,albersusa:Kle,azimuthalequalarea:Zle,azimuthalequidistant:Jle,conicconformal:nue,conicequalarea:bv,conicequidistant:aue,equalEarth:sue,equirectangular:iue,gnomonic:lue,identity:uue,mercator:eue,mollweide:xue,naturalEarth1:cue,orthographic:fue,stereographic:due,transversemercator:hue};for(const e in _v)TT(e,_v[e]);function _ue(){}const Bo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function VI(){var e=1,t=1,n=l;function i(u,f){return f.map(d=>r(u,d))}function r(u,f){var d=[],g=[];return a(u,f,p=>{n(p,u,f),wue(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Aue((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(u,f,d){var g=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=u[0]>=f,Bo[S<<1].forEach(A);++y<e-1;)b=S,S=u[y+1]>=f,Bo[b|S<<1].forEach(A);for(Bo[S<<0].forEach(A);++v<t-1;){for(y=-1,S=u[v*e+e]>=f,_=u[v*e]>=f,Bo[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=u[v*e+e+y+1]>=f,w=_,_=u[v*e+y+1]>=f,Bo[b|S<<1|_<<2|w<<3].forEach(A);Bo[S|_<<3].forEach(A)}for(y=-1,_=u[v*e]>=f,Bo[_<<2].forEach(A);++y<e-1;)w=_,_=u[v*e+y+1]>=f,Bo[_<<2|w<<3].forEach(A);Bo[_<<3].forEach(A);function A($){var M=[$[0][0]+y,$[0][1]+v],k=[$[1][0]+y,$[1][1]+v],T=o(M),N=o(k),z,B;(z=p[T])?(B=g[N])?(delete p[z.end],delete g[B.start],z===B?(z.ring.push(k),d(z.ring)):g[z.start]=p[B.end]={start:z.start,end:B.end,ring:z.ring.concat(B.ring)}):(delete p[z.end],z.ring.push(k),p[z.end=N]=z):(z=g[N])?(B=p[T])?(delete g[z.start],delete p[B.end],z===B?(z.ring.push(k),d(z.ring)):g[B.start]=p[z.end]={start:B.start,end:z.end,ring:B.ring.concat(z.ring)}):(delete g[z.start],z.ring.unshift(M),g[z.start=T]=z):g[T]=p[N]={start:T,end:N,ring:[M,k]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function l(u,f,d){u.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],g[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],g[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(u){if(!arguments.length)return[e,t];var f=Math.floor(u[0]),d=Math.floor(u[1]);return f>=0&&d>=0||te("invalid size"),e=f,t=d,i},i.smooth=function(u){return arguments.length?(n=u?l:_ue,i):n===l},i}function wue(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Aue(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Cue(e,t[n]))return r;return 0}function Cue(e,t){for(var n=t[0],i=t[1],r=-1,a=0,o=e.length,l=o-1;a<o;l=a++){var u=e[a],f=u[0],d=u[1],g=e[l],p=g[0],y=g[1];if($ue(u,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function $ue(e,t,n){var i;return Tue(e,t,n)&&Mue(e[i=+(e[0]===t[0])],n[i],t[i])}function Tue(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Mue(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function WI(e,t,n){return function(i){var r=Ka(i),a=n?Math.min(r[0],0):r[0],o=r[1],l=o-a,u=t?wl(a,o,e):l/(e+1);return ar(a+u,o,u)}}function MT(e){ee.call(this,null,e)}MT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ve(MT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ri,a=VI().smooth(e.smooth!==!1),o=e.thresholds||kue(i,r,e),l=e.as===null?null:e.as||"contour",u=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,ae(o)?o:o(d.values));Due(g,d,f,e),g.forEach(p=>{u.push(hb(f,ht(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function kue(e,t,n){const i=WI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Iu(t(r).values)))}function Due(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Pe(r)&&(r=r(n,i)),Pe(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const o=(ut(r)?r:r[0])||1,l=(ut(r)?r:r[1])||1,u=a&&a[0]||0,f=a&&a[1]||0;e.forEach(QI(t,o,l,u,f))}function QI(e,t,n,i,r){const a=e.x1||0,o=e.y1||0,l=t*n<0;function u(g){g.forEach(f)}function f(g){l&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-o)*n+r}return function(g){return g.coordinates.forEach(u),g}}function Z4(e,t,n){const i=e>=0?e:S3(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function u_(e){return Pe(e)?e:ai(+e)}function KI(){var e=u=>u[0],t=u=>u[1],n=Ud,i=[-1,-1],r=960,a=500,o=2;function l(u,f){const d=Z4(i[0],u,e)>>o,g=Z4(i[1],u,t)>>o,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>o),b=2*y+(a>>o),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;u.forEach($=>{const M=p+(+e($)>>o),k=y+(+t($)>>o);M>=0&&M<v&&k>=0&&k<b&&(S[M+k*v]+=+n($))}),d>0&&g>0?($f(v,b,S,_,d),Tf(v,b,_,S,g),$f(v,b,S,_,d),Tf(v,b,_,S,g),$f(v,b,S,_,d),Tf(v,b,_,S,g)):d>0?($f(v,b,S,_,d),$f(v,b,_,S,d),$f(v,b,S,_,d),w=_):g>0&&(Tf(v,b,S,_,g),Tf(v,b,_,S,g),Tf(v,b,S,_,g),w=_);const A=f?Math.pow(2,-2*o):1/d9(w);for(let $=0,M=v*b;$<M;++$)w[$]*=A;return{values:w,scale:1<<o,width:v,height:b,x1:p,y1:y,x2:p+(r>>o),y2:y+(a>>o)}}return l.x=function(u){return arguments.length?(e=u_(u),l):e},l.y=function(u){return arguments.length?(t=u_(u),l):t},l.weight=function(u){return arguments.length?(n=u_(u),l):n},l.size=function(u){if(!arguments.length)return[r,a];var f=+u[0],d=+u[1];return f>=0&&d>=0||te("invalid size"),r=f,a=d,l},l.cellSize=function(u){return arguments.length?((u=+u)>=1||te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),l):1<<o},l.bandwidth=function(u){return arguments.length?(u=_e(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&te("invalid bandwidth"),i=u,l):i},l}function $f(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<t;++o)for(let l=0,u=0;l<e+r;++l)l<e&&(u+=n[l+o*e]),l>=r&&(l>=a&&(u-=n[l-a+o*e]),i[l-r+o*e]=u/Math.min(l+1,e-1+a-l,a))}function Tf(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<e;++o)for(let l=0,u=0;l<t+r;++l)l<t&&(u+=n[o+l*e]),l>=r&&(l>=a&&(u-=n[o+(l-a)*e]),i[o+(l-r)*e]=u/Math.min(l+1,t-1+a-l,a))}function kT(e){ee.call(this,null,e)}kT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Rue=["x","y","weight","size","cellSize","bandwidth"];function ZI(e,t){return Rue.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ve(kT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Nue(i,e.groupby),a=(e.groupby||[]).map(Wt),o=ZI(KI(),e),l=e.as||"grid",u=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return u=r.map(d=>ht(f({[l]:o(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Nue(e,t){var n=[],i=d=>d(l),r,a,o,l,u,f;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)l=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(l);return n}function DT(e){ee.call(this,null,e)}DT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ve(DT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=VI().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||WI(e.count||10,e.nice,!!r),o=e.size,l,u;return r||(r=t.materialize(t.SOURCE).source,l=ZI(KI(),e)(r,!0),u=QI(l,l.scale||1,l.scale||1,0,0),o=[l.width,l.height],r=l.values),a=ae(a)?a:a(r),r=i.size(o)(r,a),u&&r.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ht),n}});const DA="Feature",RT="FeatureCollection",Oue="MultiPoint";function NT(e){ee.call(this,null,e)}NT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ve(NT,ee,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],o=r&&r[1],l=e.geojson||!r&&ri,u=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(ei(l))||a&&t.modified(ei(a))||o&&t.modified(ei(o)),(!this.value||f)&&(u=t.SOURCE,this._features=n=[],this._points=i=[]),l&&t.visit(u,d=>n.push(l(d))),a&&o&&(t.visit(u,d=>{var g=a(d),p=o(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:DA,geometry:{type:Oue,coordinates:i}})),this.value={type:RT,features:n}}});function OT(e){ee.call(this,null,e)}OT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ve(OT,ee,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ri,a=e.as||"path",o=n.SOURCE;!i||e.modified()?(this.value=i=XI(e.projection),n.materialize().reflow()):o=r===ri||t.modified(r.fields)?n.ADD_MOD:n.ADD;const l=zue(i,e.pointRadius);return n.visit(o,u=>u[a]=i(r(u))),i.pointRadius(l),n.modifies(a)}});function zue(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function zT(e){ee.call(this,null,e)}zT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ve(zT,ee,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],o=a[0],l=a[1],u;function f(d){const g=n([i(d),r(d)]);g?(d[o]=g[0],d[l]=g[1]):(d[o]=void 0,d[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(u=t.modified(i.fields)||t.modified(r.fields),t.visit(u?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function FT(e){ee.call(this,null,e)}FT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ve(FT,ee,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Fue(XI(e.projection),e.field||Lr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,o=>o[r]=i),n.modifies(r)}});function Fue(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(a),o};return i.context=r=>(e.context(r),i),i}function LT(e){ee.call(this,[],e),this.generator=kle()}LT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ve(LT,ee,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Pe(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(s7(n[0],r)):t.add.push(ht(r)),n[0]=r,t}});function UT(e){ee.call(this,null,e)}UT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ve(UT,ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ri,a=Uue(e.opacity,e),o=Lue(e.color,e),l=e.as||"image",u={$x:0,$y:0,$value:0,$max:i?Iu(n.map(f=>Iu(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=He({},f,u);i||(g.$max=Iu(d.values||[])),f[l]=jue(d,g,o.dep?o:ai(o(g)),a.dep?a:ai(a(g)))}),t.reflow(!0).modifies(l)}});function Lue(e,t){let n;return Pe(e)?(n=i=>$l(e(i,t)),n.dep=JI(e)):n=ai($l(e||"#888")),n}function Uue(e,t){let n;return Pe(e)?(n=i=>e(i,t),n.dep=JI(e)):e?n=ai(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function JI(e){if(!Pe(e))return!1;const t=ha(ei(e));return t.$x||t.$y||t.$value||t.$max}function jue(e,t,n,i){const r=e.width,a=e.height,o=e.x1||0,l=e.y1||0,u=e.x2||r,f=e.y2||a,d=e.values,g=d?S=>d[S]:sl,p=xl(u-o,f-l),y=p.getContext("2d"),v=y.getImageData(0,0,u-o,f-l),b=v.data;for(let S=l,_=0;S<f;++S){t.$y=S-l;for(let w=o,A=S*r;w<u;++w,_+=4){t.$x=w-o,t.$value=g(w+A);const $=n(t);b[_+0]=$.r,b[_+1]=$.g,b[_+2]=$.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function eP(e){ee.call(this,null,e),this.modified(!0)}ve(eP,ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Iue(e.type),kA.forEach(i=>{e[i]!=null&&J4(n,i,e[i])})):kA.forEach(i=>{e.modified(i)&&J4(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Bue(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Bue(e,t){const n=Pue(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Iue(e){const t=TT((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function J4(e,t,n){Pe(e[t])&&e[t](n)}function Pue(e){return e=_e(e),e.length===1?e[0]:{type:RT,features:e.reduce((t,n)=>t.concat(que(n)),[])}}function que(e){return e.type===RT?e.features:_e(e).filter(t=>t!=null).map(t=>t.type===DA?t:{type:DA,geometry:t})}const Hue=Object.freeze(Object.defineProperty({__proto__:null,contour:DT,geojson:NT,geopath:OT,geopoint:zT,geoshape:FT,graticule:LT,heatmap:UT,isocontour:MT,kde2d:kT,projection:eP},Symbol.toStringTag,{value:"Module"}));function Gue(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,o=n.length,l,u=0,f=0;for(a=0;a<o;++a)l=n[a],u+=l.x,f+=l.y;for(u=(u/o-e)*i,f=(f/o-t)*i,a=0;a<o;++a)l=n[a],l.x-=u,l.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Yue(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return tP(this.cover(t,n),t,n,e)}function tP(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,o={data:i},l=e._x0,u=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,S,_,w;if(!a)return e._root=o,e;for(;a.length;)if((b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(u+d)/2))?u=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=o,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return o.next=a,r?r[_]=o:e._root=o,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(u+d)/2))?u=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=g));return r[w]=a,r[_]=o,e}function Xue(e){var t,n,i=e.length,r,a,o=new Array(i),l=new Array(i),u=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,l[n]=a,r<u&&(u=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(u>d||f>g)return this;for(this.cover(u,f).cover(d,g),n=0;n<i;++n)tP(this,o[n],l[n],e[n]);return this}function Vue(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var o=r-n||1,l=this._root,u,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,u=new Array(4),u[f]=l,l=u,o*=2,f){case 0:r=n+o,a=i+o;break;case 1:n=r-o,a=i+o;break;case 2:r=n+o,i=a-o;break;case 3:n=r-o,i=a-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Wue(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Que(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function gi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Kue(e,t,n){var i,r=this._x0,a=this._y0,o,l,u,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new gi(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(o=v.x0)>d||(l=v.y0)>g||(u=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(o+u)/2,_=(l+f)/2;p.push(new gi(y[3],S,_,u,f),new gi(y[2],o,_,S,f),new gi(y[1],S,l,u,_),new gi(y[0],o,l,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=w*w+A*A;if($<n){var M=Math.sqrt(n=$);r=e-M,a=t-M,d=e+M,g=t+M,i=y.data}}return i}function Zue(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,o=this._x0,l=this._y0,u=this._x1,f=this._y1,d,g,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(o+u)/2))?o=p:u=p,(b=g>=(y=(l+f)/2))?l=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function Jue(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ece(){return this._root}function tce(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function nce(e){var t=[],n,i=this._root,r,a,o,l,u;for(i&&t.push(new gi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,o=n.y0,l=n.x1,u=n.y1)&&i.length){var f=(a+l)/2,d=(o+u)/2;(r=i[3])&&t.push(new gi(r,f,d,l,u)),(r=i[2])&&t.push(new gi(r,a,d,f,u)),(r=i[1])&&t.push(new gi(r,f,o,l,d)),(r=i[0])&&t.push(new gi(r,a,o,f,d))}return this}function ice(e){var t=[],n=[],i;for(this._root&&t.push(new gi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,o=i.x0,l=i.y0,u=i.x1,f=i.y1,d=(o+u)/2,g=(l+f)/2;(a=r[0])&&t.push(new gi(a,o,l,d,g)),(a=r[1])&&t.push(new gi(a,d,l,u,g)),(a=r[2])&&t.push(new gi(a,o,g,d,f)),(a=r[3])&&t.push(new gi(a,d,g,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function rce(e){return e[0]}function ace(e){return arguments.length?(this._x=e,this):this._x}function oce(e){return e[1]}function sce(e){return arguments.length?(this._y=e,this):this._y}function jT(e,t,n){var i=new BT(t??rce,n??oce,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function BT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function ez(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ei=jT.prototype=BT.prototype;Ei.copy=function(){var e=new BT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=ez(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=ez(i));return e};Ei.add=Yue;Ei.addAll=Xue;Ei.cover=Vue;Ei.data=Wue;Ei.extent=Que;Ei.find=Kue;Ei.remove=Zue;Ei.removeAll=Jue;Ei.root=ece;Ei.size=tce;Ei.visit=nce;Ei.visitAfter=ice;Ei.x=ace;Ei.y=sce;function pi(e){return function(){return e}}function gl(e){return(e()-.5)*1e-6}function lce(e){return e.x+e.vx}function uce(e){return e.y+e.vy}function cce(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=pi(e==null?1:+e));function o(){for(var f,d=t.length,g,p,y,v,b,S,_=0;_<a;++_)for(g=jT(t,lce,uce).visitAfter(l),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(w);function w(A,$,M,k,T){var N=A.data,z=A.r,B=b+z;if(N){if(N.index>p.index){var j=y-N.x-N.vx,K=v-N.y-N.vy,Y=j*j+K*K;Y<B*B&&(j===0&&(j=gl(i),Y+=j*j),K===0&&(K=gl(i),Y+=K*K),Y=(B-(Y=Math.sqrt(Y)))/Y*r,p.vx+=(j*=Y)*(B=(z*=z)/(S+z)),p.vy+=(K*=Y)*B,N.vx-=j*(B=1-B),N.vy-=K*B)}return}return $>y+B||k<y-B||M>v+B||T<v-B}}function l(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function u(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return o.initialize=function(f,d){t=f,i=d,u()},o.iterations=function(f){return arguments.length?(a=+f,o):a},o.strength=function(f){return arguments.length?(r=+f,o):r},o.radius=function(f){return arguments.length?(e=typeof f=="function"?f:pi(+f),u(),o):e},o}function fce(e){return e.index}function tz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function dce(e){var t=fce,n=g,i,r=pi(30),a,o,l,u,f,d=1;e==null&&(e=[]);function g(S){return 1/Math.min(l[S.source.index],l[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,$,M,k,T,N,z,B;A<w;++A)$=e[A],M=$.source,k=$.target,T=k.x+k.vx-M.x-M.vx||gl(f),N=k.y+k.vy-M.y-M.vy||gl(f),z=Math.sqrt(T*T+N*N),z=(z-a[A])/z*S*i[A],T*=z,N*=z,k.vx-=T*(B=u[A]),k.vy-=N*B,M.vx+=T*(B=1-B),M.vy+=N*B}function y(){if(o){var S,_=o.length,w=e.length,A=new Map(o.map((M,k)=>[t(M,k,o),M])),$;for(S=0,l=new Array(_);S<w;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=tz(A,$.source)),typeof $.target!="object"&&($.target=tz(A,$.target)),l[$.source.index]=(l[$.source.index]||0)+1,l[$.target.index]=(l[$.target.index]||0)+1;for(S=0,u=new Array(w);S<w;++S)$=e[S],u[S]=l[$.source.index]/(l[$.source.index]+l[$.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(o)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(o)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){o=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:pi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:pi(+S),b(),p):r},p}var hce={value:()=>{}};function nP(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new oy(n)}function oy(e){this._=e}function gce(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oy.prototype=nP.prototype={constructor:oy,on:function(e,t){var n=this._,i=gce(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=pce(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=nz(n[r],e.name,t);else if(t==null)for(r in n)n[r]=nz(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oy(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function pce(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function nz(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=hce,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var vd=0,Xg=0,bg=0,iP=1e3,wv,Vg,Av=0,rc=0,Kb=0,kp=typeof performance=="object"&&performance.now?performance:Date,rP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function IT(){return rc||(rP(mce),rc=kp.now()+Kb)}function mce(){rc=0}function Cv(){this._call=this._time=this._next=null}Cv.prototype=aP.prototype={constructor:Cv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?IT():+n)+(t==null?0:+t),!this._next&&Vg!==this&&(Vg?Vg._next=this:wv=this,Vg=this),this._call=e,this._time=n,RA()},stop:function(){this._call&&(this._call=null,this._time=1/0,RA())}};function aP(e,t,n){var i=new Cv;return i.restart(e,t,n),i}function yce(){IT(),++vd;for(var e=wv,t;e;)(t=rc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vd}function iz(){rc=(Av=kp.now())+Kb,vd=Xg=0;try{yce()}finally{vd=0,bce(),rc=0}}function vce(){var e=kp.now(),t=e-Av;t>iP&&(Kb-=t,Av=e)}function bce(){for(var e,t=wv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:wv=n);Vg=e,RA(i)}function RA(e){if(!vd){Xg&&(Xg=clearTimeout(Xg));var t=e-rc;t>24?(e<1/0&&(Xg=setTimeout(iz,e-kp.now()-Kb)),bg&&(bg=clearInterval(bg))):(bg||(Av=kp.now(),bg=setInterval(vce,iP)),vd=1,rP(iz))}}function xce(e,t,n){var i=new Cv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,o,l){o=+o,l=l==null?IT():+l,i._restart(function u(f){f+=r,i._restart(u,r+=o,l),a(f)},o,l)},i.restart(e,t,n),i)}const Sce=1664525,Ece=1013904223,rz=4294967296;function _ce(){let e=1;return()=>(e=(Sce*e+Ece)%rz)/rz}function wce(e){return e.x}function Ace(e){return e.y}var Cce=10,$ce=Math.PI*(3-Math.sqrt(5));function Tce(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,l=new Map,u=aP(g),f=nP("tick","end"),d=_ce();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(u.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,l.forEach(function($){$(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=o:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=o:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Cce*Math.sqrt(.5+b),A=b*$ce;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return u.restart(g),t},stop:function(){return u.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),l.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(o=1-b,t):1-o},randomSource:function(b){return arguments.length?(d=b,l.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?l.delete(b):l.set(b,v(S)),t):l.get(b)},find:function(b,S,_){var w=0,A=e.length,$,M,k,T,N;for(_==null?_=1/0:_*=_,w=0;w<A;++w)T=e[w],$=b-T.x,M=S-T.y,k=$*$+M*M,k<_&&(N=T,_=k);return N},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function Mce(){var e,t,n,i,r=pi(-30),a,o=1,l=1/0,u=.81;function f(y){var v,b=e.length,S=jT(e,wce,Ace).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,S,_=0,w,A,$;if(y.length){for(w=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,$=_*_+w*w;if(A*A/u<$)return $<l&&(_===0&&(_=gl(n),$+=_*_),w===0&&(w=gl(n),$+=w*w),$<o&&($=Math.sqrt(o*$)),t.vx+=_*y.value*i/$,t.vy+=w*y.value*i/$),!0;if(y.length||$>=l)return;(y.data!==t||y.next)&&(_===0&&(_=gl(n),$+=_*_),w===0&&(w=gl(n),$+=w*w),$<o&&($=Math.sqrt(o*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:pi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.distanceMax=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f.theta=function(y){return arguments.length?(u=y*y,f):Math.sqrt(u)},f}function kce(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(l){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vx+=(r[u]-d.x)*i[u]*l}function o(){if(n){var l,u=n.length;for(i=new Array(u),r=new Array(u),l=0;l<u;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,o()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:pi(+l),o(),a):t},a.x=function(l){return arguments.length?(e=typeof l=="function"?l:pi(+l),o(),a):e},a}function Dce(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(l){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vy+=(r[u]-d.y)*i[u]*l}function o(){if(n){var l,u=n.length;for(i=new Array(u),r=new Array(u),l=0;l<u;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,o()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:pi(+l),o(),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pi(+l),o(),a):e},a}const az={center:Gue,collide:cce,nbody:Mce,link:dce,x:kce,y:Dce},Wg="forces",NA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Rce=["static","iterations"],oP=["x","y","vx","vy"];function PT(e){ee.call(this,null,e)}PT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:oP}]};ve(PT,ee,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(NA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&sP(n,e,0,t)):(this.value=n=Oce(t.source,e),n.on("tick",Nce(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Rce)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let l=this._argops,u=0,f=l.length,d;u<f;++u)if(d=l[u],!(d.name!==Wg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,o;r<a;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(oP)}});function Nce(e,t){return()=>e.touch(t).run()}function Oce(e,t){const n=Tce(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),sP(n,t,!0).on("end",()=>a=!0)}function sP(e,t,n,i){var r=_e(t.forces),a,o,l,u;for(a=0,o=NA.length;a<o;++a)l=NA[a],l!==Wg&&t.modified(l)&&e[l](t[l]);for(a=0,o=r.length;a<o;++a)u=Wg+a,l=n||t.modified(Wg,a)?Fce(r[a]):i&&zce(r[a],i)?e.force(u):null,l&&e.force(u,l);for(o=e.numForces||0;a<o;++a)e.force(Wg+a,null);return e.numForces=r.length,e}function zce(e,t){var n,i;for(n in e)if(Pe(i=e[n])&&t.modified(ei(i)))return 1;return 0}function Fce(e){var t,n;we(az,e.force)||te("Unrecognized force: "+e.force),t=az[e.force]();for(n in e)Pe(t[n])&&Lce(t[n],e[n],e);return t}function Lce(e,t,n){e(Pe(t)?i=>t(i,n):t)}const Uce=Object.freeze(Object.defineProperty({__proto__:null,force:PT},Symbol.toStringTag,{value:"Module"}));function jce(e,t){return e.parent===t.parent?1:2}function Bce(e){return e.reduce(Ice,0)/e.length}function Ice(e,t){return e+t.x}function Pce(e){return 1+e.reduce(qce,0)}function qce(e,t){return Math.max(e,t.y)}function Hce(e){for(var t;t=e.children;)e=t[0];return e}function Gce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Yce(){var e=jce,t=1,n=1,i=!1;function r(a){var o,l=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Bce(y),p.y=Pce(y)):(p.x=o?l+=e(p,o):0,p.y=0,o=p)});var u=Hce(a),f=Gce(a),d=u.x-e(u,f)/2,g=f.x+e(f,u)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Xce(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Vce(){return this.eachAfter(Xce)}function Wce(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Qce(e,t){for(var n=this,i=[n],r,a,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Kce(e,t){for(var n=this,i=[n],r=[],a,o,l,u=-1;n=i.pop();)if(r.push(n),a=n.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function Zce(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Jce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function efe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function tfe(e){for(var t=this,n=nfe(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function nfe(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function ife(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function rfe(){return Array.from(this)}function afe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ofe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*sfe(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function qT(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=cfe)):t===void 0&&(t=ufe);for(var n=new bd(e),i,r=[n],a,o,l,u;i=r.pop();)if((o=t(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)r.push(a=o[l]=new bd(o[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(lP)}function lfe(){return qT(this).eachBefore(ffe)}function ufe(e){return e.children}function cfe(e){return Array.isArray(e)?e[1]:null}function ffe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function lP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function bd(e){this.data=e,this.depth=this.height=0,this.parent=null}bd.prototype=qT.prototype={constructor:bd,count:Vce,each:Wce,eachAfter:Kce,eachBefore:Qce,find:Zce,sum:Jce,sort:efe,path:tfe,ancestors:ife,descendants:rfe,leaves:afe,links:ofe,copy:lfe,[Symbol.iterator]:sfe};function sy(e){return e==null?null:uP(e)}function uP(e){if(typeof e!="function")throw new Error;return e}function Fu(){return 0}function zf(e){return function(){return e}}const dfe=1664525,hfe=1013904223,oz=4294967296;function gfe(){let e=1;return()=>(e=(dfe*e+hfe)%oz)/oz}function pfe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mfe(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function yfe(e,t){for(var n=0,i=(e=mfe(Array.from(e),t)).length,r=[],a,o;n<i;)a=e[n],o&&cP(o,a)?++n:(o=bfe(r=vfe(r,a)),n=0);return o}function vfe(e,t){var n,i;if(c_(t,e))return[t];for(n=0;n<e.length;++n)if(A1(t,e[n])&&c_(Qg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(A1(Qg(e[n],e[i]),t)&&A1(Qg(e[n],t),e[i])&&A1(Qg(e[i],t),e[n])&&c_(fP(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function A1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function cP(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function c_(e,t){for(var n=0;n<t.length;++n)if(!cP(e,t[n]))return!1;return!0}function bfe(e){switch(e.length){case 1:return xfe(e[0]);case 2:return Qg(e[0],e[1]);case 3:return fP(e[0],e[1],e[2])}}function xfe(e){return{x:e.x,y:e.y,r:e.r}}function Qg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,o=t.y,l=t.r,u=a-n,f=o-i,d=l-r,g=Math.sqrt(u*u+f*f);return{x:(n+a+u/g*d)/2,y:(i+o+f/g*d)/2,r:(g+r+l)/2}}function fP(e,t,n){var i=e.x,r=e.y,a=e.r,o=t.x,l=t.y,u=t.r,f=n.x,d=n.y,g=n.r,p=i-o,y=i-f,v=r-l,b=r-d,S=u-a,_=g-a,w=i*i+r*r-a*a,A=w-o*o-l*l+u*u,$=w-f*f-d*d+g*g,M=y*v-p*b,k=(v*$-b*A)/(M*2)-i,T=(b*S-v*_)/M,N=(y*A-p*$)/(M*2)-r,z=(p*_-y*S)/M,B=T*T+z*z-1,j=2*(a+k*T+N*z),K=k*k+N*N-a*a,Y=-(Math.abs(B)>1e-6?(j+Math.sqrt(j*j-4*B*K))/(2*B):K/j);return{x:i+k+T*Y,y:r+N+z*Y,r:Y}}function sz(e,t,n){var i=e.x-t.x,r,a,o=e.y-t.y,l,u,f=i*i+o*o;f?(a=t.r+n.r,a*=a,u=e.r+n.r,u*=u,a>u?(r=(f+u-a)/(2*f),l=Math.sqrt(Math.max(0,u/f-r*r)),n.x=e.x-r*i-l*o,n.y=e.y-r*o+l*i):(r=(f+a-u)/(2*f),l=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-l*o,n.y=t.y+r*o+l*i)):(n.x=t.x+n.r,n.y=t.y)}function lz(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function uz(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function C1(e){this._=e,this.next=null,this.previous=null}function Sfe(e,t){if(!(a=(e=pfe(e)).length))return 0;var n,i,r,a,o,l,u,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;sz(i,n,r=e[2]),n=new C1(n),i=new C1(i),r=new C1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(u=3;u<a;++u){sz(n._,i._,r=e[u]),r=new C1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(lz(f._,r._)){i=f,n.next=i,i.previous=n,--u;continue e}g+=f._.r,f=f.next}else{if(lz(d._,r._)){n=d,n.next=i,i.previous=n,--u;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=uz(n);(r=r.next)!==i;)(l=uz(r))<o&&(n=r,o=l);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=yfe(n,t),u=0;u<a;++u)n=e[u],n.x-=r.x,n.y-=r.y;return r.r}function Efe(e){return Math.sqrt(e.value)}function _fe(){var e=null,t=1,n=1,i=Fu;function r(a){const o=gfe();return a.x=t/2,a.y=n/2,e?a.eachBefore(cz(e)).eachAfter(f_(i,.5,o)).eachBefore(fz(1)):a.eachBefore(cz(Efe)).eachAfter(f_(Fu,1,o)).eachAfter(f_(i,a.r/Math.min(t,n),o)).eachBefore(fz(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=sy(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:zf(+a),r):i},r}function cz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function f_(e,t,n){return function(i){if(r=i.children){var r,a,o=r.length,l=e(i)*t||0,u;if(l)for(a=0;a<o;++a)r[a].r+=l;if(u=Sfe(r,n),l)for(a=0;a<o;++a)r[a].r-=l;i.r=u+l}}}function fz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function dP(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function vm(e,t,n,i,r){for(var a=e.children,o,l=-1,u=a.length,f=e.value&&(i-t)/e.value;++l<u;)o=a[l],o.y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*f}function wfe(){var e=1,t=1,n=0,i=!1;function r(o){var l=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/l,o.eachBefore(a(t,l)),i&&o.eachBefore(dP),o}function a(o,l){return function(u){u.children&&vm(u,u.x0,o*(u.depth+1)/l,u.x1,o*(u.depth+2)/l);var f=u.x0,d=u.y0,g=u.x1-n,p=u.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),u.x0=f,u.y0=d,u.x1=g,u.y1=p}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(e=+o[0],t=+o[1],r):[e,t]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var Afe={depth:-1},dz={},d_={};function Cfe(e){return e.id}function $fe(e){return e.parentId}function hz(){var e=Cfe,t=$fe,n;function i(r){var a=Array.from(r),o=e,l=t,u,f,d,g,p,y,v,b,S=new Map;if(n!=null){const _=a.map(($,M)=>Tfe(n($,M,r))),w=_.map(gz),A=new Set(_).add("");for(const $ of w)A.has($)||(A.add($),_.push($),w.push(gz($)),a.push(d_));o=($,M)=>_[M],l=($,M)=>w[M]}for(d=0,u=a.length;d<u;++d)f=a[d],y=a[d]=new bd(f),(v=o(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?dz:y)),(v=l(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<u;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===dz)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===d_&&g.children.length===1;)g=g.children[0],--u;for(let _=a.length-1;_>=0&&(y=a[_],y.data===d_);--_)y.data=null}if(g.parent=Afe,g.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(lP),g.parent=null,u>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=sy(r),i):e},i.parentId=function(r){return arguments.length?(t=sy(r),i):t},i.path=function(r){return arguments.length?(n=sy(r),i):n},i}function Tfe(e){e=`${e}`;let t=e.length;return OA(e,t-1)&&!OA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function gz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!OA(e,t););return e.slice(0,t)}function OA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Mfe(e,t){return e.parent===t.parent?1:2}function h_(e){var t=e.children;return t?t[0]:e.t}function g_(e){var t=e.children;return t?t[t.length-1]:e.t}function kfe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Dfe(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Rfe(e,t,n){return e.a.parent===t.parent?e.a:n}function ly(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ly.prototype=Object.create(bd.prototype);function Nfe(e){for(var t=new ly(e,0),n,i=[t],r,a,o,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),o=l-1;o>=0;--o)i.push(r=n.children[o]=new ly(a[o],o)),r.parent=n;return(t.parent=new ly(null,0)).children=[t],t}function Ofe(){var e=Mfe,t=1,n=1,i=null;function r(f){var d=Nfe(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)f.eachBefore(u);else{var g=f,p=f,y=f;f.eachBefore(function(w){w.x<g.x&&(g=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=g===p?1:e(g,p)/2,b=v-g.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){Dfe(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=l(f,p,f.parent.A||g[0])}function o(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function l(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,$;v=g_(v),p=h_(p),v&&p;)b=h_(b),y=g_(y),y.a=f,$=v.z+w-p.z-S+e(v._,p._),$>0&&(kfe(Rfe(v,f,g),f,$),S+=$,_+=$),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!g_(y)&&(y.t=v,y.m+=w-_),p&&!h_(b)&&(b.t=p,b.m+=S-A,g=f)}return g}function u(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Zb(e,t,n,i,r){for(var a=e.children,o,l=-1,u=a.length,f=e.value&&(r-n)/e.value;++l<u;)o=a[l],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*f}var hP=(1+Math.sqrt(5))/2;function gP(e,t,n,i,r,a){for(var o=[],l=t.children,u,f,d=0,g=0,p=l.length,y,v,b=t.value,S,_,w,A,$,M,k;d<p;){y=r-n,v=a-i;do S=l[g++].value;while(!S&&g<p);for(_=w=S,M=Math.max(v/y,y/v)/(b*e),k=S*S*M,$=Math.max(w/k,k/_);g<p;++g){if(S+=f=l[g].value,f<_&&(_=f),f>w&&(w=f),k=S*S*M,A=Math.max(w/k,k/_),A>$){S-=f;break}$=A}o.push(u={value:S,dice:y<v,children:l.slice(d,g)}),u.dice?vm(u,n,i,r,b?i+=v*S/b:a):Zb(u,n,i,b?n+=y*S/b:r,a),b-=S,d=g}return o}const pP=(function e(t){function n(i,r,a,o,l){gP(t,i,r,a,o,l)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(hP);function zfe(){var e=pP,t=!1,n=1,i=1,r=[0],a=Fu,o=Fu,l=Fu,u=Fu,f=Fu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(dP),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=o(p)-y,S-=l(p)-y,_-=u(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=uP(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:zf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(o=typeof p=="function"?p:zf(+p),d):o},d.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:zf(+p),d):l},d.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:zf(+p),d):u},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:zf(+p),d):f},d}function Ffe(e,t,n,i,r){var a=e.children,o,l=a.length,u,f=new Array(l+1);for(f[0]=u=o=0;o<l;++o)f[o+1]=u+=a[o].value;d(0,l,e.value,t,n,i,r);function d(g,p,y,v,b,S,_){if(g>=p-1){var w=a[g];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[g],$=y/2+A,M=g+1,k=p-1;M<k;){var T=M+k>>>1;f[T]<$?M=T+1:k=T}$-f[M-1]<f[M]-$&&g+1<M&&--M;var N=f[M]-A,z=y-N;if(S-v>_-b){var B=y?(v*z+S*N)/y:S;d(g,M,N,v,b,B,_),d(M,p,z,B,b,S,_)}else{var j=y?(b*z+_*N)/y:_;d(g,M,N,v,b,S,j),d(M,p,z,v,j,S,_)}}}function Lfe(e,t,n,i,r){(e.depth&1?Zb:vm)(e,t,n,i,r)}const Ufe=(function e(t){function n(i,r,a,o,l){if((u=i._squarify)&&u.ratio===t)for(var u,f,d,g,p=-1,y,v=u.length,b=i.value;++p<v;){for(f=u[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?vm(f,r,a,o,b?a+=(l-a)*f.value/b:l):Zb(f,r,a,b?r+=(o-r)*f.value/b:o,l),b-=f.value}else i._squarify=u=gP(t,i,r,a,o,l),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(hP);function zA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function HT(e){ee.call(this,null,e)}HT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const jfe=e=>e.values;ve(HT,ee,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(o=>{o.children&&db(o.data)&&r.rem.push(o.data)}),this.value=a=qT({values:_e(e.keys).reduce((o,l)=>(o.key(l),o),Bfe()).entries(r.source)},jfe),n&&a.each(o=>{o.children&&(o=ht(o.data),r.add.push(o),r.source.push(o))}),zA(a,ke,ke)),r.source.root=a,r}});function Bfe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const o=r.length,l=e[a++],u={},f={};let d=-1,g,p,y;for(;++d<o;)g=l(p=r[d])+"",(y=u[g])?y.push(p):u[g]=[p];for(g in u)f[g]=n(u[g],a);return f}function i(r,a){if(++a>e.length)return r;const o=[];for(const l in r)o.push({key:l,values:i(r[l],a)});return o}return t}function vs(e){ee.call(this,null,e)}const Ife=(e,t)=>e.parent===t.parent?1:2;ve(vs,ee,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Ec(e.sort,o=>o.data)),Pfe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Ife:Ud);try{this.value=n(r)}catch(o){te(o)}return r.each(o=>qfe(o,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function Pfe(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function qfe(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const FA=["x","y","r","depth","children"];function GT(e){vs.call(this,e)}GT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FA.length,default:FA}]};ve(GT,vs,{layout:_fe,params:["radius","size","padding"],fields:FA});const LA=["x0","y0","x1","y1","depth","children"];function YT(e){vs.call(this,e)}YT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:LA.length,default:LA}]};ve(YT,vs,{layout:wfe,params:["size","round","padding"],fields:LA});function XT(e){ee.call(this,null,e)}XT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ve(XT,ee,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?zA(hz().id(e.key).parentId(e.parentKey)(r.source),e.key,Ur):zA(hz()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const pz={tidy:Ofe,cluster:Yce},UA=["x","y","depth","children"];function VT(e){vs.call(this,e)}VT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:UA.length,default:UA}]};ve(VT,vs,{layout(e){const t=e||"tidy";if(we(pz,t))return pz[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:UA});function WT(e){ee.call(this,[],e)}WT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ve(WT,ee,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,o=>a[ke(o)]=1),i.each(o=>{const l=o.data,u=o.parent&&o.parent.data;u&&a[ke(l)]&&a[ke(u)]&&r.add.push(ht({source:u,target:l}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>a[ke(o)]=1),n.forEach(o=>{(a[ke(o.source)]||a[ke(o.target)])&&r.mod.push(o)})),r}});const mz={binary:Ffe,dice:vm,slice:Zb,slicedice:Lfe,squarify:pP,resquarify:Ufe},jA=["x0","y0","x1","y1","depth","children"];function QT(e){vs.call(this,e)}QT.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jA.length,default:jA}]};ve(QT,vs,{layout(){const e=zfe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{we(mz,t)?e.tile(mz[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:jA});const Hfe=Object.freeze(Object.defineProperty({__proto__:null,nest:HT,pack:GT,partition:YT,stratify:XT,tree:VT,treelinks:WT,treemap:QT},Symbol.toStringTag,{value:"Module"})),p_=4278190080;function Gfe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Yfe(e,t,n,i,r){const a=e.width,o=e.height,l=i||r,u=xl(a,o).getContext("2d"),f=xl(a,o).getContext("2d"),d=l&&xl(a,o).getContext("2d");n.forEach(N=>uy(u,N,!1)),uy(f,t,!1),l&&uy(d,t,!0);const g=m_(u,a,o),p=m_(f,a,o),y=l&&m_(d,a,o),v=e.bitmap(),b=l&&e.bitmap();let S,_,w,A,$,M,k,T;for(_=0;_<o;++_)for(S=0;S<a;++S)$=_*a+S,M=g[$]&p_,T=p[$]&p_,k=l&&y[$]&p_,(M||k||T)&&(w=e(S),A=e(_),!r&&(M||T)&&v.set(w,A),l&&(M||k)&&b.set(w,A));return[v,b]}function m_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function uy(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>uy(e,a.items,n))}):pr[i].draw(e,{items:n?t.map(Xfe):t})}function Xfe(e){const t=hb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Io=5,si=31,Dp=32,al=new Uint32Array(Dp+1),ra=new Uint32Array(Dp+1);ra[0]=0;al[0]=~ra[0];for(let e=1;e<=Dp;++e)ra[e]=ra[e-1]<<1|1,al[e]=~ra[e];function Vfe(e,t){const n=new Uint32Array(~~((e*t+Dp)/Dp));function i(a,o){n[a]|=o}function r(a,o){n[a]&=o}return{array:n,get:(a,o)=>{const l=o*e+a;return n[l>>>Io]&1<<(l&si)},set:(a,o)=>{const l=o*e+a;i(l>>>Io,1<<(l&si))},clear:(a,o)=>{const l=o*e+a;r(l>>>Io,~(1<<(l&si)))},getRange:(a,o,l,u)=>{let f=u,d,g,p,y;for(;f>=o;--f)if(d=f*e+a,g=f*e+l,p=d>>>Io,y=g>>>Io,p===y){if(n[p]&al[d&si]&ra[(g&si)+1])return!0}else{if(n[p]&al[d&si]||n[y]&ra[(g&si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,o,l,u)=>{let f,d,g,p,y;for(;o<=u;++o)if(f=o*e+a,d=o*e+l,g=f>>>Io,p=d>>>Io,g===p)i(g,al[f&si]&ra[(d&si)+1]);else for(i(g,al[f&si]),i(p,ra[(d&si)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,o,l,u)=>{let f,d,g,p,y;for(;o<=u;++o)if(f=o*e+a,d=o*e+l,g=f>>>Io,p=d>>>Io,g===p)r(g,ra[f&si]|al[(d&si)+1]);else for(r(g,ra[f&si]),r(p,al[(d&si)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,o,l,u)=>a<0||o<0||u>=t||l>=e}}function Wfe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),o=l=>~~((l+n)/i);return o.invert=l=>l*i-n,o.bitmap=()=>Vfe(r,a),o.ratio=i,o.padding=n,o.width=e,o.height=t,o}function Qfe(e,t,n,i){const r=e.width,a=e.height;return function(o){const l=o.datum.datum.items[i].items,u=l.length,f=o.datum.fontSize,d=lr.width(o.datum,o.datum.text);let g=0,p,y,v,b,S,_,w;for(let A=0;A<u;++A)p=l[A].x,v=l[A].y,y=l[A].x2===void 0?p:l[A].x2,b=l[A].y2===void 0?v:l[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=g&&(g=w,o.x=S,o.y=_);return S=d/2,_=f/2,p=o.x-S,y=o.x+S,v=o.y-_,b=o.y+_,o.align="center",p<0&&y<=r?o.align="left":0<=p&&r<y&&(o.align="right"),o.baseline="middle",v<0&&b<=a?o.baseline="top":0<=v&&a<b&&(o.baseline="bottom"),!0}}function $v(e,t,n,i,r,a){let o=n/2;return e-o<0||e+o>r||t-(o=i/2)<0||t+o>a}function pl(e,t,n,i,r,a,o,l){const u=r*a/(i*2),f=e(t-u),d=e(t+u),g=e(n-(a=a/2)),p=e(n+a);return o.outOfBounds(f,g,d,p)||o.getRange(f,g,d,p)||l&&l.getRange(f,g,d,p)}function Kfe(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1];function u(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let S=g,_=a,w;if(!$v(v,b,p,y,r,a)&&!pl(e,v,b,y,p,S,o,l)&&!pl(e,v,b,y,p,y,o,null)){for(;_-S>=1;)w=(S+_)/2,pl(e,v,b,y,p,w,o,l)?_=w:S=w;if(S>g)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=lr.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,$,M,k,T,N,z,B,j,K,Y,q,F,R,I,X;for(let Z=0;Z<g;++Z){for(w=d[Z].x,$=d[Z].y,A=d[Z].x2===void 0?w:d[Z].x2,M=d[Z].y2===void 0?$:d[Z].y2,w>A&&(X=w,w=A,A=X),$>M&&(X=$,$=M,M=X),B=e(w),K=e(A),j=~~((B+K)/2),Y=e($),F=e(M),q=~~((Y+F)/2),N=j;N>=B;--N)for(z=q;z>=Y;--z)I=u(N,z,v,y,p),I&&([f.x,f.y,v,b]=I);for(N=j;N<=K;++N)for(z=q;z<=F;++z)I=u(N,z,v,y,p),I&&([f.x,f.y,v,b]=I);!b&&!n&&(R=Math.abs(A-w+M-$),k=(w+A)/2,T=($+M)/2,R>=_&&!$v(k,T,y,p,r,a)&&!pl(e,k,T,p,y,p,o,null)&&(_=R,f.x=k,f.y=T,S=!0))}return b||S?(k=y/2,T=p/2,o.setRange(e(f.x-k),e(f.y-T),e(f.x+k),e(f.y+T)),f.align="center",f.baseline="middle",!0):!1}}const Zfe=[-1,-1,1,1],Jfe=[-1,1,-1,1];function ede(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1],u=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=lr.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,$,M,k,T,N,z,B,j,K,Y,q;for(let F=0;F<g;++F){for(A=d[F].x,M=d[F].y,$=d[F].x2===void 0?A:d[F].x2,k=d[F].y2===void 0?M:d[F].y2,v.push([e((A+$)/2),e((M+k)/2)]);v.length;)if([z,B]=v.pop(),!(o.get(z,B)||l.get(z,B)||u.get(z,B))){u.set(z,B);for(let R=0;R<4;++R)T=z+Zfe[R],N=B+Jfe[R],u.outOfBounds(T,N,T,N)||v.push([T,N]);if(T=e.invert(z),N=e.invert(B),j=b,K=a,!$v(T,N,y,p,r,a)&&!pl(e,T,N,p,y,j,o,l)&&!pl(e,T,N,p,y,p,o,null)){for(;K-j>=1;)Y=(j+K)/2,pl(e,T,N,p,y,Y,o,l)?K=Y:j=Y;j>b&&(f.x=T,f.y=N,b=j,S=!0)}}!S&&!n&&(q=Math.abs($-A+k-M),T=(A+$)/2,N=(M+k)/2,q>=w&&!$v(T,N,y,p,r,a)&&!pl(e,T,N,p,y,p,o,null)&&(w=q,f.x=T,f.y=N,_=!0))}return S||_?(T=y/2,N=p/2,o.setRange(e(f.x-T),e(f.y-N),e(f.x+T),e(f.y+N)),f.align="center",f.baseline="middle",!0):!1}}const tde=["right","center","left"],nde=["bottom","middle","top"];function ide(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1],u=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,$,M,k,T,N,z,B,j;for(let K=0;K<u;++K){if(y=(n[K]&3)-1,v=(n[K]>>>2&3)-1,b=y===0&&v===0||i[K]<0,S=y&&v?Math.SQRT1_2:1,_=i[K]<0?-1:1,w=d[1+y]+i[K]*y*S,T=d[4+v]+_*g*v/2+i[K]*v*S,$=T-g/2,M=T+g/2,N=e(w),B=e($),j=e(M),!p)if(yz(N,N,B,j,o,l,w,w,$,M,d,b))p=lr.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,N=e(w),z=e(A),yz(N,z,B,j,o,l,w,A,$,M,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?M:$:T,f.align=tde[y*_+1],f.baseline=nde[v*_+1],o.setRange(N,B,z,j),!0}return!1}}function yz(e,t,n,i,r,a,o,l,u,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const y_=0,v_=4,b_=8,x_=0,S_=1,E_=2,rde={"top-left":y_+x_,top:y_+S_,"top-right":y_+E_,left:v_+x_,middle:v_+S_,right:v_+E_,"bottom-left":b_+x_,bottom:b_+S_,"bottom-right":b_+E_},ade={naive:Qfe,"reduced-search":Kfe,floodfill:ede};function ode(e,t,n,i,r,a,o,l,u,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=sde(i,g),y=lde(r,g),v=ude(e[0].datum),b=v==="group"&&e[0].datum.items[u].marktype,S=b==="area",_=cde(v,b,l,u),w=f===null||f===1/0,A=S&&d==="naive";let $=-1,M=-1;const k=e.map(B=>{const j=w?lr.width(B,B.text):void 0;return $=Math.max($,j),M=Math.max(M,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:j}});f=f===null||f===1/0?Math.max($,M)+Math.max(...i):f;const T=Wfe(t[0],t[1],f);let N;if(!A){n&&k.sort((K,Y)=>n(K.datum,Y.datum));let B=!1;for(let K=0;K<y.length&&!B;++K)B=y[K]===5||p[K]<0;const j=(v&&o||S)&&e.map(K=>K.datum);N=a.length||j?Yfe(T,j||[],a,B,S):Gfe(T,o&&k)}const z=S?ade[d](T,N,o,u):ide(T,N,y,p);return k.forEach(B=>B.opacity=+z(B)),k}function sde(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function lde(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=rde[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function ude(e){return e&&e.mark&&e.mark.marktype}function cde(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const o=a.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:a=>{const o=a.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const BA=["x","y","opacity","align","baseline"],mP=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function KT(e){ee.call(this,null,e)}KT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:mP},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:BA.length,default:BA}]};ve(KT,ee,{transform(e,t){function n(a){const o=e[a];return Pe(o)&&t.modified(o.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");const r=e.as||BA;return ode(t.materialize(t.SOURCE).source||[],e.size,e.sort,_e(e.offset==null?1:e.offset),_e(e.anchor||mP),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const o=a.datum;o[r[0]]=a.x,o[r[1]]=a.y,o[r[2]]=a.opacity,o[r[3]]=a.align,o[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const fde=Object.freeze(Object.defineProperty({__proto__:null,label:KT},Symbol.toStringTag,{value:"Module"}));function yP(e,t){var n=[],i=function(d){return d(l)},r,a,o,l,u,f;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)l=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(l);return n}function ZT(e){ee.call(this,null,e)}ZT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ve(ZT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=yP(i,e.groupby),a=(e.groupby||[]).map(Wt),o=a.length,l=e.as||[Wt(e.x),Wt(e.y)],u=[];r.forEach(f=>{A7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<o;++p)g[a[p]]=f.dims[p];g[l[0]]=d[0],g[l[1]]=d[1],u.push(ht(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const IA={constant:N3,linear:O3,log:S7,exp:E7,pow:_7,quad:z3,poly:w7},dde=(e,t)=>e==="poly"?t:e==="quad"?2:1;function JT(e){ee.call(this,null,e)}JT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(IA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ve(JT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=yP(i,e.groupby),a=(e.groupby||[]).map(Wt),o=e.method||"linear",l=e.order==null?3:e.order,u=dde(o,l),f=e.as||[Wt(e.x),Wt(e.y)],d=IA[o],g=[];let p=e.extent;we(IA,o)||te("Invalid regression method: "+o),p!=null&&o==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,l);if(e.params){g.push(ht({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Ka(y,e.x),_=w=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[f[0]]=w[0],A[f[1]]=w[1],g.push(ht(A))};o==="linear"||o==="constant"?S.forEach(w=>_([w,b.predict(w)])):xb(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const hde=Object.freeze(Object.defineProperty({__proto__:null,loess:ZT,regression:JT},Symbol.toStringTag,{value:"Module"})),is=11102230246251565e-32,Xn=134217729,gde=(3+8*is)*is;function __(e,t,n,i,r){let a,o,l,u,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(o=f+a,l=a-(o-f),f=t[++g]):(o=d+a,l=a-(o-d),d=i[++p]),a=o,l!==0&&(r[y++]=l);g<e&&p<n;)d>f==d>-f?(o=a+f,u=o-a,l=a-(o-u)+(f-u),f=t[++g]):(o=a+d,u=o-a,l=a-(o-u)+(d-u),d=i[++p]),a=o,l!==0&&(r[y++]=l);for(;g<e;)o=a+f,u=o-a,l=a-(o-u)+(f-u),f=t[++g],a=o,l!==0&&(r[y++]=l);for(;p<n;)o=a+d,u=o-a,l=a-(o-u)+(d-u),d=i[++p],a=o,l!==0&&(r[y++]=l);return(a!==0||y===0)&&(r[y++]=a),y}function pde(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function bm(e){return new Float64Array(e)}const mde=(3+16*is)*is,yde=(2+12*is)*is,vde=(9+64*is)*is*is,Mf=bm(4),vz=bm(8),bz=bm(12),xz=bm(16),li=bm(4);function bde(e,t,n,i,r,a,o){let l,u,f,d,g,p,y,v,b,S,_,w,A,$,M,k,T,N;const z=e-r,B=n-r,j=t-a,K=i-a;$=z*K,p=Xn*z,y=p-(p-z),v=z-y,p=Xn*K,b=p-(p-K),S=K-b,M=v*S-($-y*b-v*b-y*S),k=j*B,p=Xn*j,y=p-(p-j),v=j-y,p=Xn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,Mf[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,Mf[1]=A-(_+g)+(g-k),N=w+_,g=N-w,Mf[2]=w-(N-g)+(_-g),Mf[3]=N;let Y=pde(4,Mf),q=yde*o;if(Y>=q||-Y>=q||(g=e-z,l=e-(z+g)+(g-r),g=n-B,f=n-(B+g)+(g-r),g=t-j,u=t-(j+g)+(g-a),g=i-K,d=i-(K+g)+(g-a),l===0&&u===0&&f===0&&d===0)||(q=vde*o+gde*Math.abs(Y),Y+=z*d+K*l-(j*f+B*u),Y>=q||-Y>=q))return Y;$=l*K,p=Xn*l,y=p-(p-l),v=l-y,p=Xn*K,b=p-(p-K),S=K-b,M=v*S-($-y*b-v*b-y*S),k=u*B,p=Xn*u,y=p-(p-u),v=u-y,p=Xn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,li[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,li[1]=A-(_+g)+(g-k),N=w+_,g=N-w,li[2]=w-(N-g)+(_-g),li[3]=N;const F=__(4,Mf,4,li,vz);$=z*d,p=Xn*z,y=p-(p-z),v=z-y,p=Xn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=j*f,p=Xn*j,y=p-(p-j),v=j-y,p=Xn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,li[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,li[1]=A-(_+g)+(g-k),N=w+_,g=N-w,li[2]=w-(N-g)+(_-g),li[3]=N;const R=__(F,vz,4,li,bz);$=l*d,p=Xn*l,y=p-(p-l),v=l-y,p=Xn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=u*f,p=Xn*u,y=p-(p-u),v=u-y,p=Xn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,li[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,li[1]=A-(_+g)+(g-k),N=w+_,g=N-w,li[2]=w-(N-g)+(_-g),li[3]=N;const I=__(R,bz,4,li,xz);return xz[I-1]}function $1(e,t,n,i,r,a){const o=(t-a)*(n-r),l=(e-r)*(i-a),u=o-l,f=Math.abs(o+l);return Math.abs(u)>=mde*f?u:-bde(e,t,n,i,r,a,f)}const Sz=Math.pow(2,-52),T1=new Uint32Array(512);class Tv{static from(t,n=wde,i=Ade){const r=t.length,a=new Float64Array(r*2);for(let o=0;o<r;o++){const l=t[o];a[2*o]=n(l),a[2*o+1]=i(l)}return new Tv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,o=t.length>>1;let l=1/0,u=1/0,f=-1/0,d=-1/0;for(let z=0;z<o;z++){const B=t[2*z],j=t[2*z+1];B<l&&(l=B),j<u&&(u=j),B>f&&(f=B),j>d&&(d=j),this._ids[z]=z}const g=(l+f)/2,p=(u+d)/2;let y,v,b;for(let z=0,B=1/0;z<o;z++){const j=w_(g,p,t[2*z],t[2*z+1]);j<B&&(y=z,B=j)}const S=t[2*y],_=t[2*y+1];for(let z=0,B=1/0;z<o;z++){if(z===y)continue;const j=w_(S,_,t[2*z],t[2*z+1]);j<B&&j>0&&(v=z,B=j)}let w=t[2*v],A=t[2*v+1],$=1/0;for(let z=0;z<o;z++){if(z===y||z===v)continue;const B=Ede(S,_,w,A,t[2*z],t[2*z+1]);B<$&&(b=z,$=B)}let M=t[2*b],k=t[2*b+1];if($===1/0){for(let j=0;j<o;j++)this._dists[j]=t[2*j]-t[0]||t[2*j+1]-t[1];Pf(this._ids,this._dists,0,o-1);const z=new Uint32Array(o);let B=0;for(let j=0,K=-1/0;j<o;j++){const Y=this._ids[j],q=this._dists[Y];q>K&&(z[B++]=Y,K=q)}this.hull=z.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if($1(S,_,w,A,M,k)<0){const z=v,B=w,j=A;v=b,w=M,A=k,b=z,M=B,k=j}const T=_de(S,_,w,A,M,k);this._cx=T.x,this._cy=T.y;for(let z=0;z<o;z++)this._dists[z]=w_(t[2*z],t[2*z+1],T.x,T.y);Pf(this._ids,this._dists,0,o-1),this._hullStart=y;let N=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(M,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let z=0,B,j;z<this._ids.length;z++){const K=this._ids[z],Y=t[2*K],q=t[2*K+1];if(z>0&&Math.abs(Y-B)<=Sz&&Math.abs(q-j)<=Sz||(B=Y,j=q,K===y||K===v||K===b))continue;let F=0;for(let ce=0,L=this._hashKey(Y,q);ce<this._hashSize&&(F=a[(L+ce)%this._hashSize],!(F!==-1&&F!==i[F]));ce++);F=n[F];let R=F,I;for(;I=i[R],$1(Y,q,t[2*R],t[2*R+1],t[2*I],t[2*I+1])>=0;)if(R=I,R===F){R=-1;break}if(R===-1)continue;let X=this._addTriangle(R,K,i[R],-1,-1,r[R]);r[K]=this._legalize(X+2),r[R]=X,N++;let Z=i[R];for(;I=i[Z],$1(Y,q,t[2*Z],t[2*Z+1],t[2*I],t[2*I+1])<0;)X=this._addTriangle(Z,K,I,r[K],-1,r[Z]),r[K]=this._legalize(X+2),i[Z]=Z,N--,Z=I;if(R===F)for(;I=n[R],$1(Y,q,t[2*I],t[2*I+1],t[2*R],t[2*R+1])<0;)X=this._addTriangle(I,K,R,-1,r[R],r[I]),this._legalize(X+2),r[I]=X,i[R]=R,N--,R=I;this._hullStart=n[K]=R,i[R]=n[Z]=K,i[K]=Z,a[this._hashKey(Y,q)]=K,a[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(N);for(let z=0,B=this._hullStart;z<N;z++)this.hull[z]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(xde(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,o=0;for(;;){const l=i[t],u=t-t%3;if(o=u+(t+2)%3,l===-1){if(a===0)break;t=T1[--a];continue}const f=l-l%3,d=u+(t+1)%3,g=f+(l+2)%3,p=n[o],y=n[t],v=n[d],b=n[g];if(Sde(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[l]=p;const _=i[g];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===g){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(l,i[o]),this._link(o,g);const w=f+(l+1)%3;a<T1.length&&(T1[a++]=w)}else{if(a===0)break;t=T1[--a]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,o){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,a),this._link(l+2,o),this.trianglesLen+=3,l}}function xde(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function w_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Sde(e,t,n,i,r,a,o,l){const u=e-o,f=t-l,d=n-o,g=i-l,p=r-o,y=a-l,v=u*u+f*f,b=d*d+g*g,S=p*p+y*y;return u*(g*S-b*y)-f*(d*S-b*p)+v*(d*y-g*p)<0}function Ede(e,t,n,i,r,a){const o=n-e,l=i-t,u=r-e,f=a-t,d=o*o+l*l,g=u*u+f*f,p=.5/(o*f-l*u),y=(f*d-l*g)*p,v=(o*g-u*d)*p;return y*y+v*v}function _de(e,t,n,i,r,a){const o=n-e,l=i-t,u=r-e,f=a-t,d=o*o+l*l,g=u*u+f*f,p=.5/(o*f-l*u),y=e+(f*d-l*g)*p,v=t+(o*g-u*d)*p;return{x:y,y:v}}function Pf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],o=t[a];let l=r-1;for(;l>=n&&t[e[l]]>o;)e[l+1]=e[l--];e[l+1]=a}else{const r=n+i>>1;let a=n+1,o=i;xg(e,r,a),t[e[n]]>t[e[i]]&&xg(e,n,i),t[e[a]]>t[e[i]]&&xg(e,a,i),t[e[n]]>t[e[a]]&&xg(e,n,a);const l=e[a],u=t[l];for(;;){do a++;while(t[e[a]]<u);do o--;while(t[e[o]]>u);if(o<a)break;xg(e,a,o)}e[n+1]=e[o],e[o]=l,i-a+1>=o-n?(Pf(e,t,a,i),Pf(e,t,n,o-1)):(Pf(e,t,n,o-1),Pf(e,t,a,i))}}function xg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function wde(e){return e[0]}function Ade(e){return e[1]}const Ez=1e-6;class Bu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>Ez||Math.abs(this._y1-a)>Ez)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class PA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Cde=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,o;const l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const $=i[b]*2,M=i[b+1]*2,k=i[b+2]*2,T=t[$],N=t[$+1],z=t[M],B=t[M+1],j=t[k],K=t[k+1],Y=z-T,q=B-N,F=j-T,R=K-N,I=(Y*R-q*F)*2;if(Math.abs(I)<1e-9){if(a===void 0){a=o=0;for(const Z of n)a+=t[Z*2],o+=t[Z*2+1];a/=n.length,o/=n.length}const X=1e9*Math.sign((a-T)*R-(o-N)*F);w=(T+j)/2-X*R,A=(N+K)/2+X*F}else{const X=1/I,Z=Y*Y+q*q,ce=F*F+R*R;w=T+(R*Z-q*ce)*X,A=N+(Y*ce-F*Z)*X}l[S]=w,l[S+1]=A}let u=n[n.length-1],f,d=u*4,g,p=t[2*u],y,v=t[2*u+1];r.fill(0);for(let b=0;b<n.length;++b)u=n[b],f=d,g=p,y=v,d=u*4,p=t[2*u],v=t[2*u+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new Bu:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:o,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=o[y],S=o[y+1],_=o[v],w=o[v+1];this._renderSegment(b,S,_,w,t)}let u,f=a[a.length-1];for(let d=0;d<a.length;++d){u=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=o[g],y=o[g+1],v=u*4,b=this._project(p,y,l[v+2],l[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Bu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Bu:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new PA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let o;const l=this._regioncode(t,n),u=this._regioncode(i,r);l===0&&u===0?(a.moveTo(t,n),a.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,l,u))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,o=n.length;a<o;a+=2)for(let l=0,u=r.length;l<u;l+=2)if(n[a]===r[l]&&n[a+1]===r[l+1]&&n[(a+2)%o]===r[(l+u-2)%u]&&n[(a+3)%o]===r[(l+u-1)%u]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,o=i[t];if(o===-1)return null;const l=[];let u=o;do{const f=Math.floor(u/3);if(l.push(n[f*2],n[f*2+1]),u=u%3===2?u-2:u+1,a[u]!==t)break;u=r[u]}while(u!==o&&u!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,o,l=n[i-2],u=n[i-1],f,d=this._regioncode(l,u),g,p=0;for(let y=0;y<i;y+=2)if(a=l,o=u,l=n[y],u=n[y+1],f=d,d=this._regioncode(l,u),f===0&&d===0)g=p,p=0,r?r.push(l,u):r=[l,u];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,o,l,u,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(l,u,a,o,d,f))===null)continue;[_,w,b,S]=v,g=p,p=this._edgecode(b,S),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,S):r=[b,S]}g=p,p=this._edgecode(_,w),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,o){const l=a<o;for(l&&([t,n,i,r,a,o]=[i,r,t,n,o,a]);;){if(a===0&&o===0)return l?[i,r,t,n]:[t,n,i,r];if(a&o)return null;let u,f,d=a||o;d&8?(u=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(u=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),u=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),u=this.xmin),a?(t=u,n=f,a=this._regioncode(t,n)):(i=u,r=f,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,o){let l=Array.from(n),u;if((u=this._project(l[0],l[1],i,r))&&l.unshift(u[0],u[1]),(u=this._project(l[l.length-2],l[l.length-1],a,o))&&l.push(u[0],u[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,p=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=p,p=this._edgecode(l[f],l[f+1]),g&&p&&(f=this._edge(t,g,p,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,i,r,a){for(;n!==i;){let o,l;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,l=this.ymin;break}(r[a]!==o||r[a+1]!==l)&&this.contains(t,o,l)&&(r.splice(a,0,o,l),a+=2)}return a}_project(t,n,i,r){let a=1/0,o,l,u;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<a&&(u=this.ymin,l=t+(a=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<a&&(u=this.ymax,l=t+(a=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<a&&(l=this.xmax,u=n+(a=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<a&&(l=this.xmin,u=n+(a=o)*r)}return[l,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const $de=2*Math.PI,kf=Math.pow;function Tde(e){return e[0]}function Mde(e){return e[1]}function kde(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Dde(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class eM{static from(t,n=Tde,i=Mde,r){return new eM("length"in t?Rde(t,n,i,r):Float64Array.from(Nde(t,n,i,r)))}constructor(t){this._delaunator=new Tv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&kde(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const u=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*u],n[2*u+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Dde(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new Tv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let u=0,f=i.length;u<f;++u){const d=a[u%3===2?u-2:u+1];(i[u]===-1||o[d]===-1)&&(o[d]=u)}for(let u=0,f=r.length;u<f;++u)l[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Cde(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const u=n[t];if(u===-1)return;let f=u,d=-1;do{if(yield d=o[f],f=f%3===2?f-2:f+1,o[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==u)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:o,halfedges:l,triangles:u,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=kf(n-f[t*2],2)+kf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=u[y];const b=kf(n-f[v*2],2)+kf(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,u[y]!==t)break;if(y=l[y],y===-1){if(y=a[(o[t]+1)%a.length],y!==v&&kf(n-f[y*2],2)+kf(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Bu:void 0,{points:i,halfedges:r,triangles:a}=this;for(let o=0,l=r.length;o<l;++o){const u=r[o];if(u<o)continue;const f=a[o]*2,d=a[u]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Bu:void 0,{points:r}=this;for(let a=0,o=r.length;a<o;a+=2){const l=r[a],u=r[a+1];t.moveTo(l+n,u),t.arc(l,u,n,0,$de)}return i&&i.value()}renderHull(t){const n=t==null?t=new Bu:void 0,{hull:i,points:r}=this,a=i[0]*2,o=i.length;t.moveTo(r[a],r[a+1]);for(let l=1;l<o;++l){const u=2*i[l];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new PA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Bu:void 0,{points:r,triangles:a}=this,o=a[t*=3]*2,l=a[t+1]*2,u=a[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.lineTo(r[u],r[u+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new PA;return this.renderTriangle(t,n),n.value()}}function Rde(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let o=0;o<r;++o){const l=e[o];a[o*2]=t.call(i,l,o,e),a[o*2+1]=n.call(i,l,o,e)}return a}function*Nde(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function tM(e){ee.call(this,null,e)}tM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Ode=[-1e5,-1e5,1e5,1e5];ve(tM,ee,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Ode;const a=this.value=eM.from(i,e.x,e.y).voronoi(r);for(let o=0,l=i.length;o<l;++o){const u=a.cellPolygon(o);i[o][n]=u&&!Fde(u)?zde(u):null}return t.reflow(e.modified()).modifies(n)}});function zde(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Fde(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Lde=Object.freeze(Object.defineProperty({__proto__:null,voronoi:tM},Symbol.toStringTag,{value:"Module"}));var A_=Math.PI/180,Kg=64,cy=2048;function Ude(){var e=[256,256],t,n,i,r,a,o,l,u=vP,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(xl()),b=Hde((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],$=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:o(k),size:~~(i(k)+1e-14),padding:l(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,T)=>T.size-k.size);++w<_;){var M=$[w];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,jde(v,M,$,w),M.hasText&&y(b,M,S)&&(A.push(M),S?Ide(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Kg<<5)/b,v.height=cy/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),$=u(e),M=d()<.5?1:-1,k=-M,T,N,z;(T=$(k+=M))&&(N=~~T[0],z=~~T[1],!(Math.min(Math.abs(N),Math.abs(z))>=A));)if(b.x=_+N,b.y=w+z,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!Bde(b,v,e[0]))&&(!S||Pde(b,S))){for(var B=b.sprite,j=b.width>>5,K=e[0]>>5,Y=b.x-(j<<4),q=Y&127,F=32-q,R=b.y1-b.y0,I=(b.y+b.y0)*K+(Y>>5),X,Z=0;Z<R;Z++){X=0;for(var ce=0;ce<=j;ce++)v[I+ce]|=X<<F|(ce<j?(X=B[Z*j+ce])>>>q:0);I+=K}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=vu(v),g):n},g.fontStyle=function(v){return arguments.length?(r=vu(v),g):r},g.fontWeight=function(v){return arguments.length?(a=vu(v),g):a},g.rotate=function(v){return arguments.length?(o=vu(v),g):o},g.text=function(v){return arguments.length?(t=vu(v),g):t},g.spiral=function(v){return arguments.length?(u=Gde[v]||v,g):u},g.fontSize=function(v){return arguments.length?(i=vu(v),g):i},g.padding=function(v){return arguments.length?(l=vu(v),g):l},g.random=function(v){return arguments.length?(d=v,g):d},g}function jde(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Kg<<5)/a,cy/a);var o=0,l=0,u=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*A_),S=Math.cos(t.rotate*A_),_=d*S,w=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(_+$),Math.abs(_-$))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>u&&(u=p),o+d>=Kg<<5&&(o=0,l+=u,u=0),l+p>=cy)break;r.translate((o+(d>>1))/a,(l+(p>>1))/a),t.rotate&&r.rotate(t.rotate*A_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=o,t.yoff=l,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=d}for(var M=r.getImageData(0,0,(Kg<<5)/a,cy/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)k[y]=0;if(o=t.xoff,o==null)return;l=t.yoff;var T=0,N=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var z=g*v+(y>>5),B=M[(l+v)*(Kg<<5)+(o+y)<<2]?1<<31-y%32:0;k[z]|=B,T|=B}T?N=v:(t.y0++,p--,v--,l++)}t.y1=t.y0+N,t.sprite=k.slice(0,(t.y1-t.y0)*g)}}}function Bde(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),o=a&127,l=32-o,u=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<u;g++){d=0;for(var p=0;p<=r;p++)if((d<<l|(p<r?(d=i[g*r+p])>>>o:0))&t[f+p])return!0;f+=n}return!1}function Ide(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Pde(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function vP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qde(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Hde(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function vu(e){return typeof e=="function"?e:function(){return e}}var Gde={archimedean:vP,rectangular:qde};const bP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Yde=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nM(e){ee.call(this,Ude(),e)}nM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:bP}]};ve(nM,ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Pe(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Yde.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,o=e.as||bP;let l=e.fontSize||14,u;if(Pe(l)?u=e.fontSizeRange:l=ai(l),u){const v=l,b=ft("sqrt")().domain(Ka(r,v)).range(u);l=S=>b(v(S))}r.forEach(v=>{v[o[0]]=NaN,v[o[1]]=NaN,v[o[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(l).random(Br).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[o[0]]=b.x+g,S[o[1]]=b.y+p,S[o[2]]=b.font,S[o[3]]=b.size,S[o[4]]=b.style,S[o[5]]=b.weight,S[o[6]]=b.rotate;return t.reflow(i).modifies(o)}});const Xde=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:nM},Symbol.toStringTag,{value:"Module"})),Vde=e=>new Uint8Array(e),Wde=e=>new Uint16Array(e),up=e=>new Uint32Array(e);function Qde(){let e=8,t=[],n=up(0),i=M1(0,e),r=M1(0,e);return{data:()=>t,seen:()=>n=Kde(n,t.length),add(a){for(let o=0,l=t.length,u=a.length,f;o<u;++o)f=a[o],f._index=l++,t.push(f)},remove(a,o){const l=t.length,u=Array(l-a),f=t;let d,g,p;for(g=0;!o[g]&&g<l;++g)u[g]=t[g],f[g]=g;for(p=g;g<l;++g)d=t[g],o[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],u[p]=d,d._index=p++),i[g]=0;return t=u,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,o){i[a]|=o},clear(a,o){i[a]&=~o},resize(a,o){const l=i.length;(a>l||o>e)&&(e=Math.max(o,e),i=M1(a,e,i),r=M1(a,e))}}}function Kde(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function M1(e,t,n){const i=(t<257?Vde:t<65537?Wde:up)(e);return n&&i.set(n),i}function _z(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const o=this,l=o.bisect(o.range,r.value),u=r.index,f=l[0],d=l[1],g=u.length;let p;for(p=0;p<f;++p)a[u[p]]|=i;for(p=d;p<g;++p)a[u[p]]|=i;return o}}}function wz(){let e=up(0),t=[],n=0;function i(l,u,f){if(!u.length)return[];const d=n,g=u.length,p=up(g);let y=Array(g),v,b,S;for(S=0;S<g;++S)y[S]=l(u[S]),p[S]=S;if(y=Zde(y,p),d)v=t,b=e,t=Array(d+g),e=up(d+g),Jde(f,v,b,d,y,p,g,t,e);else{if(f>0)for(S=0;S<g;++S)p[S]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(l,u){const f=n;let d,g,p;for(g=0;!u[e[g]]&&g<f;++g);for(p=g;g<f;++g)u[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-l}function a(l){for(let u=0,f=n;u<f;++u)e[u]=l[e[u]]}function o(l,u){let f;return u?f=u.length:(u=t,f=n),[rZ(u,l[0],0,f),_l(u,l[1],0,f)]}return{insert:i,remove:r,bisect:o,reindex:a,index:()=>e,size:()=>n}}function Zde(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),sZ(e,t)}function Jde(e,t,n,i,r,a,o,l,u){let f=0,d=0,g;for(g=0;f<i&&d<o;++g)t[f]<r[d]?(l[g]=t[f],u[g]=n[f++]):(l[g]=r[d],u[g]=a[d++]+e);for(;f<i;++f,++g)l[g]=t[f],u[g]=n[f];for(;d<o;++d,++g)l[g]=r[d],u[g]=a[d]+e}function iM(e){ee.call(this,Qde(),e),this._indices=null,this._dims=null}iM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ve(iM,ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],o=i.length;let l=0,u,f;for(;l<o;++l)u=n[l].fname,f=r[u]||(r[u]=wz()),a.push(_z(f,l,i[l]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,o=this._dims,l=this.value,u=l.curr(),f=l.prev(),d=l.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,$,M,k,T;if(f.set(u),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&l.add(t.add),t.mod.length)for($={},w=t.mod,M=0,k=w.length;M<k;++M)$[w[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!o[M]||e.modified("fields",M)||t.modified(T.fields))&&(_=T.fname,(b=v[_])||(a[_]=S=wz(),v[_]=b=S.insert(T,t.source,0)),o[M]=_z(S,M,r[M]).onAdd(b,u));for(M=0,k=l.data().length;M<k;++M)A[M]||(f[M]!==u[M]?g.push(M):$[M]&&u[M]!==d&&p.push(M));return l.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,o=this._indices,l=e.fields,u={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<g;++y)v=l[y].fname,b=u[v]||(u[v]=o[v].insert(l[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),o=e.mod;let l,u,f;for(l=0,u=o.length;l<u;++l)f=o[l]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),o=r.prev(),l=r.all(),u={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,u[y]=1,o[y]=v=a[y],a[y]=l,v!==l&&f.push(y);for(y in i)i[y].remove(p,u);return this.reindex(t,p,u),u},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const o in i)i[o].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,o=i.length;let l=0,u,f;for(n.filters=0,f=0;f<o;++f)e.modified("query",f)&&(u=f,++l);if(l===1)l=i[u].one,this.incrementOne(i[u],r[u],n.add,n.rem);else for(f=0,l=0;f<o;++f)e.modified("query",f)&&(l|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return l},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),o=r.curr(),l=r.prev(),u=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(g<y)for(S=g,_=Math.min(y,p);S<_;++S)w=u[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;else if(g>y)for(S=y,_=Math.min(g,v);S<_;++S)w=u[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;if(p>v)for(S=Math.max(g,v),_=p;S<_;++S)w=u[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=u[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),o=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],g=l[0],p=l[1],y=e.one;let v,b,S;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)S=o[v],a[S]^=y,n.push(S);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)S=o[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=o[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)S=o[v],a[S]^=y,i.push(S);e.range=t.slice()}});function rM(e){ee.call(this,null,e)}rM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ve(rM,ee,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),o=i.data(),l=i.curr(),u=i.prev(),f=d=>l[d]&n?null:o[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=l[d]&n;return!g&&g^u[d]&n?o[d]:null}),a.filter(a.REM,d=>{const g=l[d]&n;return g&&!(g^(g^u[d]&n))?o[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(l[d]&n)===r?o[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const ehe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:iM,resolvefilter:rM},Symbol.toStringTag,{value:"Module"})),the="RawCode",ac="Literal",nhe="Property",ihe="Identifier",rhe="ArrayExpression",ahe="BinaryExpression",xP="CallExpression",ohe="ConditionalExpression",she="LogicalExpression",lhe="MemberExpression",uhe="ObjectExpression",che="UnaryExpression";function Sa(e){this.type=e}Sa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=fhe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function fhe(e){switch(e.type){case rhe:return e.elements;case ahe:case she:return[e.left,e.right];case xP:return[e.callee].concat(e.arguments);case ohe:return[e.test,e.consequent,e.alternate];case lhe:return[e.object,e.property];case uhe:return e.properties;case nhe:return[e.key,e.value];case che:return[e.argument];case ihe:case ac:case the:default:return[]}}var ho,Ce,ie,ni,xt,Jb=1,xm=2,oc=3,ql=4,ex=5,Cc=6,Ri=7,Sm=8,dhe=9;ho={};ho[Jb]="Boolean";ho[xm]="<end>";ho[oc]="Identifier";ho[ql]="Keyword";ho[ex]="Null";ho[Cc]="Numeric";ho[Ri]="Punctuator";ho[Sm]="String";ho[dhe]="RegularExpression";var hhe="ArrayExpression",ghe="BinaryExpression",phe="CallExpression",mhe="ConditionalExpression",SP="Identifier",yhe="Literal",vhe="LogicalExpression",bhe="MemberExpression",xhe="ObjectExpression",She="Property",Ehe="UnaryExpression",wn="Unexpected token %0",_he="Unexpected number",whe="Unexpected string",Ahe="Unexpected identifier",Che="Unexpected reserved word",$he="Unexpected end of input",qA="Invalid regular expression",C_="Invalid regular expression: missing /",EP="Octal literals are not allowed in strict mode.",The="Duplicate data property in object literal not allowed in strict mode",In="ILLEGAL",Rp="Disabled.",Mhe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),khe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function tx(e,t){if(!e)throw new Error("ASSERT: "+t)}function Go(e){return e>=48&&e<=57}function aM(e){return"0123456789abcdefABCDEF".includes(e)}function cp(e){return"01234567".includes(e)}function Dhe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Np(e){return e===10||e===13||e===8232||e===8233}function Em(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Mhe.test(String.fromCharCode(e))}function Mv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&khe.test(String.fromCharCode(e))}const Rhe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function _P(){for(;ie<ni;){const e=Ce.charCodeAt(ie);if(Dhe(e)||Np(e))++ie;else break}}function HA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ie<ni&&aM(Ce[ie])?(i=Ce[ie++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):lt({},wn,In);return String.fromCharCode(r)}function Nhe(){var e,t,n,i;for(e=Ce[ie],t=0,e==="}"&&lt({},wn,In);ie<ni&&(e=Ce[ie++],!!aM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&lt({},wn,In),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function wP(){var e,t;for(e=Ce.charCodeAt(ie++),t=String.fromCharCode(e),e===92&&(Ce.charCodeAt(ie)!==117&&lt({},wn,In),++ie,e=HA("u"),(!e||e==="\\"||!Em(e.charCodeAt(0)))&&lt({},wn,In),t=e);ie<ni&&(e=Ce.charCodeAt(ie),!!Mv(e));)++ie,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ce.charCodeAt(ie)!==117&&lt({},wn,In),++ie,e=HA("u"),(!e||e==="\\"||!Mv(e.charCodeAt(0)))&&lt({},wn,In),t+=e);return t}function Ohe(){var e,t;for(e=ie++;ie<ni;){if(t=Ce.charCodeAt(ie),t===92)return ie=e,wP();if(Mv(t))++ie;else break}return Ce.slice(e,ie)}function zhe(){var e,t,n;return e=ie,t=Ce.charCodeAt(ie)===92?wP():Ohe(),t.length===1?n=oc:Rhe.hasOwnProperty(t)?n=ql:t==="null"?n=ex:t==="true"||t==="false"?n=Jb:n=oc,{type:n,value:t,start:e,end:ie}}function $_(){var e=ie,t=Ce.charCodeAt(ie),n,i=Ce[ie],r,a,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ie,{type:Ri,value:String.fromCharCode(t),start:e,end:ie};default:if(n=Ce.charCodeAt(ie+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ie+=2,{type:Ri,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ie};case 33:case 61:return ie+=2,Ce.charCodeAt(ie)===61&&++ie,{type:Ri,value:Ce.slice(e,ie),start:e,end:ie}}}if(o=Ce.substr(ie,4),o===">>>=")return ie+=4,{type:Ri,value:o,start:e,end:ie};if(a=o.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ie+=3,{type:Ri,value:a,start:e,end:ie};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ie+=2,{type:Ri,value:r,start:e,end:ie};if(r==="//"&&lt({},wn,In),"<>=!+-*%&|^/".includes(i))return++ie,{type:Ri,value:i,start:e,end:ie};lt({},wn,In)}function Fhe(e){let t="";for(;ie<ni&&aM(Ce[ie]);)t+=Ce[ie++];return t.length===0&&lt({},wn,In),Em(Ce.charCodeAt(ie))&&lt({},wn,In),{type:Cc,value:parseInt("0x"+t,16),start:e,end:ie}}function Lhe(e){let t="0"+Ce[ie++];for(;ie<ni&&cp(Ce[ie]);)t+=Ce[ie++];return(Em(Ce.charCodeAt(ie))||Go(Ce.charCodeAt(ie)))&&lt({},wn,In),{type:Cc,value:parseInt(t,8),octal:!0,start:e,end:ie}}function Az(){var e,t,n;if(n=Ce[ie],tx(Go(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ie,e="",n!=="."){if(e=Ce[ie++],n=Ce[ie],e==="0"){if(n==="x"||n==="X")return++ie,Fhe(t);if(cp(n))return Lhe(t);n&&Go(n.charCodeAt(0))&&lt({},wn,In)}for(;Go(Ce.charCodeAt(ie));)e+=Ce[ie++];n=Ce[ie]}if(n==="."){for(e+=Ce[ie++];Go(Ce.charCodeAt(ie));)e+=Ce[ie++];n=Ce[ie]}if(n==="e"||n==="E")if(e+=Ce[ie++],n=Ce[ie],(n==="+"||n==="-")&&(e+=Ce[ie++]),Go(Ce.charCodeAt(ie)))for(;Go(Ce.charCodeAt(ie));)e+=Ce[ie++];else lt({},wn,In);return Em(Ce.charCodeAt(ie))&&lt({},wn,In),{type:Cc,value:parseFloat(e),start:t,end:ie}}function Uhe(){var e="",t,n,i,r,a=!1;for(t=Ce[ie],tx(t==="'"||t==='"',"String literal must starts with a quote"),n=ie,++ie;ie<ni;)if(i=Ce[ie++],i===t){t="";break}else if(i==="\\")if(i=Ce[ie++],!i||!Np(i.charCodeAt(0)))switch(i){case"u":case"x":Ce[ie]==="{"?(++ie,e+=Nhe()):e+=HA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:cp(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ie<ni&&cp(Ce[ie])&&(a=!0,r=r*8+"01234567".indexOf(Ce[ie++]),"0123".includes(i)&&ie<ni&&cp(Ce[ie])&&(r=r*8+"01234567".indexOf(Ce[ie++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ce[ie]===`
`&&++ie;else{if(Np(i.charCodeAt(0)))break;e+=i}return t!==""&&lt({},wn,In),{type:Sm,value:e,octal:a,start:n,end:ie}}function jhe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";lt({},qA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lt({},qA)}try{return new RegExp(e,t)}catch{return null}}function Bhe(){var e,t,n,i,r;for(e=Ce[ie],tx(e==="/","Regular expression literal must start with a slash"),t=Ce[ie++],n=!1,i=!1;ie<ni;)if(e=Ce[ie++],t+=e,e==="\\")e=Ce[ie++],Np(e.charCodeAt(0))&&lt({},C_),t+=e;else if(Np(e.charCodeAt(0)))lt({},C_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||lt({},C_),r=t.substr(1,t.length-2),{value:r,literal:t}}function Ihe(){var e,t,n;for(t="",n="";ie<ni&&(e=Ce[ie],!!Mv(e.charCodeAt(0)));)++ie,e==="\\"&&ie<ni?lt({},wn,In):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&lt({},qA,n),{value:n,literal:t}}function Phe(){var e,t,n,i;return xt=null,_P(),e=ie,t=Bhe(),n=Ihe(),i=jhe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ie}}function qhe(e){return e.type===oc||e.type===ql||e.type===Jb||e.type===ex}function AP(){if(_P(),ie>=ni)return{type:xm,start:ie,end:ie};const e=Ce.charCodeAt(ie);return Em(e)?zhe():e===40||e===41||e===59?$_():e===39||e===34?Uhe():e===46?Go(Ce.charCodeAt(ie+1))?Az():$_():Go(e)?Az():$_()}function Oi(){const e=xt;return ie=e.end,xt=AP(),ie=e.end,e}function CP(){const e=ie;xt=AP(),ie=e}function Hhe(e){const t=new Sa(hhe);return t.elements=e,t}function Cz(e,t,n){const i=new Sa(e==="||"||e==="&&"?vhe:ghe);return i.operator=e,i.left=t,i.right=n,i}function Ghe(e,t){const n=new Sa(phe);return n.callee=e,n.arguments=t,n}function Yhe(e,t,n){const i=new Sa(mhe);return i.test=e,i.consequent=t,i.alternate=n,i}function oM(e){const t=new Sa(SP);return t.name=e,t}function Zg(e){const t=new Sa(yhe);return t.value=e.value,t.raw=Ce.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function $z(e,t,n){const i=new Sa(bhe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Xhe(e){const t=new Sa(xhe);return t.properties=e,t}function Tz(e,t,n){const i=new Sa(She);return i.key=t,i.value=n,i.kind=e,i}function Vhe(e,t){const n=new Sa(Ehe);return n.operator=e,n.argument=t,n.prefix=!0,n}function lt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,o)=>(tx(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=ie,n.description=r,n}function nx(e){e.type===xm&&lt(e,$he),e.type===Cc&&lt(e,_he),e.type===Sm&&lt(e,whe),e.type===oc&&lt(e,Ahe),e.type===ql&&lt(e,Che),lt(e,wn,e.value)}function ii(e){const t=Oi();(t.type!==Ri||t.value!==e)&&nx(t)}function Rt(e){return xt.type===Ri&&xt.value===e}function T_(e){return xt.type===ql&&xt.value===e}function Whe(){const e=[];for(ie=xt.start,ii("[");!Rt("]");)Rt(",")?(Oi(),e.push(null)):(e.push(sc()),Rt("]")||ii(","));return Oi(),Hhe(e)}function Mz(){ie=xt.start;const e=Oi();return e.type===Sm||e.type===Cc?(e.octal&&lt(e,EP),Zg(e)):oM(e.value)}function Qhe(){var e,t,n,i;if(ie=xt.start,e=xt,e.type===oc)return n=Mz(),ii(":"),i=sc(),Tz("init",n,i);if(e.type===xm||e.type===Ri)nx(e);else return t=Mz(),ii(":"),i=sc(),Tz("init",t,i)}function Khe(){var e=[],t,n,i,r={},a=String;for(ie=xt.start,ii("{");!Rt("}");)t=Qhe(),t.key.type===SP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?lt({},The):r[i]=!0,e.push(t),Rt("}")||ii(",");return ii("}"),Xhe(e)}function Zhe(){ii("(");const e=sM();return ii(")"),e}const Jhe={if:1};function ege(){var e,t,n;if(Rt("("))return Zhe();if(Rt("["))return Whe();if(Rt("{"))return Khe();if(e=xt.type,ie=xt.start,e===oc||Jhe[xt.value])n=oM(Oi().value);else if(e===Sm||e===Cc)xt.octal&&lt(xt,EP),n=Zg(Oi());else{if(e===ql)throw new Error(Rp);e===Jb?(t=Oi(),t.value=t.value==="true",n=Zg(t)):e===ex?(t=Oi(),t.value=null,n=Zg(t)):Rt("/")||Rt("/=")?(n=Zg(Phe()),CP()):nx(Oi())}return n}function tge(){const e=[];if(ii("("),!Rt(")"))for(;ie<ni&&(e.push(sc()),!Rt(")"));)ii(",");return ii(")"),e}function nge(){ie=xt.start;const e=Oi();return qhe(e)||nx(e),oM(e.value)}function ige(){return ii("."),nge()}function rge(){ii("[");const e=sM();return ii("]"),e}function age(){var e,t,n;for(e=ege();;)if(Rt("."))n=ige(),e=$z(".",e,n);else if(Rt("("))t=tge(),e=Ghe(e,t);else if(Rt("["))n=rge(),e=$z("[",e,n);else break;return e}function kz(){const e=age();if(xt.type===Ri&&(Rt("++")||Rt("--")))throw new Error(Rp);return e}function fy(){var e,t;if(xt.type!==Ri&&xt.type!==ql)t=kz();else{if(Rt("++")||Rt("--"))throw new Error(Rp);if(Rt("+")||Rt("-")||Rt("~")||Rt("!"))e=Oi(),t=fy(),t=Vhe(e.value,t);else{if(T_("delete")||T_("void")||T_("typeof"))throw new Error(Rp);t=kz()}}return t}function Dz(e){let t=0;if(e.type!==Ri&&e.type!==ql)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function oge(){var e,t,n,i,r,a,o,l,u,f;if(e=xt,u=fy(),i=xt,r=Dz(i),r===0)return u;for(i.prec=r,Oi(),t=[e,xt],o=fy(),a=[u,i,o];(r=Dz(xt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)o=a.pop(),l=a.pop().value,u=a.pop(),t.pop(),n=Cz(l,u,o),a.push(n);i=Oi(),i.prec=r,a.push(i),t.push(xt),n=fy(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=Cz(a[f-1].value,a[f-2],n),f-=2;return n}function sc(){var e,t,n;return e=oge(),Rt("?")&&(Oi(),t=sc(),ii(":"),n=sc(),e=Yhe(e,t,n)),e}function sM(){const e=sc();if(Rt(","))throw new Error(Rp);return e}function lM(e){Ce=e,ie=0,ni=Ce.length,xt=null,CP();const t=sM();if(xt.type!==xm)throw new Error("Unexpect token after expression.");return t}var $P={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function TP(e){function t(o,l,u,f){let d=e(l[0]);return u&&(d=u+"("+d+")",u.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(f<0?"":f===0?"()":"("+l.slice(1).map(e).join(",")+")")}function n(o,l,u){return f=>t(o,f,l,u)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&te("Missing arguments to clamp function."),o.length>3&&te("Too many arguments to clamp function.");const l=o.map(e);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(o){o.length<3&&te("Missing arguments to if function."),o.length>3&&te("Too many arguments to if function.");const l=o.map(e);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function sge(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function MP(e){e=e||{};const t=e.allowed?ha(e.allowed):{},n=e.forbidden?ha(e.forbidden):{},i=e.constants||$P,r=(e.functions||TP)(g),a=e.globalvar,o=e.fieldvar,l=Pe(a)?a:v=>`${a}["${v}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(v=>typeof Object.prototype[v]=="function")];let u={},f={},d=0;function g(v){if(Ee(v))return v;const b=p[v.type];return b==null&&te("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:we(n,b)?te("Illegal identifier: "+b):we(i,b)?i[b]:we(t,b)?b:(u[b]=1,l(b))},MemberExpression:v=>{const b=!v.computed,S=g(v.object);b&&(d+=1);const _=g(v.property);return S===o&&(f[sge(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&te("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=we(r,b)&&r[b];return _||te("Unrecognized function: "+b),Pe(_)?_(S):_+"("+S.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>{for(const b of v.properties){const S=b.key.name;GC.has(S)&&te("Illegal property: "+S)}return"{"+v.properties.map(g).join(",")+"}"},Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(u),fields:Object.keys(f)};return u={},f={},b}return y.functions=r,y.constants=i,y}const Rz=Symbol("vega_selection_getter");function kP(e){return(!e.getter||!e.getter[Rz])&&(e.getter=Lr(e.field),e.getter[Rz]=!0),e.getter}const uM="intersect",Nz="union",lge="vlMulti",uge="vlPoint",Oz="or",cge="and",ja="_vgsid_",Op=Lr(ja),fge="E",dge="R",hge="R-E",gge="R-LE",pge="R-RE",mge="E-LT",yge="E-LTE",vge="E-GT",bge="E-GTE",xge="E-VALID",Sge="E-ONE",kv="index:unit";function zz(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,o,l;a<r;++a)if(l=n[a],o=kP(l)(e),yl(o)&&(o=Zn(o)),yl(i[a])&&(i[a]=Zn(i[a])),ae(i[a])&&yl(i[a][0])&&(i[a]=i[a].map(Zn)),l.type===fge){if(ae(i[a])?!i[a].includes(o):o!==i[a])return!1}else if(l.type===dge){if(!Uf(o,i[a]))return!1}else if(l.type===pge){if(!Uf(o,i[a],!0,!1))return!1}else if(l.type===hge){if(!Uf(o,i[a],!1,!1))return!1}else if(l.type===gge){if(!Uf(o,i[a],!1,!0))return!1}else if(l.type===mge){if(o>=i[a])return!1}else if(l.type===yge){if(o>i[a])return!1}else if(l.type===vge){if(o<=i[a])return!1}else if(l.type===bge){if(o<i[a])return!1}else if(l.type===xge){if(o===null||isNaN(o))return!1}else if(l.type===Sge&&i[a].indexOf(o)===-1)return!1;return!0}function Ege(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[kv]&&i[kv].value:void 0,o=n===uM,l=r.length,u=0,f,d,g,p,y;u<l;++u)if(f=r[u],a&&o){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=zz(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=zz(t,f),o^y)return y;return l&&o}const DP=qd(Op),_ge=DP.left,wge=DP.right;function Age(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[kv]&&i[kv].value:void 0,o=n===uM,l=Op(t),u=_ge(r,l);if(u===r.length||Op(r[u])!==l)return!1;if(a&&o){if(a.size===1)return!0;if(wge(r,l)-u<a.size)return!1}return!0}function Cge(e,t){return ae(e)||te("First argument to selectionTuples must be an array."),Se(t)||te("Second argument to selectionTuples must be an object."),e.map(n=>He(t.fields?{values:t.fields.map(i=>kP(i)(n.datum))}:{[ja]:Op(n.datum)},t))}function $ge(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],o={},l={},u={},f,d,g,p,y,v,b,S,_,w,A=a.length,$=0,M,k;$<A;++$)if(f=a[$],p=f.unit,d=f.fields,g=f.values,d&&g){for(M=0,k=d.length;M<k;++M)y=d[M],b=o[y.field]||(o[y.field]={}),S=b[p]||(b[p]=[]),u[y.field]=_=y.type.charAt(0),w=M_[`${_}_union`],b[p]=w(S,_e(g[M]));n&&(S=l[p]||(l[p]=[]),S.push(_e(g).reduce((T,N,z)=>(T[d[z].field]=N,T),{})))}else y=ja,v=Op(f),b=o[y]||(o[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=l[p]||(l[p]=[]),S.push({[ja]:v}));if(t=t||Nz,o[ja]?o[ja]=M_[`${ja}_${t}`](...Object.values(o[ja])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(N=>o[T][N]).reduce((N,z)=>N===void 0?z:M_[`${u[T]}_${t}`](N,z))}),a=Object.keys(l),n&&a.length){const T=i?uge:lge;o[T]=t===Nz?{[Oz]:a.reduce((N,z)=>(N.push(...l[z]),N),[])}:{[cge]:a.map(N=>({[Oz]:l[N]}))}}return o}var M_={[`${ja}_union`]:mZ,[`${ja}_intersect`]:gZ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Tge=":",Mge="@";function cM(e,t,n,i){t[0].type!==ac&&te("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&rt(t).value,o="unit",l=Mge+o,u=Tge+r;a===uM&&!we(i,l)&&(i[l]=n.getData(r).indataRef(n,o)),we(i,u)||(i[u]=n.getData(r).tuplesRef())}function RP(e){const t=this.context.data[e];return t?t.values.value:[]}function kge(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Dge(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Ur).insert(t)),1}function Rge(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const _m=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Nge=_m("format"),NP=_m("timeFormat"),Oge=_m("utcFormat"),zge=_m("timeParse"),Fge=_m("utcParse"),k1=new Date(2e3,0,1);function ix(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(k1.setYear(2e3),k1.setMonth(e),k1.setDate(t),NP.call(this,k1,n))}function Lge(e){return ix.call(this,e,1,"%B")}function Uge(e){return ix.call(this,e,1,"%b")}function jge(e){return ix.call(this,0,2+e,"%A")}function Bge(e){return ix.call(this,0,2+e,"%a")}const Ige=":",Pge="@",GA="%",OP="$";function fM(e,t,n,i){t[0].type!==ac&&te("First argument to data functions must be a string literal.");const r=t[0].value,a=Ige+r;if(!we(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function qge(e,t,n,i){t[0].type!==ac&&te("First argument to indata must be a string literal."),t[1].type!==ac&&te("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,o=Pge+a;we(o,i)||(i[o]=n.getData(r).indataRef(n,a))}function vi(e,t,n,i){if(t[0].type===ac)Fz(n,i,t[0].value);else for(e in n.scales)Fz(n,i,e)}function Fz(e,t,n){const i=GA+n;if(!we(t,i))try{t[i]=e.scaleRef(n)}catch{}}function go(e,t){if(Ee(e)){const n=t.scales[e];return n&&j6(n.value)?n.value:void 0}else if(Pe(e))return j6(e)?e:void 0}function Hge(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=vi,n._range=vi,n._scale=vi;const i=r=>"_["+(r.type===ac?pe(GA+r.value):pe(GA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function dM(e,t){return function(n,i,r){if(n){const a=go(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Gge=dM("area",ule),Yge=dM("bounds",hle),Xge=dM("centroid",ble);function Vge(e,t){const n=go(e,(t||this).context);return n&&n.scale()}function Wge(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function hM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Qge(){return hM(this.context.dataflow,"warn",arguments)}function Kge(){return hM(this.context.dataflow,"info",arguments)}function Zge(){return hM(this.context.dataflow,"debug",arguments)}function k_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function YA(e){const t=$l(e),n=k_(t.r),i=k_(t.g),r=k_(t.b);return .2126*n+.7152*i+.0722*r}function Jge(e,t){const n=YA(e),i=YA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function epe(){const e=[].slice.call(arguments);return e.unshift({}),He(...e)}function zP(e,t){return e===t||e!==e&&t!==t?!0:ae(e)?ae(t)&&e.length===t.length?tpe(e,t):!1:Se(e)&&Se(t)?FP(e,t):!1}function tpe(e,t){for(let n=0,i=e.length;n<i;++n)if(!zP(e[n],t[n]))return!1;return!0}function FP(e,t){for(const n in e)if(!zP(e[n],t[n]))return!1;return!0}function Lz(e){return t=>FP(e,t)}function npe(e,t,n,i,r,a){const o=this.context.dataflow,l=this.context.data[e],u=l.input,f=o.stamp();let d=l.changes,g,p;if(o._trigger===!1||!(u.value.length||t||i))return 0;if((!d||d.stamp<f)&&(l.changes=d=o.changeset(),d.stamp=f,o.runAfter(()=>{l.modified=!0,o.pulse(u,d).run()},!0,1)),n&&(g=n===!0?Ur:ae(n)||db(n)?n:Lz(n),d.remove(g)),t&&d.insert(t),i&&(g=Lz(i),u.value.some(g)?d.remove(g):d.insert(i)),r){if(Pe(r))throw Error("modify parameter must be a data tuple, not a function");for(p in a)d.modify(r,p,a[p])}return 1}function ipe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function rpe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Uz={};function ape(e,t){const n=Uz[t]||(Uz[t]=Lr(t));return ae(e)?e.map(n):n(e)}function rx(e){return ae(e)||ArrayBuffer.isView(e)?e:null}function gM(e){return rx(e)||(Ee(e)?e:null)}function ope(e,...t){return rx(e).join(...t)}function spe(e,...t){return gM(e).indexOf(...t)}function lpe(e,...t){return gM(e).lastIndexOf(...t)}function upe(e,...t){return gM(e).slice(...t)}function cpe(e,t,n){return Pe(n)&&te("Function argument passed to replace."),!Ee(t)&&!JC(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function fpe(e){return rx(e).slice().reverse()}function dpe(e){return rx(e).slice().sort(Id)}function hpe(e,t,n){return $$(e||0,t||0,n||0)}function gpe(e,t){const n=go(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ppe(e,t){const n=go(e,(t||this).context);return n?n.copy():void 0}function mpe(e,t){const n=go(e,(t||this).context);return n?n.domain():[]}function ype(e,t,n){const i=go(e,(n||this).context);return i?ae(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function vpe(e,t){const n=go(e,(t||this).context);return n&&n.range?n.range():[]}function bpe(e,t,n){const i=go(e,(n||this).context);return i?i(t):void 0}function xpe(e,t,n,i,r){e=go(e,(r||this).context);const a=$j(t,n);let o=e.domain(),l=o[0],u=rt(o),f=ri;return u-l?f=pj(e,l,u):e=(e.interpolator?ft("sequential")().interpolator(e.interpolator()):ft("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,u=1]),e.ticks&&(o=e.ticks(+i||15),l!==o[0]&&o.unshift(l),u!==rt(o)&&o.push(u)),o.forEach(d=>a.stop(f(d),e(d))),a}function Spe(e,t,n){const i=go(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Epe(e){let t=null;return function(n){return n?wp(n,t=t||dd(e)):e}}const LP=e=>e.data;function UP(e,t){const n=RP.call(t,e);return n.root&&n.root.lookup||{}}function _pe(e,t,n){const i=UP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(LP):void 0}function wpe(e,t){const n=UP(e,this)[t];return n?n.ancestors().map(LP):void 0}const jP=()=>typeof window<"u"&&window||null;function Ape(){const e=jP();return e?e.screen:{}}function Cpe(){const e=jP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function $pe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function BP(e,t,n){if(!e)return[];const[i,r]=e,a=new cn().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return _B(o,a,Tpe(t))}function Tpe(e){let t=null;if(e){const n=_e(e.marktype),i=_e(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Mpe(e,t,n,i=5){e=_e(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function kpe(e){return _e(e).reduce((t,[n,i],r)=>t+=r==0?`M ${n},${i} `:r===e.length-1?" Z":`L ${n},${i} `,"")}function Dpe(e,t,n){const{x:i,y:r,mark:a}=n,o=new cn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,f]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),f<o.y1&&(o.y1=f),f>o.y2&&(o.y2=f);return o.translate(i,r),BP([[o.x1,o.y1],[o.x2,o.y2]],e,a).filter(u=>Rpe(u.x,u.y,t))}function Rpe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[o,l]=n[a],[u,f]=n[r];f>t!=l>t&&e<(o-u)*(t-f)/(l-f)+u&&i++}return i&1}const zp={random(){return Br()},cumulativeNormal:yb,cumulativeLogNormal:$3,cumulativeUniform:D3,densityNormal:E3,densityLogNormal:C3,densityUniform:k3,quantileNormal:vb,quantileLogNormal:T3,quantileUniform:R3,sampleNormal:mb,sampleLogNormal:A3,sampleUniform:M3,isArray:ae,isBoolean:Ul,isDate:yl,isDefined(e){return e!==void 0},isNumber:ut,isObject:Se,isRegExp:JC,isString:Ee,isTuple:db,isValid(e){return e!=null&&e===e},toBoolean:t3,toDate(e){return n3(e)},toNumber:Zn,toString:i3,indexof:spe,join:ope,lastindexof:lpe,replace:cpe,reverse:fpe,sort:dpe,slice:upe,flush:XL,lerp:WL,merge:epe,pad:ZL,peek:rt,pluck:ape,span:Qp,inrange:Uf,truncate:JL,rgb:$l,lab:Fy,hcl:Ly,hsl:Oy,luminance:YA,contrast:Jge,sequence:ar,format:Nge,utcFormat:Oge,utcParse:Fge,utcOffset:R9,utcSequence:z9,timeFormat:NP,timeParse:zge,timeOffset:D9,timeSequence:O9,timeUnitSpecifier:x9,monthFormat:Lge,monthAbbrevFormat:Uge,dayFormat:jge,dayAbbrevFormat:Bge,quarter:qL,utcquarter:HL,week:E9,utcweek:A9,dayofyear:S9,utcdayofyear:w9,warn:Qge,info:Kge,debug:Zge,extent(e){return Ka(e)},inScope:Wge,intersect:BP,clampRange:GL,pinchDistance:ipe,pinchAngle:rpe,screen:Ape,containerSize:$pe,windowSize:Cpe,bandspace:hpe,setdata:Dge,pathShape:Epe,panLinear:jL,panLog:BL,panPow:IL,panSymlog:PL,zoomLinear:VC,zoomLog:WC,zoomPow:Sy,zoomSymlog:QC,encode:Rge,modify:npe,lassoAppend:Mpe,lassoPath:kpe,intersectLasso:Dpe},Npe=["view","item","group","xy","x","y"],Ope="event.vega.",IP="this.",pM={},PP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${pe(OP+e)}]`,functions:zpe,constants:$P,visitors:pM},XA=MP(PP);function zpe(e){const t=TP(e);Npe.forEach(n=>t[n]=Ope+n);for(const n in zp)t[n]=IP+n;return He(t,Hge(e,zp,pM)),t}function tn(e,t,n){return arguments.length===1?zp[e]:(zp[e]=t,n&&(pM[e]=n),XA&&(XA.functions[e]=IP+e),this)}tn("bandwidth",gpe,vi);tn("copy",ppe,vi);tn("domain",mpe,vi);tn("range",vpe,vi);tn("invert",ype,vi);tn("scale",bpe,vi);tn("gradient",xpe,vi);tn("geoArea",Gge,vi);tn("geoBounds",Yge,vi);tn("geoCentroid",Xge,vi);tn("geoShape",Spe,vi);tn("geoScale",Vge,vi);tn("indata",kge,qge);tn("data",RP,fM);tn("treePath",_pe,fM);tn("treeAncestors",wpe,fM);tn("vlSelectionTest",Ege,cM);tn("vlSelectionIdTest",Age,cM);tn("vlSelectionResolve",$ge,cM);tn("vlSelectionTuples",Cge);function no(e,t){const n={};let i;try{e=Ee(e)?e:pe(e)+"",i=lM(e)}catch{te("Expression parse error: "+e)}i.visit(a=>{if(a.type!==xP)return;const o=a.callee.name,l=PP.visitors[o];l&&l(o,a.arguments,t,n)});const r=XA(i);return r.globals.forEach(a=>{const o=OP+a;!we(n,o)&&t.getSignal(a)&&(n[o]=t.signalRef(a))}),{$expr:He({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function Fpe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Lpe=ha(["rule"]),jz=ha(["group","image","rect"]);function Upe(e,t){let n="";return Lpe[t]||(e.x2&&(e.x?(jz[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(jz[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function mM(e){return(e+"").toLowerCase()}function jpe(e){return mM(e)==="operator"}function Bpe(e){return mM(e)==="collect"}function Sg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Ipe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Ppe={operator:(e,t)=>Sg(e,["_"],t.code),parameter:(e,t)=>Sg(e,["datum","_"],t.code),event:(e,t)=>Sg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Sg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const o="o["+pe(a)+"]";r+=`$=${i[a].code};if(${o}!==$)${o}=$,m=1;`}return r+=Upe(i,n),r+="return m;",Sg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(pe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,o)=>{const l=t[o];let u,f;return a.path?(u=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+o]=a,u=`this.f${o}(a)`,f=`this.f${o}(b)`),Ipe(u,f,-l,l)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function qpe(e){const t=this;jpe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Hpe(e){const t=this;if(e.params){const n=t.get(e.id);n||te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Gpe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=ae(r)?r.map(a=>Bz(a,n,t)):Bz(r,n,t)}return t}function Bz(e,t,n){if(!e||!Se(e))return e;for(let i=0,r=Iz.length,a;i<r;++i)if(a=Iz[i],we(e,a.key))return a.parse(e,t,n);return e}var Iz=[{key:"$ref",parse:Ype},{key:"$key",parse:Vpe},{key:"$expr",parse:Xpe},{key:"$field",parse:Wpe},{key:"$encode",parse:Kpe},{key:"$compare",parse:Qpe},{key:"$context",parse:Zpe},{key:"$subflow",parse:Jpe},{key:"$tupleid",parse:eme}];function Ype(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function Xpe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=qi(t.parameterExpression(e.$expr),e.$fields))}function Vpe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=e3(e.$key,e.$flat,t.expr.codegen))}function Wpe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Lr(e.$field,e.$name,t.expr.codegen))}function Qpe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=_e(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=KC(i,e.$order,t.expr.codegen))}function Kpe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=qi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Zpe(e,t){return t}function Jpe(e,t){const n=e.$subflow;return function(i,r,a){const o=t.fork().parse(n),l=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(a),l.detachSubflow=()=>t.detach(o),l}}function eme(){return ke}function tme(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function nme(e){var t=this,n=Se(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,o=void 0;i||te("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(o=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,o)}const ime={skip:!0};function rme(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const o=t.signals[a];e.signals(a,o)&&(i[a]=o.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const o=t.data[a];e.data(a,o)&&(r[a]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function ame(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],ime)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Ur).insert(i[a]))}),(e.subcontext||[]).forEach((a,o)=>{const l=t.subcontext[o];l&&l.setState(a)})}function qP(e,t,n,i){return new HP(e,t,n,i)}function HP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Ppe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Pz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}HP.prototype=Pz.prototype={fork(){const e=new Pz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Bpe(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const o=n.data[a]||(n.data[a]={});e.data[a].forEach(l=>o[l]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[mM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Fpe,parseOperator:qpe,parseOperatorParameters:Hpe,parseParameters:Gpe,parseStream:tme,parseUpdate:nme,getState:rme,setState:ame};function ome(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),GP(t,e.description()))}function GP(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function sme(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const D_="default";function lme(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:D_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Ee(r)?r:r.user:D_,o=i.item&&i.item.cursor||null;return r&&a===r.user&&o==r.item?r:{user:a,item:o}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Ee(i)||(r=i.item,i=i.user),VA(e,i&&i!==D_?i:r||i),r},{cursor:t})}function VA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Dv(e,t){var n=e._runtime.data;return we(n,t)||te("Unrecognized data set: "+t),n[t]}function ume(e,t){return arguments.length<2?Dv(this,e).values.value:ax.call(this,e,_c().remove(Ur).insert(t))}function ax(e,t){l7(t)||te("Second argument to changes must be a changeset.");const n=Dv(this,e);return n.modified=!0,this.pulse(n.input,t)}function cme(e,t){return ax.call(this,e,_c().insert(t))}function fme(e,t){return ax.call(this,e,_c().remove(t))}function YP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function XP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function ox(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function dme(e){var t=ox(e),n=YP(e),i=XP(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function hme(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,o,l;return r&&(l=ox(e),o=t.changedTouches?t.changedTouches[0]:t,a=Gb(o,r),a[0]-=l[0],a[1]-=l[1]),t.dataflow=e,t.item=n,t.vega=gme(e,n,a),t}function gme(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(o){var l=i,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){l=u;break}}return l&&l.mark&&l.mark.interactive?l:{}}function a(o){if(!o)return n;Ee(o)&&(o=r(o));const l=n.slice();for(;o;)l[0]-=o.x||0,l[1]-=o.y||0,o=o.mark&&o.mark.group;return l}return{view:ai(e),item:ai(t||{}),group:r,xy:a,x:o=>a(o)[0],y:o=>a(o)[1]}}const qz="view",pme="timer",mme="window",yme={trap:!1};function vme(e){const t=He({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{ae(i[a])&&(i[a]=ha(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function VP(e,t,n,i){e._eventListeners.push({type:n,sources:_e(t),handler:i})}function bme(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function D1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Se(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function xme(e,t,n){var i=this,r=new pb(n),a=function(f,d){i.runAsync(null,()=>{e===qz&&bme(i,t)&&f.preventDefault(),r.receive(hme(i,f,d))})},o;if(e===pme)D1(i,"timer",t)&&i.timer(a,t);else if(e===qz)D1(i,"view",t)&&i.addEventListener(t,a,yme);else if(e===mme?D1(i,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&D1(i,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)i.warn("Can not resolve event source: "+e);else{for(var l=0,u=o.length;l<u;++l)o[l].addEventListener(t,a);VP(i,o,t,a)}return r}function Hz(e){return e.item}function Gz(e){return e.item.mark.source}function Yz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Sme(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Hz),Gz,Yz(e)),this.on(this.events("view","pointerout",Hz),Gz,Yz(t)),this}function Eme(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,o,l,u;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=i[r],a=o.sources.length;--a>=0;)o.sources[a].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)u=n[r].type,l=n[r].handler,this._handler.off(u,l);return this}function ur(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const _me="vega-bind",wme="vega-bind-name",Ame="vega-bind-radio";function Cme(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,o)})}},i.debounce&&(r.update=ZC(i.debounce,r.update))),(i.input==null&&i.element?$me:Mme)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function $me(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),VP(i,t,r,a),e.set=o=>{t.value=o,t.dispatchEvent(Tme(r))}}function Tme(e){return typeof Event<"u"?new Event(e):{type:e}}function Mme(e,t,n,i){const r=i.signal(n.signal),a=ur("div",{class:_me}),o=n.input==="radio"?a:a.appendChild(ur("label"));o.appendChild(ur("span",{class:wme},n.name||n.signal)),t.appendChild(a);let l=kme;switch(n.input){case"checkbox":l=Dme;break;case"select":l=Rme;break;case"radio":l=Nme;break;case"range":l=Ome;break}l(e,o,n,r)}function kme(e,t,n,i){const r=ur("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Dme(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=ur("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=o=>a.checked=!!o||null}function Rme(e,t,n,i){const r=ur("select",{name:n.signal}),a=n.labels||[];n.options.forEach((o,l)=>{const u={value:o};Rv(o,i)&&(u.selected=!0),r.appendChild(ur("option",u,(a[l]||o)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=o=>{for(let l=0,u=n.options.length;l<u;++l)if(Rv(n.options[l],o)){r.selectedIndex=l;return}}}function Nme(e,t,n,i){const r=ur("span",{class:Ame}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((o,l)=>{const u={type:"radio",name:n.signal,value:o};Rv(o,i)&&(u.checked=!0);const f=ur("input",u);f.addEventListener("change",()=>e.update(o));const d=ur("label",{},(a[l]||o)+"");return d.prepend(f),r.appendChild(d),f}),e.set=o=>{const l=e.elements,u=l.length;for(let f=0;f<u;++f)Rv(l[f].value,o)&&(l[f].checked=!0)}}function Ome(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,o=n.step||wl(a,r,100),l=ur("input",{type:"range",name:n.signal,min:a,max:r,step:o});l.value=i;const u=ur("span",{},+i);t.appendChild(l),t.appendChild(u);const f=()=>{u.textContent=l.value,e.update(+l.value)};l.addEventListener("input",f),l.addEventListener("change",f),e.elements=[l],e.set=d=>{l.value=d,u.textContent=d}}function Rv(e,t){return e===t||e+""==t+""}function WP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,YP(e),XP(e),ox(e),r,a).background(e.background())}function yM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function zme(e,t,n,i){const r=new i(e.loader(),yM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,ox(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Fme(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Yb(i);e=n._el=e?R_(n,e,!0):null,ome(n),a||n.error("Unrecognized renderer type: "+i);const o=a.handler||pm,l=e?a.renderer:a.headless;return n._renderer=l?WP(n,n._renderer,e,l):null,n._handler=zme(n,n._handler,e,o),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=R_(n,t,!0):e.appendChild(ur("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&r!=="container"&&(u.element=R_(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Cme(n,u.element||t,u)})),n}function R_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Eg=e=>+e||0,Lme=e=>({top:e,bottom:e,left:e,right:e});function Xz(e){return Se(e)?{top:Eg(e.top),bottom:Eg(e.bottom),left:Eg(e.left),right:Eg(e.right)}:Lme(Eg(e))}async function vM(e,t,n,i){const r=Yb(t),a=r&&r.headless;return a||te("Unrecognized renderer type: "+t),await e.runAsync(),WP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Ume(e,t){e!==fl.Canvas&&e!==fl.SVG&&e!==fl.PNG&&te("Unrecognized image type: "+e);const n=await vM(this,e,t);return e===fl.SVG?jme(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function jme(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Bme(e,t){return(await vM(this,fl.Canvas,e,t)).canvas()}async function Ime(e){return(await vM(this,fl.SVG,e)).svg()}function Pme(e,t,n){return qP(e,od,zp,n).parse(t)}function qme(e){var t=this._runtime.scales;return we(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var QP="width",KP="height",bM="padding",Vz={skip:!0};function ZP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===bM?i.left+i.right:0)}function JP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===bM?i.top+i.bottom:0)}function Hme(e){var t=e._signals,n=t[QP],i=t[KP],r=t[bM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,l=>{e._width=l.size,e._viewWidth=ZP(e,l.size),a()},{size:n}),e._resizeHeight=e.add(null,l=>{e._height=l.size,e._viewHeight=JP(e,l.size),a()},{size:i});const o=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function Gme(e,t,n,i,r,a){this.runAfter(o=>{let l=0;o._autosize=0,o.width()!==n&&(l=1,o.signal(QP,n,Vz),o._resizeWidth.skip(!0)),o.height()!==i&&(l=1,o.signal(KP,i,Vz),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),l&&o.run("enter"),a&&o.runAfter(u=>u.resize())},!1,1)}function Yme(e){return this._runtime.getState(e||{data:Xme,signals:Vme,recurse:!0})}function Xme(e,t){return t.modified&&ae(t.input.value)&&!e.startsWith("_:vega:_")}function Vme(e,t){return!(e==="parent"||t instanceof od.proxy)}function Wme(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Qme(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(xce(n,t))}function Kme(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Zme(i))}function Zme(e){return e==null?"":ae(e)?eq(e):Se(e)&&!yl(e)?Jme(e):e+""}function Jme(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ae(n)?eq(n):tq(n))}).join(`
`)}function eq(e){return"["+e.map(tq).join(", ")+"]"}function tq(e){return ae(e)?"[]":Se(e)&&!yl(e)?"{}":e}function e0e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function nq(e,t){const n=this;if(t=t||{},Gf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=He({},e.locale,t.locale);n.locale(Z9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||fl.Canvas,n._scenegraph=new Qj;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Kme,n._redraw=!0,n._handler=new pm().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=vme(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Pme(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:He({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=ZP(n,n._width),n._viewHeight=JP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Hme(n),sme(n),lme(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function R1(e,t){return we(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+pe(t))}function iq(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function Wz(e,t,n,i){let r=iq(n,i);return r||(r=yM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Qz(e,t,n){const i=iq(t,n);return i&&t._targets.remove(i),e}ve(nq,Gf,{async evaluate(e,t,n){if(await Gf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,dme(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&V1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&GP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=R1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Xz(e)):Xz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Yb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Gf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(R1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Gme,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=yM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Wz(this,e,R1(this,e),t)},removeSignalListener(e,t){return Qz(this,R1(this,e),t)},addDataListener(e,t){return Wz(this,e,Dv(this,e).values,t)},removeDataListener(e,t){return Qz(this,Dv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=VA(this,null);this._globalCursor=!!e,t&&VA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Qme,events:xme,finalize:Eme,hover:Sme,data:ume,change:ax,insert:cme,remove:fme,scale:qme,initialize:Fme,toImageURL:Ume,toCanvas:Bme,toSVG:Ime,getState:Yme,setState:Wme,_watchPixelRatio:e0e});const t0e="view",Nv="[",Ov="]",rq="{",aq="}",n0e=":",oq=",",i0e="@",r0e=">",a0e=/[[\]{}]/,o0e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let sq,lq;function Hl(e,t,n){return sq=t||t0e,lq=n||o0e,uq(e.trim()).map(WA)}function s0e(e){return lq[e]}function fp(e,t,n,i,r){const a=e.length;let o=0,l;for(;t<a;++t){if(l=e[t],!o&&l===n)return t;r&&r.includes(l)?--o:i&&i.includes(l)&&++o}return t}function uq(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=fp(e,r,oq,Nv+rq,Ov+aq),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function WA(e){return e[0]==="["?l0e(e):u0e(e)}function l0e(e){const t=e.length;let n=1,i;if(n=fp(e,n,Ov,Nv,Ov),n===t)throw"Empty between selector: "+e;if(i=uq(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==r0e)throw"Expected '>' after between selector: "+e;i=i.map(WA);const r=WA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function u0e(e){const t={source:sq},n=[];let i=[0,0],r=0,a=0,o=e.length,l=0,u,f;if(e[o-1]===aq){if(l=e.lastIndexOf(rq),l>=0){try{i=c0e(e.substring(l+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),o=e.length}else throw"Unmatched right brace: "+e;l=0}if(!o)throw e;if(e[0]===i0e&&(r=++l),u=fp(e,l,n0e),u<o&&(n.push(e.substring(a,u).trim()),a=l=++u),l=fp(e,l,Nv),l===o)n.push(e.substring(a,o).trim());else if(n.push(e.substring(a,l).trim()),f=[],a=++l,a===o)throw"Unmatched left bracket: "+e;for(;l<o;){if(l=fp(e,l,Ov),l===o)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,l).trim()),l<o-1&&e[++l]!==Nv)throw"Expected left bracket: "+e;a=++l}if(!(o=n.length)||a0e.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],r?t.markname=n[0].slice(1):s0e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function c0e(e){const t=e.split(oq);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function f0e(e){return Se(e)?e:{type:e||"pad"}}const _g=e=>+e||0,d0e=e=>({top:e,bottom:e,left:e,right:e});function h0e(e){return Se(e)?e.signal?e:{top:_g(e.top),bottom:_g(e.bottom),left:_g(e.left),right:_g(e.right)}:d0e(_g(e))}const An=e=>Se(e)&&!ae(e)?He({},e):{value:e};function Kz(e,t,n,i){return n!=null?(Se(n)&&!ae(n)||ae(n)&&n.length&&Se(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function qn(e,t,n){for(const i in t)Kz(e,i,t[i]);for(const i in n)Kz(e,i,n[i],"update")}function Jd(e,t,n){for(const i in t)n&&we(n,i)||(e[i]=He(e[i]||{},t[i]));return e}function Ff(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const xM="mark",SM="frame",EM="scope",g0e="axis",p0e="axis-domain",m0e="axis-grid",y0e="axis-label",v0e="axis-tick",b0e="axis-title",x0e="legend",S0e="legend-band",E0e="legend-entry",_0e="legend-gradient",cq="legend-label",w0e="legend-symbol",A0e="legend-title",C0e="title",$0e="title-text",T0e="title-subtitle";function M0e(e,t,n,i,r){const a={},o={};let l,u,f,d;u="lineBreak",t==="text"&&r[u]!=null&&!Ff(u,e)&&N_(a,u,r[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===SM?r.group:n===xM?He({},r.mark,r[t]):null;for(u in d)f=Ff(u,e)||(u==="fill"||u==="stroke")&&(Ff("fill",e)||Ff("stroke",e)),f||N_(a,u,d[u]);_e(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)Ff(y,e)||N_(a,y,p[y])}),e=He({},e);for(u in a)d=a[u],d.signal?(l=l||{})[u]=d:o[u]=d;return e.enter=He(o,e.enter),l&&(e.update=He(l,e.update)),e}function N_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const fq=e=>Ee(e)?pe(e):e.signal?`(${e.signal})`:dq(e);function sx(e){if(e.gradient!=null)return D0e(e);let t=e.signal?`(${e.signal})`:e.color?k0e(e.color):e.field!=null?dq(e.field):e.value!==void 0?pe(e.value):void 0;return e.scale!=null&&(t=R0e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${dy(e.exponent)})`),e.mult!=null&&(t+=`*${dy(e.mult)}`),e.offset!=null&&(t+=`+${dy(e.offset)}`),e.round&&(t=`round(${t})`),t}const N1=(e,t,n,i)=>`(${e}(${[t,n,i].map(sx).join(",")})+'')`;function k0e(e){return e.c?N1("hcl",e.h,e.c,e.l):e.h||e.s?N1("hsl",e.h,e.s,e.l):e.l||e.a?N1("lab",e.l,e.a,e.b):e.r||e.g||e.b?N1("rgb",e.r,e.g,e.b):null}function D0e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:pe(n));for(;t.length&&rt(t)==null;)t.pop();return t.unshift(fq(e.gradient)),`gradient(${t.join(",")})`}function dy(e){return Se(e)?"("+sx(e)+")":e}function dq(e){return hq(Se(e)?e:{datum:e})}function hq(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+pe(e));return e.signal||(i=Ee(i)?so(i).map(pe).join("]["):hq(i)),t+"["+i+"]"}function R0e(e,t){const n=fq(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+dy(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function N0e(e){let t="";return e.forEach(n=>{const i=sx(n);t+=n.test?`(${n.test})?${i}:`:i}),rt(t)===":"&&(t+="null"),t}function gq(e,t,n,i,r,a){const o={};a=a||{},a.encoders={$encode:o},e=M0e(e,t,n,i,r.config);for(const l in e)o[l]=O0e(e[l],t,a,r);return a}function O0e(e,t,n,i){const r={},a={};for(const o in e)e[o]!=null&&(r[o]=F0e(z0e(e[o]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function z0e(e){return ae(e)?N0e(e):sx(e)}function F0e(e,t,n,i){const r=no(e,t);return r.$fields.forEach(a=>i[a]=1),He(n,r.$params),r.$expr}const L0e="outer",U0e=["value","update","init","react","bind"];function Zz(e,t){te(e+' for "outer" push: '+pe(t))}function pq(e,t){const n=e.name;if(e.push===L0e)t.signals[n]||Zz("No prior signal definition",n),U0e.forEach(i=>{e[i]!==void 0&&Zz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function QA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function lx(e,t,n,i){return new QA(e,t,n,i)}function zv(e,t){return lx("operator",e,t)}function Me(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Fp(e,t){return t?{$field:e,$name:t}:{$field:e}}const KA=Fp("key");function Jz(e,t){return{$compare:e,$order:t}}function j0e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const B0e="ascending",I0e="descending";function P0e(e){return Se(e)?(e.order===I0e?"-":"+")+ux(e.op,e.field):""}function ux(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const _M="scope",ZA="view";function mn(e){return e&&e.signal}function q0e(e){return e&&e.expr}function hy(e){if(mn(e))return!0;if(Se(e)){for(const t in e)if(hy(e[t]))return!0}return!1}function na(e,t){return e??t}function Gu(e){return e&&e.signal||e}const eF="timer";function Lp(e,t){return(e.merge?G0e:e.stream?Y0e:e.type?X0e:te("Invalid stream specification: "+pe(e)))(e,t)}function H0e(e){return e===_M?ZA:e||ZA}function G0e(e,t){const n=e.merge.map(r=>Lp(r,t)),i=wM({merge:n},e,t);return t.addStream(i).id}function Y0e(e,t){const n=Lp(e.stream,t),i=wM({stream:n},e,t);return t.addStream(i).id}function X0e(e,t){let n;e.type===eF?(n=t.event(eF,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(H0e(e.source),e.type);const i=wM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function wM(e,t,n){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+pe(t)),e.between=[Lp(i[0],n),Lp(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(V0e(t.marktype,t.markname,t.markrole)),t.source===_M&&i.push("inScope(event.item)"),i.length&&(e.filter=no("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function V0e(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const W0e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Q0e(e,t,n){const i=e.encode,r={target:n};let a=e.events,o=e.update,l=[];a||te("Signal update missing events specification."),Ee(a)&&(a=Hl(a,t.isSubscope()?_M:ZA)),a=_e(a).filter(u=>u.signal||u.scale?(l.push(u),0):1),l.length>1&&(l=[Z0e(l)]),a.length&&l.push(a.length>1?{merge:a}:a[0]),i!=null&&(o&&te("Signal encode and update are mutually exclusive."),o="encode(item(),"+pe(i)+")"),r.update=Ee(o)?no(o,t):o.expr!=null?no(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:W0e,$params:{$value:t.signalRef(o.signal)}}:te("Invalid signal update specification."),e.force&&(r.options={force:!0}),l.forEach(u=>t.addUpdate(He(K0e(u,t),r)))}function K0e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Lp(e,t)}}function Z0e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function J0e(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=no(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Q0e(r,t,n.id))}const At=e=>(t,n,i)=>lx(e,n,t||void 0,i),mq=At("aggregate"),e1e=At("axisticks"),yq=At("bound"),Ea=At("collect"),tF=At("compare"),t1e=At("datajoin"),vq=At("encode"),n1e=At("expression"),i1e=At("facet"),r1e=At("field"),a1e=At("key"),o1e=At("legendentries"),s1e=At("load"),l1e=At("mark"),u1e=At("multiextent"),c1e=At("multivalues"),f1e=At("overlap"),d1e=At("params"),bq=At("prefacet"),h1e=At("projection"),g1e=At("proxy"),p1e=At("relay"),xq=At("render"),m1e=At("scale"),$c=At("sieve"),y1e=At("sortitems"),Sq=At("viewlayout"),v1e=At("values");let b1e=0;const Eq={min:"min",max:"max",count:"sum"};function x1e(e,t){const n=e.type||"linear";uj(n)||te("Unrecognized scale type: "+pe(n)),t.addScale(e.name,{type:n,domain:void 0})}function S1e(e,t){const n=t.getScale(e.name).params;let i;n.domain=_q(e.domain,e,t),e.range!=null&&(n.range=Aq(e,t,n)),e.interpolate!=null&&D1e(e.interpolate,n),e.nice!=null&&(n.nice=k1e(e.nice,t)),e.bins!=null&&(n.bins=M1e(e.bins,t));for(i in e)we(n,i)||i==="name"||(n[i]=Nr(e[i],t))}function Nr(e,t){return Se(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+pe(e)):e}function gy(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Nr(n,t))}function cx(e){te("Can not find data set: "+pe(e))}function _q(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ae(e)?E1e:e.fields?w1e:_1e)(e,t,n)}function E1e(e,t,n){return e.map(i=>Nr(i,n))}function _1e(e,t,n){const i=n.getData(e.data);return i||cx(e.data),fd(t.type)?i.valuesRef(n,e.field,wq(e.sort,!1)):dj(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function w1e(e,t,n){const i=e.data,r=e.fields.reduce((a,o)=>(o=Ee(o)?{data:i,field:o}:ae(o)||o.signal?A1e(o,n):o,a.push(o),a),[]);return(fd(t.type)?C1e:dj(t.type)?$1e:T1e)(e,n,r)}function A1e(e,t){const n="_:vega:_"+b1e++,i=Ea({});if(ae(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+pe(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,$c({})]),{data:n,field:"data"}}function C1e(e,t,n){const i=wq(e.sort,!0);let r,a;const o=n.map(f=>{const d=t.getData(f.data);return d||cx(f.data),d.countsRef(t,f.field,i)}),l={groupby:KA,pulse:o};i&&(r=i.op||"count",a=i.field?ux(r,i.field):"count",l.ops=[Eq[r]],l.fields=[t.fieldRef(a)],l.as=[a]),r=t.add(mq(l));const u=t.add(Ea({pulse:Me(r)}));return a=t.add(v1e({field:KA,sort:t.sortRef(i),pulse:Me(u)})),Me(a)}function wq(e,t){return e&&(!e.field&&!e.op?Se(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Eq[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function $1e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||cx(r.data),a.domainRef(t,r.field)});return Me(t.add(c1e({values:i})))}function T1e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||cx(r.data),a.extentRef(t,r.field)});return Me(t.add(u1e({extents:i})))}function M1e(e,t){return e.signal||ae(e)?gy(e,t):t.objectProperty(e)}function k1e(e,t){return e.signal?t.signalRef(e.signal):Se(e)?{interval:Nr(e.interval),step:Nr(e.step)}:Nr(e)}function D1e(e,t){t.interpolate=Nr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Nr(e.gamma))}function Aq(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Ee(r)){if(i&&we(i,r))return e=He({},e,{range:i[r]}),Aq(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=fd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+pe(r))}else if(r.scheme){n.scheme=ae(r.scheme)?gy(r.scheme,t):Nr(r.scheme,t),r.extent&&(n.schemeExtent=gy(r.extent,t)),r.count&&(n.schemeCount=Nr(r.count,t));return}else if(r.step){n.rangeStep=Nr(r.step,t);return}else{if(fd(e.type)&&!ae(r))return _q(r,e,t);ae(r)||te("Unsupported range type: "+pe(r))}return r.map(a=>(ae(a)?gy:Nr)(a,t))}function R1e(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=JA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=JA(n[r],r,t));t.addProjection(e.name,i)}function JA(e,t,n){return ae(e)?e.map(i=>JA(i,t,n)):Se(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+pe(e)):e}const _a="top",eh="left",th="right",Rl="bottom",Cq="center",N1e="vertical",O1e="start",z1e="middle",F1e="end",eC="index",AM="label",L1e="offset",xd="perc",U1e="perc2",zr="value",wm="guide-label",CM="guide-title",j1e="group-title",B1e="group-subtitle",nF="symbol",py="gradient",tC="discrete",nC="size",I1e="shape",P1e="fill",q1e="stroke",H1e="strokeWidth",G1e="strokeDash",Y1e="opacity",$M=[nC,I1e,P1e,q1e,H1e,G1e,Y1e],Am={name:1,style:1,interactive:1},at={value:0},Fr={value:1},fx="group",$q="rect",TM="rule",X1e="symbol",Tc="text";function Up(e){return e.type=fx,e.interactive=e.interactive||!1,e}function Hi(e,t){const n=(i,r)=>na(e[i],na(t[i],r));return n.isVertical=i=>N1e===na(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>na(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>na(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>na(e.columns,na(t.columns,+n.isVertical(!0))),n}function Tq(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function V1e(e,t,n){const i=t.config.style[n];return i&&i[e]}function dx(e,t,n){return`item.anchor === '${O1e}' ? ${e} : item.anchor === '${F1e}' ? ${t} : ${n}`}const MM=dx(pe(eh),pe(th),pe(Cq));function W1e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Se(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function Mq(e,t){return t?e?Se(e)?Object.assign({},e,{offset:Mq(e.offset,t)}):{value:e,offset:t}:t:e}function mr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Jd(e.encode,t,Am)):e.interactive=!1,e}function Q1e(e,t,n,i){const r=Hi(e,n),a=r.isVertical(),o=r.gradientThickness(),l=r.gradientLength();let u,f,d,g,p;a?(f=[0,1],d=[0,0],g=o,p=l):(f=[0,0],d=[1,0],g=l,p=o);const y={enter:u={opacity:at,x:at,y:at,width:An(g),height:An(p)},update:He({},u,{opacity:Fr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:at}};return qn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),mr({type:$q,role:_0e,encode:y},i)}function K1e(e,t,n,i,r){const a=Hi(e,n),o=a.isVertical(),l=a.gradientThickness(),u=a.gradientLength();let f,d,g,p,y="";o?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:at,fill:{scale:t,field:zr}};v[f]={signal:y+"datum."+xd,mult:u},v[d]=at,v[g]={signal:y+"datum."+U1e,mult:u},v[p]=An(l);const b={enter:v,update:He({},v,{opacity:Fr}),exit:{opacity:at}};return qn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),mr({type:$q,role:S0e,key:zr,from:r,encode:b},i)}const Z1e=`datum.${xd}<=0?"${eh}":datum.${xd}>=1?"${th}":"${Cq}"`,J1e=`datum.${xd}<=0?"${Rl}":datum.${xd}>=1?"${_a}":"${z1e}"`;function iF(e,t,n,i){const r=Hi(e,t),a=r.isVertical(),o=An(r.gradientThickness()),l=r.gradientLength();let u=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:at},update:d={opacity:Fr,text:{field:AM}},exit:{opacity:at}};return qn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:na(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:J1e},g="y",p="x",y="1-"):(f.align=d.align={signal:Z1e},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+xd,mult:l},f[p]=d[p]=o,o.offset=na(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:r("labelSeparation"),method:u,order:"datum."+eC}:void 0,mr({type:Tc,role:cq,style:wm,key:zr,from:i,encode:v,overlap:u},n)}function eye(e,t,n,i,r){const a=Hi(e,t),o=n.entries,l=!!(o&&o.interactive),u=o?o.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${L1e} : datum.${nC}`,y=f?An(f):{field:nC},v=`datum.${eC}`,b=`max(1, ${r})`;let S,_,w,A,$;y.mult=.5,S={enter:_={opacity:at,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Fr,x:_.x,y:_.y},exit:{opacity:at}};let M=null,k=null;e.fill||(M=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),qn(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),$M.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:zr})});const T=mr({type:X1e,role:w0e,key:zr,from:g,clip:f?!0:void 0,encode:S},n.symbols),N=An(d);N.offset=a("labelOffset"),S={enter:_={opacity:at,x:{signal:p,offset:N},y},update:w={opacity:Fr,text:{field:AM},x:_.x,y:_.y},exit:{opacity:at}},qn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const z=mr({type:Tc,role:cq,style:wm,key:zr,from:g,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:at,height:f?An(f):at,opacity:at},exit:{opacity:at},update:w={opacity:Fr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,$={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:eC}},Up({role:EM,from:i,encode:Jd(S,o,Am),marks:[T,z],name:u,interactive:l,sort:$})}function tye(e,t){const n=Hi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const kM='item.orient === "left"',DM='item.orient === "right"',hx=`(${kM} || ${DM})`,nye=`datum.vgrad && ${hx}`,iye=dx('"top"','"bottom"','"middle"'),rye=dx('"right"','"left"','"center"'),aye=`datum.vgrad && ${DM} ? (${rye}) : (${hx} && !(datum.vgrad && ${kM})) ? "left" : ${MM}`,oye=`item._anchor || (${hx} ? "middle" : "start")`,sye=`${nye} ? (${kM} ? -90 : 90) : 0`,lye=`${hx} ? (datum.vgrad ? (${DM} ? "bottom" : "top") : ${iye}) : "top"`;function uye(e,t,n,i){const r=Hi(e,t),a={enter:{opacity:at},update:{opacity:Fr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:at}};return qn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:oye},angle:{signal:sye},align:{signal:aye},baseline:{signal:lye},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),mr({type:Tc,role:A0e,style:CM,from:i,encode:a},n)}function cye(e,t){let n;return Se(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+rF(e.path)+")":e.sphere&&(n="geoShape("+rF(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function rF(e){return Se(e)&&e.signal?e.signal:pe(e)}function kq(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===fx?EM:t||xM}function fye(e){return{marktype:e.type,name:e.name||void 0,role:e.role||kq(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function dye(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function RM(e,t){const n=f7(e.type);n||te("Unrecognized transform type: "+pe(e.type));const i=lx(n.type.toLowerCase(),null,Dq(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Dq(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const o=e.params[a];i[o.name]=hye(o,t,n)}return i}function hye(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return gye(e,t,n);if(r===void 0){e.required&&te("Missing required "+pe(t.type)+" parameter: "+pe(e.name));return}else{if(i==="param")return pye(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!mn(r)?r.map(a=>aF(e,a,n)):aF(e,r,n)}function aF(e,t,n){const i=e.type;if(mn(t))return sF(i)?te("Expression references can not be signals."):O_(i)?n.fieldRef(t):lF(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||O_(i);return r&&mye(t)?n.exprRef(t.expr,t.as):r&&yye(t)?Fp(t.field,t.as):sF(i)?no(t,n):vye(i)?Me(n.getData(t).values):O_(i)?Fp(t):lF(i)?n.compareRef(t):t}}function gye(e,t,n){return Ee(t.from)||te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function pye(e,t,n){const i=t[e.name];return e.array?(ae(i)||te("Expected an array of sub-parameters. Instead: "+pe(i)),i.map(r=>oF(e,r,n))):oF(e,i,n)}function oF(e,t,n){const i=e.params.length;let r;for(let o=0;o<i;++o){r=e.params[o];for(const l in r.key)if(r.key[l]!==t[l]){r=null;break}if(r)break}r||te("Unsupported parameter: "+pe(t));const a=He(Dq(r,t,n),r.key);return Me(n.add(d1e(a)))}const mye=e=>e&&e.expr,yye=e=>e&&e.field,vye=e=>e==="data",sF=e=>e==="expr",O_=e=>e==="field",lF=e=>e==="compare";function bye(e,t,n){let i,r,a,o,l;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?o=l=my(i,n):(e.data?l=Me(n.getData(e.data).aggregate):(a=RM(He({type:"aggregate",groupby:_e(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=my(i,n),o=l=Me(n.add(a))),r=n.keyRef(i.groupby,!0))):o=Me(n.add(Ea(null,[{}]))),o||(o=my(e,n)),{key:r,pulse:o,parent:l}}function my(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Me(t.getData(e.data).output)}function lc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}lc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],o=null,l=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);l<n;++l)t[l].params.pulse=Me(t[l-1]),e.add(t[l]),t[l].type==="aggregate"&&(o=t[l]);return new lc(e,a,r,i,o)};function Rq(e){return Ee(e)?e:null}function uF(e,t,n){const i=ux(n.op,n.field);let r;if(t.ops){for(let a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function wg(e,t,n,i,r,a,o){const l=t[n]||(t[n]={}),u=P0e(a);let f=Rq(r),d,g;if(f!=null&&(e=t.scope,f=f+(u?"|"+u:""),d=l[f]),!d){const p=a?{field:KA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Me(t.output)};u&&(p.sort=e.sortRef(a)),g=e.add(lx(i,void 0,p)),o&&(t.index[r]=g),d=Me(g),f!=null&&(l[f]=d)}return d}lc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=Rq(t);let o,l,u;return a!=null&&(e=i.scope,o=r[a]),o?n&&n.field&&uF(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Me(i.output)},n&&n.field&&uF(e,u,n),l=e.add(mq(u)),o=e.add(Ea({pulse:Me(l)})),o={agg:l,ref:Me(o)},a!=null&&(r[a]=o)),o.ref},tuplesRef(){return Me(this.values)},extentRef(e,t){return wg(e,this,"extent","extent",t,!1)},domainRef(e,t){return wg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return wg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return wg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return wg(e,this,"indata","tupleindex",t,!0,!0)}};function xye(e,t,n){const i=e.from.facet,r=i.name,a=my(i,t);let o;i.name||te("Facet must have a name: "+pe(i)),i.data||te("Facet must reference a data set: "+pe(i)),i.field?o=t.add(bq({field:t.fieldRef(i.field),pulse:a})):i.groupby?o=t.add(i1e({key:t.keyRef(i.groupby),group:Me(t.proxy(n.parent)),pulse:a})):te("Facet must specify groupby or field: "+pe(i));const l=t.fork(),u=l.add(Ea()),f=l.add($c({pulse:Me(u)}));l.addData(r,new lc(l,u,u,f)),l.addSignal("parent",null),o.params.subflow={$subflow:l.parse(e).toRuntime()}}function Sye(e,t,n){const i=t.add(bq({pulse:n.pulse})),r=t.fork();r.add($c()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function Nq(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,o=e.modify,l=e.values,u=t.add(zv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,o,l].map(g=>g??"null").join(",")+"),0)",d=no(f,t);u.update=d.$expr,u.params=d.$params}function gx(e,t){const n=kq(e),i=e.type===fx,r=e.from&&e.from.facet,a=e.overlap;let o=e.layout||n===EM||n===SM,l,u,f,d,g,p,y;const v=n===xM||o||r,b=bye(e.from,i,t);u=t.add(t1e({key:b.key||(e.key?Fp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Me(u);u=f=t.add(Ea({pulse:S})),u=t.add(l1e({markdef:fye(e),interactive:dye(e.interactive,t),clip:cye(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Me(u)}));const _=Me(u);u=d=t.add(vq(gq(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const T=RM(k,t),N=T.metadata;(N.generates||N.changes)&&te("Mark transforms should not generate new data."),N.nomod||(d.params.mod=!0),T.params.pulse=Me(u),t.add(u=T)}),e.sort&&(u=t.add(y1e({sort:t.compareRef(e.sort),pulse:Me(u)})));const w=Me(u);(r||o)&&(o=t.add(Sq({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Me(o));const A=t.add(yq({mark:_,pulse:p||w}));y=Me(A),i&&(v&&(l=t.operators,l.pop(),o&&l.pop()),t.pushState(w,p||y,S),r?xye(e,t,b):v?Sye(e,t,b):t.parse(e),t.popState(),v&&(o&&l.push(o),l.push(A))),a&&(y=Eye(a,y,t));const $=t.add(xq({pulse:y})),M=t.add($c({pulse:Me($)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new lc(t,f,$,M)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&te("Marks only support modify triggers."),Nq(k,t,g)}))}function Eye(e,t,n){const i=e.method,r=e.bound,a=e.separation,o={separation:mn(a)?n.signalRef(a.signal):a,method:mn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),r){const l=r.tolerance;o.boundTolerance=mn(l)?n.signalRef(l.signal):+l,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return Me(n.add(f1e(o)))}function _ye(e,t){const n=t.config.legend,i=e.encode||{},r=Hi(e,n),a=i.legend||{},o=a.name||void 0,l=a.interactive,u=a.style,f={};let d=0,g,p,y;$M.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||te("Missing valid scale for legend.");const v=wye(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Me(t.add(Ea(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Me(t.add(o1e(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===py?(y=[Q1e(e,d,n,i.gradient),iF(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Gu(r.gradientLength())})/100))`)):v===tC?y=[K1e(e,d,n,i.gradient,w),iF(e,n,i.labels,w)]:(g=tye(e,n),y=[eye(e,n,i,w,Gu(g.columns))],p.size=$ye(e,t,y[0].marks)),y=[Up({role:E0e,from:S,encode:_,marks:y,layout:g,interactive:l})],b.title&&y.push(uye(e,n,i.title,S)),gx(Up({role:x0e,from:S,encode:Jd(Cye(r,e,n),a,Am),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:l,style:u}),t)}function wye(e,t){let n=e.type||nF;return!e.type&&Aye(e)===1&&(e.fill||e.stroke)&&(n=R$(t)?py:Xw(t)?tC:nF),n!==py?n:Xw(t)?tC:py}function Aye(e){return $M.reduce((t,n)=>t+(e[n]?1:0),0)}function Cye(e,t,n){const i={enter:{},update:{}};return qn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function $ye(e,t,n){const i=Gu(cF("size",e,n)),r=Gu(cF("strokeWidth",e,n)),a=Gu(Tye(n[1].encode,t,wm));return no(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function cF(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Tq(e,n[0].encode)}function Tye(e,t,n){return Tq("fontSize",e)||V1e("fontSize",t,n)}const Mye=`item.orient==="${eh}"?-90:item.orient==="${th}"?90:0`;function kye(e,t){e=Ee(e)?{text:e}:e;const n=Hi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,o=r.interactive,l=r.style,u=[],f={},d=Me(t.add(Ea(null,[f])));return u.push(Nye(e,n,Dye(e),d)),e.subtitle&&u.push(Oye(e,n,i.subtitle,d)),gx(Up({role:C0e,from:d,encode:Rye(n,r),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:l}),t)}function Dye(e){const t=e.encode;return t&&t.title||He({name:e.name,interactive:e.interactive,style:e.style},t)}function Rye(e,t){const n={enter:{},update:{}};return qn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:MM},angle:{signal:Mye},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Jd(n,t,Am)}function Nye(e,t,n,i){const r={value:0},a=e.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return qn(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),mr({type:Tc,role:$0e,style:j1e,from:i,encode:o},n)}function Oye(e,t,n,i){const r={value:0},a=e.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return qn(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),mr({type:Tc,role:T0e,style:B1e,from:i,encode:o},n)}function zye(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(RM(i,t))}),e.on&&e.on.forEach(i=>{Nq(i,t,e.name)}),t.addDataPipeline(e.name,Fye(e,t,n))}function Fye(e,t,n){const i=[];let r=null,a=!1,o=!1,l,u,f,d,g;for(e.values?mn(e.values)||hy(e.format)?(i.push(fF(t,e)),i.push(r=bu())):i.push(r=bu({$ingest:e.values,$format:e.format})):e.url?hy(e.url)||hy(e.format)?(i.push(fF(t,e)),i.push(r=bu())):i.push(r=bu({$request:e.url,$format:e.format})):e.source&&(r=l=_e(e.source).map(p=>Me(t.getData(p).output)),i.push(null)),u=0,f=n.length;u<f;++u)d=n[u],g=d.metadata,!r&&!g.source&&i.push(r=bu()),i.push(d),g.generates&&(o=!0),g.modifies&&!o&&(a=!0),g.source?r=d:g.changes&&(r=null);return l&&(f=l.length-1,i[0]=p1e({derive:a,pulse:f?l:l[0]}),(a||f)&&i.splice(1,0,bu())),r||i.push(bu()),i.push($c({})),i}function bu(e){const t=Ea({},e);return t.metadata={source:!0},t}function fF(e,t){return s1e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Oq=e=>e===Rl||e===_a,px=(e,t,n)=>mn(e)?Bye(e.signal,t,n):e===eh||e===_a?t:n,Cn=(e,t,n)=>mn(e)?Uye(e.signal,t,n):Oq(e)?t:n,fa=(e,t,n)=>mn(e)?jye(e.signal,t,n):Oq(e)?n:t,zq=(e,t,n)=>mn(e)?Iye(e.signal,t,n):e===_a?{value:t}:{value:n},Lye=(e,t,n)=>mn(e)?Pye(e.signal,t,n):e===th?{value:t}:{value:n},Uye=(e,t,n)=>Fq(`${e} === '${_a}' || ${e} === '${Rl}'`,t,n),jye=(e,t,n)=>Fq(`${e} !== '${_a}' && ${e} !== '${Rl}'`,t,n),Bye=(e,t,n)=>NM(`${e} === '${eh}' || ${e} === '${_a}'`,t,n),Iye=(e,t,n)=>NM(`${e} === '${_a}'`,t,n),Pye=(e,t,n)=>NM(`${e} === '${th}'`,t,n),Fq=(e,t,n)=>(t=t!=null?An(t):t,n=n!=null?An(n):n,dF(t)&&dF(n)?(t=t?t.signal||pe(t.value):null,n=n?n.signal||pe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[He({test:e},t)].concat(n||[])),dF=e=>e==null||Object.keys(e).length===1,NM=(e,t,n)=>({signal:`${e} ? (${qf(t)}) : (${qf(n)})`}),qye=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${eh}' ? (${qf(i)}) : `:"")+(n!=null?`${e} === '${Rl}' ? (${qf(n)}) : `:"")+(r!=null?`${e} === '${th}' ? (${qf(r)}) : `:"")+(t!=null?`${e} === '${_a}' ? (${qf(t)}) : `:"")+"(null)"}),qf=e=>mn(e)?e.signal:e==null?null:pe(e),Hye=(e,t)=>t===0?0:mn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Wf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Df(e,t,n,i){let r;if(t&&we(t,e))return t[e];if(we(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[CM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[wm][r]}return null}function hF(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Gye(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,l,u,f;if(mn(o)){const g=hF([n.axisX,n.axisY]),p=hF([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(f of g)l[f]=Cn(o,Df(f,n.axisX,r,i),Df(f,n.axisY,r,i));u={};for(f of p)u[f]=qye(o.signal,Df(f,n.axisTop,r,i),Df(f,n.axisBottom,r,i),Df(f,n.axisLeft,r,i),Df(f,n.axisRight,r,i))}else l=o===_a||o===Rl?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return l||u||a?He({},r,l,u,a):r}function Yye(e,t,n,i){const r=Hi(e,t),a=e.orient;let o,l;const u={enter:o={opacity:at},update:l={opacity:Fr},exit:{opacity:at}};qn(u,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=gF(e,0),d=gF(e,1);return o.x=l.x=Cn(a,f,at),o.x2=l.x2=Cn(a,d),o.y=l.y=fa(a,f,at),o.y2=l.y2=fa(a,d),mr({type:TM,role:p0e,from:i,encode:u},n)}function gF(e,t){return{scale:e.scale,range:t}}function Xye(e,t,n,i,r){const a=Hi(e,t),o=e.orient,l=e.gridScale,u=px(o,1,-1),f=Vye(e.offset,u);let d,g,p;const y={enter:d={opacity:at},update:p={opacity:Fr},exit:g={opacity:at}};qn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:zr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=Cn(o,{signal:"height"},{signal:"width"}),S=l?{scale:l,range:0,mult:u,offset:f}:{value:0,offset:f},_=l?{scale:l,range:1,mult:u,offset:f}:He(b,{mult:u,offset:f});return d.x=p.x=Cn(o,v,S),d.y=p.y=fa(o,v,S),d.x2=p.x2=fa(o,_),d.y2=p.y2=Cn(o,_),g.x=Cn(o,v),g.y=fa(o,v),mr({type:TM,role:m0e,key:zr,from:i,encode:y},n)}function Vye(e,t){if(t!==1)if(!Se(e))e=mn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=He({},e);for(;n.mult!=null;)if(Se(n.mult))n=n.mult=He({},n.mult);else return n.mult=mn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Wye(e,t,n,i,r,a){const o=Hi(e,t),l=e.orient,u=px(l,-1,1);let f,d,g;const p={enter:f={opacity:at},update:g={opacity:Fr},exit:d={opacity:at}};qn(p,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const y=An(r);y.mult=u;const v={scale:e.scale,field:zr,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return g.y=f.y=Cn(l,at,v),g.y2=f.y2=Cn(l,y),d.x=Cn(l,v),g.x=f.x=fa(l,at,v),g.x2=f.x2=fa(l,y),d.y=fa(l,v),mr({type:TM,role:v0e,key:zr,from:i,encode:p},n)}function z_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function Qye(e,t,n,i,r,a){const o=Hi(e,t),l=e.orient,u=e.scale,f=px(l,-1,1),d=Gu(o("labelFlush")),g=Gu(o("labelFlushOffset")),p=o("labelAlign"),y=o("labelBaseline");let v=d===0||!!d,b;const S=An(r);S.mult=f,S.offset=An(o("labelPadding")||0),S.offset.mult=f;const _={scale:u,field:zr,band:.5,offset:Mq(a.offset,o("labelOffset"))},w=Cn(l,v?z_(u,d,'"left"','"right"','"center"'):{value:"center"},Lye(l,"left","right")),A=Cn(l,zq(l,"bottom","top"),v?z_(u,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=z_(u,d,`-(${g})`,g,0);v=v&&g;const M={opacity:at,x:Cn(l,_,S),y:fa(l,_,S)},k={enter:M,update:b={opacity:Fr,text:{field:AM},x:M.x,y:M.y,align:w,baseline:A},exit:{opacity:at,x:M.x,y:M.y}};qn(k,{dx:!p&&v?Cn(l,$):null,dy:!y&&v?fa(l,$):null}),qn(k,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:p,baseline:y});const T=o("labelBound");let N=o("labelOverlap");return N=N||T?{separation:o("labelSeparation"),method:N,order:"datum.index",bound:T?{scale:u,orient:l,tolerance:T}:null}:void 0,b.align!==w&&(b.align=Wf(b.align,w)),b.baseline!==A&&(b.baseline=Wf(b.baseline,A)),mr({type:Tc,role:y0e,style:wm,key:zr,from:i,encode:k,overlap:N},n)}function Kye(e,t,n,i){const r=Hi(e,t),a=e.orient,o=px(a,-1,1);let l,u;const f={enter:l={opacity:at,anchor:An(r("titleAnchor",null)),align:{signal:MM}},update:u=He({},l,{opacity:Fr,text:An(e.title)}),exit:{opacity:at}},d={signal:`lerp(range("${e.scale}"), ${dx(0,1,.5)})`};return u.x=Cn(a,d),u.y=fa(a,d),l.angle=Cn(a,at,Hye(o,90)),l.baseline=Cn(a,zq(a,Rl,_a),{value:Rl}),u.angle=l.angle,u.baseline=l.baseline,qn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Zye(r,a,f,n),f.update.align=Wf(f.update.align,l.align),f.update.angle=Wf(f.update.angle,l.angle),f.update.baseline=Wf(f.update.baseline,l.baseline),mr({type:Tc,role:b0e,style:CM,from:i,encode:f},n)}function Zye(e,t,n,i){const r=(l,u)=>l!=null?(n.update[u]=Wf(An(l),n.update[u]),!1):!Ff(u,i),a=r(e("titleX"),"x"),o=r(e("titleY"),"y");n.enter.auto=o===a?An(o):Cn(t,An(o),An(a))}function Jye(e,t){const n=Gye(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,o=r.interactive,l=r.style,u=Hi(e,n),f=W1e(u),d={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},g=Me(t.add(Ea({},[d]))),p=Me(t.add(e1e({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(Xye(e,n,i.grid,p,f)),d.ticks&&(v=u("tickSize"),y.push(Wye(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(Qye(e,n,i.labels,p,v,f))),d.domain&&y.push(Yye(e,n,i.domain,g)),d.title&&y.push(Kye(e,n,i.title,g)),gx(Up({role:g0e,from:g,encode:Jd(eve(u,e),r,Am),marks:y,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:a,interactive:o,style:l}),t)}function eve(e,t){const n={enter:{},update:{}};return qn(n,{orient:e("orient"),offset:e("offset")||0,position:na(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Lq(e,t,n){const i=_e(e.signals),r=_e(e.scales);return n||i.forEach(a=>pq(a,t)),_e(e.projections).forEach(a=>R1e(a,t)),r.forEach(a=>x1e(a,t)),_e(e.data).forEach(a=>zye(a,t)),r.forEach(a=>S1e(a,t)),(n||i).forEach(a=>J0e(a,t)),_e(e.axes).forEach(a=>Jye(a,t)),_e(e.marks).forEach(a=>gx(a,t)),_e(e.legends).forEach(a=>_ye(a,t)),e.title&&kye(e.title,t),t.parseLambdas(),t}const tve=e=>Jd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function nve(e,t){const n=t.config,i=Me(t.root=t.add(zv())),r=ive(e,n);r.forEach(f=>pq(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(Ea()),o=t.add(vq(gq(tve(e.encode),fx,SM,e.style,t,{pulse:Me(a)}))),l=t.add(Sq({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Me(o)}));t.operators.pop(),t.pushState(Me(o),Me(l),null),Lq(e,t,r),t.operators.push(l);let u=t.add(yq({mark:i,pulse:Me(l)}));return u=t.add(xq({pulse:Me(u)})),u=t.add($c({pulse:Me(u)})),t.addData("root",new lc(t,a,a,u)),t}function Ag(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function ive(e,t){const n=o=>na(e[o],t[o]),i=[Ag("background",n("background")),Ag("autosize",f0e(n("autosize"))),Ag("padding",h0e(n("padding"))),Ag("width",n("width")||0),Ag("height",n("height")||0)],r=i.reduce((o,l)=>(o[l.name]=l,o),{}),a={};return _e(e.signals).forEach(o=>{we(r,o.name)?o=He(r[o.name],o):i.push(o),a[o.name]=o}),_e(t.signals).forEach(o=>{!we(a,o.name)&&!we(r,o.name)&&i.push(o)}),i}function Uq(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function pF(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Uq.prototype=pF.prototype={parse(e){return Lq(e,this)},fork(){return new pF(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof QA?Me(e):e;return this.add(g1e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let o,l;i&&(o=i.data||(i.data={}),l=o[r]||(o[r]=[]),l.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Me(this.add($c({pulse:e})))),this._parent.push(t),this._lookup.push(n?Me(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return rt(this._parent)},encode(){return rt(this._encode)},lookup(){return rt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ee(e))return Fp(e,t);e.signal||te("Unsupported field reference: "+pe(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Me(this.add(r1e(r)))}return i},compareRef(e){let t=!1;const n=a=>mn(a)?(t=!0,this.signalRef(a.signal)):q0e(a)?(t=!0,this.exprRef(a.expr)):a,i=_e(e.field).map(n),r=_e(e.order).map(n);return t?Me(this.add(tF({fields:i,orders:r}))):Jz(i,r)},keyRef(e,t){let n=!1;const i=a=>mn(a)?(n=!0,Me(r[a.signal])):a,r=this.signals;return e=_e(e).map(i),n?Me(this.add(a1e({fields:e,flat:t}))):j0e(e,t)},sortRef(e){if(!e)return e;const t=ux(e.op,e.field),n=e.order||B0e;return n.signal?Me(this.add(tF({fields:t,orders:this.signalRef(n.signal)}))):Jz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return we(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+pe(e));const n=t instanceof QA?t:this.add(zv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+pe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Me(this.signals[e]):(we(this.lambdas,e)||(this.lambdas[e]=this.add(zv(null))),Me(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=no(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Se(e)?e:this.signalRef(e.signal||OM(e))},exprRef(e,t){const n={expr:no(e,this)};return t&&(n.expr.$name=t),Me(this.add(n1e(n)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+pe(e)),this.bindings.push(He({signal:e},t))},addScaleProj(e,t){we(this.scales,e)&&te("Duplicate scale or projection name: "+pe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,m1e(t))},addProjection(e,t){this.addScaleProj(e,h1e(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+pe(e)),this.scales[e]},scaleRef(e){return Me(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return we(this.data,e)&&te("Duplicate data set name: "+pe(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+pe(e)),this.data[e]},addDataPipeline(e,t){return we(this.data,e)&&te("Duplicate data set name: "+pe(e)),this.addData(e,lc.fromEntries(this,t))}};function OM(e){return(ae(e)?rve:ave)(e)}function rve(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Se(r)?r.signal||OM(r):pe(r))}return n+"]"}function ave(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+pe(i)+":"+(Se(r)?r.signal||OM(r):pe(r));return t+"}"}function ove(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function sve(e,t,n){return Se(e)||te("Input Vega specification must be an object."),t=jd(ove(),t,e.config),nve(e,new Uq(t,n)).toRuntime()}var lve="6.2.0";He(od,Qte,$se,ale,Hue,Uce,fde,Hfe,hde,Lde,Xde,ehe);const uve=lve,cve=Object.freeze(Object.defineProperty({__proto__:null,Bounds:cn,CanvasHandler:pm,CanvasRenderer:Wy,DATE:Ui,DAY:Kn,DAYOFYEAR:eo,Dataflow:Gf,Debug:OL,DisallowedObjectProperties:GC,Error:YC,EventStream:pb,Gradient:$j,GroupItem:Ub,HOURS:hr,Handler:iT,HybridHandler:yB,HybridRenderer:rA,Info:NL,Item:Lb,MILLISECONDS:ga,MINUTES:gr,MONTH:ti,Marks:pr,MultiPulse:y3,None:RL,Operator:$t,Parameters:gb,Pulse:bl,QUARTER:Li,RenderType:fl,Renderer:gm,ResourceLoader:Nj,SECONDS:jr,SVGHandler:rB,SVGRenderer:uT,SVGStringRenderer:mB,Scenegraph:Qj,TIME_UNITS:s3,Transform:ee,View:nq,WEEK:gn,Warn:XC,YEAR:Pn,accessor:qi,accessorFields:ei,accessorName:Wt,array:_e,ascending:Id,bandwidthNRD:S3,bin:g7,bootstrapCI:p7,boundClip:$B,boundContext:cm,boundItem:Jw,boundMark:Yj,boundStroke:ys,changeset:_c,clampRange:GL,codegenExpression:MP,compare:KC,constant:ai,cumulativeLogNormal:$3,cumulativeNormal:yb,cumulativeUniform:D3,dayofyear:S9,debounce:ZC,defaultLocale:d3,definition:f7,densityLogNormal:C3,densityNormal:E3,densityUniform:k3,domChild:hn,domClear:Mr,domCreate:ul,domFind:nT,dotbin:m7,error:te,expressionFunction:tn,extend:He,extent:Ka,extentIndex:YL,falsy:Js,fastmap:Pd,field:Lr,flush:XL,font:qb,fontFamily:hm,fontSize:co,format:X1,formatLocale:$y,formats:p3,hasOwnProperty:we,id:Wp,identity:ri,inferType:e7,inferTypes:t7,ingest:ht,inherits:ve,inrange:Uf,interpolate:N$,interpolateColors:zb,interpolateRange:hj,intersect:_B,intersectBoxLine:jf,intersectPath:I$,intersectPoint:P$,intersectRule:zj,isArray:ae,isBoolean:Ul,isDate:yl,isFunction:Pe,isIterable:VL,isNumber:ut,isObject:Se,isRegExp:JC,isString:Ee,isTuple:db,key:e3,lerp:WL,lineHeight:Ml,loader:cb,locale:Z9,logger:tb,lruCache:QL,markup:lT,merge:KL,mergeConfig:jd,multiLineOffset:J$,one:Ud,pad:ZL,panLinear:jL,panLog:BL,panPow:IL,panSymlog:PL,parse:sve,parseExpression:lM,parseSelector:Hl,path:Eb,pathCurves:U$,pathEqual:TB,pathParse:dd,pathRectangle:kj,pathRender:wp,pathSymbols:Mj,pathTrail:Dj,peek:rt,point:Gb,projection:TT,quantileLogNormal:T3,quantileNormal:vb,quantileUniform:R3,quantiles:b3,quantizeInterpolator:gj,quarter:qL,quartiles:x3,get random(){return Br},randomInteger:ete,randomKDE:w3,randomLCG:Jee,randomLogNormal:v7,randomMixture:b7,randomNormal:_3,randomUniform:x7,read:r7,regressionConstant:N3,regressionExp:E7,regressionLinear:O3,regressionLoess:A7,regressionLog:S7,regressionPoly:w7,regressionPow:_7,regressionQuad:z3,renderModule:Yb,repeat:Rg,resetDefaultLocale:KJ,resetSVGDefIds:Goe,responseType:i7,runtimeContext:qP,sampleCurve:xb,sampleLogNormal:A3,sampleNormal:mb,sampleUniform:M3,scale:ft,sceneEqual:cT,sceneFromJSON:Vj,scenePickVisit:Iy,sceneToJSON:Xj,sceneVisit:pa,sceneZOrder:q$,scheme:O$,serializeXML:dB,setHybridRendererOptions:Ioe,setRandom:Kee,span:Qp,splitAccessPath:so,stringValue:pe,textMetrics:lr,timeBin:U9,timeFloor:T9,timeFormatLocale:vp,timeInterval:Yd,timeOffset:D9,timeSequence:O9,timeUnitSpecifier:x9,timeUnits:l3,toBoolean:t3,toDate:n3,toNumber:Zn,toSet:ha,toString:i3,transform:d7,transforms:od,truncate:JL,truthy:Ur,tupleid:ke,typeParsers:zw,utcFloor:M9,utcInterval:Xd,utcOffset:R9,utcSequence:z9,utcdayofyear:w9,utcquarter:HL,utcweek:A9,version:uve,visitArray:nl,week:E9,writeConfig:Bd,zero:sl,zoomLinear:VC,zoomLog:WC,zoomPow:Sy,zoomSymlog:QC},Symbol.toStringTag,{value:"Module"}));function fve(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var dve={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},hve={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},gve={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const pve=Array.prototype.slice,xu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,pve.call(t,1))},mve=(e,t=0,n=1,i=0,r=0,a=0,o=0)=>Ee(e)?new Date(e):new Date(e,t,n,i,r,a,o);var yve={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:mve,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return xu("join",arguments)},indexof:function(){return xu("indexOf",arguments)},lastindexof:function(){return xu("lastIndexOf",arguments)},slice:function(){return xu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Id),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return xu("substring",arguments,String)},split:function(){return xu("split",arguments,String)},replace:function(){return xu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const vve=["view","item","group","xy","x","y"],iC=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&iC.add(setImmediate);const bve={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:dve[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),iC.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||yve[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>hve[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>gve[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);e.memberDepth-=1;const a=e(i.value);return GC.has(r)?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):iC.has(a)?console.error(`Prevented interpretation of method "${r}" which could lead to insecure code execution`):n[r]=a,n},{})};function Cg(e,t,n,i,r,a){const o=l=>bve[l.type](o,l);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=i,o.event=r,o.item=a,vve.forEach(l=>o.fn[l]=(...u)=>r.vega[l](...u)),o(e)}var xve={operator(e,t){const n=t.ast,i=e.functions;return r=>Cg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>Cg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>Cg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const o=a.item&&a.item.datum;return Cg(n,i,r,o,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(o,l)=>{const u=o.datum;let f=0,d;for(const g in i)d=Cg(i[g].ast,r,l,u,void 0,o),o[g]!==d&&(o[g]=d,f=1);return n!=="rule"&&fve(o,i,a),f}}},Sve="6.4.1",Eve={version:Sve};function zM(e){return fe(e,"or")}function FM(e){return fe(e,"and")}function LM(e){return fe(e,"not")}function yy(e,t){if(LM(e))yy(e.not,t);else if(FM(e))for(const n of e.and)yy(n,t);else if(zM(e))for(const n of e.or)yy(n,t);else t(e)}function Qf(e,t){return LM(e)?{not:Qf(e.not,t)}:FM(e)?{and:e.and.map(n=>Qf(n,t))}:zM(e)?{or:e.or.map(n=>Qf(n,t))}:t(e)}const Ue=structuredClone;function jq(e){throw new Error(e)}function Sd(e,t){const n={};for(const i of t)we(e,i)&&(n[i]=e[i]);return n}function cr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>mt(e)).join(",")})`};function tt(e){if(ut(e))return e;const t=Ee(e)?e:mt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function rC(e){return e===!1||e===null}function We(e,t){return e.includes(t)}function Ed(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function UM(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Bq(e,...t){for(const n of t)_ve(e,n??{});return e}function _ve(e,t){for(const n of ue(t))Bd(e,n,t[n],!0)}function qa(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function wve(e,t){const n=ue(e),i=ue(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Iq(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function aC(e){const t=new Set;for(const n of e){const r=so(n).map((o,l)=>l===0?o:`[${o}]`),a=r.map((o,l)=>r.slice(0,l+1).join(""));for(const o of a)t.add(o)}return t}function BM(e,t){return e===void 0||t===void 0?!0:jM(aC(e),aC(t))}function Tt(e){return ue(e).length===0}const ue=Object.keys,un=Object.values,Nl=Object.entries;function jp(e){return e===!0||e===!1}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function dp(e,t){return LM(e)?`!(${dp(e.not,t)})`:FM(e)?`(${e.and.map(n=>dp(n,t)).join(") && (")})`:zM(e)?`(${e.or.map(n=>dp(n,t)).join(") || (")})`:t(e)}function Fv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Fv(e[n],t)&&delete e[n],Tt(e)}function Cm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function IM(e,t="datum"){const n=so(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(pe).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function Pq(e,t="datum"){return`${t}[${pe(so(e).join("."))}]`}function bt(e){return`datum['${e.replaceAll("'","\\'")}']`}function qq(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function Ave(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Pr(e){return`${so(e).map(Ave).join("\\.")}`}function uc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function nh(e){return`${so(e).join(".")}`}function _d(e){return e?so(e).length:0}function Jt(...e){return e.find(t=>t!==void 0)}let Hq=42;function Gq(e){const t=++Hq;return e?String(e)+t:t}function Cve(){Hq=42}function Yq(e){return Xq(e)?e:`__${e}`}function Xq(e){return e.startsWith("__")}function Bp(e){if(e!==void 0)return(e%360+360)%360}function mx(e){return ut(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const mF=Object.getPrototypeOf(structuredClone({}));function or(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!or(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!or(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==mF.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==mF.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!or(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function mt(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,l=Object.keys(i).sort();for(a="",r=0;r<l.length;r++){const u=l[r],f=n(i[u]);f&&(a&&(a+=","),a+=`${JSON.stringify(u)}:${f}`)}return t.splice(o,1),`{${a}}`})(e)}function fe(e,t){return Se(e)&&we(e,t)&&e[t]!==void 0}const rs="row",as="column",yx="facet",jt="x",kn="y",wa="x2",po="y2",Gl="xOffset",ih="yOffset",Aa="radius",bs="radius2",Gr="theta",xs="theta2",Ca="latitude",$a="longitude",Ta="latitude2",qr="longitude2",Yl="time",Bi="color",mo="fill",yo="stroke",Ii="shape",Ss="size",Mc="angle",Es="opacity",Xl="fillOpacity",Vl="strokeOpacity",Wl="strokeWidth",Ql="strokeDash",$m="text",wd="order",Tm="detail",vx="key",cc="tooltip",bx="href",xx="url",Sx="description",$ve={x:1,y:1,x2:1,y2:1},Vq={theta:1,theta2:1,radius:1,radius2:1};function Wq(e){return we(Vq,e)}const PM={longitude:1,longitude2:1,latitude:1,latitude2:1};function Qq(e){switch(e){case Ca:return"y";case Ta:return"y2";case $a:return"x";case qr:return"x2"}}function Kq(e){return we(PM,e)}const Tve=ue(PM),qM={...$ve,...Vq,...PM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Kf(e){return e===Bi||e===mo||e===yo}const Zq={row:1,column:1,facet:1},Or=ue(Zq),HM={...qM,...Zq},Mve=ue(HM),{order:W3e,detail:Q3e,tooltip:K3e,...kve}=HM,{row:Z3e,column:J3e,facet:e$e,...Dve}=kve;function Rve(e){return we(Dve,e)}function Jq(e){return we(HM,e)}const Nve=[wa,po,Ta,qr,xs,bs];function eH(e){return kc(e)!==e}function kc(e){switch(e){case wa:return jt;case po:return kn;case Ta:return Ca;case qr:return $a;case xs:return Gr;case bs:return Aa}return e}function Ol(e){if(Wq(e))switch(e){case Gr:return"startAngle";case xs:return"endAngle";case Aa:return"outerRadius";case bs:return"innerRadius"}return e}function vo(e){switch(e){case jt:return wa;case kn:return po;case Ca:return Ta;case $a:return qr;case Gr:return xs;case Aa:return bs}}function Pi(e){switch(e){case jt:case wa:return"width";case kn:case po:return"height"}}function tH(e){switch(e){case jt:return"xOffset";case kn:return"yOffset";case wa:return"x2Offset";case po:return"y2Offset";case Gr:return"thetaOffset";case Aa:return"radiusOffset";case xs:return"theta2Offset";case bs:return"radius2Offset"}}function GM(e){switch(e){case jt:return"xOffset";case kn:return"yOffset"}}function Ove(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const zve=ue(qM),{x:t$e,y:n$e,x2:i$e,y2:r$e,xOffset:a$e,yOffset:o$e,latitude:s$e,longitude:l$e,latitude2:u$e,longitude2:c$e,theta:f$e,theta2:d$e,radius:h$e,radius2:g$e,...YM}=qM,Fve=ue(YM),XM={x:1,y:1},_s=ue(XM);function en(e){return we(XM,e)}const VM={theta:1,radius:1},Lve=ue(VM);function Ex(e){return e==="width"?jt:kn}const nH={xOffset:1,yOffset:1};function Mm(e){return we(nH,e)}const Uve={time:1};function F_(e){return e in Uve}const{text:p$e,tooltip:m$e,href:y$e,url:v$e,description:b$e,detail:x$e,key:S$e,order:E$e,...iH}=YM,jve=ue(iH);function Bve(e){return we(YM,e)}function Ive(e){switch(e){case Bi:case mo:case yo:case Ss:case Ii:case Es:case Wl:case Ql:return!0;case Xl:case Vl:case Mc:case Yl:return!1}}const rH={...XM,...VM,...nH,...iH},WM=ue(rH);function bo(e){return we(rH,e)}function Pve(e,t){return Hve(e)[t]}const aH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:_$e,...qve}=aH;function Hve(e){switch(e){case Bi:case mo:case yo:case Sx:case Tm:case vx:case cc:case bx:case wd:case Es:case Xl:case Vl:case Wl:case yx:case rs:case as:return aH;case jt:case kn:case Gl:case ih:case Ca:case $a:case Yl:return qve;case wa:case po:case Ta:case qr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ss:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ql:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ii:return{point:"always",geoshape:"always"};case $m:return{text:"always"};case Mc:return{point:"always",square:"always",text:"always"};case xx:return{image:"always"};case Gr:return{text:"always",arc:"always"};case Aa:return{text:"always",arc:"always"};case xs:case bs:return{arc:"always"}}}function L_(e){switch(e){case jt:case kn:case Gr:case Aa:case Gl:case ih:case Ss:case Mc:case Wl:case Es:case Xl:case Vl:case Yl:case wa:case po:case xs:case bs:return;case yx:case rs:case as:case Ii:case Ql:case $m:case cc:case bx:case xx:case Sx:return"discrete";case Bi:case mo:case yo:return"flexible";case Ca:case $a:case Ta:case qr:case Tm:case vx:case wd:return}}const Gve={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Yve={count:1,min:1,max:1};function hs(e){return fe(e,"argmin")}function Kl(e){return fe(e,"argmax")}function QM(e){return Ee(e)&&we(Gve,e)}const Xve=new Set(["count","valid","missing","distinct"]);function _x(e){return Ee(e)&&Xve.has(e)}function Vve(e){return Ee(e)&&We(["min","max"],e)}const Wve=new Set(["count","sum","distinct","valid","missing"]),Qve=new Set(["mean","average","median","q1","q3","min","max"]);function oH(e){return Ul(e)&&(e=zx(e,void 0)),`bin${ue(e).map(t=>wx(e[t])?Lt(`_${t}_${Nl(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}`}function Mt(e){return e===!0||Dc(e)&&!e.binned}function Fn(e){return e==="binned"||Dc(e)&&e.binned===!0}function Dc(e){return Se(e)}function wx(e){return fe(e,"param")}function yF(e){switch(e){case rs:case as:case Ss:case Bi:case mo:case yo:case Wl:case Es:case Xl:case Vl:case Ii:return 6;case Ql:return 4;default:return 10}}function km(e){return fe(e,"expr")}function Ln(e,{level:t}={level:0}){const n=ue(e||{}),i={};for(const r of n)i[r]=t===0?rr(e[r]):Ln(e[r],{level:t-1});return i}function sH(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:o,color:l,subtitleColor:u,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...l?{fill:l}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...o!==void 0?{limit:o}:{}},w={...u?{subtitleColor:u}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=Sd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function ol(e){return Ee(e)||ae(e)&&Ee(e[0])}function Te(e){return fe(e,"signal")}function Rc(e){return fe(e,"step")}function Kve(e){return ae(e)?!1:fe(e,"fields")&&!fe(e,"data")}function Zve(e){return ae(e)?!1:fe(e,"fields")&&fe(e,"data")}function Jo(e){return ae(e)?!1:fe(e,"field")&&fe(e,"data")}const Jve={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},ebe=ue(Jve),tbe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},oC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],nbe="  ";function lH(e){const t=ae(e.condition)?e.condition.map(vF):vF(e.condition);return{...rr(e),condition:t}}function rr(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vF(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Nt(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Te(e)?e:e!==void 0?{value:e}:void 0}function ibe(e){return Te(e)?e.signal:pe(e)}function bF(e){return Te(e)?e.signal:pe(e.value)}function ua(e){return Te(e)?e.signal:e==null?null:pe(e)}function rbe(e,t,n){for(const i of n){const r=io(i,t.markDef,t.config);r!==void 0&&(e[i]=Nt(r))}return e}function uH(e){return[].concat(e.type,e.style??[])}function pt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&fe(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:io(e,t,n,i)}function io(e,t,n,{vgChannel:i}={}){const r=sC(e,t,n.style);return Jt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function sC(e,t,n){return cH(e,uH(t),n)}function cH(e,t,n){t=_e(t);let i;for(const r of t){const a=n[r];fe(a,e)&&(i=a[e])}return i}function fH(e,t){return _e(e).reduce((n,i)=>(n.field.push(xe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function dH(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(or(r,i))return;n.push(i)}),n}function hH(e,t){return or(e,t)||!t?e:e?[..._e(e),..._e(t)].join(", "):t}function gH(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((ol(n)||Te(n))&&(ol(i)||Te(i)))return{explicit:e.explicit,value:hH(n,i)};if(ol(n)||Te(n))return{explicit:e.explicit,value:n};if(ol(i)||Te(i))return{explicit:e.explicit,value:i};if(!ol(n)&&!Te(n)&&!ol(i)&&!Te(i))return{explicit:e.explicit,value:dH(n,i)};throw new Error("It should never reach here")}function KM(e){return`Invalid specification ${mt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const abe='Autosize "fit" only works for single views and layered views.';function xF(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function SF(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function EF(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pi(e)}.`:'Dropping "fit" because spec has discrete size.'}function ZM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _F(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function obe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function sbe(e){return`The "nearest" transform is not supported for ${e} marks.`}function pH(e){return`Selection not supported for ${e} yet.`}function lbe(e){return`Cannot find a selection named "${e}".`}const ube="Scale bindings are currently only supported for scales with unbinned, continuous domains.",cbe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",fbe="Legend bindings are only supported for selections over an individual field or encoding channel.";function dbe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function hbe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const gbe="The same selection must be used to override scale domains in a layered view.",pbe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function mbe(e){return`Unknown repeated value "${e}".`}function wF(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const ybe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",JM="Animation involving facet, layer, or concat is currently unsupported.";function vbe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${pe(e)}.`}function bbe(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${pe(t)} encoding found for selection ${pe(n.param)}. Using "field": ${pe(i)}.`}const xbe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Sbe(e){return`Unrecognized parse "${e}".`}function AF(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Ebe="Attempt to add the same child twice.";function _be(e){return`Ignoring an invalid transform: ${mt(e)}.`}const wbe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function CF(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Abe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${mt(t)} is overridden by a child projection ${mt(n)}.`}const Cbe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function $be(e){return`${e}Offset dropped because ${e} is continuous`}function Tbe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${mt(n)}}.`}function mH(e){return`Invalid field type "${e}".`}function Mbe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function kbe(e){return`Invalid aggregation operator "${e}".`}function yH(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function Dbe(e){return`Position range does not support relative band size for ${e}.`}function lC(e,t){return`Dropping ${mt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Rbe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ax(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Nbe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Obe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function zbe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Fbe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function U_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Lbe(e){return`The ${e} for range marks cannot be an expression`}function Ube(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function jbe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Bbe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Ibe(e){return`Cannot use the relative band size with ${e} scale.`}function Pbe(e){return`Using unaggregated domain with raw field has no effect (${mt(e)}).`}function qbe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Hbe(e){return`Unaggregated domain is currently unsupported for log scale (${mt(e)}).`}function Gbe(e){return`Cannot apply size to non-oriented mark "${e}".`}function Ybe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Xbe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function vH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function bH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Vbe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(i)}). Using ${mt(n)}.`}function Wbe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(i)}). Using the union of the two domains.`}function Qbe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Kbe(e){return`Dropping sort property ${mt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const $F="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Zbe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Jbe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",exe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function txe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function nxe(e){return`Stack is applied to a non-linear scale (${e}).`}function ixe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Lv(e,t){return`Invalid ${e}: ${mt(t)}.`}function rxe(e){return`Dropping day from datetime ${mt(e)} as day cannot be combined with other units.`}function axe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function oxe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function sxe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function TF(e){return`1D error band does not support ${e}.`}function xH(e){return`Channel ${e} is required for "binned" bin.`}function lxe(e){return`Channel ${e} should not be used with "binned" bin.`}function uxe(e){return`Domain for ${e} is required for threshold scale.`}const SH=tb(XC);let fc=SH;function cxe(e){return fc=e,fc}function fxe(){return fc=SH,fc}function ek(...e){fc.error(...e)}function ge(...e){fc.warn(...e)}function dxe(...e){fc.debug(...e)}function Nc(e){if(e&&Se(e)){for(const t of nk)if(fe(e,t))return!0}return!1}const EH=["january","february","march","april","may","june","july","august","september","october","november","december"],hxe=EH.map(e=>e.substr(0,3)),_H=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],gxe=_H.map(e=>e.substr(0,3));function pxe(e){if(mx(e)&&(e=+e),ut(e))return e>4&&ge(Lv("quarter",e)),e-1;throw new Error(Lv("quarter",e))}function mxe(e){if(mx(e)&&(e=+e),ut(e))return e-1;{const t=e.toLowerCase(),n=EH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=hxe.indexOf(i);if(r!==-1)return r;throw new Error(Lv("month",e))}}function yxe(e){if(mx(e)&&(e=+e),ut(e))return e%7;{const t=e.toLowerCase(),n=_H.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=gxe.indexOf(i);if(r!==-1)return r;throw new Error(Lv("day",e))}}function tk(e,t){const n=[];if(t&&e.day!==void 0&&ue(e).length>1&&(ge(rxe(e)),e=Ue(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?mxe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?pxe(e.quarter):e.quarter;n.push(ut(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?yxe(e.day):e.day;n.push(ut(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function dc(e){const n=tk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function vxe(e){const n=tk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function bxe(e){const t=tk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const wH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},nk=ue(wH);function xxe(e){return we(wH,e)}function Oc(e){return Se(e)?e.binned:AH(e)}function AH(e){return e?.startsWith("binned")}function ik(e){return e.startsWith("utc")}function Sxe(e){return e.substring(3)}const Exe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Cx(e){return nk.filter(t=>$H(e,t))}function CH(e){const t=Cx(e);return t[t.length-1]}function $H(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function _xe(e,t,{end:n}={end:!1}){const i=IM(t),r=ik(e)?"utc":"";function a(u){return u==="quarter"?`(${r}quarter(${i})-1)`:`${r}${u}(${i})`}let o;const l={};for(const u of nk)$H(e,u)&&(l[u]=a(u),o=u);return n&&(l[o]+="+1"),vxe(l)}function TH(e){if(!e)return;const t=Cx(e);return`timeUnitSpecifier(${mt(t)}, ${mt(Exe)})`}function wxe(e,t,n){if(!e)return;const i=TH(e);return`${n||ik(e)?"utc":"time"}Format(${t}, ${i})`}function $n(e){if(!e)return;let t;return Ee(e)?AH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Se(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),ik(t.unit)&&(t.utc=!0,t.unit=Sxe(t.unit)),t}function Axe(e){const{utc:t,...n}=$n(e);return n.unit?(t?"utc":"")+ue(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${ue(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}`}function MH(e,t=n=>n){const n=$n(e),i=CH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:o}=kH(i,n.step),l={...r,[o]:+r[o]+a};return`${t(dc(l))} - ${t(dc(r))}`}}const Cxe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function $xe(e){return we(Cxe,e)}function kH(e,t=1){if($xe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Txe(e){return fe(e,"param")}function rk(e){return!!e?.field&&e.equal!==void 0}function ak(e){return!!e?.field&&e.lt!==void 0}function ok(e){return!!e?.field&&e.lte!==void 0}function sk(e){return!!e?.field&&e.gt!==void 0}function lk(e){return!!e?.field&&e.gte!==void 0}function uk(e){if(e?.field){if(ae(e.range)&&e.range.length===2)return!0;if(Te(e.range))return!0}return!1}function ck(e){return!!e?.field&&(ae(e.oneOf)||ae(e.in))}function Mxe(e){return!!e?.field&&e.valid!==void 0}function DH(e){return ck(e)||rk(e)||uk(e)||ak(e)||sk(e)||ok(e)||lk(e)}function za(e,t){return Fx(e,{timeUnit:t,wrapTime:!0})}function kxe(e,t){return e.map(n=>za(n,t))}function RH(e,t=!0){const{field:n}=e,i=$n(e.timeUnit),{unit:r,binned:a}=i||{},o=xe(e,{expr:"datum"}),l=r?`time(${a?o:_xe(r,n)})`:o;if(rk(e))return`${l}===${za(e.equal,r)}`;if(ak(e)){const u=e.lt;return`${l}<${za(u,r)}`}else if(sk(e)){const u=e.gt;return`${l}>${za(u,r)}`}else if(ok(e)){const u=e.lte;return`${l}<=${za(u,r)}`}else if(lk(e)){const u=e.gte;return`${l}>=${za(u,r)}`}else{if(ck(e))return`indexof([${kxe(e.oneOf,r).join(",")}], ${l}) !== -1`;if(Mxe(e))return $x(l,e.valid);if(uk(e)){const{range:u}=Ln(e),f=Te(u)?{signal:`${u.signal}[0]`}:u[0],d=Te(u)?{signal:`${u.signal}[1]`}:u[1];if(f!==null&&d!==null&&t)return`inrange(${l}, [${za(f,r)}, ${za(d,r)}])`;const g=[];return f!==null&&g.push(`${l} >= ${za(f,r)}`),d!==null&&g.push(`${l} <= ${za(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${mt(e)}`)}function $x(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Dxe(e){return DH(e)&&e.timeUnit?{...e,timeUnit:$n(e.timeUnit)}:e}const Dm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Rxe(e){return e==="quantitative"||e==="temporal"}function fk(e){return e==="ordinal"||e==="nominal"}const hc=Dm.quantitative,dk=Dm.ordinal,Ad=Dm.temporal,hk=Dm.nominal,rh=Dm.geojson;function Nxe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case hc:return"quantitative";case"t":case Ad:return"temporal";case"o":case dk:return"ordinal";case"n":case hk:return"nominal";case rh:return"geojson"}}const Un={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},uC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Oxe(e,t){const n=uC[e],i=uC[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const zxe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function MF(e){return zxe[e]}const NH=new Set(["linear","log","pow","sqrt","symlog"]),OH=new Set([...NH,"time","utc"]);function zH(e){return NH.has(e)}const FH=new Set(["quantile","quantize","threshold"]),Fxe=new Set([...OH,...FH,"sequential","identity"]),Lxe=new Set(["ordinal","bin-ordinal","point","band"]);function Tn(e){return Lxe.has(e)}function ma(e){return Fxe.has(e)}function Ha(e){return OH.has(e)}function Cd(e){return FH.has(e)}const Uxe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function jxe(e){return!Ee(e)&&fe(e,"name")}function LH(e){return fe(e,"param")}function Bxe(e){return fe(e,"unionWith")}function Ixe(e){return Se(e)&&"field"in e}const Pxe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:w$e,domain:A$e,range:C$e,rangeMax:$$e,rangeMin:T$e,scheme:M$e,...qxe}=Pxe,Hxe=ue(qxe);function cC(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ha(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ha(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ha(e);case"nice":return Ha(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ma(e)&&!We(["log","time","utc","threshold","quantile"],e)}}function UH(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Kf(e)?void 0:Bbe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Gxe(e,t){return We([dk,hk],t)?e===void 0||Tn(e):t===Ad?We([Un.TIME,Un.UTC,void 0],e):t===hc?zH(e)||Cd(e)||e===void 0:!0}function Yxe(e,t,n=!1){if(!bo(e))return!1;switch(e){case jt:case kn:case Gl:case ih:case Gr:case Aa:return Ha(t)||t==="band"?!0:t==="point"?!n:!1;case Yl:return We(["linear","band"],t);case Ss:case Wl:case Es:case Xl:case Vl:case Mc:return Ha(t)||Cd(t)||We(["band","point","ordinal"],t);case Bi:case mo:case yo:return t!=="band";case Ql:case Ii:return t==="ordinal"||Cd(t)}}function Xxe(e){return Se(e)&&"value"in e}const _i={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},jH=_i.arc,Tx=_i.area,Mx=_i.bar,Vxe=_i.image,kx=_i.line,Dx=_i.point,Wxe=_i.rect,Uv=_i.rule,BH=_i.text,gk=_i.tick,Qxe=_i.trail,pk=_i.circle,mk=_i.square,IH=_i.geoshape;function Zl(e){return["line","area","trail"].includes(e)}function Ip(e){return["rect","bar","image","arc","tick"].includes(e)}const Kxe=new Set(ue(_i));function ro(e){return fe(e,"type")}const Zxe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Jxe=["fill","fillOpacity"],e2e=[...Zxe,...Jxe],t2e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},kF=ue(t2e),j_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],n2e={area:["line","point"],bar:j_,rect:j_,line:["point"],tick:["bandSize","thickness",...j_]},i2e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},r2e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},PH=ue(r2e);function gc(e){return fe(e,"band")}const a2e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},o2e=5,yk={binSpacing:0,continuousBandSize:o2e,minBandSize:.25,timeUnitBandPosition:.5},s2e={...yk,binSpacing:1},l2e={...yk,thickness:1};function u2e(e){return ro(e)?e.type:e}function qH(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function vk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ma(i)||r)return"always-valid";const a=qH(pt("invalid",e,t),{isPath:Zl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function c2e(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function HH({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function GH({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const o=n?.get("type"),l=va(t),u=_x(l?.aggregate),f=vk({scaleChannel:e,markDef:r,config:a,scaleType:o,isCountAggregate:u});if(l&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:$x(xe(l,{expr:"datum"}),!1),...f2e(d,n,i)}}}function f2e(e,t,n){if(Xxe(e)){const{value:i}=e;return Te(i)?{signal:i.signal}:{value:i}}return HH({scale:t,scaleName:n,mode:"zeroOrMin"})}function bk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:o}=e,l=kc(t),u=xk(e),f=GH({scaleChannel:l,channelDef:n,scale:r,scaleName:a,markDef:i,config:o});return f!==void 0?[f,u]:u}function d2e(e){const{datum:t}=e;return Nc(t)?dc(t):`${mt(t)}`}function Yu(e,t,n,i){const r={};if(t&&(r.scale=t),xo(e)){const{datum:a}=e;Nc(a)?r.signal=dc(a):Te(a)?r.signal=a.signal:km(a)?r.signal=a.expr:r.value=a}else r.field=xe(e,n);if(i){const{offset:a,band:o}=i;a&&(r.offset=a),o&&(r.band=o)}return r}function jv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:o=.5}){const l=!Te(o)&&0<o&&o<1?"datum":void 0,u=xe(t,{expr:l,suffix:r}),f=n!==void 0?xe(n,{expr:l}):xe(t,{suffix:a,expr:l}),d={};if(o===0||o===1){d.scale=e;const g=o===0?u:f;d.field=g}else{const g=Te(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${f}`:`${1-o} * ${u} + ${o} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function h2e({scaleName:e,fieldDef:t}){const n=xe(t,{expr:"datum"}),i=xe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function xk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:l,offset:u,defaultRef:f,bandPosition:d}){if(t){if(je(t)){const g=o?.get("type");if(Si(t)){d??=zl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Mt(p)||d&&y&&v===Ad)return l?.impute?Yu(t,a,{binSuffix:"mid"},{offset:u}):d&&!Tn(g)?jv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:u}):Yu(t,a,Fm(t,e)?{binSuffix:"range"}:{},{offset:u});if(Fn(p)){if(he(n))return jv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:u});ge(xH(e===jt?wa:po))}}return Yu(t,a,Tn(g)?{binSuffix:"range"}:{},{offset:u,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(ya(t)){const g=t.value,p=u?{offset:u}:{};return{...hp(e,g),...p}}}return Pe(f)&&(f=f()),f&&{...f,...u?{offset:u}:{}}}function hp(e,t){return We(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:We(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Nt(t)}function pc(e){return e&&e!=="number"&&e!=="time"}function YH(e,t,n){return`${e}(${t}${n?`, ${mt(n)}`:""})`}function Sk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(pc(n))return ca({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const o=XH(e,i,r),l=$d(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(l==="quantitative"){if(r&&a.normalizedNumberFormatType)return ca({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ca({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(l==="temporal"&&a.timeFormatType&&he(e)&&e.timeUnit===void 0)return ca({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function u(f){return he(f)?$n(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Md(e)){const{unit:f,utc:d}=u(e),g=p2e({field:o,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||zc(e)&&e.scale?.type===Un.UTC});return g?{signal:g}:void 0}if(t=fC({type:l,specifiedFormat:t,config:a,normalizeStack:r}),he(e)&&Mt(e.bin)){const f=xe(e,{expr:i,binSuffix:"end"});return{signal:Rm(o,f,t,n,a)}}else return t||$d(e)==="quantitative"?{signal:`${QH(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function XH(e,t,n){return he(e)?n?`${xe(e,{expr:t,suffix:"end"})}-${xe(e,{expr:t,suffix:"start"})}`:xe(e,{expr:t}):d2e(e)}function ca({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:o}){if(o??=XH(e,i,r),o!=="datum.value"&&he(e)&&Mt(e.bin)){const l=xe(e,{expr:i,binSuffix:"end"});return{signal:Rm(o,l,t,n,a)}}return{signal:YH(n,o,t)}}function VH(e,t,n,i,r,a){if(!(Ee(i)&&pc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&$d(e)==="quantitative"&&(r.normalizedNumberFormatType&&Td(e)&&e.stack==="normalize"||r.numberFormatType))){if(Td(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return fC({type:"quantitative",config:r,normalizeStack:!0});if(Md(e)){const o=he(e)?$n(e.timeUnit)?.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:g2e({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:a})}return fC({type:t,specifiedFormat:n,config:r})}}function WH(e,t,n){if(e&&(Te(e)||e==="number"||e==="time"))return e;if(Md(t)&&n!=="time"&&n!=="utc")return he(t)&&$n(t?.timeUnit)?.utc?"utc":"time"}function fC({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Ee(t))return t;if(e===hc)return i?n.normalizedNumberFormat:n.numberFormat}function g2e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:TH(t)}:i?void 0:n.timeFormat)}function QH(e,t){return`format(${e}, "${t||""}")`}function DF(e,t,n,i){return pc(n)?YH(n,e,t):QH(e,(Ee(t)?t:void 0)??i.numberFormat)}function Rm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return Rm(e,t,r.numberFormat,r.numberFormatType,r);const a=DF(e,n,i,r),o=DF(t,n,i,r);return`${$x(e,!1)} ? "null" : ${a} + "${nbe}" + ${o}`}function p2e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${mt(n)})`:(n=Ee(n)?n:r,`${a?"utc":"time"}Format(${e}, ${mt(n)})`):wxe(t,e,a)}const Rx="min",m2e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function RF(e){return we(m2e,e)}function y2e(e){return fe(e,"encoding")}function os(e){return e&&(e.op==="count"||fe(e,"field"))}function KH(e){return e&&ae(e)}function Nm(e){return fe(e,"row")||fe(e,"column")}function Ek(e){return fe(e,"header")}function Nx(e){return fe(e,"facet")}function v2e(e){return fe(e,"param")}function b2e(e){return!Ee(e)&&fe(e,"repeat")}function NF(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function _k(e){return fe(e,"sort")}function zl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(je(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return io("timeUnitBandPosition",n,i);if(Mt(a))return .5}}function ZH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:o}){const l=Pi(e),u=pt(o?"size":l,i,r,{vgChannel:l});if(u!==void 0)return u;if(he(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:io("timeUnitBandSize",i,r)};if(Mt(d)&&!Tn(a))return{band:1}}if(Ip(i.type))return a?Tn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function JH(e,t,n,i){return Mt(e.bin)||e.timeUnit&&Si(e)&&e.type==="temporal"?zl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function eG(e){return fe(e,"sort")&&!fe(e,"field")}function Om(e){return fe(e,"condition")}function Ox(e){const t=e?.condition;return!!t&&!ae(t)&&he(t)}function zm(e){const t=e?.condition;return!!t&&!ae(t)&&je(t)}function x2e(e){const t=e?.condition;return!!t&&(ae(t)||ya(t))}function he(e){return fe(e,"field")||e?.aggregate==="count"}function $d(e){return e?.type}function xo(e){return fe(e,"datum")}function ml(e){return Si(e)&&!Iv(e)||Bv(e)}function OF(e){return Si(e)&&e.type==="quantitative"&&!e.bin||Bv(e)}function Bv(e){return xo(e)&&ut(e.datum)}function je(e){return he(e)||xo(e)}function Si(e){return e&&(fe(e,"field")||e.aggregate==="count")&&fe(e,"type")}function ya(e){return fe(e,"value")}function zc(e){return fe(e,"scale")||fe(e,"sort")}function Td(e){return fe(e,"axis")||fe(e,"stack")||fe(e,"impute")}function tG(e){return fe(e,"legend")}function nG(e){return fe(e,"format")||fe(e,"formatType")}function S2e(e){return cr(e,["legend","axis","header","scale"])}function E2e(e){return fe(e,"op")}function xe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(w2e(e))n=Yq("count");else{let o;if(!t.nofn)if(E2e(e))o=e.op;else{const{bin:l,aggregate:u,timeUnit:f}=e;Mt(l)?(o=oH(l),r=(t.binSuffix??"")+(t.suffix??"")):u?Kl(u)?(a=`["${n}"]`,n=`argmax_${u.argmax}`):hs(u)?(a=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):f&&!Oc(f)&&(o=Axe(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?nh(n):t.expr?Pq(n,t.expr)+a:Pr(n)+a}function Iv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(mH(e.type))}function _2e(e){return zc(e)&&Cd(e.scale?.type)}function w2e(e){return e.aggregate==="count"}function A2e(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Mt(i))return`${n} (binned)`;if(r&&!Oc(r)){const o=$n(r)?.unit;if(o)return`${n} (${Cx(o).join("-")})`}else if(a)return Kl(a)?`${n} for max ${a.argmax}`:hs(a)?`${n} for min ${a.argmin}`:`${Cm(a)} of ${n}`;return n}function C2e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Kl(t))return`${r} for argmax(${t.argmax})`;if(hs(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Oc(i)?$n(i):void 0,o=t||a?.unit||a?.maxbins&&"timeunit"||Mt(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const iG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return C2e(e);default:return A2e(e,t)}};let rG=iG;function aG(e){rG=e}function $2e(){aG(iG)}function Zf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=wk(e)?.title;if(!he(e))return r??e.title;const a=e,o=i?Ak(a,t):void 0;return n?Jt(r,a.title,o):r??a.title??o}function wk(e){if(Td(e)&&e.axis)return e.axis;if(tG(e)&&e.legend)return e.legend;if(Ek(e)&&e.header)return e.header}function Ak(e,t){return rG(e,t)}function Pv(e){if(nG(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=wk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function T2e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(_k(e)&&ae(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Kl(n)&&!hs(n))return"quantitative";if(zc(e)&&e.scale?.type)switch(uC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function va(e){if(he(e))return e;if(Ox(e))return e.condition}function pn(e){if(je(e))return e;if(zm(e))return e.condition}function oG(e,t,n,i={}){if(Ee(e)||ut(e)||Ul(e)){const r=Ee(e)?"string":ut(e)?"number":"boolean";return ge(Tbe(t,r,e)),{value:e}}return je(e)?qv(e,t,n,i):zm(e)?{...e,condition:qv(e.condition,t,n,i)}:e}function qv(e,t,n,i){if(nG(e)){const{format:r,formatType:a,...o}=e;if(pc(a)&&!n.customFormatTypes)return ge(CF(t)),qv(o,t,n,i)}else{const r=Td(e)?"axis":tG(e)?"legend":Ek(e)?"header":null;if(r&&e[r]){const{format:a,formatType:o,...l}=e[r];if(pc(o)&&!n.customFormatTypes)return ge(CF(t)),qv({...e,[r]:l},t,n,i)}}return he(e)?Ck(e,t,i):M2e(e)}function M2e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ut(n)?"quantitative":Ee(n)?"nominal":Nc(n)?"temporal":void 0,{...e,type:t}}function Ck(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:o}=e,l={...e};if(!n&&i&&!QM(i)&&!Kl(i)&&!hs(i)&&(ge(kbe(i)),delete l.aggregate),r&&(l.timeUnit=$n(r)),o&&(l.field=`${o}`),Mt(a)&&(l.bin=zx(a,t)),Fn(a)&&!en(t)&&ge(lxe(t)),Si(l)){const{type:u}=l,f=Nxe(u);u!==f&&(l.type=f),u!=="quantitative"&&_x(i)&&(ge(Mbe(u,i)),l.type="quantitative")}else if(!eH(t)){const u=T2e(l,t);l.type=u}if(Si(l)){const{compatible:u,warning:f}=k2e(l,t)||{};u===!1&&ge(f)}if(_k(l)&&Ee(l.sort)){const{sort:u}=l;if(RF(u))return{...l,sort:{encoding:u}};const f=u.substring(1);if(u.charAt(0)==="-"&&RF(f))return{...l,sort:{encoding:f,order:"descending"}}}if(Ek(l)){const{header:u}=l;if(u){const{orient:f,...d}=u;if(f)return{...l,header:{...d,labelOrient:u.labelOrient||f,titleOrient:u.titleOrient||f}}}}return l}function zx(e,t){return Ul(e)?{maxbins:yF(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:yF(t)}:e}const Rf={compatible:!0};function k2e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case rs:case as:case yx:return Iv(e)?Rf:{compatible:!1,warning:Obe(t)};case jt:case kn:case Gl:case ih:case Bi:case mo:case yo:case $m:case Tm:case vx:case cc:case bx:case xx:case Mc:case Gr:case Aa:case Sx:return Rf;case $a:case qr:case Ca:case Ta:return n!==hc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Rf;case Es:case Xl:case Vl:case Wl:case Ss:case xs:case bs:case wa:case po:case Yl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Rf;case Ii:case Ql:return!Iv(e)&&!_2e(e)?{compatible:!1,warning:zbe(t)}:Rf;case wd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Rf}}function Md(e){const{formatType:t}=Pv(e);return t==="time"||!t&&D2e(e)}function D2e(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function Fx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&$n(t)?.unit;let o=a||n==="temporal",l;return km(e)?l=e.expr:Te(e)?l=e.signal:Nc(e)?(o=!0,l=dc(e)):(Ee(e)||ut(e))&&o&&(l=`datetime(${mt(e)})`,xxe(a)&&(ut(e)&&e<1e4||Ee(e)&&isNaN(Date.parse(e)))&&(l=dc({[a]:e}))),l?i&&o?`time(${l})`:l:r?void 0:mt(e)}function sG(e,t){const{type:n}=e;return t.map(i=>{const r=he(e)&&!Oc(e.timeUnit)?e.timeUnit:void 0,a=Fx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Fm(e,t){return Mt(e.bin)?bo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Lm(e){return e?.condition}const lG=["domain","grid","labels","ticks","title"],R2e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},uG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},N2e={...uG,style:1,labelExpr:1,encoding:1};function FF(e){return we(N2e,e)}const O2e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},cG=ue(O2e);function ws(e){return fe(e,"mark")}class Lx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ws(t)?u2e(t.mark)===this.name:!1}}function Xu(e,t){const n=e?.[t];return n?ae(n)?Ed(n,i=>!!i.field):he(n)||Ox(n):!1}function fG(e,t){const n=e?.[t];return n?ae(n)?Ed(n,i=>!!i.field):he(n)||xo(n)||zm(n):!1}function dG(e,t){if(en(t)){const n=e[t];if((he(n)||xo(n))&&(fk(n.type)||he(n)&&n.timeUnit)){const i=GM(t);return fG(e,i)}}return!1}function hG(e){return Ed(Mve,t=>{if(Xu(e,t)){const n=e[t];if(ae(n))return Ed(n,i=>!!i.aggregate);{const i=va(n);return i&&!!i.aggregate}}return!1})}function gG(e,t){const n=[],i=[],r=[],a=[],o={};return $k(e,(l,u)=>{if(he(l)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=l;if(d||p||g){const b=wk(l)?.title;let S=xe(l,{forAs:!0});const _={...b?[]:{title:Zf(l,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Kl(d)?(w="argmax",S=xe({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):hs(d)?(w="argmin",S=xe({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),Si(l)&&Mt(g)){if(i.push({bin:g,field:f,as:S}),n.push(xe(l,{binSuffix:"end"})),Fm(l,u)&&n.push(xe(l,{binSuffix:"range"})),en(u)){const w={field:`${S}_end`};o[`${u}2`]=w}_.bin="binned",eH(u)||(_.type=hc)}else if(p&&!Oc(p)){r.push({timeUnit:p,field:f,as:S});const w=Si(l)&&l.type!==Ad&&"time";w&&(u===$m||u===cc?_.formatType=w:Bve(u)?_.legend={formatType:w,..._.legend}:en(u)&&(_.axis={formatType:w,..._.axis}))}o[u]=_}else n.push(f),o[u]=e[u]}else o[u]=e[u]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:o}}function z2e(e,t,n){const i=Pve(t,n);if(i){if(i==="binned"){const r=e[t===wa?jt:kn];return!!(he(r)&&he(e[t])&&Fn(r.bin))}}else return!1;return!0}function F2e(e,t,n,i){const r={};for(const a of ue(e))Jq(a)||ge(Nbe(a));for(let a of zve){if(!e[a])continue;const o=e[a];if(Mm(a)){const l=Ove(a),u=r[l];if(he(u)&&Rxe(u.type)&&he(o)&&!u.timeUnit){ge($be(l));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ge(Cbe),a=Gr),!z2e(e,a,t)){ge(Ax(a,t));continue}if(a===Ss&&t==="line"&&va(e[a])?.aggregate){ge(Rbe);continue}if(a===Bi&&(n?"fill"in e:"stroke"in e)){ge(yH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===Tm||a===wd&&!ae(o)&&!ya(o)||a===cc&&ae(o)){if(o){if(a===wd){const l=e[a];if(eG(l)){r[a]=l;continue}}r[a]=_e(o).reduce((l,u)=>(he(u)?l.push(Ck(u,a)):ge(lC(u,a)),l),[])}}else{if(a===cc&&o===null)r[a]=null;else if(!he(o)&&!xo(o)&&!ya(o)&&!Om(o)&&!Te(o)){ge(lC(o,a));continue}r[a]=oG(o,a,i)}}return r}function Ux(e,t){const n={};for(const i of ue(e)){const r=oG(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function L2e(e){const t=[];for(const n of ue(e))if(Xu(e,n)){const i=e[n],r=_e(i);for(const a of r)he(a)?t.push(a):Ox(a)&&t.push(a.condition)}return t}function $k(e,t,n){if(e)for(const i of ue(e)){const r=e[i];if(ae(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function U2e(e,t,n,i){return e?ue(e).reduce((r,a)=>{const o=e[a];return ae(o)?o.reduce((l,u)=>t.call(i,l,u,a),r):t.call(i,r,o,a)},n):n}function pG(e,t){return ue(t).reduce((n,i)=>{switch(i){case jt:case kn:case bx:case Sx:case xx:case wa:case po:case Gl:case ih:case Gr:case xs:case Aa:case bs:case Yl:case Ca:case $a:case Ta:case qr:case $m:case Ii:case Mc:case cc:return n;case wd:if(e==="line"||e==="trail")return n;case Tm:case vx:{const r=t[i];if(ae(r)||he(r))for(const a of _e(r))a.aggregate||n.push(xe(a,{}));return n}case Ss:if(e==="trail")return n;case Bi:case mo:case yo:case Es:case Xl:case Vl:case Ql:case Wl:{const r=va(t[i]);return r&&!r.aggregate&&n.push(xe(r,{})),n}}},[])}function j2e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(ae(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return ae(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function dC(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:l})=>{const u=i?` of ${Tk(t)}`:"";return{field:o+t.field,type:t.type,title:Te(l)?{signal:`${l}"${escape(u)}"`}:l+u}}),a=L2e(n).map(S2e);return{tooltip:[...r,...qa(a,tt)]}}function Tk(e){const{title:t,field:n}=e;return Jt(t,n)}function Mk(e,t,n,i,r){const{scale:a,axis:o}=n;return({partName:l,mark:u,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=Tk(n);return mG(e,l,r,{mark:u,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...o!==void 0?{axis:o}:{}},...Ee(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function mG(e,t,n,i){const{clip:r,color:a,opacity:o}=e,l=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...o?{opacity:o}:{},...ro(i.mark)?i.mark:{type:i.mark},style:`${l}-${String(t)}`,...Ul(e[t])?{}:e[t]}}]:[]}function yG(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],o=i[`${r}2`],l=i[`${r}Error`],u=i[`${r}Error2`];return{continuousAxisChannelDef:O1(a,n),continuousAxisChannelDef2:O1(o,n),continuousAxisChannelDefError:O1(l,n),continuousAxisChannelDefError2:O1(u,n),continuousAxis:r}}function O1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ge(sxe(n,t)),i}else return e}function vG(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(ro(n)&&n.orient)return n.orient;if(ml(r)){if(ml(a)){const o=he(r)&&r.aggregate,l=he(a)&&a.aggregate;if(!o&&l===t)return"vertical";if(!l&&o===t)return"horizontal";if(o===t&&l===t)throw new Error("Both x and y cannot have aggregate");return Md(a)&&!Md(r)?"horizontal":"vertical"}return"horizontal"}else{if(ml(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Hv="boxplot",B2e=["box","median","outliers","rule","ticks"],I2e=new Lx(Hv,xG);function bG(e){return ut(e)?"tukey":e}function xG(e,{config:t}){e={...e,encoding:Ux(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...o}=e,l=ro(n)?n:{type:n};r&&ge(pH("boxplot"));const u=l.extent??t.boxplot.extent,f=pt("size",l,t),d=l.invalid,g=bG(u),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:k}=P2e(e,u,t),T=nh(b.field),{color:N,size:z,...B}=A,j=Xr=>Mk(l,S,b,Xr,t.boxplot),K=j(B),Y=j(A),q=(Se(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=j({...B,...z?{size:z}:{},color:{condition:{test:`${bt(`lower_box_${b.field}`)} >= ${bt(`upper_box_${b.field}`)}`,...N||{value:q}}}}),R=dC([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),I={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},X=g==="min-max"?R:dC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),Z=[...K({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...K({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...K({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:X}),...K({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:X})],ce=[...g!=="tukey"?Z:[],...Y({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...F({partName:"median",mark:{type:"tick",invalid:d,...Se(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(g==="min-max")return{...o,transform:(o.transform??[]).concat(v),layer:ce};const L=bt(`lower_box_${b.field}`),G=bt(`upper_box_${b.field}`),se=`(${G} - ${L})`,me=`${L} - ${u} * ${se}`,be=`${G} + ${u} * ${se}`,Ne=bt(b.field),Xe={joinaggregate:SG(b.field),groupby:_},Ot={transform:[{filter:`(${me} <= ${Ne}) && (${Ne} <= ${be})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},...w],groupby:_}],layer:Z},{tooltip:ye,...Le}=B,{scale:Ie,axis:de}=b,nn=Tk(b),Qe=mG(l,"outliers",t.boxplot,{transform:[{filter:`(${Ne} < ${me}) || (${Ne} > ${be})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...nn!==void 0?{title:nn}:{},...Ie!==void 0?{scale:Ie}:{},...de!==void 0?{axis:de}:{}},...Le,...N?{color:N}:{},...k?{tooltip:k}:{}}})[0];let qt;const rn=[...p,...y,Xe];return Qe?qt={transform:rn,layer:[Qe,Ot]}:(qt=Ot,qt.transform.unshift(...rn)),{...o,layer:[qt,{transform:v,layer:ce}]}}function SG(e){const t=nh(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function P2e(e,t,n){const i=vG(e,Hv),{continuousAxisChannelDef:r,continuousAxis:a}=yG(e,i,Hv),o=r.field,l=nh(o),u=bG(t),f=[...SG(o),{op:"median",field:o,as:`mid_box_${l}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+l},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+l}],d=u==="min-max"||u==="tukey"?[]:[{calculate:`${bt(`upper_box_${l}`)} - ${bt(`lower_box_${l}`)}`,as:`iqr_${l}`},{calculate:`min(${bt(`upper_box_${l}`)} + ${bt(`iqr_${l}`)} * ${t}, ${bt(`max_${l}`)})`,as:`upper_whisker_${l}`},{calculate:`max(${bt(`lower_box_${l}`)} - ${bt(`iqr_${l}`)} * ${t}, ${bt(`min_${l}`)})`,as:`lower_whisker_${l}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=j2e(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=gG(v,n),$=i==="vertical"?"horizontal":"vertical",M=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:y}}const kk="errorbar",q2e=["ticks","rule"],H2e=new Lx(kk,EG);function EG(e,{config:t}){e={...e,encoding:Ux(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:l,outerSpec:u,tooltipEncoding:f}=_G(e,kk,t);delete a.size;const d=Mk(l,r,i,a,t.errorbar),g=l.thickness,p=l.size,y={type:"tick",orient:o,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...u,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function G2e(e,t){const{encoding:n}=e;if(Y2e(n))return{orient:vG(e,t),inputType:"raw"};const i=X2e(n),r=V2e(n),a=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const l=n.x2,u=n.y2;if(je(l)&&je(u))throw new Error(`${t} cannot have both x2 and y2`);if(je(l)){if(ml(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(je(u)){if(ml(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const l=n.xError,u=n.xError2,f=n.yError,d=n.yError2;if(je(u)&&!je(l))throw new Error(`${t} cannot have xError2 without xError`);if(je(d)&&!je(f))throw new Error(`${t} cannot have yError2 without yError`);if(je(l)&&je(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(je(l)){if(ml(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(je(f)){if(ml(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Y2e(e){return(je(e.x)||je(e.y))&&!je(e.x2)&&!je(e.y2)&&!je(e.xError)&&!je(e.xError2)&&!je(e.yError)&&!je(e.yError2)}function X2e(e){return je(e.x2)||je(e.y2)}function V2e(e){return je(e.xError)||je(e.xError2)||je(e.yError)||je(e.yError2)}function _G(e,t,n){const{mark:i,encoding:r,params:a,projection:o,...l}=e,u=ro(i)?i:{type:i};a&&ge(pH(t));const{orient:f,inputType:d}=G2e(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=yG(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=W2e(u,g,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:T,...N}=r,{bins:z,timeUnits:B,aggregate:j,groupby:K,encoding:Y}=gG(N,n),q=[...j,...S],F=d!=="raw"?[]:K,R=dC(w,g,Y,A);return{transform:[...l.transform??[],...z,...B,...q.length===0?[]:[{aggregate:q,groupby:F}],..._],groupby:F,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:Y,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:R}}function W2e(e,t,n,i,r,a,o,l){let u=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":l.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ge(oxe(y,v,o)),v==="stderr"||v==="stdev")u=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${bt(`center_${d}`)} + ${bt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${bt(`center_${d}`)} - ${bt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:Cm(y)},{fieldPrefix:"upper_",titlePrefix:LF(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:LF(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),u=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:Zf({field:d,aggregate:_,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Zf({field:d,aggregate:S,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Zf({field:d,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ge(axe(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:bt(n.field),as:`upper_${d}`},{calculate:bt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${bt(d)} + ${bt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${bt(d)} + ${bt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${bt(d)} - ${bt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:uc(uc(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:u,tooltipSummary:g,tooltipTitleWithFieldName:p}}function LF(e,t,n){return`${Cm(e)} ${n} ${t}`}const Dk="errorband",Q2e=["band","borders"],K2e=new Lx(Dk,wG);function wG(e,{config:t}){e={...e,encoding:Ux(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:l,tooltipEncoding:u}=_G(e,Dk,t),f=o,d=Mk(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?ge(TF("interpolate")):f.tension&&ge(TF("tension")),{...l,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:u})]}}const AG={};function Rk(e,t,n){const i=new Lx(e,t);AG[e]={normalizer:i,parts:n}}function Z2e(){return ue(AG)}Rk(Hv,xG,B2e);Rk(kk,EG,q2e);Rk(Dk,wG,Q2e);const J2e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],CG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},$G={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},eSe=ue(CG),tSe=ue($G),nSe={header:1,headerRow:1,headerColumn:1,headerFacet:1},TG=ue(nSe),MG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],iSe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},rSe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ba="_vgsid_",aSe={point:{on:"click",fields:[ba],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Nk(e){return e==="legend"||!!e?.legend}function B_(e){return Nk(e)&&Se(e)}function Ok(e){return!!e?.select}function kG(e){const t=[];for(const n of e||[]){if(Ok(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const o={...a,bind:r,init:i};t.push(o)}else{const o={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o)}}return t}function oSe(e){return jx(e)||Fk(e)||zk(e)}function zk(e){return fe(e,"concat")}function jx(e){return fe(e,"vconcat")}function Fk(e){return fe(e,"hconcat")}function DG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ao(e){return fe(e,"step")}function UF(e){return fe(e,"view")||fe(e,"width")||fe(e,"height")}const jF=20,sSe={align:1,bounds:1,center:1,columns:1,spacing:1},lSe=ue(sSe);function uSe(e,t,n){const i=n[t],r={},{spacing:a,columns:o}=i;a!==void 0&&(r.spacing=a),o!==void 0&&(Nx(e)&&!Nm(e.facet)||zk(e))&&(r.columns=o),jx(e)&&(r.columns=1);for(const l of lSe)if(e[l]!==void 0)if(l==="spacing"){const u=e[l];r[l]=ut(u)?u:{row:u.row??a,column:u.column??a}}else r[l]=e[l];return r}function hC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function gC(e,t){const n=Gv(e,t);return ao(n)?n.step:RG}function Gv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Jt(n,{step:e.step})}const RG=20,cSe={continuousWidth:300,continuousHeight:300,step:RG},fSe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:cSe,mark:i2e,arc:{},area:{},bar:s2e,circle:{},geoshape:{},image:{},line:{},point:{},rect:yk,rule:{color:"black"},square:{},text:{color:"black"},tick:l2e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Uxe,projection:{},legend:iSe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:aSe,style:{},title:{},facet:{spacing:jF},concat:{spacing:jF},normalizedNumberFormat:".0%"},Po=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],BF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},IF={blue:Po[0],orange:Po[1],red:Po[2],teal:Po[3],green:Po[4],yellow:Po[5],purple:Po[6],pink:Po[7],brown:Po[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function dSe(e={}){return{signals:[{name:"color",value:Se(e)?{...IF,...e}:IF}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function hSe(e){return{signals:[{name:"fontSize",value:Se(e)?{...BF,...e}:BF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function gSe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function NG(e){const t=ue(e||{}),n={};for(const i of t){const r=e[i];n[i]=Lm(r)?lH(r):rr(r)}return n}function pSe(e){const t=ue(e),n={};for(const i of t)n[i]=NG(e[i]);return n}const mSe=[...PH,...cG,...TG,"background","padding","legend","lineBreak","scale","style","title","view"];function OG(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,o=jd({},Ue(fSe),n?gSe(n):{},t?dSe(t):{},i?hSe(i):{},a||{});r&&Bd(o,"selection",r,!0);const l=cr(o,mSe);for(const u of["background","lineBreak","padding"])o[u]&&(l[u]=rr(o[u]));for(const u of PH)o[u]&&(l[u]=Ln(o[u]));for(const u of cG)o[u]&&(l[u]=NG(o[u]));for(const u of TG)o[u]&&(l[u]=Ln(o[u]));if(o.legend&&(l.legend=Ln(o.legend)),o.scale){const{invalid:u,...f}=o.scale,d=Ln(u,{level:1});l.scale={...Ln(f),...ue(d).length>0?{invalid:d}:{}}}return o.style&&(l.style=pSe(o.style)),o.title&&(l.title=Ln(o.title)),o.view&&(l.view=Ln(o.view)),l}const ySe=new Set(["view",...Kxe]),vSe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],bSe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...n2e};function xSe(e){e=Ue(e);for(const t of vSe)delete e[t];if(e.axis)for(const t in e.axis)Lm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of J2e)delete e.legend[t];if(e.mark){for(const t of kF)delete e.mark[t];e.mark.tooltip&&Se(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(kG(e.params)),delete e.params);for(const t of ySe){for(const i of kF)delete e[t][i];const n=bSe[t];if(n)for(const i of n)delete e[t][i];ESe(e,t)}for(const t of Z2e())delete e[t];SSe(e);for(const t in e)Se(e[t])&&Tt(e[t])&&delete e[t];return Tt(e)?void 0:e}function SSe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=sH(e.title);Tt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Tt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Tt(i)?delete e.title:e.title=i}function ESe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};Tt(a)||(e.style[n??t]=a),delete e[t]}function Bx(e){return fe(e,"layer")}function _Se(e){return fe(e,"repeat")}function wSe(e){return!ae(e.repeat)&&fe(e.repeat,"layer")}class Lk{map(t,n){return Nx(t)?this.mapFacet(t,n):_Se(t)?this.mapRepeat(t,n):Fk(t)?this.mapHConcat(t,n):jx(t)?this.mapVConcat(t,n):zk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Bx(t))return this.mapLayer(t,n);if(ws(t))return this.mapUnit(t,n);throw new Error(KM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const ASe={zero:1,center:1,normalize:1};function CSe(e){return we(ASe,e)}const $Se=new Set([jH,Mx,Tx,Uv,Dx,pk,mk,kx,BH,gk]),TSe=new Set([Mx,Tx,jH]);function Nf(e){return he(e)&&$d(e)==="quantitative"&&!e.bin}function PF(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),o=e[t],l=e[r];if(he(o)&&he(l))if(Nf(o)&&Nf(l)){if(o.stack)return t;if(l.stack)return r;const u=he(o)&&!!o.aggregate,f=he(l)&&!!l.aggregate;if(u!==f)return u?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Nf(o))return t;if(Nf(l))return r}else{if(Nf(o))return a&&n==="vertical"?void 0:t;if(Nf(l))return a&&n==="horizontal"?void 0:r}}function MSe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zG(e,t){const n=ro(e)?e:{type:e},i=n.type;if(!$Se.has(i))return null;const r=PF(t,"x",n)||PF(t,"theta",n);if(!r)return null;const a=t[r],o=he(a)?xe(a,{}):void 0,l=MSe(r),u=[],f=new Set;if(t[l]){const b=t[l],S=he(b)?xe(b,{}):void 0;S&&S!==o&&(u.push(l),f.add(S))}const d=l==="x"?"xOffset":"yOffset",g=t[d],p=he(g)?xe(g,{}):void 0;p&&p!==o&&(u.push(d),f.add(p));const y=Fve.reduce((b,S)=>{if(S!=="tooltip"&&Xu(t,S)){const _=t[S];for(const w of _e(_)){const A=va(w);if(A.aggregate)continue;const $=xe(A,{});(!$||!f.has($))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?Ul(a.stack)?v=a.stack?"zero":null:v=a.stack:TSe.has(i)&&(v="zero"),!v||!CSe(v)||hG(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Un.LINEAR&&a?.stack&&ge(nxe(a.scale.type)),je(t[vo(r)])?(a.stack!==void 0&&ge(txe(r)),null):(he(a)&&a.aggregate&&!Wve.has(a.aggregate)&&ge(ixe(a.aggregate)),{groupbyChannels:u,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Zl(i),stackBy:y,offset:v}))}function FG(e,t,n){const i=Ln(e),r=pt("orient",i,n);if(i.orient=NSe(i.type,t,r),r!==void 0&&r!==i.orient&&ge(jbe(i.orient,r)),i.type==="bar"&&i.orient){const u=pt("cornerRadiusEnd",i,n);if(u!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:a2e[i.orient];for(const d of f)i[d]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=pt("opacity",i,n),o=pt("fillOpacity",i,n);return a===void 0&&o===void 0&&(i.opacity=DSe(i.type,t)),pt("cursor",i,n)===void 0&&(i.cursor=kSe(i,t,n)),i}function kSe(e,t,n){return t.href||e.href||pt("href",e,n)?"pointer":e.cursor}const LG=.7;function DSe(e,t){if(We([Dx,gk,pk,mk],e)&&!hG(t))return LG}function RSe(e,t,{graticule:n}){if(n)return!1;const i=io("filled",e,t),r=e.type;return Jt(i,r!==Dx&&r!==kx&&r!==Uv)}function NSe(e,t,n){switch(e){case Dx:case pk:case mk:case Wxe:case Vxe:return}const{x:i,y:r,x2:a,y2:o}=t;switch(e){case BH:case Mx:if(he(i)&&(Fn(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(Fn(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return(he(i)&&i.type===hc&&!Mt(i.bin)||Bv(i))&&he(r)&&Fn(r.bin)?"horizontal":"vertical";if(!o)return(he(r)&&r.type===hc&&!Mt(r.bin)||Bv(r))&&he(i)&&Fn(i.bin)?"vertical":"horizontal"}case Uv:if(a&&!(he(i)&&Fn(i.bin))&&o&&!(he(r)&&Fn(r.bin)))return;case Tx:if(o)return he(r)&&Fn(r.bin)?"horizontal":"vertical";if(a)return he(i)&&Fn(i.bin)?"vertical":"horizontal";if(e===Uv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case kx:case gk:{const l=OF(i),u=OF(r);if(n)return n;if(l&&!u)return e!=="tick"?"horizontal":"vertical";if(!l&&u)return e!=="tick"?"vertical":"horizontal";if(l&&u)return"vertical";{const f=Si(i)&&i.type===Ad,d=Si(r)&&r.type===Ad;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function OSe(e){const{point:t,line:n,...i}=e;return ue(i).length>1?i:i.type}function zSe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:cr(e[t],["point","line"])});return e}function I_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Se(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Se(t.point)?t.point:{}:void 0}function qF(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class FSe{name="path-overlay";hasMatchingType(t,n){if(ws(t)){const{mark:i,encoding:r}=t,a=ro(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!I_(a,n[a.type],r);case"area":return!!I_(a,n[a.type],r)||!!qF(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:o,mark:l,name:u,encoding:f,...d}=t,g=Ux(f,r),p=ro(l)?l:{type:l},y=I_(p,r[p.type],g),v=p.type==="area"&&qF(p,r[p.type]),b=[{name:u,...a?{params:a}:{},mark:OSe({...p.type==="area"&&pt("opacity",p,r)==null&&pt("fillOpacity",p,r)==null?{opacity:LG}:{},...p}),encoding:cr(g,["shape"])}],S=zG(FG(p,g,r),g);let _=g;if(S){const{fieldChannel:w,offset:A}=S;_={...g,[w]:{...g[w],...A?{stack:A}:{}}}}return _=cr(_,["y2","x2"]),v&&b.push({...o?{projection:o}:{},mark:{type:"line",...Sd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Sd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:zSe(r)})}}function LSe(e,t){return t?Nm(e)?jG(e,t):UG(e,t):e}function P_(e,t){return t?jG(e,t):e}function pC(e,t,n){const i=t[e];if(b2e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ge(mbe(i.repeat));return}return t}function UG(e,t){if(e=pC("field",e,t),e!==void 0){if(e===null)return null;if(_k(e)&&os(e.sort)){const n=pC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function HF(e,t){if(he(e))return UG(e,t);{const n=pC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function GF(e,t){if(je(e)){const n=HF(e,t);if(n)return n;if(Om(e))return{condition:e.condition}}else{if(zm(e)){const n=HF(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function jG(e,t){const n={};for(const i in e)if(fe(e,i)){const r=e[i];if(ae(r))n[i]=r.map(a=>GF(a,t)).filter(a=>a);else{const a=GF(r,t);a!==void 0&&(n[i]=a)}}return n}class USe{name="RuleForRangedLine";hasMatchingType(t){if(ws(t)){const{encoding:n,mark:i}=t;if(i==="line"||ro(i)&&i.type==="line")for(const r of Nve){const a=kc(r),o=n[a];if(n[r]&&(he(o)&&!Fn(o.bin)||xo(o)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ge(Ube(!!r.x2,!!r.y2)),i({...t,mark:Se(a)?{...a,type:"rule"}:"rule"},n)}}class jSe extends Lk{nonFacetUnitNormalizers=[I2e,H2e,K2e,new FSe,new USe];map(t,n){if(ws(t)){const i=Xu(t.encoding,rs),r=Xu(t.encoding,as),a=Xu(t.encoding,yx);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=P_(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const l=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,l);return o}mapRepeat(t,n){return wSe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:o,column:l,layer:u}=i,{repeater:f={},repeaterPrefix:d=""}=n;return o||l?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...l?{column:l}:{}},spec:{repeat:{layer:u},spec:r}},n):{...a,layer:u.map(g=>{const p={...f,layer:g},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Lt(g)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...o}=t;!ae(i)&&t.columns&&(t=cr(t,["columns"]),ge(wF("repeat")));const l=[],{repeater:u={},repeaterPrefix:f=""}=n,d=!ae(i)&&i.row||[u?u.row:null],g=!ae(i)&&i.column||[u?u.column:null],p=ae(i)&&i||[u?u.repeat:null];for(const v of p)for(const b of d)for(const S of g){const _={repeat:v,row:b,column:S,layer:u.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${ae(i)?`${Lt(v)}`:(i.row?`row_${Lt(b)}`:"")+(i.column?`column_${Lt(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,l.push(cr(A,["data"]))}const y=ae(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...o,columns:y,concat:l}}mapFacet(t,n){const{facet:i}=t;return Nm(i)&&t.columns&&(t=cr(t,["columns"]),ge(wF("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:o,config:l}=n,u=XF({parentProjection:o,projection:r}),f=YF({parentEncoding:a,encoding:P_(i,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...o}=t.encoding,{mark:l,width:u,projection:f,height:d,view:g,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=P_(o,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...u?{width:u}:{},...d?{height:d}:{},...g?{view:g}:{},...f?{projection:f}:{},mark:l,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ge(Fbe([...i?[rs]:[],...r?[as]:[]]));const o={},l={};for(const u of[rs,as]){const f=t[u];if(f){const{align:d,center:g,spacing:p,columns:y,...v}=f;o[u]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(l[b]??={},l[b][u]=f[b])}}return{facetMapping:o,layout:l}}else{const{align:o,center:l,spacing:u,columns:f,...d}=a;return{facetMapping:LSe(d,n.repeater),layout:{...o?{align:o}:{},...l?{center:l}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:o,...l}=t,u={...r,parentEncoding:YF({parentEncoding:n,encoding:a,layer:!0}),parentProjection:XF({parentProjection:i,projection:o})};return super.mapLayer({...l,...t.name?{name:[u.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},u)}}function YF({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ue(e),...ue(t)]);for(const a of r){const o=t[a],l=e[a];if(je(o)){const u={...l,...o};i[a]=u}else zm(o)?i[a]={...o,condition:{...l,...o.condition}}:o||o===null?i[a]=o:(n||ya(l)||Te(l)||je(l)||ae(l))&&(i[a]=l)}}else i=t;return!i||Tt(i)?void 0:i}function XF(e){const{parentProjection:t,projection:n}=e;return t&&n&&ge(Abe({parentProjection:t,projection:n})),n??t}function Uk(e){return fe(e,"filter")}function BSe(e){return fe(e,"stop")}function BG(e){return fe(e,"lookup")}function ISe(e){return fe(e,"data")}function PSe(e){return fe(e,"param")}function qSe(e){return fe(e,"pivot")}function HSe(e){return fe(e,"density")}function GSe(e){return fe(e,"quantile")}function YSe(e){return fe(e,"regression")}function XSe(e){return fe(e,"loess")}function VSe(e){return fe(e,"sample")}function WSe(e){return fe(e,"window")}function QSe(e){return fe(e,"joinaggregate")}function KSe(e){return fe(e,"flatten")}function ZSe(e){return fe(e,"calculate")}function IG(e){return fe(e,"bin")}function JSe(e){return fe(e,"impute")}function eEe(e){return fe(e,"timeUnit")}function tEe(e){return fe(e,"aggregate")}function nEe(e){return fe(e,"stack")}function iEe(e){return fe(e,"fold")}function rEe(e){return fe(e,"extent")&&!fe(e,"density")&&!fe(e,"regression")}function aEe(e){return e.map(t=>Uk(t)?{filter:Qf(t.filter,Dxe)}:t)}class oEe extends Lk{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=VF(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=VF(t,n),t.encoding){const i={};for(const[r,a]of Nl(t.encoding))i[r]=PG(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Nl(i).map(([a,o])=>{const{init:l,bind:u,empty:f,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of un(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:l,select:d,bind:u}})}:t}}function VF(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(Uk(a))return{filter:mC(a,t)};if(IG(a)&&Dc(a.bin))return{...a,bin:qG(a.bin)};if(BG(a)){const{selection:o,...l}=a.from;return o?{...a,from:{param:o,...l}}:a}return a});return{...i,transform:r}}return e}function PG(e,t){const n=Ue(e);if(he(n)&&Dc(n.bin)&&(n.bin=qG(n.bin)),zc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(Om(n))if(ae(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:o,...l}=i;return a?i:{...l,test:mC(i,t)}});else{const{selection:i,param:r,test:a,...o}=PG(n.condition,t);n.condition=r?n.condition:{...o,test:mC(n.condition,t)}}return n}function qG(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function mC(e,t){const n=i=>Qf(i,r=>{const a=t.emptySelections[r]??!0,o={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(o),o});return e.selection?n(e.selection):Qf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class yC extends Lk{map(t,n){const i=n.selections??[];if(t.params&&!ws(t)){const r=[];for(const a of t.params)Ok(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const o of i)if(!o.views||!o.views.length)a.push(o);else for(const l of o.views)(Ee(l)&&(l===t.name||r.includes(l))||ae(l)&&l.map(u=>r.indexOf(u)).every((u,f,d)=>u!==-1&&(f===0||u>d[f-1])))&&a.push(o);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=yC.prototype[e];yC.prototype[e]=function(n,i){return t.call(this,n,sEe(n,i))}}function sEe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function HG(e,t){t===void 0&&(t=OG(e.config));const n=fEe(e,t),{width:i,height:r}=e,a=dEe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const lEe=new jSe,uEe=new oEe,cEe=new yC;function fEe(e,t={}){const n={config:t};return cEe.map(lEe.map(uEe.map(e,n),n),n)}function WF(e){return Ee(e)?{type:e}:e??{}}function dEe(e,t,n){let{width:i,height:r}=t;const a=ws(e)||Bx(e),o={};a?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(ge(xF("width")),i=void 0),r=="container"&&(ge(xF("height")),r=void 0));const l={type:"pad",...o,...n?WF(n.autosize):{},...WF(e.autosize)};if(l.type==="fit"&&!a&&(ge(abe),l.type="pad"),i=="container"&&!(l.type=="fit"||l.type=="fit-x")&&ge(SF("width")),r=="container"&&!(l.type=="fit"||l.type=="fit-y")&&ge(SF("height")),!or(l,{type:"pad"}))return l}function hEe(e){return["fit","fit-x","fit-y"].includes(e)}function gEe(e){return e?`fit-${Ex(e)}`:"fit"}const pEe=["background","padding"];function QF(e,t){const n={};for(const i of pEe)e&&e[i]!==void 0&&(n[i]=rr(e[i]));return t&&(n.params=e.params),n}class As{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new As(Ue(this.explicit),Ue(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Jt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ue(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ua(e){return{explicit:!0,value:e}}function tr(e){return{explicit:!1,value:e}}function GG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:Ix(t,n,i,r)}}function Ix(e,t,n,i){return e.explicit&&t.explicit&&ge(Vbe(n,i,e.value,t.value)),e}function Fl(e,t,n,i,r=Ix){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:or(e.value,t.value)?e:r(e,t,n,i)}class mEe extends As{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function kd(e){return fe(e,"url")}function Pp(e){return fe(e,"values")}function YG(e){return fe(e,"name")&&!kd(e)&&!Pp(e)&&!El(e)}function El(e){return e&&(XG(e)||VG(e)||jk(e))}function XG(e){return fe(e,"sequence")}function VG(e){return fe(e,"sphere")}function jk(e){return fe(e,"graticule")}var Pt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Pt||(Pt={}));function WG({invalid:e,isPath:t}){switch(qH(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function yEe(e){const{marks:t,scales:n}=WG(e);return t===n?Pt.Main:n==="include-invalid-values"?Pt.PreFilterInvalid:Pt.PostFilterInvalid}class St{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ge(Ebe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Fi extends St{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Gq()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function q_(e){return e.as!==void 0}function KF(e){return`${e}_end`}class Va extends St{timeUnits;clone(){return new Va(null,Ue(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,o)=>{const{field:l,timeUnit:u}=a;if(u){let f;if(Oc(u)){if(It(n)){const{mark:d,markDef:g,config:p}=n,y=zl({fieldDef:a,markDef:g,config:p});(Ip(d)||y)&&(f={timeUnit:$n(u),field:l})}}else f={as:xe(a,{forAs:!0}),field:l,timeUnit:u};if(It(n)){const{mark:d,markDef:g,config:p}=n,y=zl({fieldDef:a,markDef:g,config:p});Ip(d)&&en(o)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[tt(f)]=f)}return r},{});return Tt(i)?null:new Va(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=$n(i),o={...r,timeUnit:a};return new Va(t,{[tt(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Nl(this.timeUnits)){const a=q_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(un(this.timeUnits).map(t=>q_(t)?t.as:KF(t.field)))}dependentFields(){return new Set(un(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${tt(this.timeUnits)}`}assemble(){const t=[];for(const n of un(this.timeUnits)){const{rectBandPosition:i}=n,r=$n(n.timeUnit);if(q_(n)){const{field:a,as:o}=n,{unit:l,utc:u,...f}=r,d=[o,`${o}_end`];t.push({field:Pr(a),type:"timeunit",...l?{units:Cx(l)}:{},...u?{timezone:"utc"}:{},...f,as:d}),t.push(...ZF(d,i,r))}else if(n){const{field:a}=n,o=qq(a),l=QG({timeUnit:r,field:o}),u=KF(o);t.push({type:"formula",expr:l,as:u}),t.push(...ZF([o,u],i,r))}}return t}}const Px="offsetted_rect_start",qx="offsetted_rect_end";function QG({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=CH(i),{part:o,step:l}=kH(a,e.step);return`${r?"utcOffset":"timeOffset"}('${o}', ${bt(t)}, ${n?-l:l})`}function ZF([e,t],n,i){if(n!==void 0&&n!==.5){const r=bt(e),a=bt(t);return[{type:"formula",expr:JF([QG({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Px}`},{type:"formula",expr:JF([r,a],n+.5),as:`${e}_${qx}`}]}return[]}function JF([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Um="_tuple_fields";class vEe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const bEe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new vEe,a={},o={},l=new Set,u=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Lt(`${i}_${S}`);for(let w=1;l.has(_);w++)_=Lt(`${i}_${S}_${w}`);return l.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?_e(n.value):null;let{fields:p,encodings:y}=Se(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(Se(v))for(const b of ue(v))Rve(b)?(y||(y=[])).push(b):f==="interval"?(ge(pbe),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){ge(obe(v,b.aggregate));continue}else if(!S){ge(_F(v));continue}if(b.timeUnit&&!Oc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};o[tt(_)]=_}if(!a[S]){const _=f==="interval"&&bo(v)&&ma(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...u(w,"data"),...u(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ba,Kq(v)?(w.geoChannel=v,w.channel=Qq(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else ge(_F(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...u(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ba}g&&(t.init=g.map(v=>r.items.map(b=>Se(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),Tt(o)||(r.timeUnit=new Va(null,o))},signals:(e,t,n)=>{const i=t.name+Um;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(eY)})}},KG="_curr",vy="anim_value",Lf="anim_clock",vC="eased_anim_clock",ZG="min_extent",JG="max_range_extent",H_="last_tick_at",G_="is_playing",xEe=1/60*1e3,SEe=(e,t)=>[{name:vC,update:Lf},{name:`${e}_domain`,init:`domain('${t}')`},{name:ZG,init:`extent(${e}_domain)[0]`},{name:JG,init:`extent(range('${t}'))[1]`},{name:vy,update:`invert('${t}', ${vC})`}],EEe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Wa(t)&&(n=n.concat([{name:Lf,init:"0",on:[{events:{type:"timer",throttle:xEe},update:`${G_} ? (${Lf} + (now() - ${H_}) > ${JG} ? 0 : ${Lf} + (now() - ${H_})) : ${Lf}`}]},{name:H_,init:"now()",on:[{events:[{signal:Lf},{signal:G_}],update:"now()"}]},{name:G_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Um,a=t.project,o="(item().isVoronoi ? datum.datum : datum)",l=un(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+Jf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let f=`unit: ${Vu(e)}, `;if(t.project.hasSelectionId)f+=`${ba}: ${o}[${pe(ba)}]`;else if(Wa(t))f+=`fields: ${r}, values: [${vy} ? ${vy} : ${ZG}]`;else{const d=a.items.map(g=>e.fieldDef(g.channel)?.bin?`[${o}[${pe(e.vgField(g.channel,{}))}], ${o}[${pe(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${o}[${pe(g.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Wa(t))return n.concat(SEe(t.name,e.scaleName(Yl)),[{name:i+ps,on:[{events:[{signal:vC},{signal:vy}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+ps,on:d?[{events:d,update:`${u} ? {${f}} : null`,force:!0}]:[]}])}}};function eY(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Pr(r.field),r}function mc(e,t=!0,n=ri){if(ae(e)){const i=e.map(r=>mc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Nc(e))return n(t?dc(e):bxe(e));return t?n(mt(e)):e}function _Ee(e,t){for(const n of un(e.component.selection??{})){const i=n.name;let r=`${i}${ps}, ${n.resolve==="global"?"true":`{unit: ${Vu(e)}}`}`;for(const a of Hx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+QEe,on:[{events:{signal:n.name+ps},update:`modify(${pe(n.name+yc)}, ${r})`}]})}return Bk(t)}function wEe(e,t){if(e.component.selection&&ue(e.component.selection).length){const n=pe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Hl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Bk(t)}function AEe(e,t){let n=!1;for(const i of un(e.component.selection??{})){const r=i.name,a=pe(r+yc);if(t.filter(l=>l.name===r).length===0){const l=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${vY}(${a}, ${pe(l)}${u}`})}n=!0;for(const l of Hx)l.defined(i)&&l.topLevelSignals&&(t=l.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Bk(t)}function CEe(e,t){const n=[],i=[],r=Vu(e,{escape:!1});for(const a of un(e.component.selection??{})){const o={name:a.name+yc};if(a.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ba}}]),a.init){const u=a.project.items.map(eY);o.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ba]:mc(f,!1)[0]})):a.init.map(f=>({unit:r,fields:u,values:mc(f,!1)}))}if([...n,...t].filter(u=>u.name===a.name+yc).length||n.push(o),Wa(a)&&t.length){const u=e.lookupDataSource(e.getDataName(Pt.Main)),f=t.find(g=>g.name===u),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+KG,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function tY(e,t){for(const n of un(e.component.selection??{}))for(const i of Hx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function $Ee(e,t){for(const n of e.children)It(n)&&(t=tY(n,t));return t}function TEe(e,t,n,i){const r=_Y(e,t.param,t);return{signal:ma(n.get("type"))&&ae(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function Bk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const ss={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!bo(r))continue;const a=e.getScaleComponent(r),o=a?a.get("type"):void 0;if(o=="sequential"&&ge(cbe),!a||!ma(o)){ge(ube);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(l=>l.name===o.signals.data).length===0);if(!e.parent||xC(e)||i.length===0)return n;const r=n.find(o=>o.name===t.name);let a=r.update;if(a.includes(vY))r.update=`{${i.map(o=>`${pe(Pr(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const l=`${pe(Pr(o.field))}: ${o.signals.data}`;a.includes(l)||(a=`${a.substring(0,a.length-1)}, ${l}}`)}r.update=a}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!xC(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function bC(e,t){return`domain(${pe(e.scaleName(t))})`}function xC(e){return e.parent&&uh(e.parent)&&(!e.parent.parent||xC(e.parent.parent))}const Jf="_brush",nY="_scale_trigger",$g="geo_interval_init_tick",iY="_init",MEe="_center",kEe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...Se(n.select)?n.select:{}};i.fields=[ba],i.encodings||(i.encodings=n.value?ue(n.value):[$a,Ca]),n.select={type:"interval",...i}}if(t.translate&&!ss.defined(t)){const i=`!event.item || event.item.mark.name !== ${pe(t.name+Jf)}`;for(const r of t.events){if(!r.between){ge(`${r} is not an ordered event stream for interval selections.`);continue}const a=_e(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+ps,a=un(t.project.hasChannel).filter(l=>l.channel===jt||l.channel===kn),o=t.init?t.init[0]:null;if(n.push(...a.reduce((l,u)=>l.concat(DEe(e,t,u,o?.[u.index])),[])),e.hasProjection){const l=pe(e.projectionName()),u=e.projectionName()+MEe,{x:f,y:d}=t.project.hasChannel,g=f?.signals.visual,p=d?.signals.visual,y=f?o?.[f.index]:`${u}[0]`,v=d?o?.[d.index]:`${u}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${g?`${g}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${g?`${g}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;o&&(n.unshift({name:i+iY,init:`[scale(${l}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${l}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===u)||n.unshift({name:u,update:`invert(${l}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${pe(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Vu(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,$=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...o?[{signal:$g}]:[]],update:A}]})}else{if(!ss.defined(t)){const f=i+nY,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=pe(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=ma(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const l=a.map(f=>f.signals.data),u=`unit: ${Vu(e)}, fields: ${i+Um}, values`;return n.concat({name:r,...o?{init:`{${u}: ${mc(o)}}`}:{},...l.length?{on:[{events:[{signal:l.join(" || ")}],update:`${l.join(" && ")} ? {${u}: [${l}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(It(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===$g).length||n.unshift({name:$g,value:null,on:[{events:"timer{1}",update:`${$g} === null ? {} : ${$g}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,o=r?.signals.visual,l=a?.signals.visual,u=`data(${pe(t.name+yc)})`;if(ss.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:a!==void 0?{signal:`${l}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of ue(f))f[S]=[{test:`${u}.length && ${u}[0].unit === ${Vu(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=ue(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,a!==void 0&&`${l}[0] !== ${l}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+Jf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+Jf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function DEe(e,t,n,i){const r=!e.hasProjection,a=n.channel,o=n.signals.visual,l=pe(r?e.scaleName(a):e.projectionName()),u=p=>`scale(${l}, ${p})`,f=e.getSizeSignalRef(a===jt?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${o}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=ss.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:mc(i,!0,u)}:{value:[]};return g.push({events:{signal:t.name+nY},update:ma(b)?`[${u(`${p}[0]`)}, ${u(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:o,...S,on:g},{name:p,...i?{init:mc(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]}]}else{const p=a===jt?0:1,y=t.name+iY,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:o,...v,on:g}]}}function ah({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=Om(t)&&t.condition;let o=[];a&&(o=_e(a).map(f=>{const d=r(f);if(v2e(f)){const{param:g,empty:p}=f;return{test:EY(e,{param:g,empty:p}),...d}}else return{test:Vv(e,f.test),...d}})),i!==void 0&&o.push(i);const l=r(t);return l!==void 0&&o.push(l),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Ik(e,t="text"){const n=e.encoding[t];return ah({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>Pk(i,e.config),invalidValueRef:void 0})}function Pk(e,t,n="datum"){if(e){if(ya(e))return Nt(e.value);if(je(e)){const{format:i,formatType:r}=Pv(e);return Sk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function rY(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,o=n.tooltip;if(ae(o))return{tooltip:e8({tooltip:o},a,r,t)};{const l=t.reactiveGeom?"datum.datum":"datum";return ah({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:f=>{const d=oY(f,r,l);if(d)return d;if(f===null)return;let g=pt("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),Ee(g))return{value:g};if(Se(g))return Te(g)?g:g.content==="encoding"?e8(n,a,r,t):{signal:l}},invalidValueRef:void 0})}}function aY(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,o=i?"datum.datum":"datum",l=[];function u(d,g){const p=kc(g),y=Si(d)?d:{...d,type:e[p].type},v=y.title||Ak(y,r),b=_e(v).join(", ").replaceAll(/"/g,'\\"');let S;if(en(g)){const _=g==="x"?"x2":"y2",w=va(e[_]);if(Fn(y.bin)&&w){const A=xe(y,{expr:o}),$=xe(w,{expr:o}),{format:M,formatType:k}=Pv(y);S=Rm(A,$,M,k,r),a.add(_)}}if((en(g)||g===Gr||g===Aa)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:_,formatType:w}=Pv(y);S=Sk({fieldOrDatumDef:y,format:_,formatType:w,expr:o,config:r,normalizeStack:!0}).signal}S??=oY(y,r,o).signal,l.push({channel:g,key:b,value:S})}$k(e,(d,g)=>{he(d)?u(d,g):Ox(d)&&u(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of l)!a.has(d)&&!f[g]&&(f[g]=p);return f}function e8(e,t,n,{reactiveGeom:i}={}){const r=aY(e,t,n,{reactiveGeom:i}),a=Nl(r).map(([o,l])=>`"${o}": ${l}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function oY(e,t,n="datum"){if(he(e)&&fk(e.type)&&!fe(e,"format")){const i=`datum["${e.field}"]`;return{signal:`isValid(${i}) ? isArray(${i}) ? join(${i}, '\\n') : ${i} : ""+${i}`}}return Pk(e,t,n)}function REe(e){const{markDef:t,config:n}=e,i=pt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...NEe(e),...OEe(e)}}function NEe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=pt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:we(tbe,t)?{}:{ariaRoleDescription:{value:t}}}function OEe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return ah({model:e,channelDef:a,vgChannel:"description",mainRefFn:u=>Pk(u,e.config),invalidValueRef:void 0});const o=pt("description",n,i);if(o!=null)return{description:Nt(o)};if(i.aria===!1)return{};const l=aY(t,r,i);if(!Tt(l))return{description:{signal:Nl(l).filter(([u])=>!u.startsWith("_")).map(([u,f])=>[u,f.replaceAll("\\n"," ")]).map(([u,f],d)=>`"${d>0?"; ":""}${u}: " + (${f})`).join(" + ")}}}function jn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:o}=n;let{defaultRef:l,defaultValue:u}=n;const f=r[e];l===void 0&&(u??=pt(e,i,a,{vgChannel:o,ignoreVgConfig:!Om(f)}),u!==void 0&&(l=Nt(u)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=GH({...d,scaleChannel:e,channelDef:f});return ah({model:t,channelDef:f,vgChannel:o??e,invalidValueRef:g,mainRefFn:y=>xk({...d,channel:e,channelDef:y,stack:null,defaultRef:l})})}function sY(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,o=t.filled??pt("filled",n,r),l=We(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=pt(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??l,f=pt(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],d=o?"fill":"stroke",g={...u?{fill:Nt(u)}:{},...f?{stroke:Nt(f)}:{}};return n.color&&(o?n.fill:n.stroke)&&ge(yH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...jn("color",e,{vgChannel:d,defaultValue:o?u:f}),...jn("fill",e,{defaultValue:i.fill?u:void 0}),...jn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function zEe(e){const{encoding:t,mark:n}=e,i=t.order;return!Zl(n)&&ya(i)?ah({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Nt(r.value),invalidValueRef:void 0}):{}}function Dd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,o=t[a],l=n[a];if((a==="xOffset"||a==="yOffset")&&l)return{offsetType:"encoding",offset:xk({channel:a,channelDef:l,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Nt(o),bandPosition:r})};const u=t[a];return u?{offsetType:"visual",offset:u}:{}}function mi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:o,stack:l}=t,u=r[e],f=r[vo(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=Dd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=qk({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!u&&en(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:FEe({channel:e,channelDef:u,channel2Def:f,markDef:a,config:o,scaleName:d,scale:g,stack:l,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function FEe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:o}=e;if(je(n)&&r&&t===r.fieldChannel){if(he(n)){let l=n.bandPosition;if(l===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(l=.5),l!==void 0)return jv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:l,offset:a})}return Yu(n,i,{suffix:"end"},{offset:a})}return bk(e)}function qk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:o}=e;return()=>{const l=kc(n),u=Ol(n),f=pt(n,a,o,{vgChannel:u});if(f!==void 0)return hp(n,f);switch(t){case"zeroOrMin":return t8({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:l,config:o});case"zeroOrMax":return t8({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:l,config:o});case"mid":return{...e[Pi(n)],mult:.5}}}}function t8({mainChannel:e,config:t,...n}){const i=HH(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:o}=r.zeroOrMax;return{signal:`min(${a},${o})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const LEe={left:"x",center:"xc",right:"x2"},UEe={top:"y",middle:"yc",bottom:"y2"};function lY(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Ol(e);const r=e==="x"?"align":"baseline",a=pt(r,t,n);let o;return Te(a)?(ge(Lbe(r)),o=void 0):o=a,e==="x"?LEe[o||(i==="top"?"left":"center")]:UEe[o||i]}function Yv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?uY(e,t,{defaultPos:n,defaultPos2:i}):mi(e,t,{defaultPos:n})}function uY(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,o=vo(e),l=Pi(e),u=jEe(t,i,o),f=u[l]?lY(e,r,a):Ol(e);return{...mi(e,t,{defaultPos:n,vgChannel:f}),...u}}function jEe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:o,config:l}=e,u=kc(n),f=Pi(n),d=Ol(n),g=i[u],p=e.scaleName(u),y=e.getScaleComponent(u),{offset:v}=n in i||n in a?Dd({channel:n,markDef:a,encoding:i,model:e}):Dd({channel:u,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Pi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=BEe({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:l,scaleName:p,scale:y,stack:o,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:z1(n,a)||z1(n,{[n]:sC(n,a,l.style),[f]:sC(f,a,l.style)})||z1(n,l[r])||z1(n,l.mark)||{[d]:qk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function BEe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:l,offset:u,defaultRef:f}){return je(t)&&l&&e.charAt(0)===l.fieldChannel.charAt(0)?Yu(t,a,{suffix:"start"},{offset:u}):bk({channel:e,channelDef:n,scaleName:a,scale:o,stack:l,markDef:i,config:r,offset:u,defaultRef:f})}function z1(e,t){const n=Pi(e),i=Ol(e);if(t[i]!==void 0)return{[i]:hp(e,t[i])};if(t[e]!==void 0)return{[i]:hp(e,t[e])};if(t[n]){const r=t[n];if(gc(r))ge(Dbe(n));else return{[n]:hp(e,r)}}}function gs(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,o=vo(t),l=Pi(t),u=i[t],f=i[o],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[l]??i.size??pt("size",r,n,{vgChannel:l}),v=tH(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(u)&&(Mt(u.bin)||Fn(u.bin)||u.timeUnit&&!f)&&!(y&&!gc(y))&&!i[v]&&!Tn(g)?qEe({fieldDef:u,fieldDef2:f,channel:t,model:e}):(je(u)&&Tn(g)||b)&&!f?PEe(u,t,e):uY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function IEe(e,t,n,i,r,a,o){if(gc(r))if(n){const u=n.get("type");if(u==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=io("minBandSize",{type:o},i);return{signal:d?`max(${ua(d)}, ${f})`:f}}else r.band!==1&&(ge(Ibe(u)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Te(r))return r;if(r)return{value:r}}if(n){const u=n.get("range");if(Rc(u)&&ut(u.step))return{value:u.step-2}}if(!a){const{bandPaddingInner:u,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=Jt(u,o==="tick"?g:o==="bar"?f:d);if(Te(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(ut(p))return{signal:`${1-p} * ${e}`}}return{value:gC(i.view,e)-2}}function PEe(e,t,n){const{markDef:i,encoding:r,config:a,stack:o}=n,l=i.orient,u=n.scaleName(t),f=n.getScaleComponent(t),d=Pi(t),g=vo(t),p=tH(t),y=n.scaleName(p),v=n.getScaleComponent(GM(t)),b=i.type==="tick"||l==="horizontal"&&t==="y"||l==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=jn("size",n,{vgChannel:d,defaultRef:Nt(i.size)}):ge(Gbe(i.type)));const _=!!S,w=ZH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:IEe(d,y||u,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&gc(w)&&!_?"top":"middle",$=lY(t,i,a,A),M=$==="xc"||$==="yc",{offset:k,offsetType:T}=Dd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),N=bk({channel:t,channelDef:e,markDef:i,config:a,scaleName:u,scale:f,stack:o,offset:k,defaultRef:qk({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:f}),bandPosition:M?T==="encoding"?0:.5:Te(w)?{signal:`(1-${w})/2`}:gc(w)?(1-w.band)/2:0});if(d)return{[$]:N,...S};{const z=Ol(g),B=S[d],j=k?{...B,offset:k}:B;return{[$]:N,[z]:ae(N)?[N[0],{...N[1],offset:j}]:{...N,offset:j}}}}function n8(e,t,n,i,r,a,o){if(Wq(e))return 0;const l=e==="x"||e==="y2",u=l?-t/2:t/2;if(Te(n)||Te(r)||Te(i)||a){const f=ua(n),d=ua(r),g=ua(i),p=ua(a),v=a?`(${o} < ${p} ? ${l?"":"-"}0.5 * (${p} - (${o})) : ${u})`:u,b=g?`${g} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-u:+r+u)}function qEe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:o}=i,l=i.getScaleComponent(n),u=i.scaleName(n),f=l?l.get("type"):void 0,d=l.get("reverse"),g=ZH({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=en(n)?pt("binSpacing",a,r)??0:0,b=vo(n),S=Ol(n),_=Ol(b),w=io("minBandSize",a,r),{offset:A}=Dd({channel:n,markDef:a,encoding:o,model:i,bandPosition:0}),{offset:$}=Dd({channel:b,markDef:a,encoding:o,model:i,bandPosition:0}),M=h2e({fieldDef:e,scaleName:u}),k=n8(n,v,d,y,A,w,M),T=n8(b,v,d,y,$??A,w,M),N=Te(g)?{signal:`(1-${g.signal})/2`}:gc(g)?(1-g.band)/2:.5,z=zl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Mt(e.bin)||e.timeUnit){const B=e.timeUnit&&z!==.5;return{[_]:i8({fieldDef:e,scaleName:u,bandPosition:N,offset:T,useRectOffsetField:B}),[S]:i8({fieldDef:e,scaleName:u,bandPosition:Te(N)?{signal:`1-${N.signal}`}:1-N,offset:k,useRectOffsetField:B})}}else if(Fn(e.bin)){const B=Yu(e,u,{},{offset:T});if(he(t))return{[_]:B,[S]:Yu(t,u,{},{offset:k})};if(Dc(e.bin)&&e.bin.step)return{[_]:B,[S]:{signal:`scale("${u}", ${xe(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}ge(xH(b))}function i8({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return jv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Px,endSuffix:qx}:{}})}const HEe=new Set(["aria","width","height"]);function Yr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?sY(e):{};return{...GEe(e.markDef,t),...r8("fill",n),...r8("stroke",i),...jn("opacity",e),...jn("fillOpacity",e),...jn("strokeOpacity",e),...jn("strokeWidth",e),...jn("strokeDash",e),...zEe(e),...rY(e),...Ik(e,"href"),...REe(e)}}function r8(e,t){return t?{[e]:t}:{}}function GEe(e,t){return ebe.reduce((n,i)=>(!HEe.has(i)&&fe(e,i)&&t[i]!=="ignore"&&(n[i]=Nt(e[i])),n),{})}function Hk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let o;if(!bo(a)||!(o=e.getScaleType(a)))return;const l=_x(r.aggregate),u=vk({scaleChannel:a,markDef:n,config:t,scaleType:o,isCountAggregate:l});if(c2e(u)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>$x(a,!0)).join(" && ")}}}function a8(e,t){if(t!==void 0)return{[e]:Nt(t)}}const Y_="voronoi",cY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Y_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Zl(a))return ge(sbe(a)),n;const o={name:e.getName(Y_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...rY(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let l=0,u=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?l=d:g.includes(Y_)&&(u=!0)}),u||n.splice(l+1,0,o),n}},fY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Nk(e.bind),parse:(e,t,n)=>bY(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,o=t.init?.[0],l=cY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((u,f)=>{const d=Lt(`${i}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...o?{init:mc(o[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${pe(u.field)}] : null`}]:[],bind:a[u.field]??a[u.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+ps),o=i+Um,l=r.items.map(f=>Lt(`${i}_${f.field}`)),u=l.map(f=>`${f} !== null`).join(" && ");return l.length&&(a.update=`${u} ? {fields: ${o}, values: [${l.join(", ")}]} : null`),delete a.value,delete a.on,n}},Xv="_toggle",dY={defined:e=>e.type==="point"&&!Wa(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Xv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ps,i=t.name+Xv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Vu(e)}}, `}${i} ? ${n} : null`}},YEe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Wa(e),parse:(e,t)=>{t.clear&&(t.clear=Ee(t.clear)?Hl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(fY.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Lt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(o=>o.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const o=n.findIndex(l=>l.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(a=>a.name===t.name+ps);i(r,"null"),dY.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Xv),i(r,"false"))}return n}},hY={defined:e=>{const t=e.resolve==="global"&&e.bind&&Nk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ba;return t&&!n&&ge(fbe),t&&n},parse:(e,t,n)=>{const i=Ue(n);if(i.select=Ee(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},bY(t,i),Se(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=_e(l.filter??[]),l.filter.includes(o)||l.filter.push(o)}const r=B_(t.bind)?t.bind.legend:"click",a=Ee(r)?Hl(r,"view"):_e(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=B_(t.bind)&&t.bind.legend,a=o=>l=>{const u=Ue(l);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const l=`${Lt(o.field)}_legend`,u=`${i}_${l}`;if(n.filter(d=>d.name===u).length===0){const d=r.merge.map(a(`${l}_symbols`)).concat(r.merge.map(a(`${l}_labels`))).concat(r.merge.map(a(`${l}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+ps),o=i+Um,l=r.items.filter(p=>p.hasLegend).map(p=>Lt(`${i}_${Lt(p.field)}_legend`)),f=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${o}, values: [${l.join(", ")}]} : null`;t.events&&l.length>0?a.on.push({events:l.map(p=>({signal:p})),update:f}):l.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Xv),g=B_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function XEe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of un(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&hY.defined(r)){const o=n.get("selections")??[];o.push(r.name),n.set("selections",o,!1),a.hasLegend=!0}}}const gY="_translate_anchor",pY="_translate_delta",VEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=ss.defined(t),a=i+gY,{x:o,y:l}=t.project.hasChannel;let u=Hl(t.translate,"scope");return r||(u=u.map(f=>(f.between[0].markname=i+Jf,f))),n.push({name:a,value:{},on:[{events:u.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${o!==void 0?`, extent_x: ${r?bC(e,jt):`slice(${o.signals.visual})`}`:""}${l!==void 0?`, extent_y: ${r?bC(e,kn):`slice(${l.signals.visual})`}`:""}}`}]},{name:i+pY,value:{},on:[{events:u,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),o!==void 0&&o8(e,t,o,"width",n),l!==void 0&&o8(e,t,l,"height",n),n}};function o8(e,t,n,i,r){const a=t.name,o=a+gY,l=a+pY,u=n.channel,f=ss.defined(t),d=r.find(M=>M.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(u),y=p?.get("type"),v=p?.get("reverse"),b=f?u===jt?v?"":"-":v?"-":"":"",S=`${o}.extent_${u}`,_=`${b}${l}.${u} / ${f?`${g}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:l},update:f?$:`clampRange(${$}, 0, ${g})`})}const mY="_zoom_anchor",yY="_zoom_delta",WEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=ss.defined(t),a=i+yY,{x:o,y:l}=t.project.hasChannel,u=pe(e.scaleName(jt)),f=pe(e.scaleName(kn));let d=Hl(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+Jf,g))),n.push({name:i+mY,on:[{events:d,update:r?`{${[u?`x: invert(${u}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&s8(e,t,o,"width",n),l!==void 0&&s8(e,t,l,"height",n),n}};function s8(e,t,n,i,r){const a=t.name,o=n.channel,l=ss.defined(t),u=r.find(w=>w.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(o),g=d?.get("type"),p=l?bC(e,o):u.name,y=a+yY,v=`${a}${mY}.${o}`,b=!l||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",S=l?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;u.on.push({events:{signal:y},update:l?_:`clampRange(${_}, 0, ${f})`})}const yc="_store",ps="_tuple",QEe="_modify",vY="vlSelectionResolve",Hx=[EEe,kEe,bEe,dY,fY,ss,hY,YEe,VEe,WEe,cY];function KEe(e){let t=e.parent;for(;t&&!fr(t);)t=t.parent;return t}function Vu(e,{escape:t}={escape:!0}){let n=t?pe(e.name):e.name;const i=KEe(e);if(i){const{facet:r}=i;for(const a of Or)r[a]&&(n+=` + '__facet_${a}_' + (facet[${pe(i.vgField(a))}])`)}return n}function Gk(e){return un(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function bY(e,t){(Ee(t.select)||!t.select.on)&&delete e.events,(Ee(t.select)||!t.select.clear)&&delete e.clear,(Ee(t.select)||!t.select.toggle)&&delete e.toggle}function Wa(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function SC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...SC(e.object)),t.push(...SC(e.property))),t)}function xY(e){return e.object.type==="MemberExpression"?xY(e.object):e.object.name==="datum"}function SY(e){const t=lM(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&xY(i)&&n.add(SC(i).slice(1).join("."))}),n}class oh extends St{model;filter;expr;_dependentFields;clone(){return new oh(null,this.model,Ue(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Vv(this.model,this.filter,this),this._dependentFields=SY(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ZEe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const o=Lt(a.name),l=a.select,u=Ee(l)?l:l.type,f=Se(l)?Ue(l):{type:u},d=i[u];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Ue(d[y]??f[y])));const g=n[o]={...f,name:o,type:u,init:a.value,bind:a.bind,events:Ee(f.on)?Hl(f.on,"scope"):_e(Ue(f.on))};if(Wa(g)&&(r++,r>1)){delete n[o];continue}const p=Ue(a);for(const y of Hx)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&ge(ybe),n}function EY(e,t,n,i="datum"){const r=Ee(t)?t:t.param,a=Lt(r),o=pe(a+yc);let l;try{l=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(l.project.timeUnit){const p=n??e.component.data.raw,y=l.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const u=l.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=l.resolve==="global"?")":`, ${pe(l.resolve)})`,d=`${u}${o}, ${i}${f}`,g=`length(data(${o}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function _Y(e,t,n){const i=Lt(t),r=n.encoding;let a=n.field,o;try{o=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=o.project.items[0].field,o.project.items.length>1&&ge(vbe(a));else if(r&&!a){const l=o.project.items.filter(u=>u.channel===r);!l.length||l.length>1?(a=o.project.items[0].field,ge(bbe(l,r,n,a))):a=l[0].field}return`${o.name}[${pe(Pr(a))}]`}function JEe(e,t){for(const[n,i]of Nl(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Fi(new oh(t,e,{param:n}),r,Pt.Lookup,e.component.data.outputNodeRefCounts)}}function Vv(e,t,n){return dp(t,i=>Ee(i)?i:Txe(i)?EY(e,i,n):RH(i))}function e_e(e,t){if(e)return ae(e)&&!ol(e)?e.map(n=>Ak(n,t)).join(", "):e}function X_(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Jg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:o,labelExpr:l,title:u,zindex:f,...d}=e.combine();if(!r){for(const g in d){const p=g,y=R2e[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(Lm(v)){const{condition:b,...S}=v,_=_e(b),w=zF[p];if(w){const{vgProp:A,part:$}=w,M=[..._.map(k=>{const{test:T,...N}=k;return{test:Vv(null,T),...N}}),S];X_(d,$,A,M),delete d[p]}else if(w===null){const A={signal:_.map($=>{const{test:M,...k}=$;return`${Vv(null,M)} ? ${bF(k)} : `}).join("")+bF(S)};d[p]=A}}else if(Te(v)){const b=zF[p];if(b){const{vgProp:S,part:_}=b;X_(d,_,S,v),delete d[p]}}We(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:g}=d.encode;d.encode={...g?{grid:g}:{}},Tt(d.encode)&&delete d.encode}return{scale:o,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Jt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(l!==void 0){let p=l;d.encode?.labels?.update&&Te(d.encode.labels.update.text)&&(p=uc(l,"datum.label",d.encode.labels.update.text.signal)),X_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of lG)e.hasAxisPart(p)||delete d.encode[p];Tt(d.encode)&&delete d.encode}const g=e_e(u,n);return{scale:o,orient:a,grid:!1,...g?{title:g}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Jt(f,0)}}}}function wY(e){const{axes:t}=e.component,n=[];for(const i of _s)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",o=e.getSizeSignalRef(a).signal;a!==o&&n.push({name:a,update:o})}}return n}function t_e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Jg(r,"grid",t)),...i.map(r=>Jg(r,"grid",t)),...n.map(r=>Jg(r,"main",t)),...i.map(r=>Jg(r,"main",t))].filter(r=>r)}function l8(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},l=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ue(o),...ue(l)]),f={};for(const d of u.values())f[d]={signal:`${i.signal} === "${a}" ? ${ua(o[d])} : ${ua(l[d])}`};return f}return t[r]})])}function n_e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:zH(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",o=Te(n)?"axisOrient":`axis${Cm(n)}`,l=[...r,...r.map(f=>a+f.substr(4))],u=["axis",o,a];return{vlOnlyAxisConfig:l8(l,i,e,n),vgAxisConfig:l8(u,i,e,n),axisConfigStyle:i_e([...u,...l],i)}}function i_e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=_e(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function EC(e,t,n,i={}){const r=cH(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const u8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??r_e(n,e),gridScale:({model:e,channel:t})=>a_e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||CY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||AY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??s_e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??l_e(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return n.tickCount??c_e({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??f_e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=$Y(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",o=t.fieldDef(a);return dH(r?[NF(r)]:[],he(o)?[NF(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>d_e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??h_e(n,t)};function r_e(e,t){return!Tn(e)&&he(t)&&!Mt(t?.bin)&&!Fn(t?.bin)}function a_e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function o_e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Te(a)?a:Bp(a);{const{configValue:o}=EC("labelAngle",i,t?.style,r);return o!==void 0?Bp(o):n===jt&&We([hk,dk],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function _C(e){return`(((${e.signal} % 360) + 360) % 360)`}function AY(e,t,n,i){if(e!==void 0)if(n==="x"){if(Te(e)){const r=_C(e),a=Te(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Te(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Te(e)){const r=_C(e),a=Te(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Te(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function CY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Te(e)){const o=_C(e),l=Te(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${l} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Te(t)){const o=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${o} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function s_e(e,t){if(t==="x"&&We(["quantitative","temporal"],e))return!0}function l_e(e,t,n,i){if(n&&!Se(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function u_e(e){return e==="x"?"bottom":"left"}function c_e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Tn(t)&&t!=="log"){if(he(e)){if(Mt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&We(["month","hours","day","quarter"],$n(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function f_e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const i=MH(n);if(i)return{signal:i}}}}function $Y(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,o=r?r.title:void 0;if(a&&o)return hH(a,o);if(a)return a;if(o)return o;if(a!==void 0)return a;if(o!==void 0)return o}function d_e(e,t){const n=e.values;if(ae(n))return sG(t,n);if(Te(n))return n}function h_e(e,t){return e==="rect"&&Iv(t)?1:0}class Rd extends St{transform;_dependentFields;clone(){return new Rd(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=SY(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(zc(i)&&KH(i.sort)){const{field:a,timeUnit:o}=i,l=i.sort,u=l.map((f,d)=>`${RH({field:a,timeUnit:o,equal:f})} ? ${d} : `).join("")+l.length;t=new Rd(t,{calculate:u,as:Nd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tt(this.transform)}`}}function Nd(e,t,n){return xe(e,{prefix:t,suffix:"sort_index",...n})}function Gx(e,t){return We(["top","bottom"],t)?"column":We(["left","right"],t)||e==="row"?"row":"column"}function Od(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Jt((t||{})[e],r[e],n.header[e])}function Yx(e,t,n,i){const r={};for(const a of e){const o=Od(a,t||{},n,i);o!==void 0&&(r[a]=o)}return r}const Yk=["row","column"],Xk=["header","footer"];function g_e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:l}=Yx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),u=Gx(t,l),f=Bp(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...MY(f,u),...TY(u,f,a),...kY(i,r,t,eSe,CG)}}}function TY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=CY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function MY(e,t){const n=AY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function p_e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of Xk)if(n[r])for(const a of n[r]){const o=y_e(e,t,r,n,a);o!=null&&i.push(o)}return i}function m_e(e,t){const{sort:n}=e;return os(n)?{field:xe(n,{expr:"datum"}),order:n.order??"ascending"}:ae(n)?{field:Nd(e,t,{expr:"datum"}),order:"ascending"}:{field:xe(e,{expr:"datum"}),order:n??"ascending"}}function wC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:o,labelOrient:l,labelExpr:u}=Yx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=Sk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Gx(t,l);return{text:{signal:u?uc(uc(u,"datum.label",f),"datum.value",xe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...MY(a,d),...TY(d,a,o),...kY(n,e,t,tSe,$G)}}function y_e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:o}=i,l=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:g}=Yx(["labelOrient"],o.header,l,t);(t==="row"&&!We(["top","bottom"],g)||t==="column"&&!We(["left","right"],g))&&(a=wC(o,t,l))}const u=fr(e)&&!Nm(e.facet),f=r.axes,d=f?.length>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:m_e(o,t)}:{},...d&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const v_e={column:{start:0,end:1},row:{start:1,end:0}};function b_e(e,t){return v_e[t][e]}function x_e(e,t){const n={};for(const i of Or){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:o}=Yx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),l=Gx(i,o),u=b_e(a,l);u!==void 0&&(n[l]=u)}}return Tt(n)?void 0:n}function kY(e,t,n,i,r){const a={};for(const o of i){if(!r[o])continue;const l=Od(o,t?.header,e,n);l!==void 0&&(a[r[o]]=l)}return a}function Vk(e){return[...F1(e,"width"),...F1(e,"height"),...F1(e,"childWidth"),...F1(e,"childHeight")]}function F1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(i==null||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const o=a.get("type"),l=a.get("range");if(Tn(o)&&Rc(l)){const u=e.scaleName(n);return fr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[c8(u,l)]:[c8(u,l),{name:r,update:DY(u,a,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),o=a?"containerSize()[0]":"containerSize()[1]",l=hC(e.config.view,a?"width":"height"),u=`isFinite(${o}) ? ${o} : ${l}`;return[{name:r,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:r,value:i}]}function c8(e,t){const n=`${e}_step`;return Te(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function DY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Jt(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${ua(o)}, ${ua(a)}) * ${e}_step`}function RY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function NY(e,t){return ue(e).reduce((n,i)=>({...n,...ah({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Nt(r.value),invalidValueRef:void 0})}),{})}function OY(e,t){if(fr(t))return e==="theta"?"independent":"shared";if(uh(t))return"shared";if(tD(t))return en(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Wk(e,t){const n=e.scale[t],i=en(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ge(Qbe(t)),"independent"):e[i][t]||"shared"}const S_e={...rSe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},zY=ue(S_e);class E_e extends As{}const f8={symbols:__e,gradient:w_e,labels:A_e,entries:C_e};function __e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:o,encoding:l,config:u,mark:f}=n,d=o.filled&&f!=="trail";let g={...rbe({},n,e2e),...sY(n,{filled:d})};const p=r.get("symbolOpacity")??u.legend.symbolOpacity,y=r.get("symbolFillColor")??u.legend.symbolFillColor,v=r.get("symbolStrokeColor")??u.legend.symbolStrokeColor,b=p===void 0?FY(l.opacity)??o.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Bi)delete g.fill;else if(fe(g.fill,"field"))y?delete g.fill:(g.fill=Nt(u.legend.symbolBaseFillColor??"black"),g.fillOpacity=Nt(b??1));else if(ae(g.fill)){const S=AC(l.fill??l.color)??o.fill??(d&&o.color);S&&(g.fill=Nt(S))}}if(g.stroke){if(i==="stroke"||!d&&i===Bi)delete g.stroke;else if(fe(g.stroke,"field")||v)delete g.stroke;else if(ae(g.stroke)){const S=Jt(AC(l.stroke||l.color),o.stroke,d?o.color:void 0);S&&(g.stroke={value:S})}}if(i!==Es){const S=he(t)&&UY(n,r,t);S?g.opacity=[{test:S,...Nt(b??1)},Nt(u.legend.unselectedOpacity)]:b&&(g.opacity=Nt(b))}return g={...g,...e},Tt(g)?void 0:g}function w_e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:o}=t;let l={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?FY(o.opacity)||a.opacity:void 0;return f&&(l.opacity=Nt(f)),l={...l,...e},Tt(l)?void 0:l}function A_e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},o=n.config,l=he(t)?UY(n,r,t):void 0,u=l?[{test:l,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;pc(d)?g=ca({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:o}):f===void 0&&d===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?g=ca({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&he(t)&&t.timeUnit===void 0&&(g=ca({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const p={...u?{opacity:u}:{},...g?{text:g}:{},...e};return Tt(p)?void 0:p}function C_e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function FY(e){return LY(e,(t,n)=>Math.max(t,n.value))}function AC(e){return LY(e,(t,n)=>Jt(t,n.value))}function LY(e,t){if(x2e(e))return _e(e.condition).reduce(t,e.value);if(ya(e))return e.value}function UY(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=pe(n.field);return i.map(a=>`(!length(data(${pe(Lt(a)+yc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const d8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return VH(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return WH(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??N_e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??O_e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??T_e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Zf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Kf(n)&&Ha(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$_e(t,e)};function $_e(e,t){const n=e.values;if(ae(n))return sG(t,n);if(Te(n))return n}function T_e(e,t,n,i){if(t!=="shape"){const r=AC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function M_e(e){const{legend:t}=e;return Jt(t.type,k_e(e))}function k_e({channel:e,timeUnit:t,scaleType:n}){if(Kf(e)){if(We(["quarter","month","day"],t))return"symbol";if(Ha(n))return"gradient"}return"symbol"}function D_e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??R_e(n,t)}function R_e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function N_e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:l,gradientVerticalMinLength:u}=e;if(Ha(r))return n==="horizontal"?i==="top"||i==="bottom"?h8(t,"width",o,a):o:h8(t,"height",u,l)}function h8(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function O_e(e){if(We(["quantile","threshold","log","symlog"],e))return"greedy"}function jY(e){const t=It(e)?z_e(e):j_e(e);return e.component.legends=t,t}function z_e(e){const{encoding:t}=e,n={};for(const i of[Bi,...MG]){const r=pn(t[i]);!r||!e.getScaleComponent(i)||i===Ii&&he(r)&&r.type===rh||(n[i]=U_e(e,i))}return n}function F_e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function L_e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function U_e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,o=a.legend,l=new E_e({},F_e(e,t));XEe(e,t,l);const u=n!==void 0?!n:o.disable;if(l.set("disable",u,n!==void 0),u)return l;n=n||{};const f=e.getScaleComponent(t).get("type"),d=pn(r[t]),g=he(d)?$n(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=M_e({legend:n,channel:t,timeUnit:g,scaleType:f}),v=D_e({legend:n,legendType:y,orient:p,legendConfig:o}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:o,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const $ of zY){if(y==="gradient"&&$.startsWith("symbol")||y==="symbol"&&$.startsWith("gradient"))continue;const M=$ in d8?d8[$](b):n[$];if(M!==void 0){const k=L_e(M,$,n,e.fieldDef(t));(k||a.legend[$]===void 0)&&l.set($,M,k)}}const S=n?.encoding??{},_=l.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:l,legendType:y};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const M=NY(S[$]??{},e),k=$ in f8?f8[$](M,A):M;k!==void 0&&!Tt(k)&&(w[$]={..._?.length&&he(d)?{name:`${Lt(d.field)}_legend_${$}`}:{},..._?.length?{interactive:!0}:{},update:_?.length?{...k,cursor:{value:"pointer"}}:k})}return Tt(w)||l.set("encode",w,!!n?.encoding),l}function j_e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){jY(i);for(const r of ue(i.component.legends))n.legend[r]=Wk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=BY(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ue(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function BY(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of zY){const o=Fl(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(l,u)=>{switch(a){case"symbolType":return B_e(l,u);case"title":return gH(l,u);case"type":return r=!0,tr("symbol")}return Ix(l,u,a,"legend")});e.setWithExplicit(a,o)}return r&&(e.implicit?.encode?.gradient&&Fv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Fv(e.explicit,["encode","gradient"])),e}function B_e(e,t){return t.value==="circle"?t:e}function I_e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function IY(e){const t=e.component.legends,n={};for(const r of ue(t)){const a=e.getScaleComponent(r),o=mt(a.get("domains"));if(n[o])for(const l of n[o])BY(l,t[r])||n[o].push(t[r]);else n[o]=[t[r].clone()]}return un(n).flat().map(r=>P_e(r,e.config)).filter(r=>r!==void 0)}function P_e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const o=a.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!a.stroke&&(o.stroke={value:"transparent"});for(const l of MG)a[l]&&delete o[l]}if(a.title||delete a.title,i!==void 0){let o=i;a.encode?.labels?.update&&Te(a.encode.labels.update.text)&&(o=uc(i,"datum.label",a.encode.labels.update.text.signal)),I_e(a,"labels","text",{signal:o})}return a}}function q_e(e){return uh(e)||tD(e)?H_e(e):PY(e)}function H_e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),PY(e))}function PY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},a=t.data.reduce((o,l)=>{const u=Te(l)?l.signal:`data('${e.lookupDataSource(l)}')`;return We(o,u)||o.push(u),o},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const G_e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class qY extends As{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function HY(e){e.component.projection=It(e)?Y_e(e):W_e(e)}function Y_e(e){if(e.hasProjection){const t=Ln(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?X_e(e):void 0,a=new qY(e.projectionName(!0),{...Ln(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function X_e(e){const t=[],{encoding:n}=e;for(const i of[[$a,Ca],[qr,Ta]])(pn(n[i[0]])||pn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ii)&&e.typedFieldDef(Ii).type===rh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Pt.Main)),t}function V_e(e,t){const n=UM(G_e,r=>!!(!we(e.explicit,r)&&!we(t.explicit,r)||we(e.explicit,r)&&we(t.explicit,r)&&or(e.get(r),t.get(r))));if(or(e.size,t.size)){if(n)return e;if(or(e.explicit,{}))return t;if(or(t.explicit,{}))return e}return null}function W_e(e){if(e.children.length===0)return;let t;for(const i of e.children)HY(i);const n=UM(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=V_e(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new qY(i,t.specifiedProjection,t.size,Ue(t.data));for(const a of e.children){const o=a.component.projection;o&&(o.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function Q_e(e,t,n,i){if(Fm(t,n)){const r=It(e)?e.axis(n)??e.legend(n)??{}:{},a=xe(t,{expr:"datum"}),o=xe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(t,{binSuffix:"range",forAs:!0}),formula:Rm(a,o,r.format,r.formatType,i)}}return{}}function GY(e,t){return`${oH(e)}_${t}`}function K_e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Qk(e,t,n){const i=zx(n,void 0)??{},r=GY(i,t);return e.getName(`${r}_bins`)}function Z_e(e){return"as"in e}function g8(e,t,n){let i,r;Z_e(e)?i=Ee(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[xe(e,{forAs:!0}),xe(e,{binSuffix:"end",forAs:!0})];const a={...zx(t,void 0)},o=GY(a,e.field),{signal:l,extentSignal:u}=K_e(n,o);if(wx(a.extent)){const d=a.extent;r=_Y(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...l?{signal:l}:{},...u?{extentSignal:u}:{},...r?{span:r}:{}};return{key:o,binComponent:f}}class Qa extends St{bins;clone(){return new Qa(null,Ue(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,o)=>{if(Si(a)&&Mt(a.bin)){const{key:l,binComponent:u}=g8(a,a.bin,n);r[l]={...u,...r[l],...Q_e(n,a,o,n.config)}}return r},{});return Tt(i)?null:new Qa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=g8(n,n.bin,i);return new Qa(t,{[r]:a})}merge(t,n){for(const i of ue(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=qa([...this.bins[i].as,...t.bins[i].as],tt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(un(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(un(this.bins).map(t=>t.field))}hash(){return`Bin ${tt(this.bins)}`}assemble(){return un(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...o}=t.bin,l={type:"bin",field:Pr(t.field),as:i,signal:t.signal,...wx(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!a&&t.extentSignal&&(n.push({type:"extent",field:Pr(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:xe({field:i[f]},{expr:"datum"}),as:u[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function J_e(e,t,n,i){const r=It(i)?i.encoding[vo(t)]:void 0;if(Si(n)&&It(i)&&JH(n,r,i.markDef,i.config)){e.add(xe(n,{})),e.add(xe(n,{suffix:"end"}));const{mark:a,markDef:o,config:l}=i,u=zl({fieldDef:n,markDef:o,config:l});Ip(a)&&u!==.5&&en(t)&&(e.add(xe(n,{suffix:Px})),e.add(xe(n,{suffix:qx}))),n.bin&&Fm(n,t)&&e.add(xe(n,{binSuffix:"range"}))}else if(Kq(t)){const a=Qq(t);e.add(i.getName(a))}else e.add(xe(n));return zc(n)&&Ixe(n.scale?.range)&&e.add(n.scale.range.field),e}function ewe(e,t){for(const n of ue(t)){const i=t[n];for(const r of ue(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class da extends St{dimensions;measures;clone(){return new da(null,new Set(this.dimensions),Ue(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((o,l)=>{const{aggregate:u,field:f}=o;if(u)if(u==="count")r["*"]??={},r["*"].count=new Set([xe(o,{forAs:!0})]);else{if(hs(u)||Kl(u)){const d=hs(u)?"argmin":"argmax",g=u[d];r[g]??={},r[g][d]=new Set([xe({op:d,field:g},{forAs:!0})])}else r[f]??={},r[f][u]=new Set([xe(o,{forAs:!0})]);bo(l)&&n.scaleDomain(l)==="unaggregated"&&(r[f]??={},r[f].min=new Set([xe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([xe({field:f,aggregate:"max"},{forAs:!0})]))}else J_e(a,l,o,n)}),a.size+ue(r).length===0)?null:new da(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:o,field:l,as:u}=a;o&&(o==="count"?(r["*"]??={},r["*"].count=new Set([u||xe(a,{forAs:!0})])):(r[l]??={},r[l][o]??=new Set,r[l][o].add(u||xe(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+ue(r).length===0?null:new da(t,i,r)}merge(t){return Iq(this.dimensions,t.dimensions)?(ewe(this.measures,t.measures),!0):(dxe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ue(this.measures)])}producedFields(){const t=new Set;for(const n of ue(this.measures))for(const i of ue(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${tt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of ue(this.measures))for(const o of ue(this.measures[a]))for(const l of this.measures[a][o])i.push(l),t.push(o),n.push(a==="*"?null:Pr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Pr),ops:t,fields:n,as:i}}}class sh extends St{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Or){const o=n.facet[a];if(o){const{bin:l,sort:u}=o;this[a]={name:n.getName(`${a}_domain`),fields:[xe(o),...Mt(l)?[xe(o,{binSuffix:"end"})]:[]],...os(u)?{sortField:u}:ae(u)?{sortIndexField:Nd(o,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Or)this[n]&&(t+=` ${n.charAt(0)}:${tt(this[n])}`);return t}get fields(){const t=[];for(const n of Or)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Or)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of _s){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Tn(r)&&Rc(a)){const o=Xx(this.childModel,n),l=eD(o);l?t[n]=l:ge(ZM(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],o=[],l=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),o.push("max")):(a.push(i[r]),o.push("distinct")),l.push(`distinct_${i[r]}`));const{sortField:u,sortIndexField:f}=this[t];if(u){const{op:d=Rx,field:g}=u;a.push(g),o.push(d),l.push(xe(u,{forAs:!0}))}else f&&(a.push(f),o.push("max"),l.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:o,as:l}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const u of Yk){for(const f of Xk){const d=i[u]?.[f]??[];for(const g of d)if(g.axes?.length>0){a[u]=!0;break}}if(a[u]){const f=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:l}=a;return(o||l)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:o}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),u=l.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:u}]})}for(const l of[as,rs])this[l]&&t.push(this.assembleRowColumnHeaderData(l,n,i));if(o){const l=this.assembleFacetHeaderData(i);l&&t.push(...l)}return t}}function p8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function twe(e,t){const n=IM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=p8(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=p8(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ge(Sbe(t)),null}function nwe(e){const t={};return yy(e.filter,n=>{if(DH(n)){let i=null;rk(n)?i=rr(n.equal):ok(n)?i=rr(n.lte):ak(n)?i=rr(n.lt):sk(n)?i=rr(n.gt):lk(n)?i=rr(n.gte):uk(n)?i=n.range[0]:ck(n)&&(i=(n.oneOf??n.in)[0]),i&&(Nc(i)?t[n.field]="date":ut(i)?t[n.field]="number":Ee(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function iwe(e){const t={};function n(i){Md(i)?t[i.field]="date":i.type==="quantitative"&&Vve(i.aggregate)?t[i.field]="number":_d(i.field)>1?i.field in t||(t[i.field]="flatten"):zc(i)&&os(i.sort)&&_d(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((It(e)||fr(e))&&e.forEachFieldDef((i,r)=>{if(Si(i))n(i);else{const a=kc(r),o=e.fieldDef(a);n({...i,type:o.type})}}),It(e)){const{mark:i,markDef:r,encoding:a}=e;if(Zl(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",l=a[o];he(l)&&l.type==="quantitative"&&!(l.field in t)&&(t[l.field]="number")}}return t}function rwe(e){const t={};if(It(e)&&e.component.selection)for(const n of ue(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&_d(r.field)>1&&(t[r.field]="flatten")}return t}class Jn extends St{_parse;clone(){return new Jn(null,Ue(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${tt(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!El(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const l of ue(i)){const u=r.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===i[l]||u.value==="derived"||i[l]==="flatten"?delete i[l]:ge(AF(l,i[l],u.value)))}for(const l of ue(n)){const u=r.get(l);u!==void 0&&(u===n[l]?delete n[l]:ge(AF(l,n[l],u)))}const a=new As(n,i);r.copyAll(a);const o={};for(const l of ue(a.combine())){const u=a.get(l);u!==null&&(o[l]=u)}return ue(o).length===0||r.parseNothing?null:new Jn(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ue(this._parse)){const i=this._parse[n];_d(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(ue(this._parse))}dependentFields(){return new Set(ue(this._parse))}assembleTransforms(t=!1){return ue(this._parse).filter(n=>t?_d(n)>1:!0).map(n=>{const i=twe(n,this._parse[n]);return i?{type:"formula",expr:i,as:nh(n)}:null}).filter(n=>n!==null)}}class Ll extends St{clone(){return new Ll(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ba])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ba}}}class jm extends St{params;clone(){return new jm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Bm extends St{params;clone(){return new Bm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class vc extends St{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(El(t)||(n=t.format?{...cr(t.format,["parse"])}:{}),Pp(t))this._data={values:t.values};else if(kd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];We(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else VG(t)?this._data={values:[{type:"Sphere"}]}:(YG(t)||El(t))&&(this._data={});this._generator=El(t),t.name&&(this._name=t.name),n&&!Tt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function Kk(e){return e instanceof vc||e instanceof jm||e instanceof Bm}class Zk{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Fc extends Zk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class Jk extends Zk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class awe extends Jk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ue(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class owe extends Jk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&Gk(t)}run(t){t instanceof Ll&&(this.requiresSelectionId&&(Kk(t.parent)||t.parent instanceof da||t.parent instanceof Jn)||(this.setModified(),t.remove()))}}class swe extends Zk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Va&&(i=t.producedFields(),jM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class lwe extends Jk{constructor(){super()}run(t){t instanceof Fi&&!t.isRequired()&&(this.setModified(),t.remove())}}class uwe extends Fc{run(t){if(!Kk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Jn)if(t instanceof Jn)this.setModified(),t.merge(n);else{if(BM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class cwe extends Fc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Jn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const o of i){const l=o.parse;for(const u of ue(l))u in r?r[u]!==l[u]&&a.add(u):r[u]=l[u]}for(const o of a)delete r[o];if(!Tt(r)){this.setModified();const o=new Jn(t,r);for(const l of n){if(l instanceof Jn)for(const u of ue(r))delete l.parse[u];t.removeChild(l),l.parent=o,l instanceof Jn&&ue(l.parse).length===0&&l.remove()}}}}}class fwe extends Fc{run(t){t instanceof Fi||t.numChildren()>0||t instanceof sh||t instanceof vc||(this.setModified(),t.remove())}}class dwe extends Fc{run(t){const n=t.children.filter(r=>r instanceof Va),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class hwe extends Fc{run(t){const n=t.children.filter(r=>r instanceof da),i={};for(const r of n){const a=tt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of ue(i)){const a=i[r];if(a.length>1){const o=a.pop();for(const l of a)o.merge(l)&&(t.removeChild(l),l.parent=o,l.remove(),this.setModified())}}}}class gwe extends Fc{model;constructor(t){super(),this.model=t}run(t){const n=!(Kk(t)||t instanceof oh||t instanceof Jn||t instanceof Ll),i=[],r=[];for(const a of t.children)a instanceof Qa&&(n&&!BM(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const o of i)a.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Qa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const o of r)a.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class pwe extends Fc{run(t){const n=[...t.children];if(!Ed(n,o=>o instanceof Fi)||t.numChildren()<=1)return;const r=[];let a;for(const o of n)if(o instanceof Fi){let l=o;for(;l.numChildren()===1;){const[u]=l.children;if(u instanceof Fi)l=u;else break}r.push(...l.children),a?(t.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=l,this.setModified()):a=l}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=a}}}class Lc extends St{transform;clone(){return new Lc(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=qa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`JoinAggregateTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class zd extends St{filter;clone(){return new zd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:o,scales:l}=i;if(o==="include-invalid-values"&&l==="include-invalid-values")return null;const u=n.reduceFieldDef((f,d,g)=>{const p=bo(g)&&n.getScaleComponent(g);if(p){const y=p.get("type"),{aggregate:v}=d,b=vk({scaleChannel:g,markDef:a,config:r,scaleType:y,isCountAggregate:_x(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return ue(u).length?new zd(t,u):null}dependentFields(){return new Set(ue(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tt(this.filter)}`}assemble(){const t=ue(this.filter).reduce((n,i)=>{const r=this.filter[i],a=xe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${CC(a)}))`):r.type==="quantitative"&&n.push(CC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function CC(e){return`isValid(${e}) && isFinite(+${e})`}function mwe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=xe(i);return r&&t.push(r),t},[])}function ywe(e){return ae(e)&&e.every(t=>Ee(t))&&e.length>1}class ls extends St{_stack;clone(){return new ls(null,Ue(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:o="zero"}=n,l=[],u=[];if(n.sort!==void 0)for(const g of n.sort)l.push(g.field),u.push(Jt(g.order,"ascending"));const f={field:l,order:u};let d;return ywe(a)?d=a:Ee(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new ls(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:o,offset:l,impute:u}=i,f=a.map(y=>{const v=r[y];return va(v)}).filter(y=>!!y),d=mwe(n),g=n.encoding.order;let p;if(ae(g)||he(g))p=fH(g);else{const y=eG(g)?g.sort:o==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new ls(t,{dimensionFieldDefs:f,stackField:n.vgField(o),facetby:[],stackby:d,sort:p,offset:l,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[xe(r,{binSuffix:"mid"})]:[xe(r,{}),xe(r,{binSuffix:"end"})]:[xe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:o,offset:l,impute:u,as:f}=this._stack;if(u)for(const d of i){const{bandPosition:g=.5,bin:p}=d;if(p){const y=xe(d,{expr:"datum"}),v=xe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${CC(y)} ? ${g}*${y}+${1-g}*${v} : ${y}`,as:xe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:xe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:f,offset:l}),t}}class lh extends St{transform;clone(){return new lh(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=qa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`WindowTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const g of this.transform.window)n.push(g.op),i.push(this.getDefaultName(g)),r.push(g.param===void 0?null:g.param),t.push(g.field===void 0?null:g.field);const a=this.transform.frame,o=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(g=>QM(g)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const l=[],u=[];if(this.transform.sort!==void 0)for(const g of this.transform.sort)l.push(g.field),u.push(g.order??"ascending");const f={field:l,order:u},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...o!==void 0?{groupby:o}:{},...a!==void 0?{frame:a}:{}}}}function vwe(e){function t(n){if(!(n instanceof sh)){const i=n.clone();if(i instanceof Fi){const r=TC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof da||i instanceof ls||i instanceof lh||i instanceof Lc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function $C(e){if(e instanceof sh)if(e.numChildren()===1&&!(e.children[0]instanceof Fi)){const t=e.children[0];(t instanceof da||t instanceof ls||t instanceof lh||t instanceof Lc)&&t.addDimensions(e.fields),t.swapWithParent(),$C(e)}else{const t=e.model.component.data.main;YY(t);const n=vwe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map($C)}function YY(e){if(e instanceof Fi&&e.type===Pt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof sh||(t.swapWithParent(),YY(e))}}const TC="scale_",L1=5;function MC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!MC(t.children))return!1}return!0}function Kr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function m8(e,t,n){let i=e.sources,r=!1;return r=Kr(new lwe,i)||r,r=Kr(new owe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Kr(new fwe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Kr(new uwe,i)||r,r=Kr(new gwe(t),i)||r,r=Kr(new swe,i)||r,r=Kr(new cwe,i)||r,r=Kr(new hwe,i)||r,r=Kr(new dwe,i)||r,r=Kr(new awe,i)||r,r=Kr(new pwe,i)||r),e.sources=i,r}function bwe(e,t){MC(e.sources);let n=0,i=0;for(let r=0;r<L1&&m8(e,t,!0);r++)n++;e.sources.map($C);for(let r=0;r<L1&&m8(e,t,!1);r++)i++;MC(e.sources),Math.max(n,i)===L1&&ge(`Maximum optimization runs(${L1}) reached.`)}class Sn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new Sn(()=>t(n))}}function XY(e){It(e)?xwe(e):Swe(e)}function xwe(e){const t=e.component.scales;for(const n of ue(t)){const i=_we(e,n);if(t[n].setWithExplicit("domains",i),Awe(e,n),e.component.data.isFaceted){let a=e;for(;!fr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const l of i.value)Jo(l)&&(l.data=TC+l.data.replace(TC,""))}}}function Swe(e){for(const n of e.children)XY(n);const t=e.component.scales;for(const n of ue(t)){let i,r=null;for(const a of e.children){const o=a.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=Fl(i,o.getWithExplicit("domains"),"domains","scale",kC);const l=o.get("selectionExtent");r&&l&&r.param!==l.param&&ge(gbe),r=l}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function Ewe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=y8(t,n);if(!r){ge(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=y8(t,n);if(r)return"unaggregated"}return e}function _we(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=Ewe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&pn(i.x2)?pn(i.x)?Fl(tl(n,r,e,"x"),tl(n,r,e,"x2"),"domain","scale",kC):tl(n,r,e,"x2"):t==="y"&&pn(i.y2)?pn(i.y)?Fl(tl(n,r,e,"y"),tl(n,r,e,"y2"),"domain","scale",kC):tl(n,r,e,"y2"):tl(n,r,e,t)}function wwe(e,t,n){return e.map(i=>({signal:`{data: ${Fx(i,{timeUnit:n,type:t})}}`}))}function V_(e,t,n){const i=$n(n)?.unit;return t==="temporal"||i?wwe(e,t,i):[e]}function tl(e,t,n,i){const{encoding:r,markDef:a,mark:o,config:l,stack:u}=n,f=pn(r[i]),{type:d}=f,g=f.timeUnit,p=yEe({invalid:io("invalid",a,l),isPath:Zl(o)});if(Bxe(t)){const b=tl(e,void 0,n,i),S=V_(t.unionWith,d,g);return Ua([...S,...b.value])}else{if(Te(t))return Ua([t]);if(t&&t!=="unaggregated"&&!LH(t))return Ua(V_(t,d,g))}if(u&&i===u.fieldChannel){if(u.offset==="normalize")return tr([[0,1]]);const b=n.requestDataName(p);return tr([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=bo(i)&&he(f)?Cwe(n,i,e):void 0;if(xo(f)){const b=V_([f.datum],d,g);return tr(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return tr([{data:n.requestDataName(p),field:xe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:xe({field:b,aggregate:"max"})}])}else if(Mt(v.bin)){if(Tn(e))return tr(e==="bin-ordinal"?[]:[{data:jp(y)?n.requestDataName(p):n.requestDataName(Pt.Raw),field:n.vgField(i,Fm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Se(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Mt(b)){const S=Qk(n,v.field,b);return tr([new Sn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return tr([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&We(["time","utc"],e)){const b=r[vo(i)];if(JH(v,b,a,l)){const S=n.requestDataName(p),_=zl({fieldDef:v,fieldDef2:b,markDef:a,config:l}),w=Ip(o)&&_!==.5&&en(i);return tr([{data:S,field:n.vgField(i,w?{suffix:Px}:{})},{data:S,field:n.vgField(i,{suffix:w?qx:"end"})}])}}return tr(y?[{data:jp(y)?n.requestDataName(p):n.requestDataName(Pt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function W_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":Rx),...i?{field:Pr(i)}:{},...r?{order:r}:{}}}function Awe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=LH(i)?i:void 0,o=Dc(r)&&wx(r.extent)?r.extent:void 0;(a||o)&&n.set("selectionExtent",a??o,!0)}function Cwe(e,t,n){if(!Tn(n))return;const i=e.fieldDef(t),r=i.sort;if(KH(r))return{op:"min",field:Nd(i,t),order:"ascending"};const{stack:a}=e,o=a?new Set([...a.groupbyFields,...a.stackBy.map(l=>l.fieldDef.field)]):void 0;if(os(r)){const l=a&&!o.has(r.field);return W_(r,l)}else if(y2e(r)){const{encoding:l,order:u}=r,f=e.fieldDef(l),{aggregate:d,field:g}=f,p=a&&!o.has(g);if(hs(d)||Kl(d))return W_({field:xe(f),order:u},p);if(QM(d)||!d)return W_({op:d,field:g,order:u},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(We(["ascending",void 0],r))return!0}}function y8(e,t){const{aggregate:n,type:i}=e;return n?Ee(n)&&!Qve.has(n)?{valid:!1,reason:qbe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Hbe(e)}:{valid:!0}:{valid:!1,reason:Pbe(e)}}function kC(e,t,n,i){return e.explicit&&t.explicit&&ge(Wbe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function $we(e){const t=qa(e.map(o=>{if(Jo(o)){const{sort:l,...u}=o;return u}return o}),tt),n=qa(e.map(o=>{if(Jo(o)){const l=o.sort;return l!==void 0&&!jp(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(o=>o!==void 0),tt);if(t.length===0)return;if(t.length===1){const o=e[0];if(Jo(o)&&n.length>0){let l=n[0];if(n.length>1){ge($F);const u=n.filter(f=>Se(f)&&"op"in f&&f.op!=="min");n.every(f=>Se(f)&&"op"in f)&&u.length===1?l=u[0]:l=!0}else if(Se(l)&&"field"in l){const u=l.field;o.field===u&&(l=l.order?{order:l.order}:!0)}return{...o,sort:l}}return o}const i=qa(n.map(o=>jp(o)||!("op"in o)||Ee(o.op)&&we(Yve,o.op)?o:(ge(Kbe(o)),!0)),tt);let r;i.length===1?r=i[0]:i.length>1&&(ge($F),r=!0);const a=qa(e.map(o=>Jo(o)?o.data:null),o=>o);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(l=>l.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function eD(e){if(Jo(e)&&Ee(e.field))return e.field;if(Kve(e)){let t;for(const n of e.fields)if(Jo(n)&&Ee(n.field)){if(!t)t=n.field;else if(t!==n.field)return ge(Zbe),t}return ge(Jbe),t}else if(Zve(e)){ge(exe);const t=e.fields[0];return Ee(t)?t:void 0}}function Xx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Jo(r)&&(r.data=e.lookupDataSource(r.data)),r));return $we(i)}function VY(e){return uh(e)||tD(e)?e.children.reduce((t,n)=>t.concat(VY(n)),v8(e)):v8(e)}function v8(e){return ue(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:o,selectionExtent:l,domains:u,range:f,reverse:d,...g}=r,p=Twe(r.range,a,n,e),y=Xx(e,n),v=l?TEe(e,l,i,y):null;return t.push({name:a,type:o,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function Twe(e,t,n,i){if(en(n)){if(Rc(e))return{step:{signal:`${t}_step`}}}else if(Se(e)&&Jo(e))return{...e,data:i.lookupDataSource(e.data)};return e}class WY extends As{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(We([Un.LOG,Un.TIME,Un.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&We([Un.LINEAR,Un.SQRT,Un.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,o=!1;for(const l of i){if(ae(l)){const u=l[0],f=l[l.length-1];if(ut(u)&&ut(f))if(u<=0&&f>=0){r=!0;continue}else{a=!0;continue}}o=!0}if(r)return"definitely";if(a&&!o)return"definitely-not"}return"maybe"}}const Mwe=["range","scheme"];function kwe(e){const t=e.component.scales;for(const n of WM){const i=t[n];if(!i)continue;const r=Dwe(n,e);i.setWithExplicit("range",r)}}function b8(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Pi(t),o=e.getName(a);if(Se(i)&&i.binned&&i.step!==void 0)return new Sn(()=>{const l=e.scaleName(t),u=`(domain("${l}")[1] - domain("${l}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${u})`});if(Mt(i)){const l=Qk(e,r,i);return new Sn(()=>{const u=e.getSignalName(l),f=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${f})`})}}}function Dwe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of Mwe)if(n[g]!==void 0){const p=cC(a,g),y=UH(e,g);if(!p)ge(vH(a,g,e));else if(y)ge(y);else switch(g){case"range":{const v=n.range;if(ae(v)){if(en(e))return Ua(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return Sn.fromName(_,S)}return b}))}else if(Se(v))return Ua({data:t.requestDataName(Pt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ua(v)}case"scheme":return Ua(Rwe(n[g]))}}const o=e===jt||e==="xOffset"?"width":"height",l=i[o];if(ao(l)){if(en(e))if(Tn(a)){const g=KY(l,t,e);if(g)return Ua({step:g})}else ge(bH(o));else if(Mm(e)){const g=e===Gl?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=ZY(l,a);if(v)return Ua(v)}}}const{rangeMin:u,rangeMax:f}=n,d=Nwe(e,t);return(u!==void 0||f!==void 0)&&cC(a,"rangeMin")&&ae(d)&&d.length===2?Ua([u??d[0],f??d[1]]):tr(d)}function Rwe(e){return jxe(e)?{scheme:e.name,...cr(e,["name"])}:{scheme:e}}function QY(e,t,n,{center:i}={}){const r=Pi(e),a=t.getName(r),o=t.getSignalName.bind(t);return e===kn&&ma(n)?i?[Sn.fromName(l=>`${o(l)}/2`,a),Sn.fromName(l=>`-${o(l)}/2`,a)]:[Sn.fromName(o,a),0]:i?[Sn.fromName(l=>`-${o(l)}/2`,a),Sn.fromName(l=>`${o(l)}/2`,a)]:[0,Sn.fromName(o,a)]}function Nwe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:o}=pn(a[e]),u=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case jt:case kn:{if(We(["point","band"],u)){const g=JY(e,n,i.view);if(ao(g))return{step:KY(g,t,e)}}return QY(e,t,u)}case Gl:case ih:return Owe(e,t,u);case Ss:{const g=Lwe(r,i),p=Uwe(r,n,t,i);return Cd(u)?Fwe(g,p,zwe(u,i,f,e)):[g,p]}case Gr:return[0,Math.PI*2];case Mc:return[0,360];case Aa:return[0,new Sn(()=>{const g=t.getSignalName(fr(t.parent)?"child_width":"width"),p=t.getSignalName(fr(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case Yl:return{step:1e3/i.scale.framesPerSecond};case Wl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Ql:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ii:return"symbol";case Bi:case mo:case yo:return u==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Es:case Xl:case Vl:return[i.scale.minOpacity,i.scale.maxOpacity]}}function KY(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=GM(n),o=i[a];if(DG({step:e,offsetIsDiscrete:je(o)&&fk(o.type)})==="offset"&&fG(i,a)){const u=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(u.get("type")==="band"){const p=u.get("paddingInner")??u.get("padding")??0,y=u.get("paddingOuter")??u.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${ibe(g)})`}}else return e.step}function ZY(e,t){if(DG({step:e,offsetIsDiscrete:Tn(t)})==="offset")return{step:e.step}}function Owe(e,t,n){const i=e===Gl?"x":"y",r=t.getScaleComponent(i);if(!r)return QY(i,t,n,{center:!0});const a=r.get("type"),o=t.scaleName(i),{markDef:l,config:u}=t;if(a==="band"){const f=JY(i,t.size,t.config.view);if(ao(f)){const d=ZY(f,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const f=t.encoding[i];if(he(f)&&f.timeUnit){const d=MH(f.timeUnit,v=>`scale('${o}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=zl({fieldDef:f,markDef:l,config:u})-.5,y=p!==0?` + ${p}`:"";if(g){const v=Te(g)?`${g.signal}/2${y}`:`${g/2+p}`,b=Te(g)?`(1 - ${g.signal}/2)${y}`:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return jq(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function JY(e,t,n){const i=e===jt?"width":"height",r=t[i];return r!==void 0?r:Gv(n,i)}function zwe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ae(n)?n.length+1:(ge(uxe(i)),3)}}function Fwe(e,t,n){const i=()=>{const r=ua(t),a=ua(e),o=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${o}, ${o})`};return Te(t)?new Sn(i):{signal:i()}}function Lwe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Ax("size",e))}const x8=.95;function Uwe(e,t,n,i){const r={x:b8(n,"x"),y:b8(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=S8(t,r,i.view);return ut(a)?a-1:new Sn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=S8(t,r,i.view);return ut(a)?Math.pow(x8*a,2):new Sn(()=>`pow(${x8} * ${a.signal}, 2)`)}}throw new Error(Ax("size",e))}function S8(e,t,n){const i=ao(e.width)?e.width.step:gC(n,"width"),r=ao(e.height)?e.height.step:gC(n,"height");return t.x||t.y?new Sn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function eX(e,t){It(e)?jwe(e,t):nX(e,t)}function jwe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:o}=e;for(const l of ue(n)){const u=o[l],f=n[l],d=e.getScaleComponent(l),g=pn(r[l]),p=u[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=cC(y,t),_=UH(l,t);if(p!==void 0&&(S?_&&ge(_):ge(vH(y,t,l))),S&&_===void 0)if(p!==void 0){const w=g.timeUnit,A=g.type;switch(t){case"domainMax":case"domainMin":Nc(u[t])||A==="temporal"||w?f.set(t,{signal:Fx(u[t],{type:A,timeUnit:w})},!0):f.set(t,u[t],!0);break;default:f.copyKeyFromObject(t,u)}}else{const w=fe(E8,t)?E8[t]({model:e,channel:l,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:a,config:i,hasNestedOffsetScale:dG(r,l),hasSecondaryRangeChannel:!!r[vo(l)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const E8={bins:({model:e,fieldOrDatumDef:t})=>he(t)?Bwe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Iwe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>Pwe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>qwe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>Hwe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>Gwe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return Ywe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:o})=>Xwe(e,t,n,i,r,a.scale,o)};function tX(e){It(e)?kwe(e):nX(e,"range")}function nX(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?tX(i):eX(i,t);for(const i of ue(n)){let r;for(const a of e.children){const o=a.component.scales[i];if(o){const l=o.getWithExplicit(t);r=Fl(r,l,t,"scale",GG((u,f)=>{switch(t){case"range":return u.step&&f.step?u.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function Bwe(e,t){const n=t.bin;if(Mt(n)){const i=Qk(e,t.field,n);return new Sn(()=>e.getSignalName(i))}else if(Fn(n)&&Dc(n)&&n.step!==void 0)return{step:n.step}}function Iwe(e,t){if(We([Bi,mo,yo],e)&&t!=="nominal")return"hcl"}function Pwe(e,t,n,i,r,a){if(!(va(a)?.bin||ae(n)||r!=null||i!=null||We([Un.TIME,Un.UTC],e)))return en(t)?!0:void 0}function qwe(e,t,n,i,r,a){if(en(e)){if(Ha(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:l}=r;if(o==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(l==="vertical"&&e==="x"||l==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Un.POINT)return n.pointPadding}}function Hwe(e,t,n,i,r,a=!1){if(e===void 0){if(en(t)){const{bandPaddingInner:o,barBandPaddingInner:l,rectBandPaddingInner:u,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Jt(o,n==="bar"?l:n==="tick"?f:u)}else if(Mm(t)&&i===Un.BAND)return r.offsetBandPaddingInner}}function Gwe(e,t,n,i,r,a=!1){if(e===void 0){if(en(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:l}=r;if(a)return l;if(n===Un.BAND)return Jt(o,Te(i)?{signal:`${i.signal}/2`}:i/2)}else if(Mm(t)){if(n===Un.POINT)return .5;if(n===Un.BAND)return r.offsetBandPaddingOuter}}}function Ywe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ma(e)&&t==="descending"?Te(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ma(e)&&t==="descending")return!0}function Xwe(e,t,n,i,r,a,o){if(!!n&&n!=="unaggregated"&&ma(r)){if(ae(n)){const u=n[0],f=n[n.length-1];if(ut(u)&&u<=0&&ut(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Cd(r))return!0;if(!(he(t)&&t.bin)&&We([..._s,...Lve],e)){const{orient:u,type:f}=i;return We(["bar","area","line","trail"],f)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:We(["bar","area"],f)&&!o?!0:a?.zero}return!1}function Vwe(e,t,n,i,r=!1){const a=Wwe(t,n,i,r),{type:o}=e;return bo(t)?o!==void 0?Yxe(t,o)?he(n)&&!Gxe(o,n.type)?(ge(Xbe(o,a)),a):o:(ge(Ybe(t,o,a)),a):a:null}function Wwe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(Kf(e)||L_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ge(U_(e,"ordinal")),"ordinal";if(F_(e))return"band";if(en(e)||Mm(e)){if(We(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in VM)return"band";const r=n[Pi(e)];return gc(r)||Td(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Kf(e)?"time":L_(e)==="discrete"?(ge(U_(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&$n(t.timeUnit).utc?"utc":F_(e)?"band":"time";case"quantitative":return Kf(e)?he(t)&&Mt(t.bin)?"bin-ordinal":"linear":L_(e)==="discrete"?(ge(U_(e,"quantitative")),"ordinal"):F_(e)?"band":"linear";case"geojson":return}throw new Error(mH(t.type))}function Qwe(e,{ignoreRange:t}={}){iX(e),XY(e);for(const n of Hxe)eX(e,n);t||tX(e)}function iX(e){It(e)?e.component.scales=Kwe(e):e.component.scales=Jwe(e)}function Kwe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of WM){const o=pn(t[a]);if(o&&n===IH&&a===Ii&&o.type===rh)continue;let l=o&&o.scale;if(o&&l!==null&&l!==!1){l??={};const u=dG(t,a),f=Vwe(l,a,o,i,u);r[a]=new WY(e.scaleName(`${a}`,!0),{value:f,explicit:l.type===f})}}return r}const Zwe=GG((e,t)=>MF(e)-MF(t));function Jwe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){iX(r);for(const a of ue(r.component.scales))if(i.scale[a]??=OY(a,e),i.scale[a]==="shared"){const o=n[a],l=r.component.scales[a].getWithExplicit("type");o?Oxe(o.value,l.value)?n[a]=Fl(o,l,"type","scale",Zwe):(i.scale[a]="independent",delete n[a]):n[a]=l}}for(const r of ue(n)){const a=e.scaleName(r,!0),o=n[r];t[r]=new WY(a,o);for(const l of e.children){const u=l.component.scales[r];u&&(l.renameScale(u.get("name"),a),u.merged=!0)}}return t}class Q_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function It(e){return e?.type==="unit"}function fr(e){return e?.type==="facet"}function tD(e){return e?.type==="concat"}function uh(e){return e?.type==="layer"}class nD{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,o,l){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Ln(l),this.name=t.name??r,this.title=ol(t.title)?{text:t.title}:t.title?Ln(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Q_,this.projectionNameMap=i?i.projectionNameMap:new Q_,this.signalNameMap=i?i.signalNameMap:new Q_,this.data=t.data,this.description=t.description,this.transforms=aEe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:uSe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:Nx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new As,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Ue(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Qwe(this)}parseProjection(){HY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){jY(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of ue(i)){const o=i[a];o!==void 0&&(r[a]=Nt(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Nt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Tt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=x_e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Or)t[i].title&&n.push(g_e(this,i));for(const i of Yk)n=n.concat(p_e(this,i));return n}assembleAxes(){return t_e(this.component.axes,this.config)}assembleLegends(){return IY(this)}assembleProjections(){return q_e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...sH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return We(["unit","layer"],this.type)?We(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",Tt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||fr(this.parent)?VY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Pt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(fr(this.parent)){const n=RY(t),i=Ex(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(Tn(a)&&Rc(o)){const l=r.get("name"),u=Xx(this,i),f=eD(u);if(f){const d=xe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:DY(l,r,d)}}else return ge(ZM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Jq(t)&&bo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(lbe(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class rX extends nD{vgField(t,n={}){const i=this.fieldDef(t);if(i)return xe(i,n)}reduceFieldDef(t,n){return U2e(this.getMapping(),(i,r,a)=>{const o=va(r);return o?t(i,o,a):i},n)}forEachFieldDef(t,n){$k(this.getMapping(),(i,r)=>{const a=va(i);a&&t(a,r)},n)}}class Vx extends St{transform;clone(){return new Vx(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Wx extends St{transform;clone(){return new Wx(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Qx extends St{transform;clone(){return new Qx(this.parent,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,o)=>r[o]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Kx extends St{transform;clone(){return new Kx(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class ed extends St{fields;geojson;signal;clone(){return new ed(null,Ue(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[$a,Ca],[qr,Ta]]){const a=r.map(o=>{const l=pn(n.encoding[o]);return he(l)?l.field:xo(l)?{expr:`${l.datum}`}:ya(l)?{expr:`${l.value}`}:void 0});(a[0]||a[1])&&(t=new ed(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Ii)){const r=n.typedFieldDef(Ii);r.type===rh&&(t=new ed(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Ee);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class qp extends St{projection;fields;as;clone(){return new qp(null,this.projection,Ue(this.fields),Ue(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[$a,Ca],[qr,Ta]]){const r=i.map(o=>{const l=pn(n.encoding[o]);return he(l)?l.field:xo(l)?{expr:`${l.datum}`}:ya(l)?{expr:`${l.value}`}:void 0}),a=i[0]===qr?"2":"";(r[0]||r[1])&&(t=new qp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ee))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tt(this.fields)} ${tt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Wu extends St{transform;clone(){return new Wu(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Wu(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(he(r)&&he(a)){const o=r.impute?r:a.impute?a:void 0;if(o===void 0)return;const l=r.impute?a:a.impute?r:void 0,{method:u,value:f,frame:d,keyvals:g}=o.impute,p=pG(n.mark,i);return new Wu(t,{impute:o.field,key:l.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...g!==void 0?{keyvals:g}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${tt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:o,frame:l=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...i?{keyvals:BSe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:l,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,f,d]}else return[u]}}class Zx extends St{transform;clone(){return new Zx(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Hp extends St{transform;secondary;clone(){return new Hp(null,Ue(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:o}=i;let l=null;if(ISe(o)){let u=sX(o.data,a);u||(u=new vc(o.data),a.push(u));const f=n.getName(`lookup_${r}`);l=new Fi(u,f,Pt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=l}else if(PSe(o)){const u=o.param;i={as:u,...i};let f;try{f=n.getSelectionComponent(Lt(u),u)}catch{throw new Error(dbe(u))}if(l=f.materialized,!l)throw new Error(hbe(u))}return new Hp(t,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?_e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:_e(this.transform.as)}:{}};else{let n=this.transform.as;Ee(n)||(ge(wbe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Jx extends St{transform;clone(){return new Jx(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class e2 extends St{transform;clone(){return new e2(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class t2 extends St{transform;clone(){return new t2(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=qa((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class n2 extends St{transform;clone(){return new n2(null,Ue(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function aX(e){let t=0;function n(i,r){if(i instanceof vc&&!i.isGenerator&&!kd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Jn&&(i.parent instanceof vc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof sh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof jm||i instanceof Bm||i instanceof zd||i instanceof oh||i instanceof Rd||i instanceof qp||i instanceof da||i instanceof Hp||i instanceof lh||i instanceof Lc||i instanceof Kx||i instanceof Qx||i instanceof Vx||i instanceof Zx||i instanceof Jx||i instanceof e2||i instanceof Ll||i instanceof n2||i instanceof t2||i instanceof Wx)&&r.transform.push(i.assemble()),(i instanceof Qa||i instanceof Va||i instanceof Wu||i instanceof ls||i instanceof ed)&&r.transform.push(...i.assemble()),i instanceof Fi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Fi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Fi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const o of i.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function eAe(e){const t=[],n=aX(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function tAe(e,t){const n=[],i=aX(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const l=o.assemble();i(o,l)}for(const o of n)o.transform.length===0&&delete o.transform;let a=0;for(const[o,l]of n.entries())(l.transform??[]).length===0&&!l.source&&n.splice(a++,0,n.splice(o,1)[0]);for(const o of n)for(const l of o.transform??[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function nAe(e){return e==="top"||e==="left"||Te(e)?"header":"footer"}function iAe(e){for(const t of Or)rAe(e,t);_8(e,"x"),_8(e,"y")}function rAe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const o=n[t],l=Od("title",null,i,t);let u=Zf(o,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(u=ae(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=Od("labelOrient",o.header,i,t),d=o.header!==null?Jt(o.header?.labels,i.header.labels,!0):!1,g=We(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:o.header!==null?u:null,facetFieldDef:o,[g]:t==="facet"?[]:[oX(e,t,d)]}}}function oX(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function _8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=Wk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",o=i[a];for(const l of n.component.axes[t]){const u=nAe(l.get("orient"));o[u]??=[oX(e,a,!1)];const f=Jg(l,"main",e.config,{header:!0});f&&o[u][0].axes.push(f),l.mainExtracted=!0}}}}function aAe(e){iD(e),Wv(e,"width"),Wv(e,"height")}function oAe(e){iD(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Wv(e,t),Wv(e,n)}function iD(e){for(const t of e.children)t.parseLayoutSize()}function Wv(e,t){const n=RY(t),i=Ex(n),r=e.component.resolve,a=e.component.layoutSize;let o;for(const l of e.children){const u=l.component.layoutSize.getWithExplicit(n),f=r.scale[i]??OY(i,e);if(f==="independent"&&u.value==="step"){o=void 0;break}if(o){if(f==="independent"&&o.value!==u.value){o=void 0;break}o=Fl(o,u,n,"")}else o=u}if(o){for(const l of e.children)e.renameSignal(l.getName(n),e.getName(t)),l.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,o)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function sAe(e){const{size:t,component:n}=e;for(const i of _s){const r=Pi(i);if(t[r]!=null&&t[r]!=null){const a=t[r];n.layoutSize.set(r,ao(a)?"step":a,!0)}else{const a=lAe(e,r);n.layoutSize.set(r,a,!1)}}}function lAe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),o=r.get("range");if(Tn(a)){const l=Gv(i.view,t);return Rc(o)||ao(l)?"step":l}else return hC(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return hC(i.view,t);{const a=Gv(i.view,t);return ao(a)?a.step:a}}}function DC(e,t,n){return xe(t,{suffix:`by_${xe(e)}`,...n})}class gp extends rX{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=lD(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Nm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ue(t),i={};for(const r of n){if(![rs,as].includes(r)){ge(Ax(r,"facet"));break}const a=t[r];if(a.field===void 0){ge(lC(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Ck(t,n);return i.header?i.header=Ln(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return fe(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=i2(this),this.child.parseData()}parseLayoutSize(){iD(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,un(this.component.selection).some(t=>Wa(t))&&ek(JM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),iAe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Or)for(const i of Xk){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:o}=r;if(o){const l=Od("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(l)){const u=Gx(n,l);t.titleAnchor??={},t.titleAnchor[u]="end"}}if(a?.[0]){const l=n==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(l)&&(t[u]??={},t[u][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof gp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof gp?{...this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof gp){if(this.child.channelHasField("column")){const r=xe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of _s){const a=this.child.component.scales[r];if(a&&!a.merged){const o=a.get("type"),l=a.get("range");if(Tn(o)&&Rc(l)){const u=Xx(this.child,r),f=eD(u);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):ge(ZM(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:o,as:l}=this.getCardinalityAggregateForChild(),u=[];for(const d of Or){const g=this.facet[d];if(g){u.push(xe(g));const{bin:p,sort:y}=g;if(Mt(p)&&u.push(xe(g,{binSuffix:"end"})),os(y)){const{field:v,op:b=Rx}=y,S=DC(g,y);i&&r?(a.push(S),o.push("max"),l.push(S)):(a.push(v),o.push(b),l.push(S))}else if(ae(y)){const v=Nd(g,d);a.push(v),o.push("max"),l.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:u,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:o,as:l}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?os(i.sort)?[DC(i,i.sort,{expr:"datum"})]:ae(i.sort)?[Nd(i,t,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(os(r)?r.order:!ae(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return wC(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of Yk)if(t[r]){const a=Od("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return wC(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=eAe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Or.map(u=>this.facetSortFields(u)).flat(),order:Or.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(wEe(this,[]))}]}getMapping(){return this.facet}}function uAe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(os(a.sort)){const{field:o,op:l=Rx}=a.sort;e=r=new Lc(e,{joinaggregate:[{op:l,field:o,as:DC(a,a.sort,{forAs:!0})}],groupby:[xe(a)]})}return r}return null}function sX(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const o=e.format?.feature;if((o||a)&&o!==a)continue;const l=i.format?.mesh;if(!((r||l)&&r!==l)){if(Pp(e)&&Pp(i)){if(or(e.values,i.values))return n}else if(kd(e)&&kd(i)){if(e.url===i.url)return n}else if(YG(e)&&e.name===n.dataName)return n}}return null}function cAe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new vc({values:[]});return t.push(i),i}const n=sX(e.data,t);if(n)return El(e.data)||(n.data.format=Bq({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new vc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function fAe(e,t,n){let i=0;for(const r of t.transforms){let a,o;if(ZSe(r))o=e=new Rd(e,r),a="derived";else if(Uk(r)){const l=nwe(r);o=e=Jn.makeWithAncestors(e,{},l,n)??e,e=new oh(e,t,r.filter)}else if(IG(r))o=e=Qa.makeFromTransform(e,r,t),a="number";else if(eEe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Jn(e,{[r.field]:a}),n.set(r.field,a,!1)),o=e=Va.makeFromTransform(e,r);else if(tEe(r))o=e=da.makeFromTransform(e,r),a="number",Gk(t)&&(e=new Ll(e));else if(BG(r))o=e=Hp.make(e,t,r,i++),a="derived";else if(WSe(r))o=e=new lh(e,r),a="number";else if(QSe(r))o=e=new Lc(e,r),a="number";else if(nEe(r))o=e=ls.makeFromTransform(e,r),a="derived";else if(iEe(r))o=e=new Kx(e,r),a="derived";else if(rEe(r))o=e=new Wx(e,r),a="derived";else if(KSe(r))o=e=new Qx(e,r),a="derived";else if(qSe(r))o=e=new t2(e,r),a="derived";else if(VSe(r))e=new n2(e,r);else if(JSe(r))o=e=Wu.makeFromTransform(e,r),a="derived";else if(HSe(r))o=e=new Vx(e,r),a="derived";else if(GSe(r))o=e=new Jx(e,r),a="derived";else if(YSe(r))o=e=new e2(e,r),a="derived";else if(XSe(r))o=e=new Zx(e,r),a="derived";else{ge(_be(r));continue}if(o&&a!==void 0)for(const l of o.producedFields()??[])n.set(l,a,!1)}return e}function i2(e){let t=cAe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,o=!(r&&(El(r)||kd(r)||Pp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new mEe;El(r)?(XG(r)?t=new Bm(t,r.sequence):jk(r)&&(t=new jm(t,r.graticule)),o.parseNothing=!0):r?.format?.parse===null&&(o.parseNothing=!0),t=Jn.makeExplicit(t,e,o)??t,t=new Ll(t);const l=e.parent&&uh(e.parent);(It(e)||fr(e))&&l&&(t=Qa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=fAe(t,e,o));const u=rwe(e),f=iwe(e);t=Jn.makeWithAncestors(t,{},{...u,...f},o)??t,It(e)&&(t=ed.parseAll(t,e),t=qp.parseAll(t,e)),(It(e)||fr(e))&&(l||(t=Qa.makeFromEncoding(t,e)??t),t=Va.makeFromEncoding(t,e)??t,t=Rd.parseAllForSortIndex(t,e));const d=t=U1(Pt.Raw,e,t);if(It(e)){const S=da.makeFromEncoding(t,e);S&&(t=S,Gk(e)&&(t=new Ll(t))),t=Wu.makeFromEncoding(t,e)??t,t=ls.makeFromEncoding(t,e)??t}let g,p;if(It(e)){const{markDef:S,mark:_,config:w}=e,A=pt("invalid",S,w),{marks:$,scales:M}=p=WG({invalid:A,isPath:Zl(_)});$!==M&&M==="include-invalid-values"&&(g=t=U1(Pt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=zd.make(t,e,p)??t)}const y=t=U1(Pt.Main,e,t);let v;if(It(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=zd.make(t,e,p)??t,v=t=U1(Pt.PostFilterInvalid,e,t))}It(e)&&JEe(e,y);let b=null;if(fr(e)){const S=e.getName("facet");t=uAe(t,e.facet)??t,b=new sh(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:o,preFilterInvalid:g,postFilterInvalid:v}}function U1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),o=new Fi(n,a,e,r);return i[a]=o,o}class dAe extends nD{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ge(xbe),this.children=this.getChildren(t).map((a,o)=>lD(a,this,this.getName(`concat_${o}`),void 0,r))}parseData(){this.component.data=i2(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}un(this.component.selection).some(t=>Wa(t))&&ek(JM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return jx(t)?t.vconcat:Fk(t)?t.hconcat:t.concat}parseLayoutSize(){oAe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Vk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function hAe(e){return e===!1||e===null}const gAe={disable:1,gridScale:1,scale:1,...uG,labelExpr:1,encode:1},lX=ue(gAe);class rD extends As{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new rD(Ue(this.explicit),Ue(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!hAe(this.get(t))}hasOrientSignalRef(){return Te(this.explicit.orient)}}function pAe(e,t,n){const{encoding:i,config:r}=e,a=pn(i[t])??pn(i[vo(t)]),o=e.axis(t)||{},{format:l,formatType:u}=o;if(pc(u))return{text:ca({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:u,config:r}),...n};if(l===void 0&&u===void 0&&r.customFormatTypes){if($d(a)==="quantitative"){if(Td(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ca({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ca({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if($d(a)==="temporal"&&r.timeFormatType&&he(a)&&!a.timeUnit)return{text:ca({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function mAe(e){return _s.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[_Ae(n,e)]),t),{})}const yAe={bottom:"top",top:"bottom",left:"right",right:"left"};function vAe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of ue(r.component.axes))n.axis[a]=Wk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=bAe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of _s){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const o of a.component.axes[r]){const{value:l,explicit:u}=o.getWithExplicit("orient");if(!Te(l)){if(i[l]>0&&!u){const f=yAe[l];i[l]>i[f]&&o.set("orient",f,!1)}i[l]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,o]of(t[r]||[]).entries())a>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function bAe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const o=r.getWithExplicit("orient"),l=a.getWithExplicit("orient");if(o.explicit&&l.explicit&&o.value!==l.value)return;e[i]=xAe(r,a)}}}else return t.map(n=>n.clone());return e}function xAe(e,t){for(const n of lX){const i=Fl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return gH(r,a);case"gridScale":return{explicit:r.explicit,value:Jt(r.value,a.value)}}return Ix(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function SAe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Te(n.labelAngle)?n.labelAngle:Bp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$Y(i,r))return!0}return e===n[t]}const EAe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function _Ae(e,t){let n=t.axis(e);const i=new rD,r=pn(t.encoding[e]),{mark:a,config:o}=t,l=n?.orient||o[e==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||u_e(e),u=t.getScaleComponent(e).get("type"),f=n_e(e,u,l,t.config),d=n!==void 0?!n:EC("disable",o.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=o_e(r,n,e,o.style,f),p=WH(n.formatType,r,u),y=VH(r,r.type,n.format,n.formatType,o,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:u,orient:l,labelAngle:g,format:y,formatType:p,mark:a,config:o};for(const _ of lX){const w=_ in u8?u8[_](v):FF(_)?n[_]:void 0,A=w!==void 0,$=SAe(w,_,n,t,e);if(A&&$)i.set(_,w,$);else{const{configValue:M=void 0,configFrom:k=void 0}=FF(_)&&_!=="values"?EC(_,o.style,n.style,f):{},T=M!==void 0;A&&!T?i.set(_,w,$):(k!=="vgAxisConfig"||EAe.has(_)&&T||Lm(M)||Te(M))&&i.set(_,M,!1)}}const b=n.encoding??{},S=lG.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=NY(b[w]??{},t),$=w==="labels"?pAe(t,e,A):A;return $!==void 0&&!Tt($)&&(_[w]={update:$}),_},{});return Tt(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function wAe({encoding:e,size:t}){for(const n of _s){const i=Pi(n);ao(t[i])&&ml(e[n])&&(delete t[i],ge(bH(i)))}return t}const AAe={vgMark:"arc",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...gs(e,"radius"),...gs(e,"theta")})},CAe={vgMark:"area",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Yv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Yv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Hk(e)})},$Ae={vgMark:"rect",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gs(e,"x"),...gs(e,"y")})},TAe={vgMark:"shape",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===rh?{field:xe(n,{expr:"datum"})}:{}}]}},MAe={vgMark:"image",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...gs(e,"x"),...gs(e,"y"),...Ik(e,"url")})},kAe={vgMark:"line",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...jn("size",e,{vgChannel:"strokeWidth"}),...Hk(e)})},DAe={vgMark:"trail",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...jn("size",e),...Hk(e)})};function aD(e,t){const{config:n}=e;return{...Yr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...jn("size",e),...jn("angle",e),...RAe(e,n,t)}}function RAe(e,t,n){return n?{shape:{value:n}}:jn("shape",e)}const NAe={vgMark:"symbol",encodeEntry:e=>aD(e)},OAe={vgMark:"symbol",encodeEntry:e=>aD(e,"circle")},zAe={vgMark:"symbol",encodeEntry:e=>aD(e,"square")},FAe={vgMark:"rect",encodeEntry:e=>({...Yr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gs(e,"x"),...gs(e,"y")})},LAe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Yr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Yv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Yv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...jn("size",e,{vgChannel:"strokeWidth"})}}},UAe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Yr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ik(e),...jn("size",e,{vgChannel:"fontSize"}),...jn("angle",e),...a8("align",jAe(e.markDef,n,t)),...a8("baseline",BAe(e.markDef,n,t)),...mi("radius",e,{defaultPos:null}),...mi("theta",e,{defaultPos:null})}}};function jAe(e,t,n){if(pt("align",e,n)===void 0)return"center"}function BAe(e,t,n){if(pt("baseline",e,n)===void 0)return"middle"}const IAe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...Yr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gs(e,r),...mi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[o]:Nt(pt("thickness",n,t))}}},j1={arc:AAe,area:CAe,bar:$Ae,circle:OAe,geoshape:TAe,image:MAe,line:kAe,point:NAe,rect:FAe,rule:LAe,square:zAe,text:UAe,tick:IAe,trail:DAe};function PAe(e){if(We([kx,Tx,Qxe],e.mark)){const t=pG(e.mark,e.encoding);if(t.length>0)return qAe(e,t)}else if(e.mark===Mx){const t=oC.some(n=>pt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return HAe(e)}return oD(e)}const w8="faceted_path_";function qAe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:w8+e.requestDataName(Pt.Main),data:e.requestDataName(Pt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:oD(e,{fromPrefix:w8})}]}const A8="stack_group_";function HAe(e){const[t]=oD(e,{fromPrefix:A8}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const g=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${g.map(p=>`scale('${n}',${p})`).join(",")})`};let a,o;e.stack.fieldChannel==="x"?(a={...Sd(t.encode.update,["y","yc","y2","height",...oC]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...cr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Sd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...cr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of oC){const d=io(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Nt(d)),d&&(t.encode.update[f]={value:0})}const l=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),g=xe(d);g&&l.push(g),(d?.bin||d?.timeUnit)&&l.push(xe(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const g=io(d,e.markDef,e.config);return g!==void 0?{...f,[d]:Nt(g)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Pt.Main),name:A8+e.requestDataName(Pt.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function GAe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,o=t.order;if(!(!ae(o)&&ya(o)&&rC(o.value)||!o&&rC(pt("order",r,a)))){if((ae(o)||he(o))&&!n)return fH(o,{expr:"datum"});if(Zl(i)){const l=r.orient==="horizontal"?"y":"x",u=t[l];if(he(u))return{field:l}}}}function oD(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,o=Jt(i.clip,YAe(e),XAe(e)),l=uH(i),u=r.key,f=GAe(e),d=VAe(e);d&&Object.values(e.component.selection).some(y=>y.type==="point"&&!y.bind&&y.on!=="pointerover")&&(e.markDef.cursor??="pointer");const g=pt("aria",i,a),p=j1[n].postEncodingTransform?j1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:j1[n].vgMark,...o?{clip:o}:{},...l?{style:l}:{},...u?{key:u.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(Pt.Main)},encode:{update:j1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function YAe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function XAe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function VAe(e){if(!e.component.selection)return null;const t=ue(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=ue(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class uX extends rX{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,UF(t)?t.view:void 0);const o=ro(t.mark)?{...t.mark}:{type:t.mark},l=o.type;o.filled===void 0&&(o.filled=RSe(o,a,{graticule:t.data&&jk(t.data)}));const u=this.encoding=F2e(t.encoding||{},l,o.filled,a);this.markDef=FG(o,u,a),this.size=wAe({encoding:u,size:UF(t)?{...r,...t.width!==void 0?{width:t.width}:{},...t.height!==void 0?{height:t.height}:{}}:r}),this.stack=zG(this.markDef,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>Ok(f)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:t}=this,n=this.mark===IH,i=t&&Tve.some(r=>je(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return WM.reduce((i,r)=>{const a=pn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Ln(t);return ae(n)&&(r.domain=n.map(rr)),ae(i)&&(r.range=i.map(rr)),r}initAxes(t){return _s.reduce((n,i)=>{const r=t[i];if(je(r)||i===jt&&je(t.x2)||i===kn&&je(t.y2)){const a=je(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=ue(t),i={};for(const r of n){const a=t[r];i[r]=Lm(a)?lH(a):rr(a)}return i}initLegends(t){return jve.reduce((n,i)=>{const r=pn(t[i]);if(r&&Ive(i)){const a=r.legend;n[i]=a&&Ln(a)}return n},{})}alignStackOrderWithColorDomain(){const{color:t,fill:n,order:i,xOffset:r,yOffset:a}=this.encoding,o=n||t,l=he(o)?o:void 0,u=l?.field,f=l?.scale,d=l?.type,g=f?.domain,p=r||a,y=he(p)?p:void 0,v=`_${u}_sort_index`;if(!i&&Array.isArray(g)&&typeof u=="string"&&d==="nominal")if(y&&!y.sort)y.sort=g;else{if(!this.stack)return;const b=`indexof(${pe(g)}, datum['${u}'])`,S=this.markDef?.orient==="horizontal"?"ascending":"descending";this.transforms.push({calculate:b,as:v}),this.encoding.order={field:v,type:"quantitative",sort:S}}}parseData(){this.component.data=i2(this)}parseLayoutSize(){sAe(this)}parseSelections(){this.component.selection=ZEe(this,this.selection)}parseMarkGroup(){this.component.mark=PAe(this)}parseAxesAndHeaders(){this.component.axes=mAe(this)}assembleSelectionTopLevelSignals(t){return AEe(this,t)}assembleSignals(){return[...wY(this),..._Ee(this,[])]}assembleSelectionData(t){return CEe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Vk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+KG)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!uh(this.parent))&&(t=tY(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Xu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return va(n)}typedFieldDef(t){const n=this.fieldDef(t);return Si(n)?n:null}}class sD extends nD{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const o={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((l,u)=>{if(Bx(l))return new sD(l,this,this.getName(`layer_${u}`),o,a);if(ws(l))return new uX(l,this,this.getName(`layer_${u}`),o,a);throw new Error(KM(l))})}parseData(){this.component.data=i2(this);for(const t of this.children)t.parseData()}parseLayoutSize(){aAe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}un(this.component.selection).some(t=>Wa(t))&&ek(JM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){vAe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),wY(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Vk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of _e(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return $Ee(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),IY(this))}}function lD(e,t,n,i,r){if(Nx(e))return new gp(e,t,n,r);if(Bx(e))return new sD(e,t,n,i,r);if(ws(e))return new uX(e,t,n,i,r);if(oSe(e))return new dAe(e,t,n,r);throw new Error(KM(e))}function WAe(e,t={}){t.logger&&cxe(t.logger),t.fieldTitle&&aG(t.fieldTitle);try{const n=OG(jd(t.config,e.config)),i=HG(e,n),r=lD(i,null,"",void 0,n);return r.parse(),bwe(r.component.data,r),{spec:KAe(r,QAe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&fxe(),t.fieldTitle&&$2e()}}function QAe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ee(t)&&(t={type:t}),r&&a&&hEe(t.type)){if(r==="step"&&a==="step")ge(EF()),t.type="pad";else if(r==="step"||a==="step"){const o=r==="step"?"width":"height";ge(EF(Ex(o)));const l=o==="width"?"height":"width";t.type=gEe(l)}}return{...ue(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...QF(n,!1),...QF(e,!0)}}function KAe(e,t,n={},i){const r=e.config?xSe(e.config):void 0,a=tAe(e.component.data,n),o=e.assembleSelectionData(a),l=e.assembleProjections(),u=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...u?{title:u}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:o,...l.length>0?{projections:l}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),...kG(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const ZAe=Eve.version,JAe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:_d,accessPathWithDatum:IM,accessWithDatumToUnescapedPath:bt,compile:WAe,contains:We,deepEqual:or,deleteNestedProperty:Fv,duplicate:Ue,entries:Nl,every:UM,fieldIntersection:BM,flatAccessWithDatum:Pq,getFirstDefined:Jt,hasIntersection:jM,hasProperty:fe,hash:tt,internalField:Yq,isBoolean:jp,isEmpty:Tt,isEqual:wve,isInternalField:Xq,isNullOrFalse:rC,isNumeric:mx,keys:ue,logicalExpr:dp,mergeDeep:Bq,never:jq,normalize:HG,normalizeAngle:Bp,omit:cr,pick:Sd,prefixGenerator:aC,removePathFromField:nh,replaceAll:uc,replacePathInField:Pr,resetIdCounter:Cve,setEqual:Iq,some:Ed,stringify:mt,titleCase:Cm,unescapeSingleQuoteAndPathDot:qq,unique:qa,uniqueId:Gq,vals:un,varName:Lt,version:ZAe},Symbol.toStringTag,{value:"Module"}));function cX(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var eCe="3.0.0",tCe={version:eCe};const Of="#fff",C8="#888",nCe={background:"#333",view:{stroke:C8},title:{color:Of,subtitleColor:Of},style:{"guide-label":{fill:Of},"guide-title":{fill:Of}},axis:{domainColor:Of,gridColor:C8,tickColor:Of}},Su="#4572a7",iCe={background:"#fff",arc:{fill:Su},area:{fill:Su},line:{stroke:Su,strokeWidth:2},path:{stroke:Su},rect:{fill:Su},shape:{stroke:Su},symbol:{fill:Su,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Eu="#30a2da",K_="#cbcbcb",rCe="#999",aCe="#333",$8="#f0f0f0",T8="#333",oCe={arc:{fill:Eu},area:{fill:Eu},axis:{domainColor:K_,grid:!0,gridColor:K_,gridWidth:1,labelColor:rCe,labelFontSize:10,titleColor:aCe,tickColor:K_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:$8,group:{fill:$8},legend:{labelColor:T8,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:T8,titleFontSize:14,titlePadding:10},line:{stroke:Eu,strokeWidth:2},path:{stroke:Eu,strokeWidth:.5},rect:{fill:Eu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Eu},bar:{binSpacing:2,fill:Eu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_u="#000",sCe={group:{fill:"#e5e5e5"},arc:{fill:_u},area:{fill:_u},line:{stroke:_u},path:{stroke:_u},rect:{fill:_u},shape:{stroke:_u},symbol:{fill:_u,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lCe=22,uCe="normal",M8="Benton Gothic, sans-serif",k8=11.5,cCe="normal",wu="#82c6df",Z_="Benton Gothic Bold, sans-serif",D8="normal",R8=13,Tg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},fCe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Z_,fontSize:lCe,fontWeight:uCe},arc:{fill:wu},area:{fill:wu},line:{stroke:wu,strokeWidth:2},path:{stroke:wu},rect:{fill:wu},shape:{stroke:wu},symbol:{fill:wu,size:30},axis:{labelFont:M8,labelFontSize:k8,labelFontWeight:cCe,titleFont:Z_,titleFontSize:R8,titleFontWeight:D8},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:M8,labelFontSize:k8,symbolType:"square",titleFont:Z_,titleFontSize:R8,titleFontWeight:D8},range:{category:Tg["category-6"],diverging:Tg["fireandice-6"],heatmap:Tg["fire-7"],ordinal:Tg["fire-7"],ramp:Tg["fire-7"]}},Au="#ab5787",B1="#979797",dCe={background:"#f9f9f9",arc:{fill:Au},area:{fill:Au},line:{stroke:Au},path:{stroke:Au},rect:{fill:Au},shape:{stroke:Au},symbol:{fill:Au,size:30},axis:{domainColor:B1,domainWidth:.5,gridWidth:.2,labelColor:B1,tickColor:B1,tickWidth:.2,titleColor:B1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Cu="#3e5c69",hCe={background:"#fff",arc:{fill:Cu},area:{fill:Cu},line:{stroke:Cu},path:{stroke:Cu},rect:{fill:Cu},shape:{stroke:Cu},symbol:{fill:Cu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Tr="#1696d2",N8="#000000",gCe="#FFFFFF",I1="Lato",J_="Lato",pCe="Lato",mCe="#DEDDDD",yCe=18,Mg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},vCe={background:gCe,title:{anchor:"start",fontSize:yCe,font:I1},axisX:{domain:!0,domainColor:N8,domainWidth:1,grid:!1,labelFontSize:12,labelFont:J_,labelAngle:0,tickColor:N8,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:I1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:mCe,gridWidth:1,labelFontSize:12,labelFont:J_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:I1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:J_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:I1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Mg["six-groups-cat-1"],diverging:Mg["diverging-colors"],heatmap:Mg["diverging-colors"],ordinal:Mg["six-groups-seq"],ramp:Mg["shades-blue"]},area:{fill:Tr},rect:{fill:Tr},line:{color:Tr,stroke:Tr,strokeWidth:5},trail:{color:Tr,stroke:Tr,strokeWidth:0,size:1},path:{stroke:Tr,strokeWidth:.5},point:{filled:!0},text:{font:pCe,color:Tr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Tr,stroke:null}},arc:{fill:Tr},shape:{stroke:Tr},symbol:{fill:Tr,size:30}},$u="#3366CC",O8="#ccc",P1="Arial, sans-serif",bCe={arc:{fill:$u},area:{fill:$u},path:{stroke:$u},rect:{fill:$u},shape:{stroke:$u},symbol:{stroke:$u},circle:{fill:$u},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:P1,fontSize:12},"guide-title":{font:P1,fontSize:12},"group-title":{font:P1,fontSize:12}},title:{font:P1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:O8,tickColor:O8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},uD=e=>e*(1/3+1),z8=uD(9),F8=uD(10),L8=uD(12),kg="Segoe UI",U8="wf_standard-font, helvetica, arial, sans-serif",j8="#252423",Dg="#605E5C",B8="transparent",xCe="#C8C6C4",ea="#118DFF",SCe="#12239E",ECe="#E66C37",_Ce="#6B007B",wCe="#E044A7",ACe="#744EC2",CCe="#D9B300",$Ce="#D64550",fX=ea,dX="#DEEFFF",I8=[dX,fX],TCe=[dX,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",fX],MCe={view:{stroke:B8},background:B8,font:kg,header:{titleFont:U8,titleFontSize:L8,titleColor:j8,labelFont:kg,labelFontSize:F8,labelColor:Dg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Dg,labelFontSize:z8,titleFont:U8,titleColor:j8,titleFontSize:L8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:xCe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ea},line:{stroke:ea,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:kg,fontSize:z8,fill:Dg},arc:{fill:ea},area:{fill:ea,line:!0,opacity:.6},path:{stroke:ea},rect:{fill:ea},point:{fill:ea,filled:!0,size:75},shape:{stroke:ea},symbol:{fill:ea,strokeWidth:1.5,size:50},legend:{titleFont:kg,titleFontWeight:"bold",titleColor:Dg,labelFont:kg,labelFontSize:F8,labelColor:Dg,symbolType:"circle",symbolSize:75},range:{category:[ea,SCe,ECe,_Ce,wCe,ACe,CCe,$Ce],diverging:I8,heatmap:I8,ordinal:TCe}},ew='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',kCe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',tw=400,q1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},DCe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],RCe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function r2({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=q1.gridBg[e],r=q1.textPrimary[e],a=q1.textSecondary[e],o=n==="dark"?DCe:RCe,l=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:ew,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:kCe,labelFontWeight:tw,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:q1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:ew,fill:a,fontWeight:tw},"guide-title":{font:ew,fill:a,fontWeight:tw}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const NCe=r2({theme:"white",background:"#ffffff"}),OCe=r2({theme:"g10",background:"#f4f4f4"}),zCe=r2({theme:"g90",background:"#262626"}),FCe=r2({theme:"g100",background:"#161616"}),LCe=tCe.version,UCe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:OCe,carbong100:FCe,carbong90:zCe,carbonwhite:NCe,dark:nCe,excel:iCe,fivethirtyeight:oCe,ggplot2:sCe,googlecharts:bCe,latimes:fCe,powerbi:MCe,quartz:dCe,urbaninstitute:vCe,version:LCe,vox:hCe},Symbol.toStringTag,{value:"Module"}));function jCe(e,t,n,i){if(ae(e))return`[${e.map(r=>t(Ee(r)?r:P8(r,n))).join(", ")}]`;if(Se(e)){let r="";const{title:a,image:o,...l}=e;a&&(r+=`<h2>${t(a)}</h2>`),o&&(r+=`<img src="${new URL(t(o),i||location.href).href}">`);const u=Object.keys(l);if(u.length>0){r+="<table>";for(const f of u){let d=l[f];d!==void 0&&(Se(d)&&(d=P8(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function BCe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function P8(e,t){return JSON.stringify(e,BCe(t))}var ICe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const hX="vg-tooltip-element",PCe={offsetX:10,offsetY:10,id:hX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:qCe,maxDepth:2,formatTooltip:jCe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function qCe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function HCe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ICe.toString().replaceAll(hX,e)}function gX(e,t,{offsetX:n,offsetY:i}){const r=pX({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const o of a)if(mX(r[o],t))return r[o];return r["top-left"]}function GCe(e,t,n,i,r){const{position:a,offsetX:o,offsetY:l}=r,u=e._el.getBoundingClientRect(),f=e._origin,d=YCe(u,f,n),g=pX(d,i,o,l),p=Array.isArray(a)?a:[a];for(const y of p)if(mX(g[y],i)&&!XCe(t,g[y],i))return g[y];return gX(t,i,r)}function YCe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,r+=o.x??0,a+=o.y??0;const l=i.x2-i.x1,u=i.y2-i.y1;return{x1:r,x2:r+l,y1:a,y2:a+u}}function pX(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,o=e.x1-t.width-n,l=r-t.width/2,u=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:l,y:f},bottom:{x:l,y:g},left:{x:o,y:d},right:{x:u,y:d},"top-left":{x:o,y:f},"top-right":{x:u,y:f},"bottom-left":{x:o,y:g},"bottom-right":{x:u,y:g}}}function mX(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function XCe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class VCe{call;options;el;constructor(t){this.options={...PCe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=HCe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=this.options.anchor==="mark"?GCe(t,n,i,this.el.getBoundingClientRect(),this.options):gX(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${a}px`}}var nw={};var WCe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),QCe=Object.prototype.hasOwnProperty;function RC(e,t){return QCe.call(e,t)}function NC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)RC(e,r)&&i.push(r);return i}function sr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function OC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function ku(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function yX(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function zC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(zC(e[t]))return!0}else if(typeof e=="object"){for(var i=NC(e),r=i.length,a=0;a<r;a++)if(zC(e[i[a]]))return!0}}return!1}function q8(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var vX=(function(e){WCe(t,e);function t(n,i,r,a,o){var l=this.constructor,u=e.call(this,q8(n,{name:i,index:r,operation:a,tree:o}))||this;return u.name=i,u.index=r,u.operation=a,u.tree=o,Object.setPrototypeOf(u,l.prototype),u.message=q8(n,{name:i,index:r,operation:a,tree:o}),u}return t})(Error),Xt=vX,KCe=sr,Hf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Qv(n,this.path);i&&(i=sr(i));var r=Qu(n,{op:"remove",path:this.from}).removed;return Qu(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Qv(n,this.from);return Qu(n,{op:"add",path:this.path,value:sr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Gp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ZCe={add:function(e,t,n){return OC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Hf.move,copy:Hf.copy,test:Hf.test,_get:Hf._get};function Qv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Qu(e,n),n.value}function Qu(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Kv(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Qv(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Gp(e,t.value),o.test===!1)throw new Xt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Xt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}}else{i||(e=sr(e));var l=t.path||"",u=l.split("/"),f=e,d=1,g=u.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Kv;;){if(y=u[d],y&&y.indexOf("~")!=-1&&(y=yX(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&u[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=u.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!OC(y))throw new Xt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);OC(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Xt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var o=ZCe[t.op].call(t,f,y,e);if(o.test===!1)throw new Xt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(d>=g){var o=Hf[t.op].call(t,f,y,e);if(o.test===!1)throw new Xt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Xt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function a2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Xt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=sr(e));for(var a=new Array(t.length),o=0,l=t.length;o<l;o++)a[o]=Qu(e,t[o],n,!0,r,o),e=a[o].newDocument;return a.newDocument=e,a}function JCe(e,t,n){var i=Qu(e,t);if(i.test===!1)throw new Xt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Kv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Xt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Hf[e.op]){if(typeof e.path!="string")throw new Xt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Xt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Xt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Xt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&zC(e.value))throw new Xt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Xt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Xt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},l=bX([o],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Xt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Xt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bX(e,t,n){try{if(!Array.isArray(e))throw new Xt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)a2(sr(t),sr(e),n||!0);else{n=n||Kv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Xt)return r;throw r}}function Gp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,o;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Gp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(l[r]))return!1;for(r=a;r--!==0;)if(o=l[r],!Gp(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var e3e=Object.freeze({__proto__:null,JsonPatchError:Xt,_areEquals:Gp,applyOperation:Qu,applyPatch:a2,applyReducer:JCe,deepClone:KCe,getValueByPointer:Qv,validate:bX,validator:Kv});var cD=new WeakMap,t3e=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),n3e=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function i3e(e){return cD.get(e)}function r3e(e,t){return e.observers.get(t)}function a3e(e,t){e.observers.delete(t.callback)}function o3e(e,t){t.unobserve()}function s3e(e,t){var n=[],i,r=i3e(e);if(!r)r=new t3e(e),cD.set(e,r);else{var a=r3e(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=sr(e),t){i.callback=t,i.next=null;var o=function(){FC(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=e,i.unobserve=function(){FC(i),clearTimeout(i.next),a3e(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},r.observers.set(t,new n3e(t,i)),i}function FC(e,t){t===void 0&&(t=!1);var n=cD.get(e.object);fD(n.value,e.object,e.patches,"",t),e.patches.length&&a2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function fD(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=NC(t),o=NC(e),l=!1,u=o.length-1;u>=0;u--){var f=o[u],d=e[f];if(RC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?fD(d,g,n,i+"/"+ku(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+ku(f),value:sr(d)}),n.push({op:"replace",path:i+"/"+ku(f),value:sr(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+ku(f),value:sr(d)}),n.push({op:"remove",path:i+"/"+ku(f)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!l&&a.length==o.length))for(var u=0;u<a.length;u++){var f=a[u];!RC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+ku(f),value:sr(t[f])})}}}function l3e(e,t,n){n===void 0&&(n=!1);var i=[];return fD(e,t,i,"",n),i}var u3e=Object.freeze({__proto__:null,compare:l3e,generate:FC,observe:s3e,unobserve:o3e});Object.assign({},e3e,u3e,{JsonPatchError:vX,deepClone:sr,escapePathComponent:ku,unescapePathComponent:yX});function c3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iw,H8;function f3e(){if(H8)return iw;H8=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return iw=e,iw}var rw,G8;function dD(){if(G8)return rw;G8=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return rw=i=>i?typeof i!="object"?e:i:t,rw}var H1={exports:{}},aw,Y8;function hD(){if(Y8)return aw;Y8=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return aw={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},aw}var ow,X8;function o2(){return X8||(X8=1,ow=typeof process=="object"&&nw&&nw.NODE_DEBUG&&/\bsemver\b/i.test(nw.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),ow}var V8;function gD(){return V8||(V8=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=hD(),a=o2();t=e.exports={};const o=t.re=[],l=t.safeRe=[],u=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),$=g++;a(S,$,_),d[S]=$,u[$]=_,f[$]=A,o[$]=new RegExp(_,w?"g":void 0),l[$]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),b("FULL",`^${u[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),b("LOOSE",`^${u[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),b("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?(?:${u[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",u[d.COERCE],!0),b("COERCERTLFULL",u[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(H1,H1.exports)),H1.exports}var sw,W8;function d3e(){if(W8)return sw;W8=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),o=e.test(r);return a&&o&&(i=+i,r=+r),i===r?0:a&&!o?-1:o&&!a?1:i<r?-1:1};return sw={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},sw}var lw,Q8;function pD(){if(Q8)return lw;Q8=1;const e=o2(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=hD(),{safeRe:i,t:r}=gD(),a=dD(),{compareIdentifiers:o}=d3e();class l{constructor(f,d){if(d=a(d),f instanceof l){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof l)){if(typeof f=="string"&&f===this.version)return 0;f=new l(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof l||(f=new l(f,this.options)),o(this.major,f.major)||o(this.minor,f.minor)||o(this.patch,f.patch)}comparePre(f){if(f instanceof l||(f=new l(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return o(g,p)}while(++d)}compareBuild(f){f instanceof l||(f=new l(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return o(g,p)}while(++d)}inc(f,d,g){if(f.startsWith("pre")){if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return lw=l,lw}var uw,K8;function ch(){if(K8)return uw;K8=1;const e=pD();return uw=(n,i,r)=>new e(n,r).compare(new e(i,r)),uw}var cw,Z8;function h3e(){if(Z8)return cw;Z8=1;const e=ch();return cw=(n,i,r)=>e(n,i,r)===0,cw}var fw,J8;function g3e(){if(J8)return fw;J8=1;const e=ch();return fw=(n,i,r)=>e(n,i,r)!==0,fw}var dw,eL;function p3e(){if(eL)return dw;eL=1;const e=ch();return dw=(n,i,r)=>e(n,i,r)>0,dw}var hw,tL;function m3e(){if(tL)return hw;tL=1;const e=ch();return hw=(n,i,r)=>e(n,i,r)>=0,hw}var gw,nL;function y3e(){if(nL)return gw;nL=1;const e=ch();return gw=(n,i,r)=>e(n,i,r)<0,gw}var pw,iL;function v3e(){if(iL)return pw;iL=1;const e=ch();return pw=(n,i,r)=>e(n,i,r)<=0,pw}var mw,rL;function b3e(){if(rL)return mw;rL=1;const e=h3e(),t=g3e(),n=p3e(),i=m3e(),r=y3e(),a=v3e();return mw=(l,u,f,d)=>{switch(u){case"===":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l===f;case"!==":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l!==f;case"":case"=":case"==":return e(l,f,d);case"!=":return t(l,f,d);case">":return n(l,f,d);case">=":return i(l,f,d);case"<":return r(l,f,d);case"<=":return a(l,f,d);default:throw new TypeError(`Invalid operator: ${u}`)}},mw}var yw,aL;function x3e(){if(aL)return yw;aL=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new u(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}yw=t;const n=dD(),{safeRe:i,t:r}=gD(),a=b3e(),o=o2(),l=pD(),u=xX();return yw}var vw,oL;function xX(){if(oL)return vw;oL=1;const e=/\s+/g;class t{constructor(F,R){if(R=r(R),F instanceof t)return F.loose===!!R.loose&&F.includePrerelease===!!R.includePrerelease?F:new t(F.raw,R);if(F instanceof a)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const R=this.set[F];for(let I=0;I<R.length;I++)I>0&&(this.formatted+=" "),this.formatted+=R[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const I=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+F,X=i.get(I);if(X)return X;const Z=this.options.loose,ce=Z?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];F=F.replace(ce,K(this.options.includePrerelease)),o("hyphen replace",F),F=F.replace(u[f.COMPARATORTRIM],d),o("comparator trim",F),F=F.replace(u[f.TILDETRIM],g),o("tilde trim",F),F=F.replace(u[f.CARETTRIM],p),o("caret trim",F);let L=F.split(" ").map(be=>w(be,this.options)).join(" ").split(/\s+/).map(be=>j(be,this.options));Z&&(L=L.filter(be=>(o("loose invalid filter",be,this.options),!!be.match(u[f.COMPARATORLOOSE])))),o("range list",L);const G=new Map,se=L.map(be=>new a(be,this.options));for(const be of se){if(b(be))return[be];G.set(be.value,be)}G.size>1&&G.has("")&&G.delete("");const me=[...G.values()];return i.set(I,me),me}intersects(F,R){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>_(I,R)&&F.set.some(X=>_(X,R)&&I.every(Z=>X.every(ce=>Z.intersects(ce,R)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new l(F,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(Y(this.set[R],F,this.options))return!0;return!1}}vw=t;const n=f3e(),i=new n,r=dD(),a=x3e(),o=o2(),l=pD(),{safeRe:u,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=gD(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=hD(),b=q=>q.value==="<0.0.0-0",S=q=>q.value==="",_=(q,F)=>{let R=!0;const I=q.slice();let X=I.pop();for(;R&&I.length;)R=I.every(Z=>X.intersects(Z,F)),X=I.pop();return R},w=(q,F)=>(o("comp",q,F),q=k(q,F),o("caret",q),q=$(q,F),o("tildes",q),q=N(q,F),o("xrange",q),q=B(q,F),o("stars",q),q),A=q=>!q||q.toLowerCase()==="x"||q==="*",$=(q,F)=>q.trim().split(/\s+/).map(R=>M(R,F)).join(" "),M=(q,F)=>{const R=F.loose?u[f.TILDELOOSE]:u[f.TILDE];return q.replace(R,(I,X,Z,ce,L)=>{o("tilde",q,I,X,Z,ce,L);let G;return A(X)?G="":A(Z)?G=`>=${X}.0.0 <${+X+1}.0.0-0`:A(ce)?G=`>=${X}.${Z}.0 <${X}.${+Z+1}.0-0`:L?(o("replaceTilde pr",L),G=`>=${X}.${Z}.${ce}-${L} <${X}.${+Z+1}.0-0`):G=`>=${X}.${Z}.${ce} <${X}.${+Z+1}.0-0`,o("tilde return",G),G})},k=(q,F)=>q.trim().split(/\s+/).map(R=>T(R,F)).join(" "),T=(q,F)=>{o("caret",q,F);const R=F.loose?u[f.CARETLOOSE]:u[f.CARET],I=F.includePrerelease?"-0":"";return q.replace(R,(X,Z,ce,L,G)=>{o("caret",q,X,Z,ce,L,G);let se;return A(Z)?se="":A(ce)?se=`>=${Z}.0.0${I} <${+Z+1}.0.0-0`:A(L)?Z==="0"?se=`>=${Z}.${ce}.0${I} <${Z}.${+ce+1}.0-0`:se=`>=${Z}.${ce}.0${I} <${+Z+1}.0.0-0`:G?(o("replaceCaret pr",G),Z==="0"?ce==="0"?se=`>=${Z}.${ce}.${L}-${G} <${Z}.${ce}.${+L+1}-0`:se=`>=${Z}.${ce}.${L}-${G} <${Z}.${+ce+1}.0-0`:se=`>=${Z}.${ce}.${L}-${G} <${+Z+1}.0.0-0`):(o("no pr"),Z==="0"?ce==="0"?se=`>=${Z}.${ce}.${L}${I} <${Z}.${ce}.${+L+1}-0`:se=`>=${Z}.${ce}.${L}${I} <${Z}.${+ce+1}.0-0`:se=`>=${Z}.${ce}.${L} <${+Z+1}.0.0-0`),o("caret return",se),se})},N=(q,F)=>(o("replaceXRanges",q,F),q.split(/\s+/).map(R=>z(R,F)).join(" ")),z=(q,F)=>{q=q.trim();const R=F.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return q.replace(R,(I,X,Z,ce,L,G)=>{o("xRange",q,I,X,Z,ce,L,G);const se=A(Z),me=se||A(ce),be=me||A(L),Ne=be;return X==="="&&Ne&&(X=""),G=F.includePrerelease?"-0":"",se?X===">"||X==="<"?I="<0.0.0-0":I="*":X&&Ne?(me&&(ce=0),L=0,X===">"?(X=">=",me?(Z=+Z+1,ce=0,L=0):(ce=+ce+1,L=0)):X==="<="&&(X="<",me?Z=+Z+1:ce=+ce+1),X==="<"&&(G="-0"),I=`${X+Z}.${ce}.${L}${G}`):me?I=`>=${Z}.0.0${G} <${+Z+1}.0.0-0`:be&&(I=`>=${Z}.${ce}.0${G} <${Z}.${+ce+1}.0-0`),o("xRange return",I),I})},B=(q,F)=>(o("replaceStars",q,F),q.trim().replace(u[f.STAR],"")),j=(q,F)=>(o("replaceGTE0",q,F),q.trim().replace(u[F.includePrerelease?f.GTE0PRE:f.GTE0],"")),K=q=>(F,R,I,X,Z,ce,L,G,se,me,be,Ne)=>(A(I)?R="":A(X)?R=`>=${I}.0.0${q?"-0":""}`:A(Z)?R=`>=${I}.${X}.0${q?"-0":""}`:ce?R=`>=${R}`:R=`>=${R}${q?"-0":""}`,A(se)?G="":A(me)?G=`<${+se+1}.0.0-0`:A(be)?G=`<${se}.${+me+1}.0-0`:Ne?G=`<=${se}.${me}.${be}-${Ne}`:q?G=`<${se}.${me}.${+be+1}-0`:G=`<=${G}`,`${R} ${G}`.trim()),Y=(q,F,R)=>{for(let I=0;I<q.length;I++)if(!q[I].test(F))return!1;if(F.prerelease.length&&!R.includePrerelease){for(let I=0;I<q.length;I++)if(o(q[I].semver),q[I].semver!==a.ANY&&q[I].semver.prerelease.length>0){const X=q[I].semver;if(X.major===F.major&&X.minor===F.minor&&X.patch===F.patch)return!0}return!1}return!0};return vw}var bw,sL;function S3e(){if(sL)return bw;sL=1;const e=xX();return bw=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},bw}var E3e=S3e(),SX=c3e(E3e);function _3e(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let o=40;function l(f){f.source===i&&(o=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){o<=0||(i.postMessage(n,a),setTimeout(u,r),o-=1)}setTimeout(u,r)}var w3e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function EX(e,...t){for(const n of t)A3e(e,n);return e}function A3e(e,t){for(const n of Object.keys(t))Bd(e,n,t[n],!0)}const Fa=cve;let Yp=JAe;const lL=typeof window<"u"?window:void 0;Yp===void 0&&lL?.vl?.compile&&(Yp=lL.vl);const C3e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},$3e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},ep={vega:"Vega","vega-lite":"Vega-Lite"},Zv={vega:Fa.version,"vega-lite":Yp?Yp.version:"not available"},T3e={vega:e=>e,"vega-lite":(e,t,n)=>Yp.compile(e,{config:n,logger:t}).spec},M3e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,k3e="chart-wrapper";function D3e(e){return typeof e=="function"}function uL(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+e+a),o.document.title=`${ep[i]} JSON Source`}function R3e(e,t,n){if(e.$schema){const i=cX(e.$schema);n&&n!==i.library&&t.warn(`The given visualization spec is written in ${ep[i.library]}, but mode argument sets ${ep[n]??n}.`);const r=i.library;return SX(Zv[r],`^${i.version.slice(1)}`)||t.warn(`The input spec uses ${ep[r]} ${i.version}, but the current version of ${ep[r]} is v${Zv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function _X(e){return!!(e&&"load"in e)}function cL(e){return _X(e)?e:Fa.loader(e)}function N3e(e){const t=e.usermeta?.embedOptions??{};return Ee(t.defaultStyle)&&(t.defaultStyle=!1),t}async function O3e(e,t,n={}){let i,r;Ee(t)?(r=cL(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=N3e(i),o=a.loader;(!r||o)&&(r=cL(n.loader??o));const l=await fL(a,r),u=await fL(n,r),f={...EX(u,l),config:jd(u.config??{},l.config??{})};return await F3e(e,i,f,r)}async function fL(e,t){const n=Ee(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Ee(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function z3e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function F3e(e,t,n={},i){const r=n.theme?jd(UCe[n.theme],n.config??{}):n.config,a=Ul(n.actions)?n.actions:EX({},C3e,n.actions??{}),o={...$3e,...n.i18n},l=n.renderer??"svg",u=n.logger??tb(Fa.Warn);n.logLevel!==void 0&&u.level(n.logLevel);const f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:k,rootContainer:T}=z3e(d);if(!k.getElementById(M)){const N=document.createElement("style");N.id=M,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?w3e.toString():n.defaultStyle,T.appendChild(N)}}const g=R3e(t,u,n.mode);let p=T3e[g](t,u,r);if(g==="vega-lite"&&p.$schema){const M=cX(p.$schema);SX(Zv.vega,`^${M.version.slice(1)}`)||u.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Zv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(k3e),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):a2(p,v,!0,!1).newDocument),n.formatLocale&&Fa.formatLocale(n.formatLocale),n.timeFormatLocale&&Fa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const k=n.expressionFunctions[M];"fn"in k?Fa.expressionFunction(M,k.fn,k.visitor):k instanceof Function&&Fa.expressionFunction(M,k)}const{ast:b}=n,S=Fa.parse(p,g==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Fa.View)(S,{loader:i,logger:u,renderer:l,...b?{expr:Fa.expressionInterpreter??n.expr??xve}:{}});if(_.addSignalListener("autosize",(M,k)=>{const{type:T}=k;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:k}=n,T=M&&!_X(M)?M?.baseURL:void 0,N=D3e(k)?k:new VCe({baseURL:T,...k===!0?{}:k}).call;_.tooltip(N)}let{hover:w}=n;if(w===void 0&&(w=g==="vega"),w){const{hoverSet:M,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(M,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const N=document.createElement("summary");N.innerHTML=M3e,T.append(N),A=z=>{T.contains(z.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const N=o[`${T.toUpperCase()}_ACTION`],z=document.createElement("a"),B=Se(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;z.text=N,z.href="#",z.target="_blank",z.download=`${f}.${T}`,z.addEventListener("mousedown",async function(j){j.preventDefault();const K=await _.toImageURL(T,B);this.href=K}),k.append(z)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(N){uL(kE(t),n.sourceHeader??"",n.sourceFooter??"",g),N.preventDefault()}),k.append(T)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(N){uL(kE(p),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),k.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=o.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(z){_3e(window,T,{config:r,mode:v?"vega":g,renderer:l,spec:kE(v?p:t)}),z.preventDefault()}),k.append(N)}}function $(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:$,embedOptions:n}}function L3e(){const e=re.useRef(null);return re.useEffect(()=>{const t={$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:"transparent",title:"Staff Likelihood to Recommend the Device",data:{values:[{Recommendation_Rating:"1",Count:1},{Recommendation_Rating:"2",Count:11},{Recommendation_Rating:"3",Count:28},{Recommendation_Rating:"4",Count:39},{Recommendation_Rating:"5",Count:21}]},layer:[{mark:{type:"bar",cornerRadiusTopLeft:6,cornerRadiusTopRight:6},encoding:{x:{field:"Recommendation_Rating",type:"nominal",title:"Rating Score (1: Not likely, 5: Very likely)"},y:{field:"Count",type:"quantitative",title:"Number of Respondents"},tooltip:[{field:"Recommendation_Rating",type:"nominal",title:"Rating"},{field:"Count",type:"quantitative",title:"Responses"}],color:{value:"#4CAF50"}}},{mark:{type:"text",dy:-8},encoding:{x:{field:"Recommendation_Rating",type:"nominal"},y:{field:"Count",type:"quantitative"},text:{field:"Count",type:"quantitative"},color:{value:"#111"}}}]};O3e(e.current,t,{actions:!1})},[]),O.jsx("div",{ref:e,style:{width:"100%",height:"100%"}})}const U3e=()=>O.jsxs("div",{children:[O.jsxs("section",{className:"hero",children:[O.jsx("h1",{children:"Why Kiwi?"}),O.jsx("p",{children:"A revolutionary senior-first wearable that makes safety effortless, family connection natural, and technology invisible."})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"The Silent Crisis in Senior Care"}),O.jsx("p",{className:"subtitle",children:"Seniors are underserved by technology  Kiwi fixes what others ignore."}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Assisted Living"}),O.jsx("p",{children:"Falls go undetected, emergency pendants are forgotten, and staff are stretched thin."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Hospitals & Post-Discharge"}),O.jsx("p",{children:"No continuous monitoring, leading to high readmission rates."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Families at Home"}),O.jsx("p",{children:"Constant worry about medication, falls, and daily wellbeing."})]})]})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"The Numbers Dont Lie"}),O.jsx("p",{className:"subtitle",children:"Real-world clinical validation from frontline healthcare professionals."}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"95.7%"}),O.jsxs("p",{children:["Nurses save time every shift",O.jsx("br",{}),"(89/93 respondents)"]})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"82.8%"}),O.jsxs("p",{children:["Would recommend Kiwi",O.jsx("br",{}),"(rated 45/5)"]})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"67.7%"}),O.jsxs("p",{children:["Report high clinical trust",O.jsx("br",{}),"(rated 45/5)"]})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"80.6%"}),O.jsx("p",{children:"Trained in under 30 minutes"})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"71%"}),O.jsx("p",{children:"Have purchasing influence in their facility"})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"64.5%"}),O.jsx("p",{children:"Save 15 minutes per shift on vitals"})]}),O.jsxs("div",{className:"stat-card",children:[O.jsx("h1",{children:"62.4%"}),O.jsx("p",{children:"Likely to use Kiwi daily"})]})]}),O.jsx("p",{className:"micro-note",children:"Based on feedback from 99+ clinical respondents"})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"The Kiwi Breakthrough"}),O.jsx("p",{className:"subtitle",children:"Designed entirely around how seniors communicate and live."}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"100% Voice Controlled"}),O.jsx("p",{children:"Zero screens. Zero buttons. Zero confusion."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Proactive Family Dashboard"}),O.jsx("p",{children:"Automatic alerts, wellness summaries, and real-time vitals."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Senior-First Design"}),O.jsx("p",{children:"Looks like a modern watch  not a medical device."})]})]})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"What These Numbers Mean"}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Clinical Buy-In & Adoption"}),O.jsx("p",{children:"60% of clinicians are likely or very likely to recommend Kiwi to their unit, validating strong productmarket fit and readiness for facility-wide rollout."}),O.jsx("p",{children:"57% believe Kiwi significantly improves patient triage and management, directly impacting patient safety and care efficiency."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Immediate ROI for Care Teams"}),O.jsx("p",{children:"69% of users save 15 minutes per shift on vitals collection, freeing time for direct patient care."}),O.jsx("p",{children:"62% rate Kiwis ease of use as 4 or 5, ensuring rapid adoption with minimal training overhead."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Enterprise-Ready Infrastructure"}),O.jsx("p",{children:"62% of respondents rate EHR integration as important or extremely important, aligning Kiwi with enterprise deployment requirements."}),O.jsx("p",{children:"Kiwi is built to scale across hospitals, assisted living facilities, and post-discharge care environments."})]})]})]}),O.jsxs("section",{className:"why-kiwi-data",children:[O.jsx("h2",{children:"Trusted by Care Teams"}),O.jsx("p",{children:"Real feedback from staff evaluating Kiwis impact on daily safety and care."}),O.jsx("div",{className:"chart-container",children:O.jsx(L3e,{})})]})]}),j3e=()=>O.jsxs("div",{children:[O.jsxs("section",{className:"hero",children:[O.jsx("h1",{children:"About Kiwi"}),O.jsx("p",{children:"Our mission is simple: make technology disappear so seniors can live safer, happier, and more connected lives."})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"Our Story"}),O.jsx("p",{className:"subtitle",children:"Kiwi was born from real-life challenges experienced by families, hospitals, and caregivers."}),O.jsx("div",{className:"card",children:O.jsxs("p",{children:["We saw seniors struggling with smartphones, complex wearables, and unintuitive emergency devices. We saw families living in constant worry. And we saw outdated technology pretending to be solutions.",O.jsx("br",{}),O.jsx("br",{}),"So we built Kiwi  a voice-first wearable designed not for the tech world, but for the real world. A device that seniors can use without learning. A system families can trust without setup. A design that protects dignity instead of labeling someone as fragile."]})})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"What We Stand For"}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Dignity"}),O.jsx("p",{children:"Technology should empower, not overwhelm or embarrass."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Simplicity"}),O.jsx("p",{children:"The easiest interface in the world is human speech  so we built everything around it."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Safety"}),O.jsx("p",{children:"Falls, vitals, reminders  Kiwi handles it automatically."})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Connection"}),O.jsx("p",{children:"Families stay informed without invading privacy."})]})]})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"The Kiwi Identity"}),O.jsx("p",{className:"subtitle",children:"Fresh. Simple. Life-enhancing  just like the fruit."}),O.jsx("div",{className:"card",children:O.jsx("p",{children:"Kiwi represents renewal, energy, and life. Our brand reflects friendliness and trust with a modern, clean aesthetic. Were not a medical device company  were a care company powered by design and technology."})})]})]}),B3e=()=>{const[e,t]=re.useState("idle");async function n(i){i.preventDefault(),t("submitting");const r=new FormData(i.target);try{(await fetch("https://formspree.io/f/xqaryyab",{method:"POST",body:r,headers:{Accept:"application/json"}})).ok?(t("success"),i.target.reset()):t("error")}catch{t("error")}}return O.jsxs("div",{children:[O.jsxs("section",{className:"hero",children:[O.jsx("h1",{children:"Contact Us"}),O.jsx("p",{children:"Have questions? Need support? Were here to help anytime."})]}),O.jsxs("section",{className:"section",children:[O.jsx("h2",{children:"We're Here for You"}),O.jsx("p",{className:"subtitle",children:"Fill out the form and our team will reach out within 24 hours."}),O.jsxs("div",{className:"card",style:{maxWidth:"600px",margin:"auto"},children:[O.jsxs("form",{onSubmit:n,className:"contact-form",children:[O.jsx("label",{children:"Full Name"}),O.jsx("input",{type:"text",name:"name",required:!0}),O.jsx("label",{children:"Email Address"}),O.jsx("input",{type:"email",name:"email",required:!0}),O.jsx("label",{children:"Phone Number"}),O.jsx("input",{type:"text",name:"phone"}),O.jsx("label",{children:"Your Message"}),O.jsx("textarea",{name:"message",rows:"5",required:!0}),O.jsx("button",{type:"submit",className:"button-primary",children:e==="submitting"?"Sending...":"Send Message"})]}),e==="success"&&O.jsx("p",{style:{color:"green",marginTop:"15px",textAlign:"center"},children:" Message sent successfully! Well get back to you soon."}),e==="error"&&O.jsx("p",{style:{color:"red",marginTop:"15px",textAlign:"center"},children:" Something went wrong. Please try again."})]}),O.jsxs("div",{className:"section",style:{marginTop:"40px"},children:[O.jsx("h2",{children:"Support"}),O.jsx("p",{className:"subtitle",children:"Need help with the Kiwi Watch?"}),O.jsxs("div",{className:"card-grid",children:[O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Email Support"}),O.jsx("p",{children:"support@kiwibracelet.com"})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Phone Support"}),O.jsx("p",{children:"+1 (800) 123-4567"})]}),O.jsxs("div",{className:"card",children:[O.jsx("h3",{children:"Response Time"}),O.jsx("p",{children:"Within 24 hours"})]})]})]})]})]})};function I3e(){const[e,t]=re.useState(""),[n,i]=re.useState(""),r=a=>{if(a.preventDefault(),!e||!n)return alert("Enter email and password");e==="kiwivoiceguys@gmail.com"&&n==="kiwi@123"?window.location.href="http://app.kiwivoiceassistant.com":alert("Invalid email or password")};return O.jsx("div",{style:Zr.wrapper,children:O.jsxs("div",{style:Zr.card,children:[O.jsxs("div",{style:Zr.header,children:[O.jsx("span",{style:Zr.emoji,children:""}),O.jsx("h2",{style:Zr.title,children:"Welcome to Kiwi"}),O.jsx("p",{style:Zr.subtitle,children:"Smart care, made simple."})]}),O.jsxs("form",{onSubmit:r,children:[O.jsx("input",{type:"email",placeholder:"Email address",value:e,onChange:a=>t(a.target.value),style:Zr.input}),O.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:a=>i(a.target.value),style:Zr.input}),O.jsx("button",{type:"submit",style:Zr.button,children:"Login"})]}),O.jsxs("p",{style:Zr.footerText,children:["Forgot password? ",O.jsx("span",{style:Zr.link,children:"Reset"})]})]})})}const Zr={wrapper:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #e8ffe4, #c7f7cd, #a7efb9)",padding:"20px"},card:{width:"100%",maxWidth:"420px",background:"#ffffff",padding:"45px 35px",borderRadius:"18px",boxShadow:"0 10px 40px rgba(0,0,0,0.08)",textAlign:"center"},header:{marginBottom:"25px"},emoji:{fontSize:"55px"},title:{fontSize:"28px",fontWeight:"700",marginTop:"10px",color:"#1b3a2a"},subtitle:{color:"#608069",fontSize:"14px",marginTop:"4px"},input:{width:"100%",padding:"14px 16px",margin:"10px 0",borderRadius:"10px",border:"1px solid #c7d7cc",fontSize:"15px",outline:"none",transition:"0.2s"},button:{width:"100%",padding:"14px",marginTop:"15px",background:"#47b567",color:"#fff",border:"none",fontSize:"17px",borderRadius:"10px",cursor:"pointer",fontWeight:"600",transition:"0.3s"},footerText:{marginTop:"18px",fontSize:"14px",color:"#6c7a72"},link:{color:"#2e9b52",fontWeight:"600",cursor:"pointer"}};function P3e(){const{user:e,logout:t}=kL();return O.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[O.jsxs("h1",{children:["Welcome, ",e.name,"!"]}),O.jsx("p",{children:"This is your Kiwi dashboard."}),O.jsx("button",{onClick:t,style:{padding:"10px 20px",fontSize:"16px"},children:"Logout"})]})}function q3e({children:e}){const{user:t}=kL();return t?e:O.jsx(_L,{to:"/login",replace:!0})}function H3e(){const e=ms(),t=e.pathname==="/login"||e.pathname==="/dashboard";return O.jsxs(O.Fragment,{children:[!t&&O.jsx(TK,{}),O.jsxs(VQ,{children:[O.jsx(Zs,{path:"/",element:O.jsx(DK,{})}),O.jsx(Zs,{path:"/why-kiwi",element:O.jsx(U3e,{})}),O.jsx(Zs,{path:"/about",element:O.jsx(j3e,{})}),O.jsx(Zs,{path:"/contact",element:O.jsx(B3e,{})}),O.jsx(Zs,{path:"/login",element:O.jsx(I3e,{})}),O.jsx(Zs,{path:"/dashboard",element:O.jsx(q3e,{children:O.jsx(P3e,{})})}),O.jsx(Zs,{path:"*",element:O.jsx(_L,{to:"/",replace:!0})})]}),!t&&O.jsx(MK,{})]})}function G3e(){return O.jsx($K,{children:O.jsx(yK,{children:O.jsx(H3e,{})})})}iQ.createRoot(document.getElementById("root")).render(O.jsx(WW.StrictMode,{children:O.jsx(G3e,{})}));
